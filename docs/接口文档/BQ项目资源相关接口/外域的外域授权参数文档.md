##### 1. 枚举说明：

```js
permissionType:{
    VOD:'点播',
    RECORD_LOCAL:'本地录制',
    RECORD_SERVER:'服务端录制',
    DOWNLOAD:'下载',
    PTZ:'云台'
}
sourceType:{
    FOLDER:'文件夹',
    DEVICE:'设备'
},
childType:{
    ORIGIN:'外域',
    FOLDER:'文件夹'，
    BUNDLE:'设备'
}
```



##### 2. 获取外域、目录、设备。（客户端）/find/institution/tree/foreign/bundle<font color="red">（没有变化）</font>

```js
{
    folderPath:'目录路径',
    serNodeNamePath:'域路径',
    childType:'ORIGIN|FOLDER|BUNDLE',
    uuid:'目录唯一标识符'
}
```



##### 3. 获取外域、目录、设备。（授权管理页面）Outland/find/institution/tree/foreign/bundle<font color="red">（加参数）</font>

```js
{
    folderPath:'目录路径',
    serNodeNamePath:'域路径',
    childType:'ORIGIN|FOLDER|BUNDLE',
    uuid:'目录唯一标识符',
    permissionType:'VOD|RECORD_LOCAL|RECORD_SERVER|DOWNLOAD|PTZ',
    roleId:'角色id'
}
```



##### 4. 旧版websocket推送外域数据结构

###### 4.1 推送目录：

```js
{
    businessType: "foreignUpdate",
    type: "FOLDER",
    uuid: "703f2403a79b46f9b855e3e839068fb4",
    serNodeNamePath: "/本机61",
    folderPath: "/CB9AD95E-AD82-4597-94AF-262CC0764B6C/83A72761-1C57-4FBD-A5D4-DDE215A289B2",
    institutions: [{
        domainPath: "/本机61",
        name: "第三级_1",
        path: "/CB9AD95E-AD82-4597-94AF-262CC0764B6C/83A72761-1C57-4FBD-A5D4-DDE215A289B2/DDB8ED01-995D-48D4-99A0-4A83DBF98366",
        type: "FOLDER"
    }],
    permissionType: "",
    roleId: ""
}
```

###### 4.2 推送外域：

```js
{
    businessType: "foreignUpdate",
    type: "ORIGIN",
    uuid: "7d08e5f033c24d6f87c6d2288f63ea00",
    serNodeNamePath: "/本机61",
    folderPath: "/",
    serNode: [{ 
        domainPath: "/本机61/4113",
        name: "4113",
        path: "/",
        status: "offline",
        type: "ORIGIN",
    }],
    permissionType: "",
    roleId: ""
}
```

###### 4.3 推送设备：

```js
{
    businessType: "foreignUpdate",
    type: "BUNDLE", 
    uuid: "0756c9f3e2274c8e9d90cc1d78018493",
    serNodeNamePath: "/本机61",
    folderPath: "/CB9AD95E-AD82-4597-94AF-262CC0764B6C",
    devices: [{
        domainPath: "/本机61",
        id: "6C719086-6F2A-40EB-847D-DC024DF98BE5",
        isMulticast: true,
        multiAddr: "239.100.0.1:11000",
        multiSrcIp: "10.1.41.196",
        name: "6931offline-摄像机1",
        status: "offline",
        type: "BUNDLE",
    }],
    permissionType: "",
    roleId: ""
}
```



##### 5. websocket给pc（授权管理页面）推送数据

###### 5.1 推送目录<font color="red">（加参数）</font>：

```js
{
    businessType: "foreignUpdate",
    type: "FOLDER",
    uuid: "703f2403a79b46f9b855e3e839068fb4",
    serNodeNamePath: "/本机61",
    folderPath: "/CB9AD95E-AD82-4597-94AF-262CC0764B6C/83A72761-1C57-4FBD-A5D4-DDE215A289B2",
    institutions: [{
        domainPath: "/本机61",
        name: "第三级_1",
        path: "/CB9AD95E-AD82-4597-94AF-262CC0764B6C/83A72761-1C57-4FBD-A5D4-DDE215A289B2/DDB8ED01-995D-48D4-99A0-4A83DBF98366",
        type: "FOLDER"
    }],
    permissions:{
        check:[{
            serNodeNamePath:'外域路径',
            folderPath:'目录路径',
            deviceId:null,
            permissionType:'VOD|RECORD_LOCAL|RECORD_SERVER|DOWNLOAD|PTZ'（这个地方会根据传来的权限类型返回）,
            sourceType:'FOLDER',
            roleId:'角色id'
        }],
        except:[结构同check...]
    }
    permissionType: "连网透传（这个地方非空）",
    roleId: "连网透传（这个地方非空）"
}
```

###### 5.2 推送外域：<font color="red">同旧版</font>

###### 5.3 推送设备（加参数）：

```js
{
    businessType: "foreignUpdate",
    type: "BUNDLE",
    uuid: "0756c9f3e2274c8e9d90cc1d78018493",
    serNodeNamePath: "/本机61",
    folderPath: "/CB9AD95E-AD82-4597-94AF-262CC0764B6C",
    devices: [{
        domainPath: "/本机61",
        id: "6C719086-6F2A-40EB-847D-DC024DF98BE5",
        isMulticast: true,
        multiAddr: "239.100.0.1:11000",
        multiSrcIp: "10.1.41.196",
        name: "6931offline-摄像机1",
        status: "offline",
        type: "BUNDLE",
    }],
    permissions:{
        check:[{
            serNodeNamePath:'外域路径',
            folderPath:'目录路径',
            deviceId:'设备id',
            permissionType:'VOD|RECORD_LOCAL|RECORD_SERVER|DOWNLOAD|PTZ'（这个地方会根据传来的权限类型返回）,
            sourceType:'DEVICE',
            roleId:'角色id'
        }],
        except:[结构同check...]
    }
    permissionType: "连网透传（这个地方非空）",
    roleId: "连网透传（这个地方非空）"
}
```



##### 6. websocket给客户端推送数据

###### 6.1 推送目录：<font color="red">同旧版</font>

###### 6.2 推送外域：<font color="red">同旧版</font>

###### 6.3 推送设备：

```js
{
    businessType: "foreignUpdate",
    type: "BUNDLE",
    uuid: "0756c9f3e2274c8e9d90cc1d78018493",
    serNodeNamePath: "/本机61",
    folderPath: "/CB9AD95E-AD82-4597-94AF-262CC0764B6C",
    devices: [{
        domainPath: "/本机61",
        id: "6C719086-6F2A-40EB-847D-DC024DF98BE5",
        isMulticast: true,
        multiAddr: "239.100.0.1:11000",
        multiSrcIp: "10.1.41.196",
        name: "6931offline-摄像机1",
        status: "offline",
        type: "BUNDLE",
        Privilege:[{
            //服务器录制
			hasReadPrivilege：true|false,
            //点播
			hasWritePrivilege：true|false,
            //云台
			hasCloudPrivilege：true|false,   
            //下载
			hasDownloadPrivilege：true|false, 
            //本地录制
			hasLocalReadPrivilege：true|false   
		}]
    }],
    permissionType: null|"",
    roleId: null|""
}
```



##### 7. 添加设备授权（设备勾选）/outland/permission/add/device/permission<font color="red">（新接口）</font>

```js
参数：{
    serNodeNamePath:'域路径',
    folderPath:'目录路径',
    deviceId:'设备id',
    permissionType:'VOD|RECORD_LOCAL|RECORD_SERVER|DOWNLOAD|PTZ',
    roleId:'角色id'
}
无返回
```



##### 8. 添加文件夹授权（文件夹勾选）/outland/permission/add/folder/permission<font color="red">（新接口）</font>

```js
参数：{
    serNodeNamePath:'域路径',
    folderPath:'目录路径',
    permissionType:'VOD|RECORD_LOCAL|RECORD_SERVER|DOWNLOAD|PTZ',
    roleId:'角色id'
}
无返回
```



##### 9. 删除设备授权（设备取消勾选）/outland/permission/remove/device/permission<font color="red">（新接口）</font>

```js
参数：{
    serNodeNamePath:'域路径',
    folderPath:'目录路径',
    deviceId:'设备id',
    permissionType:'VOD|RECORD_LOCAL|RECORD_SERVER|DOWNLOAD|PTZ',
    roleId:'角色id'
}
无返回
```



##### 10. 删除文件夹授权（文件夹取消勾选）/outland/permission/remove/folder/permission<font color="red">（新接口）</font>

```js
参数：{
    serNodeNamePath:'域路径',
    folderPath:'目录路径',
    permissionType:'VOD|RECORD_LOCAL|RECORD_SERVER|DOWNLOAD|PTZ',
    roleId:'角色id'
}
无返回
```

