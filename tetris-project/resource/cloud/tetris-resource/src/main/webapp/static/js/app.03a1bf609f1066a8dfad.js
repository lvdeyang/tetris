webpackJsonp([2],{"+H76":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={render:function(){var e=this.$createElement;return(this._self._c||e)("p",{staticClass:"page-container"},[this._v("404 page not found")])},staticRenderFns:[]};var r=a("VU/8")(null,l,!1,function(e){a("G41f")},"data-v-7d85e7af",null);t.default=r.exports},"+b1m":function(e,t,a){"use strict";var l=a("7+uW");t.a=new l.default},"+v6R":function(e,t){},"/Qkj":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("P9l9"),r={name:"selectLayerNode",data:function(){return{visible:!1,table:{totalData:[],filterData:[],currentRow:""},layerNodeTypes:[{value:"ACCESS_JV230",label:"JV230接入"},{value:"ACCESS_TVOS",label:"机顶盒接入"},{value:"ACCESS_MIXER",label:"混合器接入"},{value:"ACCESS_MOBILE",label:"手机终端接入"},{value:"ACCESS_JV210",label:"音视频转发服务设备"},{value:"ACCESS_CDN",label:"录像存储服务单元A型"},{value:"ACCESS_VOD",label:"录像存储服务单元B型"},{value:"ACCESS_IPC",label:"监控资源汇接网关"},{value:"ACCESS_STREAMMEDIA",label:"流媒体管理服务设备"},{value:"ACCESS_NETWORK",label:"联网服务设备"},{value:"ACCESS_DISPLAYCTRL",label:"显控汇接网关"},{value:"ACCESS_S100",label:"流转发器接入"},{value:"ACCESS_VODPROXY",label:"点播代理服务设备"},{value:"ACCESS_LIANWANG",label:"联网接入"},{label:"LDAP目录资源服务设备",value:"ACCESS_LDAP"},{label:"综合运维服务设备",value:"ACCESS_OMMS"},{label:"ws接入",value:"ACCESS_WS"}],filters:{type:"",name:"",ip:""}}},methods:{show:function(){var e=this;e.visible=!0,Object(l.J)({type:"",keyword:""}).then(function(t){if(e.table.totalData.splice(0,e.table.totalData.length),e.table.filterData.splice(0,e.table.filterData.length),t.errMsg)e.$message({type:"error",message:t.errMsg});else if(t.nodes&&t.nodes.length>0)for(var a=0;a<t.nodes.length;a++){for(var l=0;l<e.layerNodeTypes.length;l++)if(e.layerNodeTypes[l].value===t.nodes[a].type){t.nodes[a].typeName=e.layerNodeTypes[l].label;break}e.table.totalData.push(t.nodes[a]),e.table.filterData.push(t.nodes[a])}})},handleClose:function(){this.visible=!1,this.table.totalData.splice(0,this.table.totalData.length),this.table.filterData.splice(0,this.table.filterData.length),this.table.currentRow="",this.filters.type="",this.filters.name="",this.filters.ip=""},handleCommit:function(){var e=this;e.$emit("layer-node-selected",e.table.currentRow,function(){e.handleClose()})},handleFilter:function(){this.table.filterData.splice(0,this.table.filterData.length);for(var e=0;e<this.table.totalData.length;e++){var t=!0,a=this.table.totalData[e];this.filters.type&&a.type!==this.filters.type&&(t=!1),t&&this.filters.name&&a.name.toLowerCase().indexOf(this.filters.name.toLowerCase())<0&&(t=!1),t&&this.filters.ip&&a.ip.indexOf(this.filters.ip)<0&&(t=!1),t&&this.table.filterData.push(a)}},currentRowChange:function(e,t){this.table.currentRow=e}},mounted:function(){}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"选择接入层",visible:e.visible,width:"800px","before-close":e.handleClose},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticStyle:{height:"500px",position:"relative"}},[a("div",{staticStyle:{height:"50px",width:"100%"}},[a("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"接入层类型"},model:{value:e.filters.type,callback:function(t){e.$set(e.filters,"type",t)},expression:"filters.type"}},[a("el-option",{attrs:{value:""}},[e._v("全部类型")]),e._v(" "),e._l(e.layerNodeTypes,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),a("el-input",{staticStyle:{width:"auto","margin-right":"10px"},attrs:{placeholder:"接入层名称"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}}),e._v(" "),a("el-input",{staticStyle:{width:"auto","margin-right":"10px"},attrs:{placeholder:"接入成ip"},model:{value:e.filters.ip,callback:function(t){e.$set(e.filters,"ip",t)},expression:"filters.ip"}}),e._v(" "),a("el-button",{on:{click:e.handleFilter}},[e._v("查询")])],1),e._v(" "),a("div",{staticStyle:{position:"absolute",left:"0",top:"50px",right:"0",bottom:"0"}},[a("el-scrollbar",{staticStyle:{height:"100%"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.table.filterData,"highlight-current-row":""},on:{"current-change":e.currentRowChange}},[a("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"ip"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"类型"}})],1)],1)],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleCommit}},[e._v("确定")])],1)])},staticRenderFns:[]};var n=a("VU/8")(r,o,!1,function(e){a("sh0o")},null,null);t.default=n.exports},"006z":function(e,t){},"0nep":function(e,t){document.location.origin;e.exports={queryRouterUrl:"/privilege/queryMenu",serviceName:"suma-venus-resource"}},"1OYB":function(e,t){},"2+xZ":function(e,t){},"2T1O":function(e,t){},"4aoo":function(e,t){},"4vq3":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("BO1k"),r=a.n(l),o=a("nvbp"),n=a.n(o),i=a("mvHQ"),s=a.n(i),d=a("bOdI"),c=a.n(d),u=a("P9l9"),p={data:function(){var e;return e={treeData:[],folderTreeSelected:{value:"",label:""},defaultProps:{children:"children",label:"name"},defaultExpandAll:!1,expandOnClickNode:!1,activeTabName:"BindResource",deviceModelOptions:[],roles:[],currentRoleRow:null,resources:[],bindTypeOptions:[{value:"all",label:"全部"},{value:"binded",label:"已绑定"},{value:"unbinded",label:"未绑定"}]},c()(e,"deviceModelOptions",[]),c()(e,"filters",{deviceModel:"",keyword:"",bindType:"all",countPerPage:""}),c()(e,"total",0),c()(e,"pageNum",1),c()(e,"countPerPage",20),c()(e,"roleTableLoading",!1),c()(e,"resourceTableLoading",!1),c()(e,"prevReadChecks",[]),c()(e,"prevWriteChecks",[]),c()(e,"prevCloudChecks",[]),c()(e,"prevHJChecks",[]),c()(e,"prevZKChecks",[]),c()(e,"prevHYChecks",[]),c()(e,"readChecks",[]),c()(e,"writeChecks",[]),c()(e,"cloudChecks",[]),c()(e,"HJchecks",[]),c()(e,"ZKchecks",[]),c()(e,"HYchecks",[]),c()(e,"detailDialogVisible",!1),c()(e,"detailInfos",[]),c()(e,"users",[]),c()(e,"userTableLoading",!1),c()(e,"resourceTableShow",!0),c()(e,"userTableShow",!1),c()(e,"checkReadAll",!1),c()(e,"checkWriteAll",!1),c()(e,"checkCloudAll",!1),c()(e,"checkHJAll",!1),c()(e,"checkZKAll",!1),c()(e,"checkHYAll",!1),e},methods:{dataFilter:function(e){this.$refs.tree.filter(e)},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},initTree:function(e){var t=this;Object(u.T)().then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):(t.treeData=t.treeData.concat(e.tree),console.log(s()(t.treeData)))})},handleNodeClick:function(e){this.folderTreeSelected.value=e.id,this.folderTreeSelected.label=e.name,this.$refs.selectTree.blur()},clearHandle:function(){this.folderTreeSelected.value="",this.folderTreeSelected.label="",this.$refs.tree.filter("")},handleTabClick:function(e,t){"BindResource"!==e.name&&this.$router.push("/"+e.name)},handleRoleTableRowChange:function(e){this.currentRoleRow=e,this.resourceTableShow?this.getResources():this.userTableShow&&this.getUsers()},renderCheckReadHeader:function(e,t){var a=this;return e("el-checkbox",n()([{attrs:{value:a.checkReadAll},on:{input:function(e){a.checkReadAll=e}}},{directives:[{name:"model",value:a.checkReadAll}]},{on:{change:this.handleCheckReadAllChange}}]),["录制"])},renderCheckWriteHeader:function(e,t){var a=this;return e("el-checkbox",n()([{attrs:{value:a.checkWriteAll},on:{input:function(e){a.checkWriteAll=e}}},{directives:[{name:"model",value:a.checkWriteAll}]},{on:{change:this.handleCheckWriteAllChange}}]),["点播"])},renderCheckCloudHeader:function(e,t){var a=this;return e("el-checkbox",n()([{attrs:{value:a.checkCloudAll},on:{input:function(e){a.checkCloudAll=e}}},{directives:[{name:"model",value:a.checkCloudAll}]},{on:{change:this.handleCheckCloudAllChange}}]),["云台"])},renderCheckHJHeader:function(e,t){var a=this;return e("el-checkbox",n()([{attrs:{value:a.checkHJAll},on:{input:function(e){a.checkHJAll=e}}},{directives:[{name:"model",value:a.checkHJAll}]},{on:{change:this.handleCheckHJAllChange}}]),["呼叫"])},renderCheckZKHeader:function(e,t){var a=this;return e("el-checkbox",n()([{attrs:{value:a.checkZKAll},on:{input:function(e){a.checkZKAll=e}}},{directives:[{name:"model",value:a.checkZKAll}]},{on:{change:this.handleCheckZKAllChange}}]),["指挥"])},renderCheckHYHeader:function(e,t){var a=this;return e("el-checkbox",n()([{attrs:{value:a.checkHYAll},on:{input:function(e){a.checkHYAll=e}}},{directives:[{name:"model",value:a.checkHYAll}]},{on:{change:this.handleCheckHYAllChange}}]),["会议"])},handleCheckReadAllChange:function(e){if(this.resourceTableShow)if(e){var t=!0,a=!1,l=void 0;try{for(var o,n=r()(this.resources);!(t=(o=n.next()).done);t=!0){var i=o.value;this.readChecks.push(i.bundleId),i.hasReadPrivilege=!0}}catch(e){a=!0,l=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw l}}}else{this.readChecks=[];var s=!0,d=!1,c=void 0;try{for(var u,p=r()(this.resources);!(s=(u=p.next()).done);s=!0){u.value.hasReadPrivilege=!1}}catch(e){d=!0,c=e}finally{try{!s&&p.return&&p.return()}finally{if(d)throw c}}}else if(this.userTableShow)if(e){var m=!0,h=!1,b=void 0;try{for(var f,v=r()(this.users);!(m=(f=v.next()).done);m=!0){var g=f.value;this.readChecks.push(g.userNo),g.hasReadPrivilege=!0}}catch(e){h=!0,b=e}finally{try{!m&&v.return&&v.return()}finally{if(h)throw b}}}else{this.readChecks=[];var y=!0,_=!1,w=void 0;try{for(var x,F=r()(this.users);!(y=(x=F.next()).done);y=!0){x.value.hasReadPrivilege=!1}}catch(e){_=!0,w=e}finally{try{!y&&F.return&&F.return()}finally{if(_)throw w}}}},handleCheckWriteAllChange:function(e){if(this.resourceTableShow)if(e){var t=!0,a=!1,l=void 0;try{for(var o,n=r()(this.resources);!(t=(o=n.next()).done);t=!0){var i=o.value;this.writeChecks.push(i.bundleId),i.hasWritePrivilege=!0}}catch(e){a=!0,l=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw l}}}else{this.writeChecks=[];var s=!0,d=!1,c=void 0;try{for(var u,p=r()(this.resources);!(s=(u=p.next()).done);s=!0){u.value.hasWritePrivilege=!1}}catch(e){d=!0,c=e}finally{try{!s&&p.return&&p.return()}finally{if(d)throw c}}}else if(this.userTableShow)if(e){var m=!0,h=!1,b=void 0;try{for(var f,v=r()(this.users);!(m=(f=v.next()).done);m=!0){var g=f.value;this.writeChecks.push(g.userNo),g.hasWritePrivilege=!0}}catch(e){h=!0,b=e}finally{try{!m&&v.return&&v.return()}finally{if(h)throw b}}}else{this.writeChecks=[];var y=!0,_=!1,w=void 0;try{for(var x,F=r()(this.users);!(y=(x=F.next()).done);y=!0){x.value.hasWritePrivilege=!1}}catch(e){_=!0,w=e}finally{try{!y&&F.return&&F.return()}finally{if(_)throw w}}}},handleCheckCloudAllChange:function(e){if(this.resourceTableShow)if(e){var t=!0,a=!1,l=void 0;try{for(var o,n=r()(this.resources);!(t=(o=n.next()).done);t=!0){var i=o.value;this.cloudChecks.push(i.bundleId),i.hasCloudPrivilege=!0}}catch(e){a=!0,l=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw l}}}else{this.cloudChecks=[];var s=!0,d=!1,c=void 0;try{for(var u,p=r()(this.resources);!(s=(u=p.next()).done);s=!0){u.value.hasCloudPrivilege=!1}}catch(e){d=!0,c=e}finally{try{!s&&p.return&&p.return()}finally{if(d)throw c}}}else if(this.userTableShow)if(e){var m=!0,h=!1,b=void 0;try{for(var f,v=r()(this.users);!(m=(f=v.next()).done);m=!0){var g=f.value;this.cloudChecks.push(g.userNo),g.hasCloudPrivilege=!0}}catch(e){h=!0,b=e}finally{try{!m&&v.return&&v.return()}finally{if(h)throw b}}}else{this.cloudChecks=[];var y=!0,_=!1,w=void 0;try{for(var x,F=r()(this.users);!(y=(x=F.next()).done);y=!0){x.value.hasCloudPrivilege=!1}}catch(e){_=!0,w=e}finally{try{!y&&F.return&&F.return()}finally{if(_)throw w}}}},handleCheckHJAllChange:function(e){if(this.userTableShow)if(e){var t=!0,a=!1,l=void 0;try{for(var o,n=r()(this.users);!(t=(o=n.next()).done);t=!0){var i=o.value;this.HJchecks.push(i.userNo),i.hasHJPrivilege=!0}}catch(e){a=!0,l=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw l}}}else{this.HJchecks=[];var s=!0,d=!1,c=void 0;try{for(var u,p=r()(this.users);!(s=(u=p.next()).done);s=!0){u.value.hasHJPrivilege=!1}}catch(e){d=!0,c=e}finally{try{!s&&p.return&&p.return()}finally{if(d)throw c}}}},handleCheckZKAllChange:function(e){if(this.userTableShow)if(e){var t=!0,a=!1,l=void 0;try{for(var o,n=r()(this.users);!(t=(o=n.next()).done);t=!0){var i=o.value;this.ZKchecks.push(i.userNo),i.hasZKPrivilege=!0}}catch(e){a=!0,l=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw l}}}else{this.ZKchecks=[];var s=!0,d=!1,c=void 0;try{for(var u,p=r()(this.users);!(s=(u=p.next()).done);s=!0){u.value.hasZKPrivilege=!1}}catch(e){d=!0,c=e}finally{try{!s&&p.return&&p.return()}finally{if(d)throw c}}}},handleCheckHYAllChange:function(e){if(this.userTableShow)if(e){var t=!0,a=!1,l=void 0;try{for(var o,n=r()(this.users);!(t=(o=n.next()).done);t=!0){var i=o.value;this.HYchecks.push(i.userNo),i.hasHYPrivilege=!0}}catch(e){a=!0,l=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw l}}}else{this.HYchecks=[];var s=!0,d=!1,c=void 0;try{for(var u,p=r()(this.users);!(s=(u=p.next()).done);s=!0){u.value.hasHYPrivilege=!1}}catch(e){d=!0,c=e}finally{try{!s&&p.return&&p.return()}finally{if(d)throw c}}}},handleCheckReadChange:function(e){this.resourceTableShow?e.hasReadPrivilege?(this.readChecks.push(e.bundleId),this.readChecks.length===this.resources.length&&(this.checkReadAll=!0)):(this.readChecks.splice(this.readChecks.indexOf(e.bundleId),1),this.checkReadAll=!1):this.userTableShow&&(e.hasReadPrivilege?(this.readChecks.push(e.userNo),this.readChecks.length===this.users.length&&(this.checkReadAll=!0)):(this.readChecks.splice(this.readChecks.indexOf(e.userNo),1),this.checkReadAll=!1))},handleCheckWriteChange:function(e){this.resourceTableShow?e.hasWritePrivilege?(this.writeChecks.push(e.bundleId),this.writeChecks.length===this.resources.length&&(this.checkWriteAll=!0)):(this.writeChecks.splice(this.writeChecks.indexOf(e.bundleId),1),this.checkWriteAll=!1):this.userTableShow&&(e.hasWritePrivilege?(this.writeChecks.push(e.userNo),this.writeChecks.length===this.users.length&&(this.checkWriteAll=!0)):(this.writeChecks.splice(this.writeChecks.indexOf(e.userNo),1),this.checkWriteAll=!1))},handleCheckCloudChange:function(e){this.resourceTableShow?e.hasCloudPrivilege?(this.cloudChecks.push(e.bundleId),this.cloudChecks.length===this.resources.length&&(this.checkCloudAll=!0)):(this.cloudChecks.splice(this.cloudChecks.indexOf(e.bundleId),1),this.checkCloudAll=!1):this.userTableShow&&(e.hasCloudPrivilege?(this.cloudChecks.push(e.userNo),this.cloudChecks.length===this.users.length&&(this.checkCloudAll=!0)):(this.cloudChecks.splice(this.cloudChecks.indexOf(e.userNo),1),this.checkCloudAll=!1))},handleCheckHJChange:function(e){this.userTableShow&&(e.hasHJPrivilege?(this.HJchecks.push(e.userNo),this.HJchecks.length===this.users.length&&(this.checkHJAll=!0)):(this.HJchecks.splice(this.HJchecks.indexOf(e.userNo),1),this.checkHJAll=!1))},handleCheckZKChange:function(e){this.userTableShow&&(e.hasZKPrivilege?(this.ZKchecks.push(e.userNo),this.ZKchecks.length===this.users.length&&(this.checkZKAll=!0)):(this.ZKchecks.splice(this.ZKchecks.indexOf(e.userNo),1),this.checkZKAll=!1))},handleCheckHYChange:function(e){this.userTableShow&&(e.hasHYPrivilege?(this.HYchecks.push(e.userNo),this.HYchecks.length===this.users.length&&(this.checkHYAll=!0)):(this.HYchecks.splice(this.HYchecks.indexOf(e.userNo),1),this.checkHYAll=!1))},getRoles:function(){var e=this;this.roleTableLoading=!0,Object(u.z)({}).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.roles=t.roles,e.roleTableLoading=!1})},getDeviceModels:function(){var e=this;Object(u.G)().then(function(t){if(!t.errMsg&&t.deviceModels){e.deviceModelOptions.push({value:"",label:"全部类型"});var a=!0,l=!1,o=void 0;try{for(var n,i=r()(t.deviceModels);!(a=(n=i.next()).done);a=!0){var s=n.value,d={value:s,label:s};e.deviceModelOptions.push(d)}}catch(e){l=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(l)throw o}}}})},getResources:function(){var e=this;if(this.resourceTableShow||(this.pageNum=1),this.currentRoleRow){this.resourceTableShow=!0,this.userTableShow=!1,this.prevReadChecks=[],this.prevWriteChecks=[],this.prevCloudChecks=[],this.readChecks=[],this.writeChecks=[],this.cloudChecks=[],this.checkReadAll=!1,this.checkWriteAll=!1,this.checkCloudAll=!1,this.checkHJAll=!1,this.checkZKAll=!1,this.checkHYAll=!1,this.countPerPage=20,/^[1-9]+[0-9]*]*$/.test(this.filters.countPerPage)&&(this.countPerPage=parseInt(this.filters.countPerPage)),this.resourceTableShow&&this.countPerPage*(this.pageNum-1)>this.total&&(this.pageNum=Math.ceil(this.total/this.countPerPage)),""==this.filters.deviceModel&&""==this.filters.keyword&&""==this.folderTreeSelected.value||(this.pageNum=1);var t={roleId:this.currentRoleRow.id,bindType:this.filters.bindType,deviceModel:this.filters.deviceModel,keyword:this.filters.keyword,folderId:this.folderTreeSelected.value,pageNum:this.pageNum,countPerPage:this.countPerPage};this.resourceTableLoading=!0,Object(u.F)(t).then(function(t){if(t.errMsg)e.$message({message:t.errMsg,type:"error"});else{e.total=t.total,e.resources=t.resources;var a=!0,l=!1,o=void 0;try{for(var n,i=r()(e.resources);!(a=(n=i.next()).done);a=!0){var s=n.value;s.hasReadPrivilege&&(e.prevReadChecks.push(s.bundleId),e.readChecks.push(s.bundleId)),s.hasWritePrivilege&&(e.prevWriteChecks.push(s.bundleId),e.writeChecks.push(s.bundleId)),s.hasCloudPrivilege&&(e.prevCloudChecks.push(s.bundleId),e.cloudChecks.push(s.bundleId))}}catch(e){l=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(l)throw o}}e.readChecks.length===e.resources.length&&(e.checkReadAll=!0),e.writeChecks.length===e.resources.length&&(e.checkWriteAll=!0),e.cloudChecks.length===e.resources.length&&(e.checkCloudAll=!0)}e.resourceTableLoading=!1})}else this.$message({message:"请先选择角色",type:"error"})},handleCurrentPageChange:function(e){this.pageNum=e,this.resourceTableShow?this.getResources():this.getUsers()},getUsers:function(){var e=this;if(this.resourceTableShow&&(this.pageNum=1),this.currentRoleRow){this.resourceTableShow=!1,this.userTableShow=!0,this.prevReadChecks=[],this.prevWriteChecks=[],this.prevCloiudChecks=[],this.readChecks=[],this.writeChecks=[],this.cloudChecks=[],this.prevHJChecks=[],this.prevZKChecks=[],this.prevHYChecks=[],this.HJchecks=[],this.ZKchecks=[],this.HYchecks=[],this.checkReadAll=!1,this.checkWriteAll=!1,this.checkCloudAll=!1,this.checkHJAll=!1,this.checkZKAll=!1,this.checkHYAll=!1,this.countPerPage=20,/^[1-9]+[0-9]*]*$/.test(this.filters.countPerPage)&&(this.countPerPage=parseInt(this.filters.countPerPage)),this.resourceTableShow||this.countPerPage*(this.pageNum-1)>this.total&&(this.pageNum=Math.ceil(this.total/this.countPerPage)),""==this.filters.keyword&&""==this.folderTreeSelected.value||(this.pageNum=1);var t={roleId:this.currentRoleRow.id,keyword:this.filters.keyword,folderId:this.folderTreeSelected.value,pageNum:this.pageNum,countPerPage:this.countPerPage};this.userTableLoading=!0,Object(u.O)(t).then(function(t){if(t.errMsg)e.$message({message:t.errMsg,type:"error"});else{e.total=t.total,e.users=t.users;var a=!0,l=!1,o=void 0;try{for(var n,i=r()(e.users);!(a=(n=i.next()).done);a=!0){var s=n.value;s.hasReadPrivilege&&(e.prevReadChecks.push(s.userNo),e.readChecks.push(s.userNo)),s.hasWritePrivilege&&(e.prevWriteChecks.push(s.userNo),e.writeChecks.push(s.userNo)),s.hasCloudPrivilege&&(e.prevCloudChecks.push(s.userNo),e.cloudChecks.push(s.userNo)),s.hasHJPrivilege&&(e.prevHJChecks.push(s.userNo),e.HJchecks.push(s.userNo)),s.hasZKPrivilege&&(e.prevZKChecks.push(s.userNo),e.ZKchecks.push(s.userNo)),s.hasHYPrivilege&&(e.prevHYChecks.push(s.userNo),e.HYchecks.push(s.userNo))}}catch(e){l=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(l)throw o}}e.readChecks.length===e.users.length&&(e.checkReadAll=!0),e.writeChecks.length===e.users.length&&(e.checkWriteAll=!0),e.cloudChecks.length===e.users.length&&(e.checkCloudAll=!0),e.HJchecks.length===e.users.length&&(e.checkHJAll=!0),e.ZKchecks.length===e.users.length&&(e.checkZKAll=!0),e.HYchecks.length===e.users.length&&(e.checkHYAll=!0)}e.userTableLoading=!1})}else this.$message({message:"请先选择角色",type:"error"})},submitPrivilege:function(){var e=this;if(this.resourceTableShow){var t={roleId:this.currentRoleRow.id,prevReadChecks:this.prevReadChecks.join(","),prevWriteChecks:this.prevWriteChecks.join(","),prevCloudChecks:this.prevCloudChecks.join(","),readChecks:this.readChecks.join(","),writeChecks:this.writeChecks.join(","),cloudChecks:this.cloudChecks.join(",")};this.resourceTableLoading=!0,Object(u._29)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"提交成功",type:"success"}),e.prevReadChecks=[].concat(e.readChecks),e.prevWriteChecks=[].concat(e.writeChecks),e.prevCloudChecks=[].concat(e.cloudChecks)),e.resourceTableLoading=!1})}else if(this.userTableShow){var a={roleId:this.currentRoleRow.id,prevReadChecks:this.prevReadChecks.join(","),prevWriteChecks:this.prevWriteChecks.join(","),prevCloudChecks:this.prevCloudChecks.join(","),prevHJChecks:this.prevHJChecks.join(","),prevZKChecks:this.prevZKChecks.join(","),prevHYChecks:this.prevHYChecks.join(","),readChecks:this.readChecks.join(","),writeChecks:this.writeChecks.join(","),cloudChecks:this.cloudChecks.join(","),hjChecks:this.HJchecks.join(","),zkChecks:this.ZKchecks.join(","),hyChecks:this.HYchecks.join(",")};this.userTableLoading=!0,Object(u._30)(a).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"提交成功",type:"success"}),e.prevReadChecks=[].concat(e.readChecks),e.prevWriteChecks=[].concat(e.writeChecks),e.prevCloudChecks=[].concat(e.cloudChecks),e.prevHJChecks=[].concat(e.HJchecks),e.prevZKChecks=[].concat(e.ZKchecks),e.prevHYChecks=[].concat(e.HYchecks)),e.userTableLoading=!1})}}},mounted:function(){var e=this;e.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/BindResource")}),e.getRoles(),e.getDeviceModels(),e.initTree()}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"绑定资源用户",name:"BindResource"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"绑定虚拟资源",name:"BindVirtualResource"}})],1),e._v(" "),a("el-card",{staticStyle:{float:"left","margin-top":"10px",width:"20%","font-size":"18px"},attrs:{"body-style":"padding:0px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.roleTableLoading,expression:"roleTableLoading"}],ref:"roleTable",staticStyle:{width:"100%"},attrs:{data:e.roles,"highlight-current-row":""},on:{"current-change":e.handleRoleTableRowChange}},[a("el-table-column",{attrs:{prop:"name",label:"角色名",sortable:""}})],1)],1),e._v(" "),a("el-card",{staticStyle:{float:"left","margin-left":"50px","margin-top":"10px",width:"70%"},attrs:{"body-style":"padding:0px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{float:"left","font-size":"14px",height:"34px","line-height":"34px"}},[e._v("选择分组：")]),e._v(" "),a("el-select",{ref:"selectTree",staticStyle:{float:"left",width:"200px"},attrs:{size:"medium",placeholder:"选择分组",filterable:"","filter-method":e.dataFilter,clearable:""},on:{clear:e.clearHandle},model:{value:e.folderTreeSelected.label,callback:function(t){e.$set(e.folderTreeSelected,"label",t)},expression:"folderTreeSelected.label"}},[a("el-option",{staticClass:"tree-select",staticStyle:{width:"200px",height:"auto",overflow:"hidden"},attrs:{value:e.folderTreeSelected.value,label:e.folderTreeSelected.label}},[a("el-tree",{ref:"tree",attrs:{data:e.treeData,props:e.defaultProps,"default-expand-all":e.defaultExpandAll,"filter-node-method":e.filterNode,"expand-on-click-node":e.expandOnClickNode},on:{"node-click":e.handleNodeClick}})],1)],1),e._v(" "),a("el-select",{staticStyle:{float:"left","margin-left":"10px",width:"120px"},attrs:{size:"medium",placeholder:"选择资源类型"},model:{value:e.filters.deviceModel,callback:function(t){e.$set(e.filters,"deviceModel",t)},expression:"filters.deviceModel"}},e._l(e.deviceModelOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{staticStyle:{float:"left","margin-left":"10px",width:"200px"},attrs:{size:"medium",placeholder:"关键字"},model:{value:e.filters.keyword,callback:function(t){e.$set(e.filters,"keyword",t)},expression:"filters.keyword"}}),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{size:"small",type:"info"},on:{click:e.getResources}},[e._v("查询设备")]),e._v(" "),a("el-button",{staticStyle:{float:"left"},attrs:{size:"small",type:"info"},on:{click:e.getUsers}},[e._v("查询用户")])],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.resourceTableShow,expression:"resourceTableShow"},{name:"loading",rawName:"v-loading",value:e.resourceTableLoading,expression:"resourceTableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.resources}},[a("el-table-column",{attrs:{type:"index",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceModel",label:"资源类型",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"设备账号",width:"270"}}),e._v(" "),a("el-table-column",{attrs:{width:"100","render-header":e.renderCheckReadHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.handleCheckReadChange(t.row)}},model:{value:t.row.hasReadPrivilege,callback:function(a){e.$set(t.row,"hasReadPrivilege",a)},expression:"scope.row.hasReadPrivilege"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100","render-header":e.renderCheckWriteHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.handleCheckWriteChange(t.row)}},model:{value:t.row.hasWritePrivilege,callback:function(a){e.$set(t.row,"hasWritePrivilege",a)},expression:"scope.row.hasWritePrivilege"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100","render-header":e.renderCheckCloudHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.handleCheckCloudChange(t.row)}},model:{value:t.row.hasCloudPrivilege,callback:function(a){e.$set(t.row,"hasCloudPrivilege",a)},expression:"scope.row.hasCloudPrivilege"}})]}}])})],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.userTableShow,expression:"userTableShow"},{name:"loading",rawName:"v-loading",value:e.userTableLoading,expression:"userTableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.users}},[a("el-table-column",{attrs:{type:"index",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"userNo",label:"用户编号",width:"270"}}),e._v(" "),a("el-table-column",{attrs:{width:"150","render-header":e.renderCheckReadHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.handleCheckReadChange(t.row)}},model:{value:t.row.hasReadPrivilege,callback:function(a){e.$set(t.row,"hasReadPrivilege",a)},expression:"scope.row.hasReadPrivilege"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"150","render-header":e.renderCheckWriteHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.handleCheckWriteChange(t.row)}},model:{value:t.row.hasWritePrivilege,callback:function(a){e.$set(t.row,"hasWritePrivilege",a)},expression:"scope.row.hasWritePrivilege"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"150","render-header":e.renderCheckCloudHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.handleCheckCloudChange(t.row)}},model:{value:t.row.hasCloudPrivilege,callback:function(a){e.$set(t.row,"hasCloudPrivilege",a)},expression:"scope.row.hasCloudPrivilege"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"150","render-header":e.renderCheckHJHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.handleCheckHJChange(t.row)}},model:{value:t.row.hasHJPrivilege,callback:function(a){e.$set(t.row,"hasHJPrivilege",a)},expression:"scope.row.hasHJPrivilege"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"150","render-header":e.renderCheckZKHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.handleCheckZKChange(t.row)}},model:{value:t.row.hasZKPrivilege,callback:function(a){e.$set(t.row,"hasZKPrivilege",a)},expression:"scope.row.hasZKPrivilege"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"150","render-header":e.renderCheckHYHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.handleCheckHYChange(t.row)}},model:{value:t.row.hasHYPrivilege,callback:function(a){e.$set(t.row,"hasHYPrivilege",a)},expression:"scope.row.hasHYPrivilege"}})]}}])})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitPrivilege}},[e._v("提交")]),e._v(" "),a("el-input",{staticStyle:{float:"right","margin-right":"30px",width:"200px"},attrs:{size:"small",placeholder:"单页显示数量,默认20"},model:{value:e.filters.countPerPage,callback:function(t){e.$set(e.filters,"countPerPage",t)},expression:"filters.countPerPage"}}),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":e.countPerPage,"current-page":e.pageNum,total:e.total},on:{"current-change":e.handleCurrentPageChange}})],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(p,m,!1,function(e){a("EmHM")},null,null);t.default=h.exports},"71sA":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFwmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0xMi0yOVQwOToxODo1NCswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0xMi0yOVQwOToxODo1NCswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMTItMjlUMDk6MTg6NTQrMDg6MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDkwMTVkMWItYjZkMS0xMjQ5LWE2YmUtNjc4YTFlNDQ1ZjM4IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6NWI1M2FiMTItMjcxNi0yNjQ2LTk1ODAtOTI1MDJmYTA3ZjlmIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NWMwNzljOGItNmIwOC0zZDRlLTliOTEtNTM4NDg1Nzg5NGU2IiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NWMwNzljOGItNmIwOC0zZDRlLTliOTEtNTM4NDg1Nzg5NGU2IiBzdEV2dDp3aGVuPSIyMDE4LTEyLTI5VDA5OjE4OjU0KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowOTAxNWQxYi1iNmQxLTEyNDktYTZiZS02NzhhMWU0NDVmMzgiIHN0RXZ0OndoZW49IjIwMTgtMTItMjlUMDk6MTg6NTQrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+nu0yrgAAAVRJREFUOI211b9LHGEQxvHPRRH8VSkRLCwsztZCRbDwIIWFCLEwhb19IH+HaG9vI6LY2ehhqYg2gnegRUAFKyGIIUZIsXNyt9yt60keWN7ZeWe+Ozvvu+8WDs8q3lA3RsL+iaf6ydJ4sSH4UwZoAnt4wGVcD+GbaJXU2cL/HavxwFOchH8SC5jHD6znAS5jDXdhl1PzJWxGzH3YryqketiPa3RhCq0aPIZj/MFoabz4qzaR7uEiBiWvm7ValYgZjJxXpYEzMW5nwGqqxczUO9PAzzFe5QDepHKaAgsx/s4BTOc0BX5Y/x3YaqM303OznHrgEKYlmzWPHiN2unxeHaqvqAcbmMOA5AvZzQl9kazyRfm8uo+VwuFZZRhV9OaEZFVc7MQt+tqlvOf4gg58lbSlJ+yOrIS3VnUWOxqPry84aBd4hC0sxf1W+Nqu8C++afwFZOofbqdDO4JUlzgAAAAASUVORK5CYII="},"7Otq":function(e,t,a){e.exports=a.p+"static/img/logo.bd8a658.png"},"7RRV":function(e,t){},"91nF":function(e,t){},"92tY":function(e,t){},"9goZ":function(e,t,a){"use strict";(function(e){var t,l=a("mvHQ"),r=a.n(l),o=a("Dd8w"),n=a.n(o),i=a("//Fk"),s=a.n(i),d=a("YaEn"),c=a("mtWM"),u=a.n(c),p=a("0nep"),m=a.n(p),h=a("eqvY"),b=(a("A66B"),document.location.host.split(":")[0]),f=document.location.origin,v=m.a.queryRouterUrl,g="http://192.165.56.111:8093/vue";-1!==v.indexOf("__requestIP__")&&(v=v.replace("__requestIP__",b)),-1!==g.indexOf("__requestIP__")&&(g=g.replace("__requestIP__",b));new Array;var y=u.a.create({headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/x-www-form-urlencoded","Access-Control-Allow-Headers":"Content-Type, Content-Length, Authorization, Accept, X-Requested-With , yourHeaderFeild","Access-Control-Allow-Methods":"PUT,POST,GET,DELETE,OPTIONS"},withCredentials:!1});function _(e){try{var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),a=window.location.href.split("?")[1].match(t);if(null!=a)return unescape(a[2])}catch(e){}return null}function w(e){for(;;){var t=e.match(/(?=\{context:)/);if(!t)break;for(var a="",l=t.index;l<e.length;l++)if(a+=e[l],"}"===e[l]){l;break}var r;a.replace("{context:","").replace("}","").split(";");r=sessionStorage.getItem("token"),e=e.replace(new RegExp(a,"g"),r)}return e}y.interceptors.request.use(function(e){var t=sessionStorage.getItem("token");return t?(e.headers["tetris-001"]=t,e.headers.Authorization=t):(e.headers["tetris-001"]=_("token"),e.headers.Authorization=_("token")),e},function(e){return s.a.reject(e)}),y.interceptors.response.use(function(e){return e},function(e){console.log("error= "+e),401===e.response.status&&(alert("超时，请重新登录!"),window.location.href=f+"/web/app/login/login.html")}),d.a.beforeEach(function(a,l,o){if("/"!==a.path)if(t){var i;if(a.meta.serviceName&&a.meta.serviceName!==m.a.serviceName)i=a.meta.url,a.meta.urlSuffix&&""!==a.meta.urlSuffix&&null!==a.meta.urlSuffix?window.location.href=i+"?token="+sessionStorage.getItem("token")+a.meta.urlSuffix:window.location.href=i+"?token="+sessionStorage.getItem("token");else o()}else{var s=_("token"),c=sessionStorage.getItem("token");s&&s!==c&&sessionStorage.setItem("token",s),y.post(v).then(function(l){var i,s;408===l.data.status?(alert("超时，请重新登录!"),window.location.href=f+"/web/app/login/login.html"):200===l.data.status&&(t=l.data.vueRouters,i="router",s=t,localStorage.setItem(i,r()(s)),function(a,l){d.a.addRoutes(h.a),function e(t){if(t&&t.length>0)for(var a=0;a<t.length;a++){var l=t[a];l.link&&(l.link=w(l.link)),l.sub&&l.sub.length>0&&e(l.sub)}}(t),function e(t){if(t&&t.length>0)for(var a=0;a<t.length;a++){var l=t[a];l.path=l.title,l.link&&-1!=l.link.indexOf("?token")&&(l.path=l.link.split("#")[1].split("?")[0]),l.sub&&l.sub.length>0&&e(l.sub)}}(t),e.antRouter=t,l(n()({},a,{replace:!0}))}(a,o))})}else o()})}).call(t,a("DuR2"))},A66B:function(e,t,a){e.exports=function(e){return function(){return a("Opzk")("./"+e+".vue")}}},B1Ru:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAG0WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOS0wMS0xNlQxNjowNzo0MiswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOS0wMS0xNlQxNjowNzo0MiswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTktMDEtMTZUMTY6MDc6NDIrMDg6MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NmZmMGIwNzEtMTgzYS00ZjQxLTlmM2YtNzA2MTg2MzliNWY4IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODliYjFhNmYtMzMwMS1jMjQ2LTk3ZGYtNzZhMWExZjM0NDBiIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MTA5NGI5OTMtMzQ3Mi0wNDRhLTkxMWQtZWZmOTE5Y2ZlN2MwIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MTA5NGI5OTMtMzQ3Mi0wNDRhLTkxMWQtZWZmOTE5Y2ZlN2MwIiBzdEV2dDp3aGVuPSIyMDE5LTAxLTE2VDE2OjA3OjQyKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo2ZmYwYjA3MS0xODNhLTRmNDEtOWYzZi03MDYxODYzOWI1ZjgiIHN0RXZ0OndoZW49IjIwMTktMDEtMTZUMTY6MDc6NDIrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDo1YzBlNWJiZC0yZWI0LWYxNGQtYWY0Mi05MGEyZjBiYjM0ZTI8L3JkZjpsaT4gPHJkZjpsaT51dWlkOkFBMUZEM0ZBRTRGOEUxMTE5QTE3OTRDRjcyOEM3MzRDPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDo0NDU5QUZGMkYwNDFFMzExODRENUMzOTBFNDdGMEY1NTwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ptdjv+EAAACISURBVDiN7dS7DcJQDIVh34g6M8AasAnLIHaBSa5YA2agTvHRkCa6ElFiJAqO5OpYv/yQXRCZ6lJpb2CNCElRsyss5VdmeImIvulgScAd+6m3BggDTthkAUfdsB2BtZEwVf0AhCeOc5dSZuZ1mS3vMmY44CxpKQ8cpt5S4BV9y/vK6f2/zTq9AKGkN0rEpt/lAAAAAElFTkSuQmCC"},B93b:function(e,t){},BXv7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("nvbp"),r=a.n(l),o=a("BO1k"),n=a.n(o),i=a("P9l9"),s={data:function(){return{activeTabName:"BindVirtualResource",roles:[],currentRoleRow:null,roleTableLoading:!1,resources:[],filters:{keyword:"",bindType:""},bindTypeOptions:[{value:"all",label:"全部"},{value:"binded",label:"已绑定"},{value:"unbinded",label:"未绑定"}],total:0,pageNum:1,countPerPage:10,resourceTableLoading:!1,checkAll:!1,prevChecks:[],checks:[],detailDialogVisible:!1,detailInfos:[]}},methods:{handleTabClick:function(e,t){"BindVirtualResource"!==e.name&&this.$router.push("/"+e.name)},handleRoleTableRowChange:function(e){this.currentRoleRow=e,this.getResources()},handleSelectionChange:function(e){this.checks=e},getRoles:function(){var e=this;this.roleTableLoading=!0,Object(i.z)({}).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.roles=t.roles,e.roleTableLoading=!1})},getResources:function(){var e=this;this.prevChecks=[],this.checks=[];var t={roleId:this.currentRoleRow.id,bindType:this.filters.bindType,keyword:this.filters.keyword,pageNum:this.pageNum,countPerPage:this.countPerPage};this.resourceTableLoading=!0,Object(i.Q)(t).then(function(t){if(t.errMsg)e.$message({message:t.errMsg,type:"error"});else{e.total=t.total,e.resources=t.resources;var a=!0,l=!1,r=void 0;try{for(var o,i=n()(e.resources);!(a=(o=i.next()).done);a=!0){var s=o.value;s.hasPrivilege&&(e.prevChecks.push(s.resourceId),e.checks.push(s.resourceId))}}catch(e){l=!0,r=e}finally{try{!a&&i.return&&i.return()}finally{if(l)throw r}}}e.resourceTableLoading=!1})},renderCheckHeader:function(e,t){var a=this;return e("el-checkbox",r()([{attrs:{value:a.checkAll},on:{input:function(e){a.checkAll=e}}},{directives:[{name:"model",value:a.checkAll}]},{on:{change:this.handleCheckAllChange}}]),["全选"])},handleCheckAllChange:function(e){if(e){var t=!0,a=!1,l=void 0;try{for(var r,o=n()(this.resources);!(t=(r=o.next()).done);t=!0){var i=r.value;this.checks.push(i.resourceId),i.hasPrivilege=!0}}catch(e){a=!0,l=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw l}}}else{this.checks=[];var s=!0,d=!1,c=void 0;try{for(var u,p=n()(this.resources);!(s=(u=p.next()).done);s=!0){u.value.hasPrivilege=!1}}catch(e){d=!0,c=e}finally{try{!s&&p.return&&p.return()}finally{if(d)throw c}}}},handleCheckChange:function(e){e.hasPrivilege?(this.checks.push(e.resourceId),this.checks.length===this.resources.length&&(this.checkAll=!0)):(this.checks.splice(this.checks.indexOf(e.resourceId),1),this.checkAll=!1)},handleCurrentPageChange:function(e){this.pageNum=e,this.getResources()},handleDetail:function(e){var t=this,a={resourceId:e.resourceId};Object(i.P)(a).then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):(t.detailDialogVisible=!0,t.detailInfos=e.infos)})},submitPrivilege:function(){var e=this,t={roleId:this.currentRoleRow.id,prevChecks:this.prevChecks.join(","),checks:this.checks.join(",")};this.resourceTableLoading=!0,Object(i._31)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"提交成功",type:"success"}),e.prevChecks=[].concat(e.checks)),e.resourceTableLoading=!1})}},mounted:function(){var e=this;e.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/BindResource")}),this.getRoles()}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"绑定设备资源",name:"BindResource"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"绑定虚拟资源",name:"BindVirtualResource"}})],1),e._v(" "),a("el-card",{staticStyle:{float:"left","margin-top":"10px",width:"20%","font-size":"18px"},attrs:{"body-style":"padding:0px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.roleTableLoading,expression:"roleTableLoading"}],ref:"roleTable",staticStyle:{width:"100%"},attrs:{data:e.roles,"highlight-current-row":""},on:{"current-change":e.handleRoleTableRowChange}},[a("el-table-column",{attrs:{prop:"name",label:"角色名",sortable:""}})],1)],1),e._v(" "),a("el-card",{staticStyle:{float:"left","margin-left":"50px","margin-top":"10px",width:"70%"},attrs:{"body-style":"padding:0px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{float:"left","font-size":"18px"}},[e._v("业务资源")]),e._v(" "),a("el-select",{staticStyle:{float:"left","margin-left":"100px"},attrs:{size:"small",placeholder:"选择绑定状态"},model:{value:e.filters.bindType,callback:function(t){e.$set(e.filters,"bindType",t)},expression:"filters.bindType"}},e._l(e.bindTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{staticStyle:{float:"left","margin-left":"50px",width:"150px"},attrs:{size:"small",placeholder:"关键字"},model:{value:e.filters.keyword,callback:function(t){e.$set(e.filters,"keyword",t)},expression:"filters.keyword"}}),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"50px"},attrs:{size:"small",type:"info"},on:{click:e.getResources}},[e._v("查询")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.resourceTableLoading,expression:"resourceTableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.resources},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{width:"150","render-header":e.renderCheckHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.handleCheckChange(t.row)}},model:{value:t.row.hasPrivilege,callback:function(a){e.$set(t.row,"hasPrivilege",a)},expression:"scope.row.hasPrivilege"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"350",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"resourceId",label:"资源ID",width:"350",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDetail(t.row)}}},[e._v("详情")])]}}])})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitPrivilege}},[e._v("提交")]),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":e.countPerPage,total:e.total},on:{"current-change":e.handleCurrentPageChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"详情",visible:e.detailDialogVisible},on:{"update:visible":function(t){e.detailDialogVisible=t}}},[a("ul",e._l(e.detailInfos,function(t){return a("li",[e._v("\n          "+e._s(t.attrName)+" :  "+e._s(t.attrValue)+"\n        ")])}),0)])],1)},staticRenderFns:[]};var c=a("VU/8")(s,d,!1,function(e){a("vi2b")},null,null);t.default=c.exports},CKII:function(e,t){},Caey:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAG0WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOS0wMS0xNlQxNjowNjoyOSswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOS0wMS0xNlQxNjowNjoyOSswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTktMDEtMTZUMTY6MDY6MjkrMDg6MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTMwNDljMzEtNzU3MC1iNTRjLWEwZDItMTkwN2Q4MzhhNWU5IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODEzOWRiYWYtZTYwNi0wYzQ1LThjZGItYzRhZWZkMDVmNzg5IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6OTM5ZmE1Y2ItODQ3OS0xZDQ0LTljNzQtMmEyNGRiMjE2M2IwIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTM5ZmE1Y2ItODQ3OS0xZDQ0LTljNzQtMmEyNGRiMjE2M2IwIiBzdEV2dDp3aGVuPSIyMDE5LTAxLTE2VDE2OjA2OjI5KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMzA0OWMzMS03NTcwLWI1NGMtYTBkMi0xOTA3ZDgzOGE1ZTkiIHN0RXZ0OndoZW49IjIwMTktMDEtMTZUMTY6MDY6MjkrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDo1YzBlNWJiZC0yZWI0LWYxNGQtYWY0Mi05MGEyZjBiYjM0ZTI8L3JkZjpsaT4gPHJkZjpsaT51dWlkOkFBMUZEM0ZBRTRGOEUxMTE5QTE3OTRDRjcyOEM3MzRDPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDo0NDU5QUZGMkYwNDFFMzExODRENUMzOTBFNDdGMEY1NTwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlLpWjMAAACHSURBVDiN7ZTBCYAwDEV/xXNn0DUcxWHELRzAUapr6AyePTwvglAKCo3gwQc5tIRPk9/EAbKkMFU7BYMkjCJYv9C5L/fQSxoFWEQDLBgIlUAH7JzkiFXARISAEF8mCJFYC2ypxKemuJvzRUbJNTCnSs41pcfIlPjbrACWk+IlDa+M3r9t8jgAzPX+YZ0j3T4AAAAASUVORK5CYII="},EUih:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),r=a.n(l),o=a("P9l9"),n={name:"AddLayernode",data:function(){var e=function(e,t,a){t&&!/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-4]\d{4}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/.test(t)?a(new Error("端口格式错误")):a()};return{activeTabName:"AddLayernode",typeOptions:[{label:"JV230接入",value:"ACCESS_JV230"},{label:"机顶盒接入",value:"ACCESS_TVOS"},{label:"混合器接入",value:"ACCESS_MIXER"},{label:"手机接入",value:"ACCESS_MOBILE"},{label:"音视频转发服务设备",value:"ACCESS_JV210"},{label:"录像存储服务单元A型",value:"ACCESS_CDN"},{label:"录像存储服务单元B型",value:"ACCESS_VOD"},{label:"监控资源汇接网关",value:"ACCESS_IPC"},{label:"流媒体管理服务设备",value:"ACCESS_STREAMMEDIA"},{label:"联网服务设备",value:"ACCESS_NETWORK"},{label:"显控汇接网关",value:"ACCESS_DISPLAYCTRL"},{label:"流转发器接入",value:"ACCESS_S100"},{label:"点播代理服务设备",value:"ACCESS_VODPROXY"},{label:"webrtc接入",value:"ACCESS_WEBRTC"},{label:"联网接入",value:"ACCESS_LIANWANG"},{label:"LDAP目录资源服务设备",value:"ACCESS_LDAP"},{label:"综合运维服务设备",value:"ACCESS_OMMS"},{label:"ws接入",value:"ACCESS_WS"}],nodeForm:{type:"ACCESS_JV210",name:"",ip:"",nodeUid:"",port:null,downloadPort:null,monitorUrl:"",netUrl:"",webrtcHttpPort:8088,webrtcWebsocketPort:8188},rules:{type:[{required:!0,message:"请选择节点类型",trigger:"change"}],name:[{required:!0,message:"请输入节点名称",trigger:"change"},{min:1,max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}],nodeUid:[{required:!0,message:"请输入节点ID",trigger:"change"},{min:1,max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}],ip:[{validator:function(e,t,a){t&&!/^((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)$/.test(t)?a(new Error("IP格式错误")):a()},trigger:"blur"}],port:[{validator:e,trigger:"blur"}],downloadPort:[{validator:e,trigger:"blur"}]}}},methods:{handleTabClick:function(e,t){"AddLayernode"!==e.name&&this.$router.push("/"+e.name)},reset:function(){this.$refs.nodeForm.resetFields()},submit:function(){var e=this;if(this.validate()){var t={json:r()(this.nodeForm)};Object(o._23)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"添加成功",type:"success"}),e.$refs.nodeForm.resetFields())})}},validate:function(){var e=!1;return this.$refs.nodeForm.validate(function(t){e=t}),e}},mounted:function(){var e=this;this.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/LayernodeManage")})}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"层节点列表",name:"LayernodeManage"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"添加层节点",name:"AddLayernode"}})],1),e._v(" "),a("el-form",{ref:"nodeForm",attrs:{model:e.nodeForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"节点类型",prop:"type"}},[a("el-select",{staticStyle:{width:"200px"},model:{value:e.nodeForm.type,callback:function(t){e.$set(e.nodeForm,"type",t)},expression:"nodeForm.type"}},e._l(e.typeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.name,callback:function(t){e.$set(e.nodeForm,"name",t)},expression:"nodeForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"节点ID",prop:"nodeUid"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.nodeUid,callback:function(t){e.$set(e.nodeForm,"nodeUid",t)},expression:"nodeForm.nodeUid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"节点IP",prop:"ip"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.ip,callback:function(t){e.$set(e.nodeForm,"ip",t)},expression:"nodeForm.ip"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"节点端口",prop:"port"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.port,callback:function(t){e.$set(e.nodeForm,"port",t)},expression:"nodeForm.port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"下载端口",prop:"downloadPort"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"录制资源下载端口，可不填"},model:{value:e.nodeForm.downloadPort,callback:function(t){e.$set(e.nodeForm,"downloadPort",t)},expression:"nodeForm.downloadPort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"监控地址",prop:"monitorUrl"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"监控页面地址，可不填"},model:{value:e.nodeForm.monitorUrl,callback:function(t){e.$set(e.nodeForm,"monitorUrl",t)},expression:"nodeForm.monitorUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"网管地址",prop:"netUrl"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"网管页面地址，可不填"},model:{value:e.nodeForm.netUrl,callback:function(t){e.$set(e.nodeForm,"netUrl",t)},expression:"nodeForm.netUrl"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"ACCESS_WEBRTC"==e.nodeForm.type,expression:"nodeForm.type=='ACCESS_WEBRTC'"}],attrs:{label:"webrtc http端口",prop:"webrtcHttpPort"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.webrtcHttpPort,callback:function(t){e.$set(e.nodeForm,"webrtcHttpPort",t)},expression:"nodeForm.webrtcHttpPort"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"ACCESS_WEBRTC"==e.nodeForm.type,expression:"nodeForm.type=='ACCESS_WEBRTC'"}],attrs:{label:"webrtc websocket端口",prop:"webrtcWebsocketPort"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.webrtcWebsocketPort,callback:function(t){e.$set(e.nodeForm,"webrtcWebsocketPort",t)},expression:"nodeForm.webrtcWebsocketPort"}})],1),e._v(" "),a("div",{staticStyle:{"margin-top":"30px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.reset()}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,i,!1,function(e){a("7RRV")},"data-v-77c69f88",null);t.default=s.exports},EmHM:function(e,t){},G41f:function(e,t){},HV9H:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("woOf"),r=a.n(l),o=a("mvHQ"),n=a.n(o),i=a("P9l9"),s={data:function(){return{gadgets:{visible:!1,url:""},filters:{},activeTab:"serInfoTab",serInfoVOs:[],total:0,page:1,listLoading:!1,ldapLoading:!1,sels:[],serInfoEditFormVisible:!1,serInfoEditBtnVisible:!1,serInfoAddBtnVisible:!1,editLoading:!1,serTypeOptions:[{value:4,label:"应用服务单元"},{value:5,label:"信令控制服务单元"},{value:6,label:"媒体处理服务单元"}],serProOptions:[{value:1,label:"TCP"},{value:2,label:"UDP"},{value:3,label:"TCP和UDP"}],serNodeEditForm:{id:0,nodeUuid:"",nodeName:"",nodeFather:"",nodeRelations:"",nodeFactInfo:"",nodePublisher:""},serInfoEditFormRules:{},serNodeVOs:[],serNodeEditFormVisible:!1,serNodeEditBtnVisible:!1,serNodeAddBtnVisible:!1,serInfoEditForm:{id:0,serUuid:"",serName:"",serAddr:"",serPort:5060,serPwd:"",serType:"",serPro:""},serNodeEditFormRules:{},fatherNodeOptions:[],relationNodeOptions:[],fatherTag:[],relationTag:[],dialog:{node:{type:"",table:{data:[]},visible:!1,selection:[]}}}},methods:{handleClick:function(e,t){this.queryList()},selsChange:function(e){this.sels=e},resetForm:function(e){void 0!=this.$refs[e]&&this.$refs[e].resetFields()},serTypeFormat:function(e,t){var a=e[t.property];if(void 0==a)return"";switch(a){case 1:return"业务控制单元";case 4:return"应用服务单元";case 5:return"信令控制服务单元";case 6:return"媒体处理服务单元"}},syncStatusFormat:function(e,t){var a=e[t.property];if(void 0==a)return"";switch(a){case"ASYNC":return"未同步";case"SYNC":return"已同步"}},sourceTypeFormat:function(e,t){var a=e[t.property];if(void 0==a)return"";switch(a){case"SYSTEM":return"BVC";case"EXTERNAL":return"LDAP"}},queryList:function(){var e=this,t={};this.listLoading=!0,"serInfoTab"===this.activeTab?Object(i._15)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):e.serInfoVOs=t.serInfoVOs,e.listLoading=!1}):"serNodeTab"===this.activeTab&&Object(i._16)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):e.serNodeVOs=t.serNodeVOs,e.listLoading=!1})},handleShowAddDialog:function(){var e=this;if(console.log("add"),"serInfoTab"===this.activeTab)this.resetForm("serInfoEditForm"),this.serInfoAddBtnVisible=!0,this.serInfoEditFormVisible=!0,this.serInfoEditBtnVisible=!1;else if("serNodeTab"===this.activeTab){Object(i._8)({}).then(function(t){null!==t.errMsg&&""!==t.errMsg?console.log(i._8,error):(e.fatherNodeOptions=t.serNodeVOs,e.relationNodeOptions=t.serNodeVOs,console.log("queryFatherNodeOptions, success",n()(t.serNodeVOs)))}),this.resetForm("serNodeEditForm"),this.serNodeAddBtnVisible=!0,this.serNodeEditFormVisible=!0,this.serNodeEditBtnVisible=!1}},handleShowEditDialog:function(e,t){var a=this;if(console.log("edit"),"serInfoTab"===this.activeTab)this.resetForm("serInfoEditForm"),this.serInfoAddBtnVisible=!1,this.serInfoEditBtnVisible=!1,this.serInfoEditFormVisible=!0,this.serInfoEditBtnVisible=!0,this.serInfoEditForm=r()({},t);else if("serNodeTab"===this.activeTab){Object(i._8)({}).then(function(e){null!==e.errMsg&&""!==e.errMsg?console.log(i._8,error):a.fatherNodeOptions=e.serNodeVOs});var l=this.serNodeVOs;if("NULL"!=t.nodeFather)for(var o=t.nodeFather.split(","),n=0;n<o.length;n++)for(var s=0;s<l.length;s++)if(l[s].nodeUuid===o[n]){this.fatherTag.push(l[s]),console.log(this.fatherTag);break}if("NULL"!=t.nodeRelations){var d=t.nodeRelations.split(",");console.log(d);for(n=0;n<d.length;n++)for(s=0;s<l.length;s++)if(l[s].nodeUuid===d[n]){this.relationTag.push(l[s]);break}}this.resetForm("serNodeEditForm"),this.serNodeAddBtnVisible=!1,this.serNodeEditBtnVisible=!1,this.serNodeEditFormVisible=!0,this.serNodeEditBtnVisible=!0,this.serNodeEditForm=r()({},t)}},handleAddSerInfo:function(){var e=this;this.$refs.serInfoEditForm.validate(function(t){t&&e.$confirm("确认新增服务设备信息吗？","提示",{}).then(function(){e.editLoading=!0;var t={serNo:e.serInfoEditForm.serNo,serName:e.serInfoEditForm.serName,serAddr:e.serInfoEditForm.serAddr,serPort:e.serInfoEditForm.serPort,serPwd:e.serInfoEditForm.serPwd,serType:e.serInfoEditForm.serType,serPro:e.serInfoEditForm.serPro};console.log(n()(t)),Object(i.c)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"新增成功",type:"success"}),e.$refs.serInfoEditForm.resetFields(),e.serInfoEditFormVisible=!1,e.addSerInfoBtnVisibale=!1,e.queryList())}),e.editLoading=!1})})},handleEditSerInfo:function(){var e=this;this.$refs.serInfoEditForm.validate(function(t){t&&e.$confirm("确认修改服务设备信息吗？","提示",{}).then(function(){e.editLoading=!0;var t={id:e.serInfoEditForm.id,serUuid:e.serInfoEditForm.serUuid,serNo:e.serInfoEditForm.serNo,serName:e.serInfoEditForm.serName,serAddr:e.serInfoEditForm.serAddr,serPort:e.serInfoEditForm.serPort,serPwd:e.serInfoEditForm.serPwd,serType:e.serInfoEditForm.serType,serPro:e.serInfoEditForm.serPro};console.log(n()(t)),Object(i._1)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"修改成功",type:"success"}),e.$refs.serInfoEditForm.resetFields(),e.serInfoEditFormVisible=!1,e.serInfoEditBtnVisibale=!1,e.queryList())}),e.editLoading=!1})})},handleAddSerNode:function(){var e=this;this.$refs.serNodeEditForm.validate(function(t){t&&e.$confirm("确认新增服务节点信息吗？","提示",{}).then(function(){e.editLoading=!0;var t={nodeName:e.serNodeEditForm.nodeName,nodeFather:e.serNodeEditForm.nodeFather,nodeRelations:e.serNodeEditForm.nodeRelations,nodeFactInfo:e.serNodeEditForm.nodeFactInfo};console.log(n()(t)),Object(i.d)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"新增成功",type:"success"}),e.$refs.serNodeEditForm.resetFields(),e.serNodeEditFormVisible=!1,e.serNodeAddBtnVisibale=!1,e.queryList())}),e.editLoading=!1})})},handleEditSerNode:function(){var e=this;this.$refs.serNodeEditForm.validate(function(t){t&&e.$confirm("确认修改服务节点信息吗？","提示",{}).then(function(){e.editLoading=!0;for(var t=[],a=[],l=0;l<e.fatherTag.length;l++)t.push(e.fatherTag[l].nodeUuid);for(l=0;l<e.relationTag.length;l++)a.push(e.relationTag[l].nodeUuid);var r={nodeUuid:e.serNodeEditForm.nodeUuid,nodeName:e.serNodeEditForm.nodeName,nodeFather:t.join(","),nodeRelations:a.join(","),nodeFactInfo:e.serNodeEditForm.nodeFactInfo,nodePublisher:e.serNodeEditForm.nodePublisher};Object(i._2)(r).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"修改成功",type:"success"}),e.$refs.serNodeEditForm.resetFields(),e.serNodeEditFormVisible=!1,e.serNodeEditBtnVisible=!1,e.queryList())}),e.editLoading=!1,e.fatherTag=[],e.relationTag=[]})})},handleEditSerNodeClose:function(){this.serNodeEditFormVisible=!1,this.fatherTag=[],this.relationTag=[]},beforeClose:function(e){this.fatherTag=[],this.relationTag=[],e()},handleDelSerInfo:function(e,t){var a=this;this.$confirm("删除此服务设备信息，确认？","提示",{}).then(function(){var e={serUuid:t.serUuid};Object(i.n)(e).then(function(e){null!==e.errMsg&&""!==e.errMsg?a.$message({message:e.errMsg,type:"error",duration:3e3}):a.queryList()})})},handleDelSerNode:function(e,t){var a=this;this.$confirm("删除此服务节点信息，确认？","提示",{}).then(function(){var e={nodeUuid:t.nodeUuid};Object(i.o)(e).then(function(e){null!==e.errMsg&&""!==e.errMsg?a.$message({message:e.errMsg,type:"error",duration:3e3}):a.queryList()})})},handleGotoGadgets:function(e,t){window.location.protocol.indexOf("https")>=0?this.gadgets.url="https://"+t.serAddr+":8912/":this.gadgets.url="http://"+t.serAddr+":8910/",this.gadgets.visible=!0},exitGadgets:function(){this.gadgets.url="",this.gadgets.visible=!1},handleSyncToLdap:function(){var e=this;this.$confirm("确认将本地未同步信息同步到LDAP服务器么？","提示",{}).then(function(){e.editLoading=!0;var t={};"serInfoTab"===e.activeTab?Object(i._37)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"同步成功, 共上传"+t.successCnt+"条信息",type:"success"}),e.queryList())}):"serNodeTab"===e.activeTab&&Object(i._39)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"同步成功, 共上传"+t.successCnt+"条信息",type:"success"}),e.queryList())}),e.editLoading=!1})},handleSyncFromLdap:function(){var e=this;this.$confirm("确认将从LDAP服务器同步下载信息么？","提示",{}).then(function(){e.editLoading=!0;var t={};"serInfoTab"===e.activeTab?Object(i._36)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"同步成功, 共下载"+t.successCnt+"条信息",type:"success"}),e.queryList())}):"serNodeTab"===e.activeTab&&Object(i._38)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"同步成功, 共下载"+t.successCnt+"条信息",type:"success"}),e.queryList())}),e.editLoading=!1})},handleCleanUpLdap:function(){var e=this;this.$confirm("确认清空上传到LDAP何从LDAP下载的所有信息么？","提示",{}).then(function(){e.editLoading=!0;var t={};"serInfoTab"===e.activeTab?Object(i.h)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"重置成功",type:"success"}),e.queryList())}):"serNodeTab"===e.activeTab&&Object(i.i)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"重置成功",type:"success"}),e.queryList())}),e.editLoading=!1})},handleClose:function(e){var t=this.fatherNodeOptions;this.dialog.node.selection;t.push(e);for(var a=this.relationTag.length-1;a>=0;a--)if(this.relationTag[a].nodeUuid===e.nodeUuid){this.relationTag.splice(a,1);break}},handleFatherClose:function(e){var t=this.fatherNodeOptions;this.dialog.node.selection;t.push(e);for(var a=this.fatherTag.length-1;a>=0;a--)if(this.fatherTag[a].nodeUuid===e.nodeUuid){this.fatherTag.splice(a,1);break}e.nodeUuid==this.serNodeEditForm.nodePublisher&&(this.serNodeEditForm.nodePublisher="")},handleDialogCommit:function(){for(var e=this.dialog.node.table.data,t=0;t<this.dialog.node.selection.length;t++)for(var a=e.length-1;a>=0;a--)if(e[a].nodeUuid===this.dialog.node.selection[t].nodeUuid){e.splice(a,1);break}if("relation"===this.dialog.node.type)for(t=0;t<this.dialog.node.selection.length;t++)this.relationTag.push(this.dialog.node.selection[t]);if("father"===this.dialog.node.type)for(t=0;t<this.dialog.node.selection.length;t++)this.fatherTag.push(this.dialog.node.selection[t]);this.dialog.node.visible=!1},handleSelectionChange:function(e){this.dialog.node.selection=e},handleDialogClose:function(){this.$refs.selectNodeTable.clearSelection(),this.dialog.node.visible=!1},addRelationNode:function(){this.dialog.node.type="relation",this.dialog.node.table.data=this.fatherNodeOptions,this.dialog.node.visible=!0},addFatherNode:function(){this.dialog.node.type="father",this.dialog.node.table.data=this.fatherNodeOptions,this.dialog.node.visible=!0},handleLdapBackUp:function(){var e=this;this.ldapLoading=!0,Object(i.U)(null).then(function(t){console.log(t),200!==t.status?(e.$message({message:response.message,type:"error"}),e.ldapLoading=!1):(e.$message({message:"备份成功",type:"success"}),e.ldapLoading=!1)})},handleLdapResume:function(){var e=this;this.ldapLoading=!0,Object(i.V)(null).then(function(t){200!==t.status?(e.$message({message:response.message,type:"error"}),e.ldapLoading=!1):(e.$message({message:"恢复成功",type:"success"}),e.ldapLoading=!1)})}},mounted:function(){this.$nextTick(function(){self.$parent.$parent.$parent.$parent.$parent.setActive("/LwLayernodeManage")}),this.queryList()}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"服务设备信息",name:"serInfoTab"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"服务节点信息",name:"serNodeTab"}})],1),e._v(" "),a("el-form",{ref:"filters",attrs:{inline:!0,model:e.filters,"label-width":"80px",size:"mini"}},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px",margin:"0px"},attrs:{span:24}},[a("el-form-item",{attrs:{span:3}},[a("el-button",{on:{click:function(t){return e.queryList()}}},[e._v("查询")])],1),e._v(" "),a("el-form-item",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleShowAddDialog()}}},[e._v("新增")])],1),e._v(" "),a("el-form-item",{attrs:{span:3}},[a("el-dropdown",[a("el-button",{attrs:{type:"primary"}},[e._v("\n            LDAP操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.handleSyncToLdap()}}},[e._v("上传到LDAP")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(t){return e.handleSyncFromLdap()}}},[e._v("从LDAP下载")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(t){return e.handleCleanUpLdap()}}},[e._v("重置LDAP数据")])],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{span:3}},["serNodeTab"===e.activeTab?a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.ldapLoading,expression:"ldapLoading"}],attrs:{type:"primary"},on:{click:function(t){return e.handleLdapBackUp()}}},[e._v("LDAP备份")]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{span:3}},["serNodeTab"===e.activeTab?a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.ldapLoading,expression:"ldapLoading"}],attrs:{type:"primary"},on:{click:function(t){return e.handleLdapResume()}}},[e._v("LDAP恢复")]):e._e()],1)],1)],1),e._v(" "),"serInfoTab"===e.activeTab?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.serInfoVOs,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{prop:"serNo",label:"设备编号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serName",label:"设备名称",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serAddr",label:"IP地址",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serPort",label:"端口",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serType",label:"设备类型",formatter:e.serTypeFormat,width:"180",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"sourceType",label:"来源",formatter:e.sourceTypeFormat,width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"syncStatus",label:"同步状态",formatter:e.syncStatusFormat,width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["SYSTEM"===t.row.sourceType?a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.handleShowEditDialog(t.$index,t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),"SYSTEM"===t.row.sourceType?a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.handleDelSerInfo(t.$index,t.row)}}},[e._v("删除")]):e._e(),e._v(" "),"SYSTEM"===t.row.sourceType?a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.handleGotoGadgets(t.$index,t.row)}}},[e._v("小工具")]):e._e()]}}],null,!1,3261597134)})],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"服务设备信息编辑",visible:e.serInfoEditFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.serInfoEditFormVisible=t}}},[a("el-form",{ref:"serInfoEditForm",attrs:{model:e.serInfoEditForm,"label-width":"160px",rules:e.serInfoEditFormRules}},[e._e(),e._v(" "),e.serInfoEditBtnVisible?a("el-form-item",{attrs:{label:"设备UUID",prop:"serUuid"}},[a("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:e.serInfoEditForm.serUuid,callback:function(t){e.$set(e.serInfoEditForm,"serUuid",t)},expression:"serInfoEditForm.serUuid"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"设备编号",prop:"serNo"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serNo,callback:function(t){e.$set(e.serInfoEditForm,"serNo",t)},expression:"serInfoEditForm.serNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备名称",prop:"serName"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serName,callback:function(t){e.$set(e.serInfoEditForm,"serName",t)},expression:"serInfoEditForm.serName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"IP地址",prop:"serAddr"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serAddr,callback:function(t){e.$set(e.serInfoEditForm,"serAddr",t)},expression:"serInfoEditForm.serAddr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"端口",prop:"serPort"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serPort,callback:function(t){e.$set(e.serInfoEditForm,"serPort",t)},expression:"serInfoEditForm.serPort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"serPwd"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serPwd,callback:function(t){e.$set(e.serInfoEditForm,"serPwd",t)},expression:"serInfoEditForm.serPwd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备类型",prop:"serType"}},[[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.serInfoEditForm.serType,callback:function(t){e.$set(e.serInfoEditForm,"serType",t)},expression:"serInfoEditForm.serType"}},e._l(e.serTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)]],2),e._v(" "),a("el-form-item",{attrs:{label:"协议类型",prop:"serPro"}},[[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.serInfoEditForm.serPro,callback:function(t){e.$set(e.serInfoEditForm,"serPro",t)},expression:"serInfoEditForm.serPro"}},e._l(e.serProOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)]],2)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.serInfoEditBtnVisible?a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleEditSerInfo()}}},[e._v("修改")]):e._e(),e._v(" "),e.serInfoAddBtnVisible?a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleAddSerInfo()}}},[e._v("新增")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"small"},nativeOn:{click:function(t){e.serInfoEditFormVisible=!1}}},[e._v("关闭")])],1)],1),e._v(" "),"serNodeTab"===e.activeTab?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.serNodeVOs,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"nodeName",label:"节点名称",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeUuid",label:"节点UUID",width:"280"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeFather",label:"上级服务节点ID",width:"280",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeRelations",label:"关联服务节点ID",width:"160",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeFactInfo",label:"厂商名称",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sourceType",label:"来源",formatter:e.sourceTypeFormat,width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"syncStatus",label:"同步状态",formatter:e.syncStatusFormat,width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["SYSTEM"===t.row.sourceType?a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.handleShowEditDialog(t.$index,t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),"SYSTEM"===t.row.sourceType?a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.handleDelSerNode(t.$index,t.row)}}},[e._v("删除")]):e._e()]}}],null,!1,4020406125)})],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"服务节点信息编辑",visible:e.serNodeEditFormVisible,"close-on-click-modal":!1,"before-close":e.beforeClose},on:{"update:visible":function(t){e.serNodeEditFormVisible=t}}},[a("el-form",{ref:"serNodeEditForm",attrs:{model:e.serNodeEditForm,"label-width":"160px",rules:e.serNodeEditFormRules}},[e._e(),e._v(" "),e.serNodeEditBtnVisible?a("el-form-item",{attrs:{label:"服务节点UUID",prop:"nodeUuid"}},[a("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:e.serNodeEditForm.nodeUuid,callback:function(t){e.$set(e.serNodeEditForm,"nodeUuid",t)},expression:"serNodeEditForm.nodeUuid"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"服务节点名称",prop:"nodeName"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serNodeEditForm.nodeName,callback:function(t){e.$set(e.serNodeEditForm,"nodeName",t)},expression:"serNodeEditForm.nodeName"}})],1),e._v(" "),e.serNodeEditBtnVisible?a("el-form-item",{attrs:{label:"上级服务节点",prop:"nodeFather"}},[e._l(e.fatherTag,function(t){return a("el-tag",{key:t.nodeUuid,attrs:{closable:""},on:{close:function(a){return e.handleFatherClose(t)}}},[e._v("\n          "+e._s(t.nodeName)+"\n        ")])}),e._v(" "),a("el-button",{staticClass:"button-new-tag-father",attrs:{icon:"el-icon-plus",size:"small"},on:{click:e.addFatherNode}})],2):e._e(),e._v(" "),e.serNodeEditBtnVisible?a("el-form-item",{attrs:{label:"订阅节点",prop:"nodePublish"}},[a("el-select",{attrs:{placeholder:"请先选择上级服务节点"},model:{value:e.serNodeEditForm.nodePublisher,callback:function(t){e.$set(e.serNodeEditForm,"nodePublisher",t)},expression:"serNodeEditForm.nodePublisher"}},e._l(e.fatherTag,function(e){return a("el-option",{key:e.nodeUuid,attrs:{label:e.nodeName,value:e.nodeUuid}})}),1)],1):e._e(),e._v(" "),e.serNodeEditBtnVisible?a("el-form-item",{attrs:{label:"关联服务节点",prop:"nodeRelations"}},[e._l(e.relationTag,function(t){return a("el-tag",{key:t.nodeUuid,attrs:{closable:""},on:{close:function(a){return e.handleClose(t)}}},[e._v("\n          "+e._s(t.nodeName)+"\n        ")])}),e._v(" "),a("el-button",{staticClass:"button-new-tag-relation",attrs:{icon:"el-icon-plus",size:"small"},on:{click:e.addRelationNode}})],2):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"厂商信息",prop:"nodeFactInfo"}},[a("el-input",{attrs:{type:"textarea","auto-complete":"off"},model:{value:e.serNodeEditForm.nodeFactInfo,callback:function(t){e.$set(e.serNodeEditForm,"nodeFactInfo",t)},expression:"serNodeEditForm.nodeFactInfo"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.serNodeEditBtnVisible?a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleEditSerNode()}}},[e._v("修改")]):e._e(),e._v(" "),e.serNodeAddBtnVisible?a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleAddSerNode()}}},[e._v("新增")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleEditSerNodeClose()}}},[e._v("关闭")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"选择节点",visible:e.dialog.node.visible,width:"800px","before-close":e.handleDialogClose},on:{"update:visible":function(t){return e.$set(e.dialog.node,"visible",t)}}},[a("div",{staticStyle:{height:"450px",position:"relative"}},[a("div",{staticStyle:{position:"absolute",left:"-20px",top:"-20px",right:"-20px",bottom:"-20px"}},[a("div",{staticStyle:{width:"100%",height:"100%",position:"relative"}},[a("div",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0px",right:"0",bottom:"0",padding:"0 10px","box-sizing":"border-box"}},[a("el-table",{ref:"selectNodeTable",staticStyle:{width:"100%"},attrs:{data:e.dialog.node.table.data,height:"100%"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeName",width:"300",label:"节点名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeUuid",label:"节点Uuid"}})],1)],1)])])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.handleDialogClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleDialogCommit}},[e._v("确定")])],1)]),e._v(" "),e.gadgets.visible?a("div",{staticStyle:{position:"fixed",left:"0",top:"0",right:"0",bottom:"0","z-index":"5000"}},[a("div",{staticStyle:{width:"100%",height:"100%",position:"relative"}},[a("el-button",{staticStyle:{position:"absolute",right:"10px",top:"25px","z-index":"100"},attrs:{size:"mini",type:"primary",icon:"el-icon-d-arrow-left"},on:{click:e.exitGadgets}},[e._v("返回")]),e._v(" "),a("iframe",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.gadgets.url,frameborder:"0"}})],1)]):e._e()],1)},staticRenderFns:[]},c=a("VU/8")(s,d,!1,null,null,null);t.default=c.exports},"ILV/":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFwmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0xMi0yOVQwOToyMDoyOSswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0xMi0yOVQwOToyMDoyOSswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMTItMjlUMDk6MjA6MjkrMDg6MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OWEyM2EyN2UtNjRiNC1iYjQxLThhNzYtMmQ0MWU1NTlkNmQ1IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6OTcxMzAwOGEtMTA1NS1kYTQzLWI3ZjktZDQ4OTRkNWQ5ODk0IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YzVkNTI1OTktMzM3NS01OTQ2LThmNzEtZGQ5YzMwZGZiOGU0IiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YzVkNTI1OTktMzM3NS01OTQ2LThmNzEtZGQ5YzMwZGZiOGU0IiBzdEV2dDp3aGVuPSIyMDE4LTEyLTI5VDA5OjIwOjI5KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5YTIzYTI3ZS02NGI0LWJiNDEtOGE3Ni0yZDQxZTU1OWQ2ZDUiIHN0RXZ0OndoZW49IjIwMTgtMTItMjlUMDk6MjA6MjkrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+iH+ljQAAAZ9JREFUOI2t1E+ITlEcxvHPKw3jX1PDQix1y8qdsFQX+2l2ShYWkig12fhTkqWwsZqEvYVSshA62bI4GqtjQTSSPxuKms1rcc9r7rzeed9Lfptf95zf8+05nefcTrfbNapCTJNQlcXXUbOrR9LqepT77v8FnGw5Z1XbwX8GhpgOhJgmRglDTBMhpv1DgSGmWTzBbAszZ/A0xHR6IDDEtBNX8Am3WgBv4jOuhZiKQQ4vqi/peFUW70bR8syJrLm0DBhiWocZzFdlcb+Fux70Hl5hJsQ03nS4B2vxoC2sUQ8xjimWcrg197dDRCvVm9y3N4E/cx8bpKjK4uQQ4Jrcf7B05N4llEOEK9WuJqMHfImPmA4xrW9LCjFtwDQ+YP43sCqLLuawBef+wt1Z9Tufy4xlObyKBZwPMR1u4e4ILuA9rvfWO83/YYhpLx5jE27gclUWX/pAm9VBPoVvOFiVxYuBwCyYwl3swCKe4XXeLrBPnYaEQ1VZxKb+D2CGjuEYjqpD38lbXTzHHdyuymKxXzsQ2AffiG35c6Eqi+/D5n8BOquBtE8Bz40AAAAASUVORK5CYII="},IZ07:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("BO1k"),r=a.n(l),o=a("P9l9"),n={data:function(){return{activeTabName:"LayernodeManage",nodes:[],typeOptions:[{value:"",label:"全部类型"},{label:"JV230接入",value:"ACCESS_JV230"},{label:"机顶盒接入",value:"ACCESS_TVOS"},{label:"混合器接入",value:"ACCESS_MIXER"},{label:"手机接入",value:"ACCESS_MOBILE"},{label:"音视频转发服务设备",value:"ACCESS_JV210"},{label:"录像存储服务单元A型",value:"ACCESS_CDN"},{label:"录像存储服务单元B型",value:"ACCESS_VOD"},{label:"监控资源汇接网关",value:"ACCESS_IPC"},{label:"流媒体管理服务设备",value:"ACCESS_STREAMMEDIA"},{label:"联网服务设备",value:"ACCESS_NETWORK"},{label:"显控汇接网关",value:"ACCESS_DISPLAYCTRL"},{label:"流转发器接入",value:"ACCESS_S100"},{label:"点播代理服务设备",value:"ACCESS_VODPROXY"},{label:"webrtc接入",value:"ACCESS_WEBRTC"},{label:"联网接入",value:"ACCESS_LIANWANG"},{label:"LDAP目录资源服务设备",value:"ACCESS_LDAP"},{label:"综合运维服务设备",value:"ACCESS_OMMS"},{label:"ws接入",value:"ACCESS_WS"}],typeObj:{ACCESS_MOBILE:"手机接入",ACCESS_JV230:"JV230接入",ACCESS_TVOS:"机顶盒接入",ACCESS_MIXER:"混合器接入",ACCESS_JV210:"音视频转发服务设备",ACCESS_CDN:"录像存储服务单元A型",ACCESS_VOD:"录像存储服务单元B型",ACCESS_IPC:"监控资源汇接网关",ACCESS_STREAMMEDIA:"流媒体管理服务设备",ACCESS_NETWORK:"联网服务设备",ACCESS_DISPLAYCTRL:"显控汇接网关",ACCESS_S100:"流转发器接入",ACCESS_VODPROXY:"点播代理服务设备",ACCESS_WEBRTC:"webrtc接入",ACCESS_LIANWANG:"联网接入",ACCESS_LDAP:"LDAP目录资源服务设备",ACCESS_OMMS:"综合运维服务设备",ACCESS_WS:"ws接入"},filters:{type:"",keyword:""},nodeTableLoading:!1,multipleSelection:[]}},methods:{gotoMonitor:function(e){window.open(e.monitorUrl)},gotoAdmin:function(e){window.open(e.netUrl)},handleTabClick:function(e,t){"LayernodeManage"!==e.name&&this.$router.push("/"+e.name)},getNodes:function(){var e=this,t={type:this.filters.type,keyword:this.filters.keyword};this.nodeTableLoading=!0,Object(o.J)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.nodes=t.nodes,e.nodeTableLoading=!1})},handleModify:function(e){this.$router.push({path:"/ModifyLayernode",query:{id:e.id}})},handleDelete:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={nodeIds:e.id};Object(o.r)(a).then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):(t.$message({message:"删除成功",type:"success"}),t.getNodes())})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleMultiDelete:function(){var e=this;this.multipleSelection.length?this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[],a=!0,l=!1,n=void 0;try{for(var i,s=r()(e.multipleSelection);!(a=(i=s.next()).done);a=!0){var d=i.value;t.push(d.id)}}catch(e){l=!0,n=e}finally{try{!a&&s.return&&s.return()}finally{if(l)throw n}}var c={nodeIds:t.join(",")};Object(o.r)(c).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"删除成功",type:"success"}),e.getNodes())})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message({message:"请至少选择一行",type:"warning"})},handleSelectionChange:function(e){this.multipleSelection=e}},mounted:function(){var e=this;this.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/LwSerInfoAndNode")}),this.getNodes()}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"层节点列表",name:"LayernodeManage"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"添加层节点",name:"AddLayernode"}})],1),e._v(" "),a("div",{staticStyle:{float:"left",width:"100%"}},[a("el-select",{staticStyle:{float:"left","margin-left":"10px",width:"200px"},attrs:{size:"small",placeholder:"选择层节点类型"},model:{value:e.filters.type,callback:function(t){e.$set(e.filters,"type",t)},expression:"filters.type"}},e._l(e.typeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{staticStyle:{float:"left","margin-left":"30px",width:"200px"},attrs:{size:"small",placeholder:"节点名称"},model:{value:e.filters.keyword,callback:function(t){e.$set(e.filters,"keyword",t)},expression:"filters.keyword"}}),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"30px"},attrs:{size:"small",type:"info"},on:{click:e.getNodes}},[e._v("查询")]),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"30px"},attrs:{size:"small",type:"danger"},on:{click:e.handleMultiDelete}},[e._v("批量删除")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.nodeTableLoading,expression:"nodeTableLoading"}],staticStyle:{float:"left",width:"100%","margin-top":"20px"},attrs:{data:e.nodes},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{width:"100",type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"层节点类型",width:"200",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("span",{domProps:{textContent:e._s(e.typeObj[t.row.type])}})])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeUid",label:"层节点ID",width:"300",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"层节点IP",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{width:"150",label:"在线状态"},scopedSlots:e._u([{key:"default",fn:function(e){return["ONLINE"==e.row.onlineStatus?a("div",{staticStyle:{height:"20px",width:"20px","border-radius":"50%","background-color":"#0f0"}}):a("div",{staticStyle:{height:"20px",width:"20px","border-radius":"50%","background-color":"#f00"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleModify(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")]),e._v(" "),t.row.monitorUrl?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.gotoMonitor(t.row)}}},[e._v("监控")]):a("el-button",{attrs:{type:"text",size:"small",disabled:""}},[e._v("监控")]),e._v(" "),t.row.netUrl?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.gotoAdmin(t.row)}}},[e._v("网管")]):a("el-button",{attrs:{type:"text",size:"small",disabled:""}},[e._v("网管")])]}}])})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,i,!1,function(e){a("CKII")},null,null);t.default=s.exports},"J/7U":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("+b1m"),r={name:"sidebar",components:{sidebarItem:a("XvCJ").default},props:{routes:{type:Array},active:{type:String},menurouter:{type:Boolean,required:!0}},data:function(){return{isCollapse:!1,logo:{img:"~assets/bvclogo.png"}}},methods:{handleopen:function(){},handleclose:function(){},handleselect:function(e,t){}},mounted:function(){var e=this;l.a.$on("collapseMenuEvent",function(t){e.isCollapse=t})}},o={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("aside",{class:[e.isCollapse?"collapseMenu":"unCollapseMenu"]},[l("el-scrollbar",{staticStyle:{height:"100%"}},[l("div",{staticClass:"logo-wrapper"},[l("img",{staticClass:"logo-img",attrs:{src:a("7Otq")}}),e._v(" "),l("div",{staticClass:"platform-title"},[e._v("任务监视系统")])]),e._v(" "),e.menurouter?l("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{collapse:e.isCollapse,"default-active":e.active,router:"","background-color":"#37404f","text-color":"#fff","active-text-color":"#ffd04b"},on:{open:e.handleopen,close:e.handleclose,select:e.handleselect}},e._l(e.routes,function(t){return l("sidebarItem",{key:t.path,attrs:{item:t,menurouter:e.menurouter}})}),1):l("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{collapse:e.isCollapse,"default-active":e.active,"background-color":"#37404f","text-color":"#fff","active-text-color":"#ffd04b"},on:{open:e.handleopen,close:e.handleclose,select:e.handleselect}},e._l(e.routes,function(t){return l("sidebarItem",{key:t.path,attrs:{item:t,menurouter:e.menurouter}})}),1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(r,o,!1,function(e){a("006z")},"data-v-a8d948b8",null);t.default=n.exports},KLRY:function(e,t){},LKA7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("0nep");var l=a("+b1m"),r=a("P9l9"),o={name:"headerbar",props:{sysUserName:{type:String},routes:{type:Array},active:{type:String}},data:function(){return{isCollapsed:!1,userimg:"~assets/user.png",showRemindHover:!1,showExitHover:!1}},methods:{logout:function(){this.$confirm("确认退出吗?","提示",{}).then(function(){Object(r.X)(null).then(function(e){window.location.href="/web/app/login/login.html"})}).catch(function(){})},remindHover:function(e){this.showRemindHover=e},exitHover:function(e){this.showExitHover=e},collapseMenu:function(){this.isCollapsed?this.isCollapsed=!1:this.isCollapsed=!0,l.a.$emit("collapseMenuEvent",this.isCollapsed)}}},n={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"header"},[l("el-col",{staticClass:"header-col",attrs:{span:6}},[l("div",{staticClass:"collapsed-icon-wrapper",on:{click:function(t){return e.collapseMenu()}}},[e.isCollapsed?e._e():l("img",{staticClass:"collapsed-icon",attrs:{src:a("Caey")}}),e._v(" "),e.isCollapsed?l("img",{staticClass:"collapsed-icon",attrs:{src:a("B1Ru")}}):e._e()])]),e._v(" "),l("el-col",{staticClass:"header-col",attrs:{span:12}}),e._v(" "),l("el-col",{staticClass:"header-col",attrs:{span:6}},[l("div",{staticStyle:{float:"right","margin-right":"10px"}},[e._v("\n        Version：1.3.0_95731\n      ")]),e._v(" "),l("div",{staticClass:"logout-icon-wrapper notice-wrapper",on:{click:e.logout,mouseenter:function(t){return e.exitHover(!0)},mouseleave:function(t){return e.exitHover(!1)}}},[e.showExitHover?e._e():l("img",{staticClass:"logout-icon",attrs:{src:a("ILV/")}}),e._v(" "),e.showExitHover?l("img",{staticClass:"logout-icon",attrs:{src:a("RH6s")}}):e._e()]),e._v(" "),l("div",{staticClass:"reminder-icon-wrapper notice-wrapper",on:{mouseenter:function(t){return e.remindHover(!0)},mouseleave:function(t){return e.remindHover(!1)}}},[e.showRemindHover?e._e():l("img",{staticClass:"reminder-icon",attrs:{src:a("71sA")}}),e._v(" "),e.showRemindHover?l("img",{staticClass:"reminder-icon",attrs:{src:a("Lo3N")}}):e._e()])])],1)},staticRenderFns:[]};var i=a("VU/8")(o,n,!1,function(e){a("xTTl")},"data-v-87318ec8",null);t.default=i.exports},Lo3N:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAIf2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMTItMjlUMTA6MTA6NDIrMDg6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMTItMjlUMTA6MTE6MDQrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTEyLTI5VDEwOjExOjA0KzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3N2NkM2VkMi00M2E0LWUxNDMtYTVmOC1kNGIzMWRjOGE5MTgiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0YmJiMzE1MS0xZTZiLWE1NDMtYTAzOS01NTEyZTFiOWEwZDIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozNmIyMDhkNS03MjgxLTU4NDgtOWQ0NC1mYjRjMjZhOGNmMGYiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjM2YjIwOGQ1LTcyODEtNTg0OC05ZDQ0LWZiNGMyNmE4Y2YwZiIgc3RFdnQ6d2hlbj0iMjAxOC0xMi0yOVQxMDoxMDo0MiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MjRhYWNiNDktNzMxMS01MzQ5LWFkNmUtNzE3NmFmNDA0OWEzIiBzdEV2dDp3aGVuPSIyMDE4LTEyLTI5VDEwOjExOjA0KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImRlcml2ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImNvbnZlcnRlZCBmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo3N2NkM2VkMi00M2E0LWUxNDMtYTVmOC1kNGIzMWRjOGE5MTgiIHN0RXZ0OndoZW49IjIwMTgtMTItMjlUMTA6MTE6MDQrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjI0YWFjYjQ5LTczMTEtNTM0OS1hZDZlLTcxNzZhZjQwNDlhMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozNmIyMDhkNS03MjgxLTU4NDgtOWQ0NC1mYjRjMjZhOGNmMGYiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozNmIyMDhkNS03MjgxLTU4NDgtOWQ0NC1mYjRjMjZhOGNmMGYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4pT+gOAAABJklEQVQ4jbWVsUoDQRRFz7ppjFgJChaWprBNlybY2FpbpLP3C/IbFv5BQBA7f0HSphFsBBVJZSEaZLkWuZJh2ZkdUS885vHm3TPsPIYtJNGidWDP+QPwnuyWFIu+pGtJC620cK0f88VgZ5IqQ6aSzh1T1yr3ZAFPbHqSNGzYH3pP7k0CNyXNJb1K6iWuo+eeuT1R4MgnjxOw7xi7dxTW12ozGni9bBt90DMIi3Xgttf7DOBjzdMILLx+ZADrnkbgr/XvwM4PvJ9NniJ4yzvADKic5+gFKIED53SALnABHAFbwDNwlQmsWE55BtwAp4WkXeAO2MiExPQG7Ief/Cdqm3IJHLO8lq7zMuloea+Hfq+3DrkW9bQBO5ImWmniWtSTe4fhLyCpL/OK6D1IVzbiAAAAAElFTkSuQmCC"},MhHE:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("router-view")],1)],1)},staticRenderFns:[]};var o=a("VU/8")({name:"app"},r,!1,function(e){a("ypyz")},null,null).exports,n=a("YaEn"),i=a("zL8q"),s=a.n(i),d=(a("9goZ"),a("tvR6"),a("KLRY"),a("wdO+"),a("XLwt")),c=a.n(d);l.default.prototype.$echarts=c.a,l.default.config.productionTip=!1,l.default.use(s.a),new l.default({el:"#app",router:n.a,components:{app:o},template:"<app/>",mounted:function(){if((a=function(e){var t=window.location.href.split("?")[1];if(t){t=t.split("&");for(var a=0;a<t.length;a++)if(t[a].startsWith(e))return t[a].split("=")[1]}return null}("params"))&&a.indexOf("qt-terminal")>=0){var e=document.querySelector("head"),t=document.createElement("style");t.type="text/css";var a=[".header{background-color:#0f2A4a!important;}","ul[role=menubar]{background-color:#0f2A4a!important;}","li[role=menuitem]{background-color:#0f2A4a!important;}","div.el-submenu__title{background-color:#0f2A4a!important;}","li[role=menuitem],li[role=menuitem]>i,li[role=menuitem]>div,li[role=menuitem]>div>i{color:#fff!important;}","li.is-active[role=menuitem],li.is-active[role=menuitem]>i,li.is-active[role=menuitem]>div,li.is-active[role=menuitem]>div>i{color:rgb(195,176,145)!important;}"];t.appendChild(document.createTextNode(a.join(" "))),e.appendChild(t)}}})},On1Y:function(e,t){},Opzk:function(e,t,a){var l={"./404.vue":["+H76"],"./Home.vue":["j7e0"],"./Main.vue":["VZrM"],"./bind/UserBindBundle.vue":["r1Id"],"./bundle/AddBundle.vue":["ifcc"],"./bundle/BundleManage.vue":["dLi2"],"./bundle/ConfigBundle.vue":["PPfX"],"./bundle/ModifyBundle.vue":["V5AO"],"./folder/FolderManage.vue":["kCLY"],"./frame/headerbar.vue":["LKA7"],"./frame/sidebar.vue":["J/7U"],"./frame/sidebarItem.vue":["XvCJ"],"./layernode/AddLayerNode.vue":["EUih"],"./layernode/LayerNodeManage.vue":["IZ07"],"./layernode/ModifyLayerNode.vue":["snKp"],"./layernode/SelectLayerNode.vue":["/Qkj"],"./middleLayer.vue":["345n",0],"./privilege/BindResource.vue":["4vq3"],"./privilege/BindVirtualResource.vue":["BXv7"],"./serInfo/SerInfoAndNode.vue":["HV9H"],"./template/BundleTemplateManage.vue":["qoXU"],"./template/ChannelTemplateManage.vue":["Pu6j"]};function r(e){var t=l[e];return t?Promise.all(t.slice(1).map(a.e)).then(function(){return a(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}r.keys=function(){return Object.keys(l)},r.id="Opzk",e.exports=r},P9l9:function(e,t,a){"use strict";a.d(t,"H",function(){return m}),a.d(t,"G",function(){return h}),a.d(t,"N",function(){return b}),a.d(t,"M",function(){return f}),a.d(t,"t",function(){return v}),a.d(t,"A",function(){return g}),a.d(t,"E",function(){return y}),a.d(t,"p",function(){return _}),a.d(t,"a",function(){return w}),a.d(t,"_3",function(){return x}),a.d(t,"_11",function(){return F}),a.d(t,"Z",function(){return k}),a.d(t,"C",function(){return D}),a.d(t,"B",function(){return S}),a.d(t,"l",function(){return C}),a.d(t,"F",function(){return N}),a.d(t,"O",function(){return T}),a.d(t,"Q",function(){return I}),a.d(t,"_29",function(){return E}),a.d(t,"_30",function(){return A}),a.d(t,"_31",function(){return M}),a.d(t,"D",function(){return L}),a.d(t,"z",function(){return P}),a.d(t,"P",function(){return R}),a.d(t,"J",function(){return O}),a.d(t,"r",function(){return $}),a.d(t,"_23",function(){return z}),a.d(t,"_43",function(){return B}),a.d(t,"I",function(){return q}),a.d(t,"_9",function(){return U}),a.d(t,"b",function(){return j}),a.d(t,"q",function(){return V}),a.d(t,"S",function(){return Z}),a.d(t,"e",function(){return W}),a.d(t,"T",function(){return Y}),a.d(t,"_0",function(){return G}),a.d(t,"_25",function(){return H}),a.d(t,"_20",function(){return J}),a.d(t,"_4",function(){return Q}),a.d(t,"_18",function(){return X}),a.d(t,"_26",function(){return K}),a.d(t,"_21",function(){return ee}),a.d(t,"_14",function(){return te}),a.d(t,"_27",function(){return ae}),a.d(t,"_22",function(){return le}),a.d(t,"_19",function(){return re}),a.d(t,"f",function(){return oe}),a.d(t,"Y",function(){return ne}),a.d(t,"k",function(){return ie}),a.d(t,"_24",function(){return se}),a.d(t,"_35",function(){return de}),a.d(t,"_34",function(){return ce}),a.d(t,"j",function(){return ue}),a.d(t,"_15",function(){return pe}),a.d(t,"_16",function(){return me}),a.d(t,"c",function(){return he}),a.d(t,"d",function(){return be}),a.d(t,"_1",function(){return fe}),a.d(t,"_2",function(){return ve}),a.d(t,"n",function(){return ge}),a.d(t,"o",function(){return ye}),a.d(t,"h",function(){return _e}),a.d(t,"i",function(){return we}),a.d(t,"_38",function(){return xe}),a.d(t,"_39",function(){return Fe}),a.d(t,"_36",function(){return ke}),a.d(t,"_37",function(){return De}),a.d(t,"_8",function(){return Se}),a.d(t,"U",function(){return Ce}),a.d(t,"V",function(){return Ne}),a.d(t,"_33",function(){return Te}),a.d(t,"_32",function(){return Ie}),a.d(t,"g",function(){return Ee}),a.d(t,"_17",function(){return Ae}),a.d(t,"_28",function(){return Me}),a.d(t,"_7",function(){return Le}),a.d(t,"_6",function(){return Pe}),a.d(t,"_42",function(){return Re}),a.d(t,"X",function(){return Oe}),a.d(t,"x",function(){return $e}),a.d(t,"w",function(){return ze}),a.d(t,"y",function(){return Be}),a.d(t,"_40",function(){return qe}),a.d(t,"K",function(){return Ue}),a.d(t,"_5",function(){return je}),a.d(t,"R",function(){return Ve}),a.d(t,"L",function(){return Ze}),a.d(t,"u",function(){return We}),a.d(t,"_12",function(){return Ye}),a.d(t,"m",function(){return Ge}),a.d(t,"W",function(){return He}),a.d(t,"_41",function(){return Je}),a.d(t,"_10",function(){return Qe}),a.d(t,"v",function(){return Xe}),a.d(t,"s",function(){return Ke}),a.d(t,"_13",function(){return et});var l=a("//Fk"),r=a.n(l),o=a("mtWM"),n=a.n(o),i=a("mw3O"),s=document.location.host.split(":")[0];console.log(s);var d=document.location.origin,c="http://192.165.56.111:8093/vue",u=document.location.protocol+"//"+document.location.hostname+":8214";-1!==d.indexOf("__requestIP__")&&(d=d.replace("__requestIP__",s)),-1!==c.indexOf("__requestIP__")&&(c=c.replace("__requestIP__",s));var p=n.a.create({headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!1});p.interceptors.request.use(function(e){var t=sessionStorage.getItem("token"),a=localStorage.getItem("tetris-001");return e.headers["tetris-001"]=t||a,e},function(e){return r.a.reject(e)}),p.interceptors.response.use(function(e){if(408!==e.data.status)return e;alert("超时，请重新登录!"),window.location.href=d+"/web/app/login/login.html"},function(e){401===e.response.status&&alert("超时，请重新登录!")});var m=function(e){return p.post(d+"/user/getLoginUserName",i.stringify(e)).then(function(e){return e.data})},h=function(e){return p.post(d+"/template/getDeviceModels",i.stringify(e)).then(function(e){return e.data})},b=function(e){return p.post(d+"/template/abilityTemplates",i.stringify(e)).then(function(e){return e.data})},f=function(e){return p.post(d+"/template/tree",i.stringify(e)).then(function(e){return e.data})},v=function(e){return p.post(d+"/template/delete",i.stringify(e)).then(function(e){return e.data})},g=function(e){return p.post(d+"/user/getAllUser",i.stringify(e)).then(function(e){return e.data})},y=function(e){return p.post(d+"/bundle/query",i.stringify(e)).then(function(e){return e.data})},_=function(e){return p.post(d+"/bundle/delete",i.stringify(e)).then(function(e){return e.data})},w=function(e){return p.post(d+"/bundle/add",i.stringify(e)).then(function(e){return e.data})},x=function(e){return p.post(d+"/bundle/queryExtraInfo",i.stringify(e)).then(function(e){return e.data})},F=function(e){return p.post(d+"/layernode/queryExtraInfo",i.stringify(e)).then(function(e){return e.data})},k=function(e){return p.post(d+"/bundle/modifyExtraInfo",i.stringify(e)).then(function(e){return e.data})},D=function(e){return p.post(d+"/bundle/getBundleChannels",i.stringify(e)).then(function(e){return e.data})},S=function(e){return p.post(d+"/ability/getBundleAbility",i.stringify(e)).then(function(e){return e.data})},C=function(e){return p.post(d+"/ability/configBundle",i.stringify(e)).then(function(e){return e.data})},N=function(e){return p.post(d+"/resource/queryBundlesOfRole",i.stringify(e)).then(function(e){return e.data})},T=function(e){return p.post(d+"/resource/queryUsersOfRole",i.stringify(e)).then(function(e){return e.data})},I=function(e){return p.post(d+"/resource/queryVirtualResourcesOfRole",i.stringify(e)).then(function(e){return e.data})},E=function(e){return p.post(d+"/resource/submitBundlePrivilege",i.stringify(e)).then(function(e){return e.data})},A=function(e){return p.post(d+"/resource/submitUserresPrivilege",i.stringify(e)).then(function(e){return e.data})},M=function(e){return p.post(d+"/resource/submitVirtualResourcePrivilege",i.stringify(e)).then(function(e){return e.data})},L=function(e){return p.post(d+"/bundle/queryExtraInfo",i.stringify(e)).then(function(e){return e.data})},P=function(e){return p.post(d+"/user/getAllRoles",i.stringify(e)).then(function(e){return e.data})},R=function(e){return p.post(d+"/resource/queryVirtualResourceInfo",i.stringify(e)).then(function(e){return e.data})},O=function(e){return p.post(d+"/layernode/query",i.stringify(e)).then(function(e){return e.data})},$=function(e){return p.post(d+"/layernode/delete",i.stringify(e)).then(function(e){return e.data})},z=function(e){return p.post(d+"/layernode/save",i.stringify(e)).then(function(e){return e.data})},B=function(e){return p.post(d+"/layernode/update",i.stringify(e)).then(function(e){return e.data})},q=function(e){return p.post(d+"/layernode/getNode",i.stringify(e)).then(function(e){return e.data})},U=function(e){return p.post(d+"/folder/query/tree",i.stringify(e)).then(function(e){return e.data})},j=function(e){return p.post(d+"/folder/add",i.stringify(e)).then(function(e){return e.data})},V=function(e){return p.post(d+"/folder/delete",i.stringify(e)).then(function(e){return e.data})},Z=function(e){return p.post(d+"/folder/initTree",i.stringify(e)).then(function(e){return e.data})},W=function(e){return p.post(d+"/folder/changeFolderIndex",i.stringify(e)).then(function(e){return e.data})},Y=function(e){return p.post(d+"/folder/initTreeWithOutMember",i.stringify(e)).then(function(e){return e.data})},G=function(e){return p.post(d+"/folder/modify",i.stringify(e)).then(function(e){return e.data})},H=function(e){return p.post(d+"/folder/setFolderOfBundles",i.stringify(e)).then(function(e){return e.data})},J=function(e){return p.post(d+"/folder/resetFolderOfBundles",i.stringify(e)).then(function(e){return e.data})},Q=function(e){return p.post(d+"/folder/queryBundlesWithoutFolder",i.stringify(e)).then(function(e){return e.data})},X=function(e){return p.post(d+"/folder/queryUsersWithoutFolder",i.stringify(e)).then(function(e){return e.data})},K=function(e){return p.post(d+"/folder/setFolderToUsers",i.stringify(e)).then(function(e){return e.data})},ee=function(e){return p.post(d+"/folder/resetFolderOfUsers",i.stringify(e)).then(function(e){return e.data})},te=function(e){return p.post(d+"/folder/queryRootOptions",i.stringify(e)).then(function(e){return e.data})},ae=function(e){return p.post(d+"/folder/setRoot",i.stringify(e)).then(function(e){return e.data})},le=function(e){return p.post(d+"/folder/resetRootNode",i.stringify(e)).then(function(e){return e.data})},re=function(e){return p.post(d+"/folder/releaseRootNode",i.stringify(e)).then(function(e){return e.data})},oe=function(e){return p.post(d+"/folder/changeNodePosition",i.stringify(e)).then(function(e){return e.data})},ne=function(e){return p.post(d+"/bundle/logout",i.stringify(e)).then(function(e){return e.data})},ie=function(e){return p.post(d+"/bundle/clear",i.stringify(e)).then(function(e){return e.data})},se=function(e){return p.post(d+"/bundle/setAccessLayer",i.stringify(e)).then(function(e){return e.data})},de=function(e){return p.post(d+"/folder/syncToLdap",i.stringify(e)).then(function(e){return e.data})},ce=function(e){return p.post(d+"/folder/syncFromLdap",i.stringify(e)).then(function(e){return e.data})},ue=function(e){return p.post(d+"/folder/cleanUpLdap",i.stringify(e)).then(function(e){return e.data})},pe=function(e){return p.post(d+"/serInfo/querySerInfo",i.stringify(e)).then(function(e){return e.data})},me=function(e){return p.post(d+"/serInfo/querySerNode",i.stringify(e)).then(function(e){return e.data})},he=function(e){return p.post(d+"/serInfo/addSerInfo",i.stringify(e)).then(function(e){return e.data})},be=function(e){return p.post(d+"/serInfo/addSerNode",i.stringify(e)).then(function(e){return e.data})},fe=function(e){return p.post(d+"/serInfo/modifySerInfo",i.stringify(e)).then(function(e){return e.data})},ve=function(e){return p.post(d+"/serInfo/modifySerNode",i.stringify(e)).then(function(e){return e.data})},ge=function(e){return p.post(d+"/serInfo/delSerInfo",i.stringify(e)).then(function(e){return e.data})},ye=function(e){return p.post(d+"/serInfo/delSerNode",i.stringify(e)).then(function(e){return e.data})},_e=function(e){return p.post(d+"/serInfo/cleanUpSerInfo",i.stringify(e)).then(function(e){return e.data})},we=function(e){return p.post(d+"/serInfo/cleanUpSerNode",i.stringify(e)).then(function(e){return e.data})},xe=function(e){return p.post(d+"/serInfo/syncSerNodeFromLdap",i.stringify(e)).then(function(e){return e.data})},Fe=function(e){return p.post(d+"/serInfo/syncSerNodeToLdap",i.stringify(e)).then(function(e){return e.data})},ke=function(e){return p.post(d+"/serInfo/syncSerInfoFromLdap",i.stringify(e)).then(function(e){return e.data})},De=function(e){return p.post(d+"/serInfo/syncSerInfoToLdap",i.stringify(e)).then(function(e){return e.data})},Se=function(e){return p.post(d+"/serInfo/queryFatherNodeOptions",i.stringify(e)).then(function(e){return e.data})},Ce=function(e){return p.post(d+"/serInfo/ldap/backup",i.stringify(e)).then(function(e){return e.data})},Ne=function(e){return p.post(d+"/serInfo/ldap/resume",i.stringify(e)).then(function(e){return e.data})},Te=function(e){return p.post(d+"/bundle/syncFromLdap",i.stringify(e)).then(function(e){return e.data})},Ie=function(e){return p.post(d+"/bundle/syncToLdap",i.stringify(e)).then(function(e){return e.data})},Ee=function(e){return p.post(d+"/bundle/cleanUpLdap",i.stringify(e)).then(function(e){return e.data})},Ae=function(e){return p.post(d+"/user/bind/bundle/query",i.stringify(e)).then(function(e){return e.data})},Me=function(e){return p.post(d+"/user/bind/bundle/bind",i.stringify(e)).then(function(e){return e.data})},Le=function(e){return p.post(d+"/user/bind/bundle/query/encoders",i.stringify(e)).then(function(e){return e.data})},Pe=function(e){return p.post(d+"/user/bind/bundle/query/decoders",i.stringify(e)).then(function(e){return e.data})},Re=function(e){return p.post(d+"/user/bind/bundle/unbind",i.stringify(e)).then(function(e){return e.data})},Oe=function(e){return p.post(d+"/do/logout",i.stringify(e)).then(function(e){return e.data})},$e=function(e){return p.post(d+"/folder/export",e,{responseType:"blob"})},ze=function(e){return p.post(d+"/bundle/export",e,{responseType:"blob"})},Be=function(e){return p.post(d+"/folder/user/export",e,{responseType:"blob"})},qe=function(e){return p.post(d+"/bundle/syncUser",i.stringify(e)).then(function(e){return e.data})},Ue=function(e){return p.get("../../static/data/record.json",i.stringify(e)).then(function(e){return e.data})},je=function(e){return p.post(d+"/vedioCapacity/query",i.stringify(e)).then(function(e){return e.data})},Ve=function(e){return p.post(d+"/vedioCapacity/change/capacity",i.stringify(e)).then(function(e){return e.data})};console.log(u);var Ze=function(e){return p.post(u+"/command/station/bandwidth/query",i.stringify(e)).then(function(e){return e.data})},We=function(e){return p.post(d+"/outland/inland",i.stringify(e)).then(function(e){return e.data})},Ye=function(e){return p.post(d+"/outland/query/outland",i.stringify(e)).then(function(e){return e.data})},Ge=function(e){return p.post(d+"/outland/add/outland",i.stringify(e)).then(function(e){return e.data})},He=function(e){return p.post(d+"/outland/outland/on",i.stringify(e)).then(function(e){return e.data})},Je=function(e){return p.post(d+"/outland/outland/off",i.stringify(e)).then(function(e){return e.data})},Qe=function(e){return p.post(d+"/outland/query/inland",i.stringify(e)).then(function(e){return e.data})},Xe=function(e){return p.post(d+"/outland/outland/change",i.stringify(e)).then(function(e){return e.data})},Ke=function(e){return p.post(d+"/outland/outland/delete",i.stringify(e)).then(function(e){return e.data})},et=function(e){return p.post(d+"/outland/query/outland/bundle",i.stringify(e)).then(function(e){return e.data})}},PPfX:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),r=a.n(l),o=a("P9l9"),n={name:"ConfigBundle",data:function(){return{activeTabName:"ConfigBundle",bundleId:this.$route.query.bundleId,templateTree:[],treeProps:{children:"children",label:"label"},configChannels:[],configEditableAttrs:[]}},methods:{handleTabClick:function(e,t){"ConfigBundle"!==e.name&&this.$router.push("/"+e.name)},displayBundleAbility:function(e){var t=this,a={bundleId:this.bundleId};Object(o.B)(a).then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):(t.templateTree=e.tree,t.configChannels=e.configChannels,t.configEditableAttrs=e.configEditableAttrs)})},submit:function(){var e=this,t={bundleId:this.bundleId,configChannels:r()(this.configChannels),configEditableAttrs:r()(this.configEditableAttrs)};Object(o.l)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.$message({message:"配置成功",type:"success"})})}},mounted:function(){this.displayBundleAbility()}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"资源列表",name:"BundleManage"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"能力配置",name:"ConfigBundle"}})],1),e._v(" "),a("el-card",{staticStyle:{float:"left","margin-left":"50px","margin-top":"10px",width:"40%","min-height":"700px"},attrs:{"body-style":"padding:0px"}},[a("div",{staticStyle:{height:"15px"},attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{float:"left","font-size":"18px"}},[e._v("模板属性")])]),e._v(" "),a("el-tree",{attrs:{data:e.templateTree,props:e.treeProps,"node-key":"label","default-expanded-keys":["channels"]}})],1),e._v(" "),a("el-card",{staticStyle:{float:"left","margin-top":"10px",width:"50%","min-height":"700px"},attrs:{"body-style":"padding:0px"}},[a("div",{staticStyle:{height:"15px"},attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{float:"left","font-size":"18px"}},[e._v("配置")])]),e._v(" "),e._l(e.configChannels,function(t,l){return a("div",{staticStyle:{"margin-top":"10px"}},[a("el-input",{attrs:{placeholder:"请输入整数"},model:{value:t.channelCnt,callback:function(a){e.$set(t,"channelCnt",a)},expression:"channel.channelCnt"}},[a("template",{slot:"prepend"},[e._v(e._s(t.channelName)+" 通道数")])],2)],1)}),e._v(" "),e._l(e.configEditableAttrs,function(t,l){return a("div",{staticStyle:{"margin-top":"10px"}},[a("el-input",{attrs:{placeholder:"请输入字段值"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"editableAttr.value"}},[a("template",{slot:"prepend"},[e._v(e._s(t.name))])],2)],1)}),e._v(" "),a("div",{staticStyle:{"margin-top":"50px"}},[a("el-button",{staticStyle:{"margin-left":"300px"},attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],2)],1)},staticRenderFns:[]};var s=a("VU/8")(n,i,!1,function(e){a("fIJV")},"data-v-a2ee8526",null);t.default=s.exports},Pu6j:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var r=a("VU/8")({name:"channelTemplateManage"},l,!1,function(e){a("eLXE")},"data-v-749b1a3a",null);t.default=r.exports},RH6s:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAIf2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMTItMjlUMTA6MTA6NDIrMDg6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMTItMjlUMTA6MTA6NTQrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTEyLTI5VDEwOjEwOjU0KzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyY2VlOWQ5NS1jODAxLWRkNGMtYTBkMi03ZjIzYTY0NjNiOWMiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpkMDEyZTllMS1hMGY0LTcxNDYtODYyYy02NmMxZGE2MTYyZjciIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozNmIyMDhkNS03MjgxLTU4NDgtOWQ0NC1mYjRjMjZhOGNmMGYiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjM2YjIwOGQ1LTcyODEtNTg0OC05ZDQ0LWZiNGMyNmE4Y2YwZiIgc3RFdnQ6d2hlbj0iMjAxOC0xMi0yOVQxMDoxMDo0MiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTU5MzgyOTktYThjYi1iOTQ0LTllMmUtZGFiMTM2YWZhMjU0IiBzdEV2dDp3aGVuPSIyMDE4LTEyLTI5VDEwOjEwOjU0KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImRlcml2ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImNvbnZlcnRlZCBmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoyY2VlOWQ5NS1jODAxLWRkNGMtYTBkMi03ZjIzYTY0NjNiOWMiIHN0RXZ0OndoZW49IjIwMTgtMTItMjlUMTA6MTA6NTQrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjU1OTM4Mjk5LWE4Y2ItYjk0NC05ZTJlLWRhYjEzNmFmYTI1NCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozNmIyMDhkNS03MjgxLTU4NDgtOWQ0NC1mYjRjMjZhOGNmMGYiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozNmIyMDhkNS03MjgxLTU4NDgtOWQ0NC1mYjRjMjZhOGNmMGYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz431U1NAAABeElEQVQ4jaWUvUodURSFvxuDUVEQ1EIiQkAEK5WYMoW+gGAjhDyAWARCGvMaksYXULAWOy3sDAhiulh4ERUMpBCJooJfitnjnXu98xOy4LCGfdZanLPZZ2oqFTAQ/LtMWKsYeBD8tkz4skoajROW4kVV4f8EzgH9Fbz9wGxZ4GdgJ7gMX4Bd4FNTVU3XhPqgXqqjmTpqPVa2Nqr+Cs94Ws8KNkww32LMC0RdCM96a2CPeqsetTEVBaL+UG/UbvWphzNAF7BVoXet2Aa6gWlozOFwcL3AlIeT4JFs4G1wZ45puSDwVfANNMbmNHiqwJiHyWxG+pZrwAXQAbwB/lQM6yVp0x3JlU1PKLAGDAFf/+F0KyTvfC0ymuawVz1TH9UPOSOSXR9jBk/D+2ywUd+pVyFcVQfbBA2q30Jzpc5k99v9D6eBTWAMuAf2gOPYGwfek0zDT2AROGxy51ynU11Wv0cLUjyq++pSaJ55q/yx+4DX8X0OXBeJ/wJjhre8ye9X2AAAAABJRU5ErkJggg=="},S07q:function(e,t){},TO99:function(e,t){},UOlw:function(e,t,a){"use strict";(function(e){var l=a("P9l9"),r=a("LKA7"),o=a("J/7U");t.a={components:{headerbar:r.default,sidebar:o.default},computed:{routes:function(){return e.antRouter},shortCutsRoutes:function(){return e.shortCutsRouter}},data:function(){return{sysName:"告警与操作日志",active:"",collapsed:!1,sysUserName:"",sysUserAvatar:"",menurouter:!1,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}}},methods:{setActive:function(e){this.active=e},onSubmit:function(){console.log("submit!")},getLoginUserName:function(){var e=this;Object(l.H)().then(function(t){return e.sysUserName=t.userName,t.userName})},storeToken:function(){this.$route.query.token&&sessionStorage.setItem("token",this.$route.query.token)}},mounted:function(){this.active=this.$route.path,this.storeToken(),this.getLoginUserName()}}}).call(t,a("DuR2"))},V1Wp:function(e,t){},V5AO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("BO1k"),r=a.n(l),o=a("mvHQ"),n=a.n(o),i=a("P9l9"),s={name:"ModifyBundle",data:function(){return{activeTabName:"ModifyBundle",bundleId:this.$route.query.bundleId,bundleName:this.$route.query.bundleName,deviceIp:this.$route.query.deviceIp,devicePort:this.$route.query.devicePort,multicastEncode:this.$route.query.multicastEncode,multicastEncodeAddr:this.$route.query.multicastEncodeAddr,multicastDecode:this.$route.query.multicastDecode,extraInfos:[]}},methods:{handleTabClick:function(e,t){"ModifyBundle"!==e.name&&this.$router.push("/"+e.name)},queryBundleExtraInfo:function(){var e=this,t={bundleId:this.bundleId};Object(i._3)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.extraInfos=t.extraInfos})},addExtraInfo:function(){this.extraInfos.push({})},remove:function(e){var t=this.extraInfos.indexOf(e);-1!==t&&this.extraInfos.splice(t,1)},submit:function(){var e=this;if(this.validateExtraInfo()){var t={bundleId:this.bundleId,bundleName:this.bundleName,deviceIp:this.deviceIp,devicePort:this.devicePort,multicastEncode:this.multicastEncode,multicastEncodeAddr:this.multicastEncodeAddr,multicastDecode:this.multicastDecode,extraInfos:n()(this.extraInfos)};Object(i.Z)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.$message({message:"修改成功",type:"success"})})}},validateExtraInfo:function(){var e=!0,t=!1,a=void 0;try{for(var l,o=r()(this.extraInfos);!(e=(l=o.next()).done);e=!0){var n=l.value;if(!n.name||!n.value)return this.$message({message:"扩展字段不能为空",type:"error"}),!1}}catch(e){t=!0,a=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw a}}return!0}},mounted:function(){this.queryBundleExtraInfo()}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"资源列表",name:"BundleManage"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"修改资源",name:"ModifyBundle"}})],1),e._v(" "),a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{size:"small",label:"设备名称",prop:"bundleName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入新的设备名称"},model:{value:e.bundleName,callback:function(t){e.bundleName=t},expression:"bundleName"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"设备IP",prop:"deviceIp"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入新的设备IP"},model:{value:e.deviceIp,callback:function(t){e.deviceIp=t},expression:"deviceIp"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"设备端口",prop:"devicePort"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入新的设备端口"},model:{value:e.devicePort,callback:function(t){e.devicePort=t},expression:"devicePort"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"编码组播"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.multicastEncode,callback:function(t){e.multicastEncode=t},expression:"multicastEncode"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"编码组播地址"}},[e.multicastEncode?a("el-input",{staticStyle:{width:"200px"},model:{value:e.multicastEncodeAddr,callback:function(t){e.multicastEncodeAddr=t},expression:"multicastEncodeAddr"}}):a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:e.multicastEncodeAddr,callback:function(t){e.multicastEncodeAddr=t},expression:"multicastEncodeAddr"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"解码组播"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.multicastDecode,callback:function(t){e.multicastDecode=t},expression:"multicastDecode"}})],1),e._v(" "),a("el-button",{staticStyle:{"margin-top":"20px","margin-left":"30px"},attrs:{type:"info",size:"small"},on:{click:e.addExtraInfo}},[e._v("新增扩展字段")]),e._v(" "),e._l(e.extraInfos,function(t,l){return a("div",{staticStyle:{"margin-top":"10px"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"扩展字段名"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"extraInfo.name"}}),e._v(" "),a("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{size:"small",placeholder:"扩展字段值"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"extraInfo.value"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"danger"},on:{click:function(a){return a.preventDefault(),e.remove(t)}}},[e._v("删除")])],1)}),e._v(" "),a("div",{staticStyle:{"margin-top":"30px","margin-left":"30px"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],2)],1)},staticRenderFns:[]};var c=a("VU/8")(s,d,!1,function(e){a("91nF")},"data-v-0269849e",null);t.default=c.exports},VNDC:function(e,t){},VZrM:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={render:function(){var e=this.$createElement;return(this._self._c||e)("section",[this._v("\n\tmain\n")])},staticRenderFns:[]};var r=a("VU/8")({},l,!1,function(e){a("S07q")},"data-v-277274fc",null);t.default=r.exports},VeA1:function(e,t){},XvCJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("0nep");var l={name:"sidebarItem",props:{item:{type:Object,required:!0},menurouter:{type:Boolean,required:!0}},methods:{menuClick:function(e){window.location.href=e.link}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.menurouter?a("div",[e.item.children?a("div",{staticClass:"aaa"},[0==e.item.children.length?[a("el-menu-item",{attrs:{index:e.item.path}},[a("i",{class:e.item.meta.icon}),e._v(" "),a("span",{staticStyle:{"padding-left":"4px"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.item.name))])])]:a("el-submenu",{attrs:{index:e.item.path}},[a("template",{slot:"title"},[a("i",{class:e.item.meta.icon}),e._v(" "),a("span",{staticStyle:{"padding-left":"4px"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.item.name))])]),e._v(" "),e._l(e.item.children,function(t){return t.hidden?e._e():[t.children&&t.children.length>0?a("sidebar-item",{attrs:{item:t,menurouter:e.menurouter}}):a("el-menu-item",{attrs:{index:t.path}},[a("i",{class:t.meta.icon}),e._v(" "),a("span",{staticStyle:{"padding-left":"4px"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])])]})],2)],2):a("el-menu-item",{attrs:{index:e.item.path}},[a("i",{class:e.item.meta.icon}),e._v(" "),a("span",{staticStyle:{"padding-left":"4px"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.item.name))])])],1):a("div",[e.item.sub?a("div",{staticClass:"bbb"},[0==e.item.sub.length?[a("el-menu-item",{attrs:{index:e.item.path},on:{click:function(t){return e.menuClick(e.item)}}},[a("i",{class:e.item.icon,style:e.item.style}),e._v(" "),a("span",{staticStyle:{"padding-left":"4px"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.item.title))])])]:a("el-submenu",{attrs:{index:e.item.path}},[a("template",{slot:"title"},[a("i",{class:e.item.icon,style:e.item.style}),e._v(" "),a("span",{staticStyle:{"padding-left":"4px"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.item.title))])]),e._v(" "),e._l(e.item.sub,function(t){return[t.sub&&t.sub.length>0?a("sidebar-item",{attrs:{item:t,menurouter:e.menurouter}}):a("el-menu-item",{attrs:{index:t.path},on:{click:function(a){return e.menuClick(t)}}},[a("i",{class:t.icon,style:e.item.style}),e._v(" "),a("span",{staticStyle:{"padding-left":"4px"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])])]})],2)],2):a("el-menu-item",{attrs:{index:e.item.path},on:{click:function(t){return e.menuClick(e.item)}}},[a("i",{class:e.item.icon,style:e.item.style}),e._v(" "),a("span",{staticStyle:{"padding-left":"4px"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.item.title))])])],1)},staticRenderFns:[]},o=a("VU/8")(l,r,!1,null,null,null);t.default=o.exports},YaEn:function(e,t,a){"use strict";var l=a("7+uW"),r=a("/ocq");l.default.use(r.a);t.a=new r.a({routes:[]})},c4M8:function(e,t){},cpB7:function(e,t){},dLi2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),r=a.n(l),o=a("BO1k"),n=a.n(o),i=a("P9l9"),s=a("/Qkj"),d=document.location.origin,c={components:{selectLayerNode:s.default},data:function(){return{activeTabName:"BundleManage",resources:[],deviceModelOptions:[],filters:{deviceModel:"",keyword:"",userId:"",sourceType:"",countPerPage:""},users:[],resourceTableLoading:!1,detailDialogVisible:!1,abilityDetailDialogVisible:!1,setAccessLayerVisible:!1,confirmSyncToLdapVisible:!1,detailInfos:[],channelSchemes:[],total:0,pageNum:1,countPerPage:20,currentRow:{},bundleId:"",newAccessNodeUid:"",uploadUrl:d+"/bundle/import",myHeaders:{"tetris-001":sessionStorage.getItem("token")},sourceTypeOptions:[{value:"",label:"全部来源"},{value:"SYSTEM",label:"BVC"},{value:"EXTERNAL",label:"LDAP"}],multipleSelection:[]}},methods:{pageChange:function(){this.getResources(this.pageNum)},handleSelectLayerNode:function(){this.$refs.selectLayerNode.show()},layerNodeSelected:function(e,t){this.newAccessNodeUid=e.nodeUid,t()},handleTabClick:function(e,t){"BundleManage"!==e.name&&this.$router.push("/"+e.name)},getAllUsers:function(){var e=this;Object(i.A)().then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.users=[],e.users.push({id:-1,name:"全部用户"}),e.users=e.users.concat(t.users))})},getDeviceModels:function(){var e=this;Object(i.G)().then(function(t){if(!t.errMsg&&t.deviceModels){e.deviceModelOptions.push({value:"",label:"全部类型"});var a=!0,l=!1,r=void 0;try{for(var o,i=n()(t.deviceModels);!(a=(o=i.next()).done);a=!0){var s=o.value,d={value:s,label:s};e.deviceModelOptions.push(d)}}catch(e){l=!0,r=e}finally{try{!a&&i.return&&i.return()}finally{if(l)throw r}}}})},getResources:function(e){var t=this;this.countPerPage=20,/^[1-9]+[0-9]*]*$/.test(this.filters.countPerPage)&&(this.countPerPage=parseInt(this.filters.countPerPage)),this.countPerPage*(e-1)>this.total&&(e=Math.ceil(this.total/this.countPerPage));var a={deviceModel:this.filters.deviceModel,keyword:this.filters.keyword,sourceType:this.filters.sourceType,userId:this.filters.userId,pageNum:e,countPerPage:this.countPerPage};this.resourceTableLoading=!0,Object(i.E)(a).then(function(a){a.errMsg?t.$message({message:a.errMsg,type:"error"}):(t.pageNum=e,t.total=a.total,t.resources=a.resources),t.resourceTableLoading=!1})},handleCurrentPageChange:function(e){this.pageNum=e,this.getResources(this.pageNum)},handleDetail:function(e){var t=this;this.resourceTableLoading=!0;var a={bundleId:e.bundleId};Object(i.D)(a).then(function(a){a.errMsg?t.$message({message:a.errMsg,type:"error"}):(t.detailDialogVisible=!0,t.detailInfos=a.extraInfos,t.detailInfos.push({name:"bundle_id",value:e.bundleId})),t.resourceTableLoading=!1})},handleModify:function(e){console.log(r()(e)),this.$router.push({path:"/ModifyBundle",query:{bundleId:e.bundleId,bundleName:e.bundleName,deviceIp:e.deviceAddr.deviceIp,devicePort:e.deviceAddr.devicePort,multicastEncode:e.multicastEncode,multicastEncodeAddr:e.multicastEncodeAddr,multicastDecode:e.multicastDecode}})},handleLogout:function(e){var t=this;this.resourceTableLoading=!0;var a={bundleId:e.bundleId};Object(i.Y)(a).then(function(a){a.errMsg?t.$message({message:a.errMsg,type:"error"}):(e.onlineStatus="OFFLINE",t.$message({message:"踢出账号成功",type:"success"})),t.resourceTableLoading=!1})},handleClear:function(e){var t=this;this.$confirm("重置资源将会清空资源上的能力占用，是否确认?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.resourceTableLoading=!0;var a={bundleId:e.bundleId};Object(i.k)(a).then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):t.$message({message:"重置成功",type:"success"}),t.resourceTableLoading=!1})}).catch(function(){t.$message({type:"info",message:"已取消重置"})})},handleDelete:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.resourceTableLoading=!0;var a={bundleIds:e.bundleId};Object(i.p)(a).then(function(e){t.resourceTableLoading=!1,e.errMsg?t.$message({message:e.errMsg,type:"error"}):(t.$message({message:"删除成功",type:"success"}),t.getResources(1))})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},abilityConfig:function(e){this.$router.push({path:"/ConfigBundle",query:{bundleId:e.bundleId}})},abilityDetail:function(e){var t=this,a={bundleId:e.bundleId};this.resourceTableLoading=!0,Object(i.C)(a).then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):(t.abilityDetailDialogVisible=!0,t.channelSchemes=e.channelSchemes),t.resourceTableLoading=!1})},handleSetLayerId:function(e){this.currentRow=e,this.bundleId=e.bundleId,this.newAccessNodeUid=e.accessNodeUid,this.setAccessLayerVisible=!0},submitSetAccessLayer:function(){var e=this,t={bundleId:this.bundleId,accessLayerId:this.newAccessNodeUid};Object(i._24)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.currentRow.accessNodeUid=e.newAccessNodeUid,e.$message({message:"设置接入成功",type:"success"})),e.setAccessLayerVisible=!1})},showMultiSetAccessLayerDialog:function(){if(this.multipleSelection.length){var e=[],t=!0,a=!1,l=void 0;try{for(var r,o=n()(this.multipleSelection);!(t=(r=o.next()).done);t=!0){var i=r.value;e.push(i.bundleId)}}catch(e){a=!0,l=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw l}}this.bundleId=e.join(","),console.log("bundleIds=="+this.bundleId),this.newAccessNodeUid="",this.setAccessLayerVisible=!0}else this.$message({message:"请至少选择一行",type:"warning"})},exportBundle:function(){var e=this;Object(i.w)(null).then(function(e){var t=new Blob([e.data],{type:"application/octet-stream;charset=utf-8"}),a=document.createElement("a");a.download="folder.csv",a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}).catch(function(t){e.$message({message:t,type:"error"})})},uploadSuccess:function(e){e.errMsg?this.$message({message:e.errMsg,type:"error"}):(e.successCnt?this.$message({message:"成功导入的设备数量："+e.successCnt,type:"success"}):this.$message({message:"导入失败",type:"error"}),this.getResources(1))},uploadError:function(e){this.$message({message:"上传文件错误: "+r()(e),type:"error"})},onprogress:function(){this.resourceTableLoading=!0},handleMultiDelete:function(){var e=this;this.multipleSelection.length?this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.resourceTableLoading=!0;var t=[],a=!0,l=!1,r=void 0;try{for(var o,s=n()(e.multipleSelection);!(a=(o=s.next()).done);a=!0){var d=o.value;t.push(d.bundleId)}}catch(e){l=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(l)throw r}}var c={bundleIds:t.join(",")};Object(i.p)(c).then(function(t){e.resourceTableLoading=!1,t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"删除成功",type:"success"}),e.getResources(1))})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message({message:"请至少选择一行",type:"warning"})},syncUser:function(){var e=this;this.$confirm("是否确认同步用户资源?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.resourceTableLoading=!0,Object(i._40)(null).then(function(t){e.resourceTableLoading=!1,t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"同步成功",type:"success"}),e.getResources(1))})}).catch(function(){e.$message({type:"info",message:"已取消同步"})})},handleSelectionChange:function(e){this.multipleSelection=e},handleSyncFromLdap:function(){var e=this;this.$confirm("确认将从LDAP服务器同步下载信息么？","提示",{}).then(function(){e.resourceTableLoading=!0;Object(i._33)({}).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"同步成功, 共下载"+t.successCnt+"条信息",type:"success"}),e.getResources(1))}),e.resourceTableLoading=!1})},showHandleSyncToLdapDialog:function(){this.confirmSyncToLdapVisible=!0},handleSyncToLdap:function(e){var t=this;this.resourceTableLoading=!0;var a={syncAll:e};Object(i._32)(a).then(function(e){null!==e.errMsg&&""!==e.errMsg?t.$message({message:e.errMsg,type:"error",duration:3e3}):(t.$message({message:"同步成功, 共上传"+e.successCnt+"条信息",type:"success"}),t.getResources(1)),t.confirmSyncToLdapVisible=!1}),this.resourceTableLoading=!1},handleCleanUpLdap:function(){var e=this;this.$confirm("确认清空所有上传到LDAP和从LDAP下载的信息么？","提示",{}).then(function(){e.resourceTableLoading=!0;Object(i.g)({}).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"重置成功",type:"success"}),e.getResources(1))}),e.resourceTableLoading=!1})}},mounted:function(){var e=this;if(this.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/BundleManage")}),this.getDeviceModels(),this.getAllUsers(),this.getResources(1),-1!==this.uploadUrl.indexOf("__requestIP__")){var t=document.location.host.split(":")[0];this.uploadUrl=this.uploadUrl.replace("__requestIP__",t)}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"资源列表",name:"BundleManage"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"添加资源",name:"AddBundle"}})],1),e._v(" "),a("div",{staticStyle:{float:"left",width:"100%"}},[a("el-select",{staticStyle:{float:"left","margin-left":"5px",width:"180px"},attrs:{size:"small",placeholder:"选择类型"},model:{value:e.filters.deviceModel,callback:function(t){e.$set(e.filters,"deviceModel",t)},expression:"filters.deviceModel"}},e._l(e.deviceModelOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{staticStyle:{float:"left","margin-left":"10px",width:"180px"},attrs:{size:"small",placeholder:"选择来源"},model:{value:e.filters.sourceType,callback:function(t){e.$set(e.filters,"sourceType",t)},expression:"filters.sourceType"}},e._l(e.sourceTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{staticStyle:{float:"left","margin-left":"10px",width:"200px"},attrs:{size:"small",filterable:"",placeholder:"选择用户"},model:{value:e.filters.userId,callback:function(t){e.$set(e.filters,"userId",t)},expression:"filters.userId"}},e._l(e.users,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("el-input",{staticStyle:{float:"left","margin-left":"15px",width:"200px"},attrs:{size:"small",placeholder:"关键字"},model:{value:e.filters.keyword,callback:function(t){e.$set(e.filters,"keyword",t)},expression:"filters.keyword"}}),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{size:"small"},on:{click:function(t){return e.getResources(1)}}},[e._v("查询")]),e._v(" "),a("el-dropdown",{staticStyle:{float:"left","margin-left":"20px"}},[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("\n        LDAP操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.showHandleSyncToLdapDialog()}}},[e._v("上传到LDAP")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(t){return e.handleSyncFromLdap()}}},[e._v("从LDAP下载")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(t){return e.handleCleanUpLdap()}}},[e._v("重置LDAP数据")])],1)],1),e._v(" "),a("el-upload",{staticClass:"upload-demo",staticStyle:{float:"left","margin-left":"10px"},attrs:{action:e.uploadUrl,name:"filePoster",headers:e.myHeaders,"show-file-list":!1,"on-success":e.uploadSuccess,"on-error":e.uploadError,"on-progress":e.onprogress}},[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("导入")])],1),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:e.exportBundle}},[e._v("导出\n    ")]),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:e.showMultiSetAccessLayerDialog}},[e._v("批量设置接入\n    ")]),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"danger",size:"small"},on:{click:e.handleMultiDelete}},[e._v("\n      批量删除\n    ")]),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"danger",size:"small"},on:{click:e.syncUser}},[e._v("\n      同步用户\n    ")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.resourceTableLoading,expression:"resourceTableLoading"}],staticStyle:{float:"left",width:"100%","margin-top":"20px"},attrs:{data:e.resources},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{width:"50",type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bundleName",label:"名称",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceModel",label:"类型",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"bundleAlias",label:"别名",width:"130",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"设备账号",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accessNodeUid",label:"所属接入层",width:"220",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{width:"100",label:"在线状态"},scopedSlots:e._u([{key:"default",fn:function(e){return["ONLINE"==e.row.onlineStatus?a("div",{staticStyle:{height:"20px",width:"20px","border-radius":"50%","background-color":"#0f0"}}):a("div",{staticStyle:{height:"20px",width:"20px","border-radius":"50%","background-color":"#f00"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100",label:"锁定状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["IDLE"==t.row.lockStatus?a("div",[e._v("空闲")]):"BUSY"==t.row.lockStatus?a("div",[e._v("锁定")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100",label:"来源"},scopedSlots:e._u([{key:"default",fn:function(t){return["EXTERNAL"==t.row.sourceType?a("div",[e._v("LDAP")]):a("div",[e._v("BVC")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDetail(t.row)}}},[e._v("详情")]),e._v(" "),"EXTERNAL"!=t.row.sourceType?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleModify(t.row)}}},[e._v("修改")]):e._e(),e._v(" "),"EXTERNAL"!=t.row.sourceType?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleSetLayerId(t.row)}}},[e._v("设置接入")]):e._e(),e._v(" "),"EXTERNAL"!=t.row.sourceType?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClear(t.row)}}},[e._v("重置")]):e._e(),e._v(" "),"EXTERNAL"!=t.row.sourceType?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"能力",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return["EXTERNAL"!=t.row.sourceType?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.abilityConfig(t.row)}}},[e._v("配置")]):e._e(),e._v(" "),"EXTERNAL"!=t.row.sourceType?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.abilityDetail(t.row)}}},[e._v("通道信息")]):e._e()]}}])})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-input",{staticStyle:{float:"right","margin-right":"30px",width:"200px"},attrs:{size:"small",placeholder:"单页显示数量,默认20"},on:{change:e.pageChange},model:{value:e.filters.countPerPage,callback:function(t){e.$set(e.filters,"countPerPage",t)},expression:"filters.countPerPage"}}),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","current-page":e.pageNum,"page-size":e.countPerPage,total:e.total},on:{"current-change":e.handleCurrentPageChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"详情",visible:e.detailDialogVisible,width:"30%"},on:{"update:visible":function(t){e.detailDialogVisible=t}}},[a("ul",e._l(e.detailInfos,function(t){return a("li",[e._v("\n        "+e._s(t.name)+" : "+e._s(t.value)+"\n      ")])}),0)]),e._v(" "),a("el-dialog",{attrs:{title:"能力详情",visible:e.abilityDetailDialogVisible,width:"40%"},on:{"update:visible":function(t){e.abilityDetailDialogVisible=t}}},[a("el-table",{attrs:{data:e.channelSchemes}},[a("el-table-column",{attrs:{property:"channelId",label:"通道ID",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{property:"channelName",label:"通道类型",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{width:"150",label:"通道状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["IDLE"==t.row.channelStatus?a("div",[e._v("空闲")]):"BUSY"==t.row.channelStatus?a("div",[e._v("锁定")]):"OFFLINE"==t.row.channelStatus?a("div",[e._v("掉线")]):a("div",[e._v("未知")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"设置接入",visible:e.setAccessLayerVisible,width:"30%"},on:{"update:visible":function(t){e.setAccessLayerVisible=t}}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"输入接入层ID",readOnly:""},nativeOn:{click:function(t){return e.handleSelectLayerNode(t)}},model:{value:e.newAccessNodeUid,callback:function(t){e.newAccessNodeUid=t},expression:"newAccessNodeUid"}},[a("template",{slot:"prepend"},[e._v("接入层ID")])],2)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"30px"}},[a("el-button",{staticStyle:{"margin-left":"150px"},attrs:{type:"primary"},on:{click:function(t){return e.submitSetAccessLayer()}}},[e._v("提交")])],1)]),e._v(" "),a("el-dialog",{staticStyle:{"margin-top":"260px"},attrs:{title:"提示",visible:e.confirmSyncToLdapVisible,width:"500px"},on:{"update:visible":function(t){e.confirmSyncToLdapVisible=t}}},[a("div",[e._v("\n      确认上传信息到LDAP服务器上么？\n    ")]),e._v(" "),a("div",{staticStyle:{"margin-top":"40px"}},[a("el-button",{staticStyle:{"margin-left":"130px"},attrs:{size:"small"},on:{click:function(t){e.confirmSyncToLdapVisible=!1}}},[e._v("取 消\n      ")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleSyncToLdap("false")}}},[e._v("\n        只上传未同步信息\n      ")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleSyncToLdap("true")}}},[e._v("\n        上传全部信息\n      ")])],1)]),e._v(" "),[a("selectLayerNode",{ref:"selectLayerNode",on:{"layer-node-selected":e.layerNodeSelected}})]],2)},staticRenderFns:[]};var p=a("VU/8")(c,u,!1,function(e){a("V1Wp")},null,null);t.default=p.exports},eLXE:function(e,t){},eqvY:function(e,t,a){"use strict";var l=a("+H76"),r=a("j7e0"),o=a("VZrM"),n=a("4vq3"),i=a("BXv7"),s=a("qoXU"),d=a("Pu6j"),c=a("dLi2"),u=a("ifcc"),p=a("V5AO"),m=a("PPfX"),h=a("IZ07"),b=a("EUih"),f=a("snKp"),v=a("kCLY"),g=a("HV9H"),y=a("r1Id"),_=a("bOdI"),w=a.n(_),x=a("P9l9"),F={data:function(){var e;return e={filterText:"",recordMode:"",date:"",currentPage:1,tasks:[],filterDatas:[],pageSize:5,total:0,stopId:"",Mode:"手动",activeName:"0",inputName:"",inputDevice:""},w()(e,"date",""),w()(e,"startMonth",""),w()(e,"endMonth",""),w()(e,"inputBit",""),w()(e,"dialogFormVisible",!1),w()(e,"treeLoading",!1),w()(e,"tree",[]),w()(e,"defaultProps",{children:"children",label:"name"}),w()(e,"defaultExpandKeys",[]),w()(e,"currentSelectNode",null),w()(e,"expandNodeKeysArr",[]),e},computed:{pageData:function(){return this.filterDatas.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)}},methods:{handleCurrentChange:function(e){this.currentPage=e},handleDeviceDia:function(){this.initTree(),this.dialogFormVisible=!0},search:function(){var e=this.recordMode,t=this.filterText,a=this.date;this.currentPage;this.filterData(this.tasks,e,t,a)},filterData:function(e,t,a,l){var r,o=this,n=this.format(l[0]),i=this.format(l[1]);(t||a||l)&&(t&&(r=e.filter(function(e){return e.type.indexOf(t)>-1})),a&&(r=e.filter(function(e){return e.fileName.indexOf(a)>-1})),l&&(r=e.filter(function(e){return o.nowInDateBetwen(n,i,e.date)})),o.filterDatas=r)},nowInDateBetwen:function(e,t,a){if(e&&t&&a){var l=new Date(e.replace(/-/g,"/")),r=new Date(t.replace(/-/g,"/")),o=new Date(a.replace(/-/g,"/")),n=o.getTime()-l.getTime(),i=Math.floor(n/864e5),s=r.getTime()-o.getTime(),d=Math.floor(s/864e5);return!(d<0)&&!(i<0)}},submit:function(){var e,t;this.inputName?("定时"===this.Mode||"循环"===this.Mode?(e=this.format(this.startMonth),t=this.format(this.endMonth)):"排期"===this.Mode&&(e=this.format(this.date[0]),t=this.format(this.date[1])),this.filterDatas.push({type:this.Mode,fileName:this.inputName,startTime:e,endTime:t,mode:this.Mode,videoSource:"buzhiddao",audioSource:"kdsdfks",size:this.inputBit}),this.$message("创建录制任务成功,请到录制列表查看"),this.Mode="",this.inputName="",this.date="",this.startMonth="",this.endMonth="",this.inputBit=""):this.$message.warning("名称不能为空！")},delTask:function(e){this.filterDatas=this.filterDatas.filter(function(t){return t.id!=e.id})},stopTask:function(e){e.status="未开始"},startTask:function(e){e.status="录制中"},downLoadTask:function(e){alert("该任务下无导出数据！")},refreshRecord:function(){var e=this;e.tasks.splice(0,e.tasks.length),Object(x.K)().then(function(t){var a=t.rows,l=t.total;if(a&&a.length>0){for(var r=0;r<a.length;r++)e.tasks.push(a[r]),e.filterDatas.push(a[r]);e.total=l}})},format:function(e){if(e){e=(e=e.toString()).replace(/ GMT.+$/,"");for(var t=new Date(e),a=[t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()],l=0,r=a.length;l<r;l++)a[l]<10&&(a[l]="0"+a[l]);return e=a[0]+"-"+a[1]+"-"+a[2]+" "+a[3]+":"+a[4]+":"+a[5]}},initTree:function(e){var t=this;this.treeLoading=!0,Object(x.S)().then(function(e){e.errMsg?(t.$message({message:e.errMsg,type:"error"}),t.treeLoading=!1):(t.tree=e.tree,t.treeLoading=!1)})},handleNodeClick:function(e){console.log(e),e.children||(console.log(e.name),this.inputDevice=e.name,this.dialogFormVisible=!1)}},mounted:function(){this.refreshRecord()}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"record"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"录制列表",name:"0"}},[a("div",{staticClass:"search"},[a("el-input",{staticStyle:{width:"300px",border:"0"},attrs:{placeholder:"输入录制任务名"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.recordMode,callback:function(t){e.recordMode=t},expression:"recordMode"}},[a("el-option",{attrs:{value:"",label:""}}),e._v(" "),a("el-option",{attrs:{value:"手动",label:"手动录制"}},[e._v("手动录制")]),e._v(" "),a("el-option",{attrs:{value:"排期",label:"排期录制"}},[e._v("排期录制")]),e._v(" "),a("el-option",{attrs:{value:"定时",label:"定时录制"}},[e._v("定时录制")]),e._v(" "),a("el-option",{attrs:{value:"循环",label:"循环录制"}},[e._v("循环录制")])],1),e._v(" "),"手动"!=e.recordMode?a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}):e._e(),e._v(" "),a("el-button",{attrs:{type:"default"},on:{click:e.search}},[e._v("搜索")])],1),e._v(" "),[a("el-table",{attrs:{data:e.pageData}},[a("el-table-column",{attrs:{prop:"fileName",label:"录制任务名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"录制模式"}},[void 0],2),e._v(" "),a("el-table-column",{attrs:{prop:"videoSource",label:"录制设备"}}),e._v(" "),a("el-table-column",{attrs:{prop:"startTime",label:"开始时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"0","font-size":"20px"},attrs:{type:"text",title:"导出"}},[a("span",{staticClass:"feather-icon-log-out",on:{click:function(a){return e.downLoadTask(t.row)}}})]),e._v(" "),"录制中"==t.row.status?a("el-button",{staticStyle:{padding:"0","font-size":"20px"},attrs:{type:"text",title:"停止"}},[a("span",{staticClass:"feather-icon-pause-circle",on:{click:function(a){return e.stopTask(t.row)}}})]):[a("el-button",{staticStyle:{padding:"0","font-size":"20px"},attrs:{type:"text",title:"开始录制"}},[a("span",{staticClass:"feather-icon-youtube",on:{click:function(a){return e.startTask(t.row)}}})]),e._v(" "),a("el-button",{staticStyle:{padding:"0","font-size":"20px"},attrs:{type:"text",title:"删除"}},[a("span",{staticClass:"icon-trash",on:{click:function(a){return e.delTask(t.row)}}})])]]}}])})],1)],e._v(" "),a("div",{staticStyle:{"text-align":"right","background-color":"#f2f2f2"}},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,"pager-count":5,layout:"total, prev, pager, next",total:e.filterDatas.length},on:{"current-change":e.handleCurrentChange}})],1)],2),e._v(" "),a("el-tab-pane",{attrs:{label:"添加录制任务",name:"1"}},[a("div",{staticStyle:{height:"50px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.Mode,callback:function(t){e.Mode=t},expression:"Mode"}},[a("el-option",{attrs:{value:"手动",label:"手动录制"}},[e._v("手动录制")]),e._v(" "),a("el-option",{attrs:{value:"排期",label:"排期录制"}},[e._v("排期录制")]),e._v(" "),a("el-option",{attrs:{value:"定时",label:"排期录制"}},[e._v("定时录制")]),e._v(" "),a("el-option",{attrs:{value:"循环",label:"排期录制"}},[e._v("循环录制")])],1)],1),e._v(" "),a("el-input",{staticStyle:{margin:"10px 0"},attrs:{placeholder:"请选择录制设备"},nativeOn:{click:function(t){return e.handleDeviceDia(t)}},model:{value:e.inputDevice,callback:function(t){e.inputDevice=t},expression:"inputDevice"}}),e._v(" "),a("el-input",{staticStyle:{margin:"10px 0"},attrs:{placeholder:"请输入录制任务名"},model:{value:e.inputName,callback:function(t){e.inputName=t},expression:"inputName"}}),e._v(" "),"循环"===e.Mode?a("el-input",{staticStyle:{margin:"10px 0"},attrs:{placeholder:"请输入磁盘大小"},model:{value:e.inputBit,callback:function(t){e.inputBit=t},expression:"inputBit"}}):e._e(),e._v(" "),"排期"===e.Mode?a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}):e._e(),e._v(" "),"定时"==e.Mode||"循环"===e.Mode?a("div",[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"12:00:00"},model:{value:e.startMonth,callback:function(t){e.startMonth=t},expression:"startMonth"}}),e._v(" "),a("span",[e._v("至")]),e._v(" "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"12:00:00"},model:{value:e.endMonth,callback:function(t){e.endMonth=t},expression:"endMonth"}})],1):e._e(),e._v(" "),a("div",{staticStyle:{margin:"10px 0",height:"50px",width:"95%","box-sizing":"border-box"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submit}},[e._v("确定提交")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"录像设备",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],staticClass:"custom-tree-container"},[a("div",[a("el-tree",{ref:"tree",attrs:{data:e.tree,"default-expand-all":"","node-key":"id","highlight-current":"","expand-on-click-node":!1,props:e.defaultProps},on:{"node-click":e.handleNodeClick}})],1)]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})])],1)},staticRenderFns:[]};var D=a("VU/8")(F,k,!1,function(e){a("TO99")},"data-v-1f9af9a2",null).exports,S={data:function(){return{tableData:[{id:1,date:"2020-05-02",name:"联试联调",address:"上海市普陀区金沙江路 1518 弄"},{id:2,date:"2020-08-04",name:"05-XXX",address:"上海市普陀区金沙江路 1517 弄"}],formLabelAlign:{name:"",time:"",address:""},activeName:"0",showBtn:!0,row:"",curTask:"05-XXX",curId:2}},methods:{createTask:function(){var e=this;e.showBtn?(this.tableData.push({date:e.formLabelAlign.time,name:e.formLabelAlign.name,address:e.formLabelAlign.address}),this.$message("创建任务成功,请到任务列表查看")):(console.log(e.row),console.log("xiugai"),this.tableData.forEach(function(t,a){t.id==e.row.id&&(console.log(t),t.name=e.formLabelAlign.name,t.date=e.formLabelAlign.time,t.address=e.formLabelAlign.address)}),console.log(e.tableData)),e.formLabelAlign.time="",e.formLabelAlign.name="",e.formLabelAlign.address=""},cancel:function(){self.formLabelAlign.time="",self.formLabelAlign.name="",self.formLabelAlign.address=""},handleEdit:function(e){this.activeName="1",this.row=e,this.formLabelAlign.time=e.date,this.formLabelAlign.name=e.name,this.formLabelAlign.address=e.address,this.showBtn=!1},setCur:function(e){this.curTask=e.name,this.curId=e.id},tableRowClass:function(e){var t=e.row;e.rowIndex;if(t.id==this.curId)return"success-row"},deleteRow:function(e){this.tableData=this.tableData.filter(function(t){return t.id!=e.id})}}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"curTask"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"任务列表",name:"0"}},[a("p",[e._v("当前任务："+e._s(e.curTask))]),e._v(" "),a("el-table",{attrs:{data:e.tableData,"row-class-name":e.tableRowClass}},[a("el-table-column",{attrs:{prop:"name",label:"任务名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"开始时间",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id!=e.curId?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.setCur(t.row)}}},[e._v("设为当前任务")]):a("el-tag",{attrs:{type:"success"}},[e._v("这条数据是当前任务")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.row.id!=e.curId,expression:"scope.row.id!=curId"}],attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteRow(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"添加任务",name:"1"}},[a("el-form",{attrs:{"label-width":"80px",model:e.formLabelAlign}},[a("el-form-item",{attrs:{label:"任务名称"}},[a("el-input",{model:{value:e.formLabelAlign.name,callback:function(t){e.$set(e.formLabelAlign,"name",t)},expression:"formLabelAlign.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开始时间"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.formLabelAlign.time,callback:function(t){e.$set(e.formLabelAlign,"time",t)},expression:"formLabelAlign.time"}})],1),e._v(" "),a("el-form-item",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showBtn,expression:"showBtn"}],attrs:{type:"primary"},on:{click:e.createTask}},[e._v("创建任务")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.showBtn,expression:"!showBtn"}],attrs:{type:"primary"},on:{click:e.createTask}},[e._v("修改任务")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消创建")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var N=a("VU/8")(S,C,!1,function(e){a("lqyR")},null,null).exports,T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"层节点列表",name:"LwLayernodeManage"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"网管",name:"LwNetIframe"}})],1),e._v(" "),a("iframe",{attrs:{src:e.netUrl,frameborder:"0",width:"100%",height:"100%"}})],1)},staticRenderFns:[]};var I=a("VU/8")({name:"NetIframe",data:function(){return{netUrl:"",activeTabName:"LwNetIframe"}},created:function(){this.netUrl=this.$route.query.netUrl},methods:{handleTabClick:function(e,t){"NetIframe"!==e.name&&this.$router.push("/"+e.name)}},mounted:function(){var e=this;this.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/LwLayernodeManage")})}},T,!1,function(e){a("iVmd")},null,null).exports,E=a("BO1k"),A=a.n(E),M={data:function(){return{activeTabName:"LwLayernodeManage",nodes:[],typeOptions:[{value:"",label:"全部类型"},{label:"终端设备节点",value:"ACCESS_JV210"},{label:"存储设备节点",value:"ACCESS_CDN"}],typeObj:{ACCESS_JV210:"终端设备节点",ACCESS_CDN:"存储设备节点"},filters:{type:"",keyword:""},nodeTableLoading:!1,multipleSelection:[]}},methods:{gotoMonitor:function(e){window.open(e.monitorUrl)},gotoAdmin:function(e){this.$router.push({path:"/LwNetIframe",query:{netUrl:e.netUrl}})},handleTabClick:function(e,t){"LwLayernodeManage"!==e.name&&this.$router.push("/"+e.name)},getNodes:function(){var e=this,t={type:this.filters.type,keyword:this.filters.keyword};this.nodeTableLoading=!0,Object(x.J)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.nodes=t.nodes,e.nodeTableLoading=!1})},handleModify:function(e){this.$router.push({path:"/LwModifyLayernode",query:{id:e.id,nodeUid:e.nodeUid}})},handleDelete:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={nodeIds:e.id};Object(x.r)(a).then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):(t.$message({message:"删除成功",type:"success"}),t.getNodes())})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleMultiDelete:function(){var e=this;this.multipleSelection.length?this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[],a=!0,l=!1,r=void 0;try{for(var o,n=A()(e.multipleSelection);!(a=(o=n.next()).done);a=!0){var i=o.value;t.push(i.id)}}catch(e){l=!0,r=e}finally{try{!a&&n.return&&n.return()}finally{if(l)throw r}}var s={nodeIds:t.join(",")};Object(x.r)(s).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"删除成功",type:"success"}),e.getNodes())})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message({message:"请至少选择一行",type:"warning"})},handleSelectionChange:function(e){this.multipleSelection=e}},mounted:function(){var e=this;this.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/LwLayernodeManage")}),this.getNodes()}},L={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"层节点列表",name:"LwLayernodeManage"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"添加层节点",name:"LwAddLayerNode"}})],1),e._v(" "),a("div",{staticStyle:{float:"left",width:"100%"}},[a("el-select",{staticStyle:{float:"left","margin-left":"10px",width:"200px"},attrs:{size:"small",placeholder:"选择层节点类型"},model:{value:e.filters.type,callback:function(t){e.$set(e.filters,"type",t)},expression:"filters.type"}},e._l(e.typeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{staticStyle:{float:"left","margin-left":"30px",width:"200px"},attrs:{size:"small",placeholder:"节点名称"},model:{value:e.filters.keyword,callback:function(t){e.$set(e.filters,"keyword",t)},expression:"filters.keyword"}}),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"30px"},attrs:{size:"small",type:"info"},on:{click:e.getNodes}},[e._v("查询")]),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"30px"},attrs:{size:"small",type:"danger"},on:{click:e.handleMultiDelete}},[e._v("批量删除")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.nodeTableLoading,expression:"nodeTableLoading"}],staticStyle:{float:"left",width:"100%","margin-top":"20px"},attrs:{data:e.nodes},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{width:"100",type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"层节点类型",width:"200",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("span",{domProps:{textContent:e._s(e.typeObj[t.row.type])}})])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeUid",label:"层节点ID",width:"300",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"层节点IP",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{width:"150",label:"在线状态"},scopedSlots:e._u([{key:"default",fn:function(e){return["ONLINE"==e.row.onlineStatus?a("div",{staticStyle:{height:"20px",width:"20px","border-radius":"50%","background-color":"#0f0"}}):a("div",{staticStyle:{height:"20px",width:"20px","border-radius":"50%","background-color":"#f00"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleModify(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")]),e._v(" "),t.row.monitorUrl?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.gotoMonitor(t.row)}}},[e._v("监控")]):a("el-button",{attrs:{type:"text",size:"small",disabled:""}},[e._v("监控")]),e._v(" "),t.row.netUrl?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.gotoAdmin(t.row)}}},[e._v("网管")]):a("el-button",{attrs:{type:"text",size:"small",disabled:""}},[e._v("网管")])]}}])})],1)],1)},staticRenderFns:[]};var P=a("VU/8")(M,L,!1,function(e){a("c4M8")},null,null).exports,R=a("mvHQ"),O=a.n(R),$={name:"LwAddLayernode",data:function(){var e=function(e,t,a){t&&!/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-4]\d{4}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/.test(t)?a(new Error("端口格式错误")):a()};return{activeTabName:"LwAddLayernode",extraInfos:[],typeOptions:[{value:"",label:"全部类型"},{label:"终端设备节点",value:"ACCESS_JV210"},{label:"存储设备节点",value:"ACCESS_CDN"}],nodeForm:{type:"ACCESS_JV210",name:"",ip:"",nodeUid:"",port:null,downloadPort:null,monitorUrl:"",netUrl:"",webrtcHttpPort:8088,webrtcWebsocketPort:8188},rules:{type:[{required:!0,message:"请选择节点类型",trigger:"change"}],name:[{required:!0,message:"请输入节点名称",trigger:"change"},{min:1,max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}],nodeUid:[{required:!0,message:"请输入节点ID",trigger:"change"},{min:1,max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}],ip:[{validator:function(e,t,a){t&&!/^((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)$/.test(t)?a(new Error("IP格式错误")):a()},trigger:"blur"}],port:[{validator:e,trigger:"blur"}],downloadPort:[{validator:e,trigger:"blur"}]}}},methods:{handleTabClick:function(e,t){"LwAddLayernode"!==e.name&&this.$router.push("/"+e.name)},reset:function(){this.$refs.nodeForm.resetFields()},submit:function(){var e=this;if(this.validate()){var t={json:O()(this.nodeForm),extraInfoVOList:O()(this.extraInfos)};Object(x._23)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"添加成功",type:"success"}),e.$refs.nodeForm.resetFields())})}},addExtraInfo:function(){this.extraInfos.push({})},remove:function(e){var t=this.extraInfos.indexOf(e);-1!==t&&this.extraInfos.splice(t,1)},validate:function(){var e=!1;return this.$refs.nodeForm.validate(function(t){e=t}),e}},mounted:function(){var e=this;this.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/LwLayernodeManage")})}},z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"层节点列表",name:"LwLayernodeManage"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"添加层节点",name:"LwAddLayernode"}})],1),e._v(" "),a("el-form",{ref:"nodeForm",attrs:{model:e.nodeForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"节点类型",prop:"type"}},[a("el-select",{staticStyle:{width:"200px"},model:{value:e.nodeForm.type,callback:function(t){e.$set(e.nodeForm,"type",t)},expression:"nodeForm.type"}},e._l(e.typeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.name,callback:function(t){e.$set(e.nodeForm,"name",t)},expression:"nodeForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"节点ID",prop:"nodeUid"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.nodeUid,callback:function(t){e.$set(e.nodeForm,"nodeUid",t)},expression:"nodeForm.nodeUid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"节点IP",prop:"ip"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.ip,callback:function(t){e.$set(e.nodeForm,"ip",t)},expression:"nodeForm.ip"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"节点端口",prop:"port"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.port,callback:function(t){e.$set(e.nodeForm,"port",t)},expression:"nodeForm.port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"下载端口",prop:"downloadPort"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"录制资源下载端口，可不填"},model:{value:e.nodeForm.downloadPort,callback:function(t){e.$set(e.nodeForm,"downloadPort",t)},expression:"nodeForm.downloadPort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"监控地址",prop:"monitorUrl"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"监控页面地址，可不填"},model:{value:e.nodeForm.monitorUrl,callback:function(t){e.$set(e.nodeForm,"monitorUrl",t)},expression:"nodeForm.monitorUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"网管地址",prop:"netUrl"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"网管页面地址，可不填"},model:{value:e.nodeForm.netUrl,callback:function(t){e.$set(e.nodeForm,"netUrl",t)},expression:"nodeForm.netUrl"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"ACCESS_WEBRTC"==e.nodeForm.type,expression:"nodeForm.type=='ACCESS_WEBRTC'"}],attrs:{label:"webrtc http端口",prop:"webrtcHttpPort"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.webrtcHttpPort,callback:function(t){e.$set(e.nodeForm,"webrtcHttpPort",t)},expression:"nodeForm.webrtcHttpPort"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"ACCESS_WEBRTC"==e.nodeForm.type,expression:"nodeForm.type=='ACCESS_WEBRTC'"}],attrs:{label:"webrtc websocket端口",prop:"webrtcWebsocketPort"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.webrtcWebsocketPort,callback:function(t){e.$set(e.nodeForm,"webrtcWebsocketPort",t)},expression:"nodeForm.webrtcWebsocketPort"}})],1),e._v(" "),a("el-button",{staticStyle:{"margin-top":"10px","margin-left":"30px"},attrs:{type:"info",size:"small"},on:{click:e.addExtraInfo}},[e._v("新增扩展字段")]),e._v(" "),e._l(e.extraInfos,function(t,l){return a("div",{staticStyle:{"margin-top":"10px","margin-left":"30px"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"扩展字段名"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"extraInfo.name"}}),e._v(" "),a("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{size:"small",placeholder:"扩展字段值"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"extraInfo.value"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"danger"},on:{click:function(a){return a.preventDefault(),e.remove(t)}}},[e._v("删除")])],1)}),e._v(" "),a("div",{staticStyle:{"margin-top":"30px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.reset()}}},[e._v("重置")])],1)],2)],1)},staticRenderFns:[]};var B=a("VU/8")($,z,!1,function(e){a("VeA1")},"data-v-fb1aba74",null).exports,q={name:"LwModifyLayernode",data:function(){var e,t=function(e,t,a){t&&!/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-4]\d{4}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/.test(t)?a(new Error("端口格式错误")):a()};return e={activeTabName:"LwModifyLayerNode",extraInfos:[],typeOptions:[{value:"",label:"全部类型"},{label:"终端设备节点",value:"ACCESS_JV210"},{label:"存储设备节点",value:"ACCESS_CDN"}],id:this.$route.query.id,nodeUid:this.$route.query.nodeUid,nodeForm:{type:"",name:"",ip:"",nodeUid:"",monitorUrl:"",netUrl:""}},w()(e,"extraInfos",[]),w()(e,"worknodeId",""),w()(e,"rules",{type:[{required:!0,message:"请选择节点类型",trigger:"change"}],name:[{required:!0,message:"请输入节点名称",trigger:"change"},{min:1,max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}],ip:[{validator:function(e,t,a){t&&!/^((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)$/.test(t)?a(new Error("IP格式错误")):a()},trigger:"blur"}],port:[{validator:t,trigger:"blur"}],downloadPort:[{validator:t,trigger:"blur"}]}),e},methods:{handleTabClick:function(e,t){"LwModifyLayernode"!==e.name&&this.$router.push("/"+e.name)},reset:function(){this.$refs.nodeForm.resetFields()},getNode:function(){var e=this,t={id:this.id};Object(x.I)(t).then(function(t){t.errmsg?e.$message({message:t.errMsg,type:"error"}):e.nodeForm=t.node})},queryLayernodeExtraInfo:function(){var e=this,t={worknodeId:this.nodeUid};Object(x._11)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.extraInfos=t.extraInfos})},addExtraInfo:function(){this.extraInfos.push({})},remove:function(e){var t=this.extraInfos.indexOf(e);-1!==t&&this.extraInfos.splice(t,1)},submit:function(){var e=this;if(this.validate()&&this.validateExtraInfo()){var t={json:O()(this.nodeForm),extraInfoVOList:O()(this.extraInfos)};Object(x._43)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.$message({message:"修改成功",type:"success"})})}},validate:function(){var e=!1;return this.$refs.nodeForm.validate(function(t){e=t}),e},validateExtraInfo:function(){var e=!0,t=!1,a=void 0;try{for(var l,r=A()(this.extraInfos);!(e=(l=r.next()).done);e=!0){var o=l.value;if(!o.name||!o.value)return this.$message({message:"扩展字段不能为空",type:"error"}),!1}}catch(e){t=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw a}}return!0}},mounted:function(){this.getNode(),this.queryLayernodeExtraInfo()}},U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"层节点列表",name:"LwLayernodeManage"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"修改层节点",name:"LwModifyLayerNode"}})],1),e._v(" "),a("el-form",{ref:"nodeForm",attrs:{model:e.nodeForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"节点类型",prop:"type"}},[a("el-select",{staticStyle:{width:"200px"},model:{value:e.nodeForm.type,callback:function(t){e.$set(e.nodeForm,"type",t)},expression:"nodeForm.type"}},e._l(e.typeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.name,callback:function(t){e.$set(e.nodeForm,"name",t)},expression:"nodeForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"节点ID",prop:"nodeUid"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.nodeUid,callback:function(t){e.$set(e.nodeForm,"nodeUid",t)},expression:"nodeForm.nodeUid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"节点IP",prop:"ip"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.ip,callback:function(t){e.$set(e.nodeForm,"ip",t)},expression:"nodeForm.ip"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"节点端口",prop:"port"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.port,callback:function(t){e.$set(e.nodeForm,"port",t)},expression:"nodeForm.port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"下载端口",prop:"downloadPort"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"录制资源下载端口，可不填"},model:{value:e.nodeForm.downloadPort,callback:function(t){e.$set(e.nodeForm,"downloadPort",t)},expression:"nodeForm.downloadPort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"监控地址",prop:"monitorUrl"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"监控页面地址，可不填"},model:{value:e.nodeForm.monitorUrl,callback:function(t){e.$set(e.nodeForm,"monitorUrl",t)},expression:"nodeForm.monitorUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"网管地址",prop:"netUrl"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"网管页面地址，可不填"},model:{value:e.nodeForm.netUrl,callback:function(t){e.$set(e.nodeForm,"netUrl",t)},expression:"nodeForm.netUrl"}})],1),e._v(" "),a("el-button",{staticStyle:{"margin-top":"20px","margin-left":"30px"},attrs:{type:"info",size:"small"},on:{click:e.addExtraInfo}},[e._v("新增扩展字段")]),e._v(" "),e._l(e.extraInfos,function(t,l){return a("div",{staticStyle:{"margin-top":"10px"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"扩展字段名"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"extraInfo.name"}}),e._v(" "),a("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{size:"small",placeholder:"扩展字段值"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"extraInfo.value"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"danger"},on:{click:function(a){return a.preventDefault(),e.remove(t)}}},[e._v("删除")])],1)}),e._v(" "),a("div",{staticStyle:{"margin-top":"30px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.reset()}}},[e._v("重置")])],1)],2)],1)},staticRenderFns:[]};var j=a("VU/8")(q,U,!1,function(e){a("lq5M")},"data-v-fd7af578",null).exports,V={name:"selectLayerNode",data:function(){return{visible:!1,table:{totalData:[],filterData:[],currentRow:""},layerNodeTypes:[{value:"",label:"全部类型"},{label:"终端设备节点",value:"ACCESS_JV210"},{label:"存储设备节点",value:"ACCESS_CDN"}],filters:{type:"",name:"",ip:""}}},methods:{show:function(){var e=this;e.visible=!0,Object(x.J)({type:"",keyword:""}).then(function(t){if(e.table.totalData.splice(0,e.table.totalData.length),e.table.filterData.splice(0,e.table.filterData.length),t.errMsg)e.$message({type:"error",message:t.errMsg});else if(t.nodes&&t.nodes.length>0)for(var a=0;a<t.nodes.length;a++){for(var l=0;l<e.layerNodeTypes.length;l++)if(e.layerNodeTypes[l].value===t.nodes[a].type){t.nodes[a].typeName=e.layerNodeTypes[l].label;break}e.table.totalData.push(t.nodes[a]),e.table.filterData.push(t.nodes[a])}})},handleClose:function(){this.visible=!1,this.table.totalData.splice(0,this.table.totalData.length),this.table.filterData.splice(0,this.table.filterData.length),this.table.currentRow="",this.filters.type="",this.filters.name="",this.filters.ip=""},handleCommit:function(){var e=this;e.$emit("layer-node-selected",e.table.currentRow,function(){e.handleClose()})},handleFilter:function(){this.table.filterData.splice(0,this.table.filterData.length);for(var e=0;e<this.table.totalData.length;e++){var t=!0,a=this.table.totalData[e];this.filters.type&&a.type!==this.filters.type&&(t=!1),t&&this.filters.name&&a.name.toLowerCase().indexOf(this.filters.name.toLowerCase())<0&&(t=!1),t&&this.filters.ip&&a.ip.indexOf(this.filters.ip)<0&&(t=!1),t&&this.table.filterData.push(a)}},currentRowChange:function(e,t){this.table.currentRow=e}},mounted:function(){}},Z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"选择接入层",visible:e.visible,width:"800px","before-close":e.handleClose},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticStyle:{height:"500px",position:"relative"}},[a("div",{staticStyle:{height:"50px",width:"100%"}},[a("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"接入层类型"},model:{value:e.filters.type,callback:function(t){e.$set(e.filters,"type",t)},expression:"filters.type"}},e._l(e.layerNodeTypes,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{staticStyle:{width:"auto","margin-right":"10px"},attrs:{placeholder:"接入层名称"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}}),e._v(" "),a("el-input",{staticStyle:{width:"auto","margin-right":"10px"},attrs:{placeholder:"接入成ip"},model:{value:e.filters.ip,callback:function(t){e.$set(e.filters,"ip",t)},expression:"filters.ip"}}),e._v(" "),a("el-button",{on:{click:e.handleFilter}},[e._v("查询")])],1),e._v(" "),a("div",{staticStyle:{position:"absolute",left:"0",top:"50px",right:"0",bottom:"0"}},[a("el-scrollbar",{staticStyle:{height:"100%"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.table.filterData,"highlight-current-row":""},on:{"current-change":e.currentRowChange}},[a("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"ip"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"类型"}})],1)],1)],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleCommit}},[e._v("确定")])],1)])},staticRenderFns:[]};var W=a("VU/8")(V,Z,!1,function(e){a("On1Y")},null,null).exports,Y=document.location.origin,G={components:{selectLayerNode:W},data:function(){return{activeTabName:"LwLocalBundleManage",resources:[],sourcesTotle:"",deviceModelOptions:[{label:"终端设备",value:"jv210"},{label:"存储设备",value:"cdn"}],filters:{deviceModel:"jv210",keyword:"",userId:"",sourceType:"",countPerPage:20,region:"self"},users:[],resourceTableLoading:!1,detailDialogVisible:!1,abilityDetailDialogVisible:!1,setAccessLayerVisible:!1,confirmSyncToLdapVisible:!1,detailInfos:[],channelSchemes:[],total:0,pageNum:1,countPerPage:999999,currentRow:{},bundleId:"",newAccessNodeUid:"",uploadUrl:Y+"/bundle/import",myHeaders:{"tetris-001":sessionStorage.getItem("token")},sourceTypeOptions:[{value:"",label:"全部来源"},{value:"SYSTEM",label:"BVC"},{value:"EXTERNAL",label:"LDAP"}],multipleSelection:[],regionOption:[],activeName:"self",tableList:[]}},computed:{tableData:function(){return this.resources.slice((this.pageNum-1)*this.countPerPage,this.pageNum*this.countPerPage)}},methods:{pageChange:function(){this.pageNum=1,this.countPerPage=this.filters.countPerPage},handleSelectLayerNode:function(){this.$refs.selectLayerNode.show()},layerNodeSelected:function(e,t){this.newAccessNodeUid=e.nodeUid,t()},handleTabClick:function(e,t){"LwLocalBundleManage"!==e.name&&this.$router.push("/"+e.name)},getAllUsers:function(){var e=this;Object(x.A)().then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.users=[],e.users.push({id:-1,name:"全部用户"}),e.users=e.users.concat(t.users))})},getDeviceModels:function(){var e=this;Object(x.G)().then(function(t){if(!t.errMsg&&t.deviceModels){e.deviceModelOptions.push({value:"",label:"全部类型"});var a=!0,l=!1,r=void 0;try{for(var o,n=A()(t.deviceModels);!(a=(o=n.next()).done);a=!0){var i=o.value,s={value:i,label:i};e.deviceModelOptions.push(s)}}catch(e){l=!0,r=e}finally{try{!a&&n.return&&n.return()}finally{if(l)throw r}}}})},getResourcesTotle:function(e){var t=this,a={deviceModel:"jv210",keyword:"",sourceType:"",userId:"",pageNum:e,countPerPage:this.countPerPage};Object(x.E)(a).then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):t.sourcesTotle=e.total})},getResources:function(e){var t=this,a=this;/^[1-9]+[0-9]*]*$/.test(this.filters.countPerPage)&&(this.countPerPage=parseInt(this.filters.countPerPage)),this.countPerPage*(e-1)>this.total&&(e=Math.ceil(this.total/this.countPerPage));var l={deviceModel:this.filters.deviceModel,keyword:this.filters.keyword,sourceType:this.filters.sourceType,userId:this.filters.userId,pageNum:1,countPerPage:9999999};this.resourceTableLoading=!0;for(var r=0;r<a.regionOption.length;r++){var o=a.regionOption[r];o.originType||(o.originType="INNER"),a.tableList[o.identity]=[]}Object(x.E)(l).then(function(e){if(e.errMsg)t.$message({message:e.errMsg,type:"error"});else{var l=e.resources;if(l&&l.length>0)for(var r=0;r<l.length;r++){var o="";l[r].param&&(o=l[r].param).extend_param&&(o=JSON.parse(o.extend_param).region);for(var n=0;n<a.regionOption.length;n++){var i=a.regionOption[n];i.identity==o&&a.tableList[i.identity].push(l[r])}}console.log(a.tableList),t.total=a.tableList[a.filters.region].length,t.resources=a.tableList[a.filters.region]}t.resourceTableLoading=!1})},handleCurrentPageChange:function(e){this.pageNum=e},handleDetail:function(e){var t=this;this.resourceTableLoading=!0;var a={bundleId:e.bundleId};Object(x.D)(a).then(function(a){a.errMsg?t.$message({message:a.errMsg,type:"error"}):(t.detailDialogVisible=!0,t.detailInfos=a.extraInfos,t.detailInfos.push({name:"bundle_id",value:e.bundleId})),t.resourceTableLoading=!1})},handleModify:function(e){sessionStorage.setItem("row",O()(e)),this.$router.push({path:"/LwModifyBundle",query:{bundleId:e.bundleId,bundleName:e.bundleName,location:e.location,deviceIp:e.deviceAddr.deviceIp,devicePort:e.deviceAddr.devicePort,multicastEncode:e.multicastEncode,multicastEncodeAddr:e.multicastEncodeAddr,multicastDecode:e.multicastDecode,bundleFolderName:e.bundleFolderName,bundleFolderId:e.bundleFolderId,transcod:e.transcod,multicastSourceIp:e.multicastSourceIp,accessNodeName:e.accessNodeUid,accessNodeUid:e.accessNodeUid,deviceModel:e.deviceModel}})},handleLogout:function(e){var t=this;this.resourceTableLoading=!0;var a={bundleId:e.bundleId};Object(x.Y)(a).then(function(a){a.errMsg?t.$message({message:a.errMsg,type:"error"}):(e.onlineStatus="OFFLINE",t.$message({message:"踢出账号成功",type:"success"})),t.resourceTableLoading=!1})},handleClear:function(e){var t=this;this.$confirm("重置资源将会清空资源上的能力占用，是否确认?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.resourceTableLoading=!0;var a={bundleId:e.bundleId};Object(x.k)(a).then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):t.$message({message:"重置成功",type:"success"}),t.resourceTableLoading=!1})}).catch(function(){t.$message({type:"info",message:"已取消重置"})})},handleDelete:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.resourceTableLoading=!0;var a={bundleIds:e.bundleId};Object(x.p)(a).then(function(e){t.resourceTableLoading=!1,e.errMsg?t.$message({message:e.errMsg,type:"error"}):(t.$message({message:"删除成功",type:"success"}),t.getResources(1))})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},abilityConfig:function(e){this.$router.push({path:"/LwConfigBundle",query:{bundleId:e.bundleId}})},abilityDetail:function(e){var t=this,a={bundleId:e.bundleId};this.resourceTableLoading=!0,Object(x.C)(a).then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):(t.abilityDetailDialogVisible=!0,t.channelSchemes=e.channelSchemes),t.resourceTableLoading=!1})},handleSetLayerId:function(e){this.currentRow=e,this.bundleId=e.bundleId,this.newAccessNodeUid=e.accessNodeUid,this.setAccessLayerVisible=!0},submitSetAccessLayer:function(){var e=this,t={bundleId:this.bundleId,accessLayerId:this.newAccessNodeUid};Object(x._24)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.currentRow.accessNodeUid=e.newAccessNodeUid,e.$message({message:"设置接入成功",type:"success"})),e.setAccessLayerVisible=!1})},showMultiSetAccessLayerDialog:function(){if(this.multipleSelection.length){var e=[],t=!0,a=!1,l=void 0;try{for(var r,o=A()(this.multipleSelection);!(t=(r=o.next()).done);t=!0){var n=r.value;e.push(n.bundleId)}}catch(e){a=!0,l=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw l}}this.bundleId=e.join(","),console.log("bundleIds=="+this.bundleId),this.newAccessNodeUid="",this.setAccessLayerVisible=!0}else this.$message({message:"请至少选择一行",type:"warning"})},exportBundle:function(){var e=this;Object(x.w)(null).then(function(e){var t=new Blob([e.data],{type:"application/octet-stream;charset=utf-8"}),a=document.createElement("a");a.download="folder.csv",a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}).catch(function(t){e.$message({message:t,type:"error"})})},uploadSuccess:function(e){e.errMsg?this.$message({message:e.errMsg,type:"error"}):(e.successCnt?this.$message({message:"成功导入的设备数量："+e.successCnt,type:"success"}):this.$message({message:"导入失败",type:"error"}),this.getResources(1))},uploadError:function(e){this.$message({message:"上传文件错误: "+O()(e),type:"error"})},onprogress:function(){this.resourceTableLoading=!0},handleMultiDelete:function(){var e=this;this.multipleSelection.length?this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.resourceTableLoading=!0;var t=[],a=!0,l=!1,r=void 0;try{for(var o,n=A()(e.multipleSelection);!(a=(o=n.next()).done);a=!0){var i=o.value;t.push(i.bundleId)}}catch(e){l=!0,r=e}finally{try{!a&&n.return&&n.return()}finally{if(l)throw r}}var s={bundleIds:t.join(",")};Object(x.p)(s).then(function(t){e.resourceTableLoading=!1,t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"删除成功",type:"success"}),e.getResources(1))})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message({message:"请至少选择一行",type:"warning"})},syncUser:function(){var e=this;this.$confirm("是否确认同步用户资源?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.resourceTableLoading=!0,Object(x._40)(null).then(function(t){e.resourceTableLoading=!1,t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"同步成功",type:"success"}),e.getResources(1))})}).catch(function(){e.$message({type:"info",message:"已取消同步"})})},handleSelectionChange:function(e){this.multipleSelection=e},handleSyncFromLdap:function(){var e=this;this.$confirm("确认将从LDAP服务器同步下载信息么？","提示",{}).then(function(){e.resourceTableLoading=!0;Object(x._33)({}).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"同步成功, 共下载"+t.successCnt+"条信息",type:"success"}),e.getResources(1))}),e.resourceTableLoading=!1})},showHandleSyncToLdapDialog:function(){this.confirmSyncToLdapVisible=!0},handleSyncToLdap:function(e){var t=this;this.resourceTableLoading=!0;var a={syncAll:e};Object(x._32)(a).then(function(e){null!==e.errMsg&&""!==e.errMsg?t.$message({message:e.errMsg,type:"error",duration:3e3}):(t.$message({message:"同步成功, 共上传"+e.successCnt+"条信息",type:"success"}),t.getResources(1)),t.confirmSyncToLdapVisible=!1}),this.resourceTableLoading=!1},handleCleanUpLdap:function(){var e=this;this.$confirm("确认清空所有上传到LDAP和从LDAP下载的信息么？","提示",{}).then(function(){e.resourceTableLoading=!0;Object(x.g)({}).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"重置成功",type:"success"}),e.getResources(1))}),e.resourceTableLoading=!1})},handleClick:function(e,t){},queryStationList:function(){var e=this;Object(x.L)().then(function(t){if(t.errMsg)e.$message({message:t.errMsg,type:"error"});else{e.regionOption=t.data.rows,e.regionOption.unshift({id:99999,identity:"self",stationName:"本域"});for(var a=0;a<e.regionOption.length;a++){var l=e.regionOption[a];l.originType||(l.originType="INNER"),e.tableList[l.identity]=[]}e.getResources(1)}})},handleIPFormatter:function(e,t,a,l){if(e.param.extend_param){var r=JSON.parse(e.param.extend_param),o=r.param||{};return console.log(r.dev_type),"ts_enc"==r.dev_type?o.is_multi?"udp://"+o.multi_ip+":"+o.port:"udp://"+o.local_ip+":"+o.port:"ts_dec"==r.dev_type?"udp://"+o.dest_ip+":"+o.dest_port:"rtp_passby_enc"==r.dev_type?o.is_multi?"udp://"+o.multi_ip+":"+o.video_port:"udp://"+o.local_ip+":"+o.video_port:"rtp_passby_dec"==r.dev_type?"udp://"+o.dest_ip+":"+o.video_port:"onvif_enc"==r.dev_type?"udp://"+o.onvif_ip+":"+o.onvif_port:"bq_encoder"==r.dev_type||"bq_decoder"==r.dev_type?"udp://"+o.bq_ip+":"+o.bq_port:o.url}return""}},mounted:function(){var e=this;if(this.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/LwLocalBundleManage"),this.queryStationList()}),this.getResourcesTotle(1),this.getAllUsers(),-1!==this.uploadUrl.indexOf("__requestIP__")){var t=document.location.host.split(":")[0];this.uploadUrl=this.uploadUrl.replace("__requestIP__",t)}}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"资源列表",name:"LwLocalBundleManage"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"添加资源",name:"LwAddBundle"}})],1),e._v(" "),a("div",{staticStyle:{float:"left",width:"100%"}},[a("el-select",{staticStyle:{float:"left","margin-left":"5px",width:"180px"},attrs:{size:"small",placeholder:"选择类型"},model:{value:e.filters.deviceModel,callback:function(t){e.$set(e.filters,"deviceModel",t)},expression:"filters.deviceModel"}},e._l(e.deviceModelOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{staticStyle:{float:"left","margin-left":"10px",width:"180px"},attrs:{size:"small",placeholder:"选择来源"},model:{value:e.filters.sourceType,callback:function(t){e.$set(e.filters,"sourceType",t)},expression:"filters.sourceType"}},e._l(e.sourceTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{staticStyle:{float:"left","margin-left":"10px",width:"200px"},attrs:{size:"small",placeholder:"选择域"},model:{value:e.filters.region,callback:function(t){e.$set(e.filters,"region",t)},expression:"filters.region"}},e._l(e.regionOption,function(t){return"OUTER"!=t.originType?a("el-option",{key:t.identity,attrs:{label:t.stationName,value:t.identity}}):e._e()}),1),e._v(" "),a("el-input",{staticStyle:{float:"left","margin-left":"15px",width:"200px"},attrs:{size:"small",placeholder:"关键字"},model:{value:e.filters.keyword,callback:function(t){e.$set(e.filters,"keyword",t)},expression:"filters.keyword"}}),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{size:"small"},on:{click:function(t){return e.getResources(1)}}},[e._v("查询")]),e._v(" "),a("el-dropdown",{staticStyle:{float:"left","margin-left":"20px"}},[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("\n        LDAP操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.showHandleSyncToLdapDialog()}}},[e._v("上传到LDAP")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(t){return e.handleSyncFromLdap()}}},[e._v("从LDAP下载")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(t){return e.handleCleanUpLdap()}}},[e._v("重置LDAP数据")])],1)],1),e._v(" "),a("el-upload",{staticClass:"upload-demo",staticStyle:{float:"left","margin-left":"10px"},attrs:{action:e.uploadUrl,name:"filePoster",headers:e.myHeaders,"show-file-list":!1,"on-success":e.uploadSuccess,"on-error":e.uploadError,"on-progress":e.onprogress}},[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("导入")])],1),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:e.exportBundle}},[e._v("导出\n    ")]),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"danger",size:"small"},on:{click:e.handleMultiDelete}},[e._v("\n      批量删除\n    ")]),e._v(" "),a("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger"}},[e._v("当前设备数："+e._s(e.sourcesTotle)+"/1024")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.resourceTableLoading,expression:"resourceTableLoading"}],staticStyle:{float:"left",width:"100%","margin-top":"20px"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{width:"50",type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bundleName",label:"名称",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"bundleId",label:"bundleId",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"location",label:"地点",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceModel",label:"类型",width:"120",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return["jv210"==t.row.deviceModel?a("div",[e._v("终端设备")]):a("div",[e._v("存储设备")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"bundleAlias",label:"别名",width:"130",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{width:"100",label:"在线状态"},scopedSlots:e._u([{key:"default",fn:function(e){return["ONLINE"==e.row.onlineStatus?a("div",{staticStyle:{height:"20px",width:"20px","border-radius":"50%","background-color":"#0f0"}}):a("div",{staticStyle:{height:"20px",width:"20px","border-radius":"50%","background-color":"#f00"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"IP端口",width:"200",formatter:e.handleIPFormatter}}),e._v(" "),a("el-table-column",{attrs:{width:"100",label:"使用状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["IDLE"==t.row.lockStatus?a("div",[e._v("未使用")]):"BUSY"==t.row.lockStatus?a("div",[e._v("使用中")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return["EXTERNAL"!=t.row.sourceType?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleModify(t.row)}}},[e._v("修改")]):e._e(),e._v(" "),"EXTERNAL"!=t.row.sourceType?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleSetLayerId(t.row)}}},[e._v("设置接入")]):e._e(),e._v(" "),"EXTERNAL"!=t.row.sourceType?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClear(t.row)}}},[e._v("重置")]):e._e(),e._v(" "),"EXTERNAL"!=t.row.sourceType?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"能力",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return["EXTERNAL"!=t.row.sourceType?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.abilityConfig(t.row)}}},[e._v("配置")]):e._e(),e._v(" "),"EXTERNAL"!=t.row.sourceType?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.abilityDetail(t.row)}}},[e._v("通道信息")]):e._e()]}}])})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-input",{staticStyle:{float:"right","margin-right":"30px",width:"200px"},attrs:{size:"small",placeholder:"单页显示数量,默认20"},on:{change:e.pageChange},model:{value:e.filters.countPerPage,callback:function(t){e.$set(e.filters,"countPerPage",t)},expression:"filters.countPerPage"}}),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total,prev, pager, next","current-page":e.pageNum,"page-size":e.countPerPage,total:e.total},on:{"current-change":e.handleCurrentPageChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"详情",visible:e.detailDialogVisible,width:"30%"},on:{"update:visible":function(t){e.detailDialogVisible=t}}},[a("ul",e._l(e.detailInfos,function(t){return a("li",[e._v("\n        "+e._s(t.name)+" : "+e._s(t.value)+"\n      ")])}),0)]),e._v(" "),a("el-dialog",{attrs:{title:"能力详情",visible:e.abilityDetailDialogVisible,width:"40%"},on:{"update:visible":function(t){e.abilityDetailDialogVisible=t}}},[a("el-table",{attrs:{data:e.channelSchemes}},[a("el-table-column",{attrs:{property:"channelId",label:"通道ID",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{property:"channelName",label:"通道类型",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{width:"150",label:"通道状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["IDLE"==t.row.channelStatus?a("div",[e._v("空闲")]):"BUSY"==t.row.channelStatus?a("div",[e._v("锁定")]):"OFFLINE"==t.row.channelStatus?a("div",[e._v("掉线")]):a("div",[e._v("未知")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"设置接入",visible:e.setAccessLayerVisible,width:"30%"},on:{"update:visible":function(t){e.setAccessLayerVisible=t}}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"输入接入层ID",readOnly:""},nativeOn:{click:function(t){return e.handleSelectLayerNode(t)}},model:{value:e.newAccessNodeUid,callback:function(t){e.newAccessNodeUid=t},expression:"newAccessNodeUid"}},[a("template",{slot:"prepend"},[e._v("接入层ID")])],2)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"30px"}},[a("el-button",{staticStyle:{"margin-left":"150px"},attrs:{type:"primary"},on:{click:function(t){return e.submitSetAccessLayer()}}},[e._v("提交")])],1)]),e._v(" "),a("el-dialog",{staticStyle:{"margin-top":"260px"},attrs:{title:"提示",visible:e.confirmSyncToLdapVisible,width:"500px"},on:{"update:visible":function(t){e.confirmSyncToLdapVisible=t}}},[a("div",[e._v("\n      确认上传信息到LDAP服务器上么？\n    ")]),e._v(" "),a("div",{staticStyle:{"margin-top":"40px"}},[a("el-button",{staticStyle:{"margin-left":"130px"},attrs:{size:"small"},on:{click:function(t){e.confirmSyncToLdapVisible=!1}}},[e._v("取 消\n      ")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleSyncToLdap("false")}}},[e._v("\n        只上传未同步信息\n      ")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleSyncToLdap("true")}}},[e._v("\n        上传全部信息\n      ")])],1)]),e._v(" "),[a("selectLayerNode",{ref:"selectLayerNode",on:{"layer-node-selected":e.layerNodeSelected}})]],2)},staticRenderFns:[]};var J=a("VU/8")(G,H,!1,function(e){a("+v6R")},null,null).exports,Q=a("Gu7T"),X=a.n(Q),K={name:"AddBundle",components:{selectLayerNode:W},data:function(){var e=this;return{activeTabName:"LwAddBundle",extraInfos:[],bundleFolderVisable:!0,bundleForm:{deviceDomain:"",deviceModel:"jv210",bundleType:"",bundleName:"",location:"",username:"",onlinePassword:"",checkPass:"",bundleAlias:"",accessNodeUid:"",accessNodeName:"",bundleFolderId:null,bundleFolderName:"",transcod:!1,multicastSourceIp:"",deviceAddr:{deviceIp:"",devicePort:5060},multicastEncode:!1,multicastEncodeAddr:"",multicastDecode:!1,coderType:"ENCODER",longitude:"",latitude:"",streamUrl:""},alarmSizeVisable:!1,predefineColors:["#ffffff","#000000","#409EFF","#E6A23C","#F56C6C"],regionOption:[{name:"本域",key:"self"},{name:"外域",key:"external"},{name:"卫通",key:"weitong"}],extraParam:{dev_type:"sip_enc",region:"self",address:"",alarmSize:""},rules:{deviceModel:[{required:!0,message:"请选择设备形态",trigger:"change"}],bundleName:[{required:!0,message:"请输入设备名称",trigger:"blur"},{min:1,max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}],username:[{required:!0,message:"请输入设备账号",trigger:"blur"}],onlinePassword:[{validator:function(t,a,l){""===a?l(new Error("请输入密码")):(""!==e.bundleForm.checkPass&&e.$refs.bundleForm.validateField("checkPass"),l())},trigger:"blur",required:!0}],checkPass:[{validator:function(t,a,l){""===a?l(new Error("请再次输入密码")):a!==e.bundleForm.onlinePassword?l(new Error("两次输入密码不一致!")):l()},trigger:"blur",required:!0}],accessNodeUid:[{required:!0,message:"请输入接入层标识",trigger:"change"}],bundleFolderName:[{required:!0,message:"请选择所属分组",trigger:"change"}],alarmSize:[{type:"number",message:"年龄必须为数字值"}]},deviceModelOptions:[{label:"终端设备",value:"jv210"},{label:"存储设备",value:"cdn"}],devTypeOption:[{label:"编码器",value:"enc",children:[{label:"sip编码器",value:"sip_enc"},{label:"ts输入(虚编码)",value:"ts_enc"},{label:"rtp透传输入(虚编码)",value:"rtp_passby_enc"},{label:"rtsp输入(虚编码)",value:"rtsp_enc"},{label:"rtmp输入(虚编码)",value:"rtmp_enc"},{label:"onvif输入(虚编码)",value:"onvif_enc"},{label:"北清编码器输入",value:"bq_enc"},{label:"28181编码器输入",value:"28181_enc"},{label:"北清接入编码器",value:"bq_encoder"}]},{label:"解码器",value:"dec",children:[{label:"sip解码器",value:"sip_dec"},{label:"ts输出(虚解码)",value:"ts_dec"},{label:"rtp透传输出(虚解码)",value:"rtp_passby_dec"},{label:"转码输出(虚解码)",value:"transcode_dec"},{label:"北清接入解码器",value:"bq_decoder"}]},{label:"摄像机",value:"camera",children:[{label:"主流摄像机1",value:"dh_camera"}]}],devType:["enc","sip_enc"],deviceDomainOptions:[{label:"本域资源",value:"2"}],coderTypeOptions:[{label:"编码器",value:"ENCODER"},{label:"解码器",value:"DECODER"},{label:"默认",value:"DEFAULT"}],wsTypeOptions:[{label:"编码器",value:"ENCODER"},{label:"解码器",value:"DECODER"},{label:"软终端",value:"DEFAULT"}],bundleTypeOptions:[{label:"终端",value:"VenusTerminal"},{label:"混合器",value:"VenusMixer"},{label:"转发器",value:"VenusTransporter"},{label:"外部输出设备",value:"VenusOutConnection"},{label:"大屏设备",value:"VenusVideoMatrix"}],dialog:{changeFolder:{visible:!1,tree:{props:{label:"name",children:"children"},expandOnClickNode:!1,data:[],current:""}},addFolder:{visible:!1,parent:"",parentNode:"",folderName:"",toLdap:"否"}},cardVisable:!1,isSipShow:!0,dahuaFormData:{url:"dh://admin:suma123456@10.1.41.234:37777",modelConfig:"other",osd_font_size:64,enc_param:{br_ctrl:"cbr",codec:"h264",quality:80,bitrate:2048,width:1920,frame_rate:25,height:1080,iframe_interva:25},text_osd:{enable:!0,content:"指控中心东侧摄像头b-2",x:0,y:0,color:"#5acad3"},date_osd:{enable:!0,has_week:!1,x:8192,y:7168,color:"#7d59f9"}},dahuaRules:{url:[{required:!0,message:"请输入url",trigger:"blur"}],osd_font_size:[{required:!0,message:"请输入osd_font_size",trigger:"blur"}],"enc_param.br_ctrl":[{required:!0,message:"请输入br_ctrl",trigger:"blur"}],"enc_param.codec":[{required:!0,message:"请输入codec",trigger:"blur"}],"enc_param.quality":[{required:!0,message:"请输入quality",trigger:"blur"}],"enc_param.bitrate":[{required:!0,message:"请输入编码码率",trigger:"blur"}],"enc_param.width":[{required:!0,message:"请输入视频宽度",trigger:"blur"}],"enc_param.frame_rate":[{required:!0,message:"请输入视频帧率",trigger:"blur"}],"enc_param.height":[{required:!0,message:"请输入视频高度",trigger:"blur"}],"enc_param.iframe_interva":[{required:!0,message:"请输入iframe_interva",trigger:"blur"}],"text_osd.enable":[{required:!0,message:"请输入text_osd_enable",trigger:"blur"}],"text_osd.content":[{required:!0,message:"请输入标题内容",trigger:"blur"}],"text_osd.x":[{required:!0,message:"请输入text_osd_x",trigger:"blur"}],"text_osd.y":[{required:!0,message:"请输入text_osd_y",trigger:"blur"}],"date_osd.enable":[{required:!0,message:"请输入date_osd_enable",trigger:"blur"}],"date_osd.has_week":[{required:!0,message:"请输入date_osd_has_week",trigger:"blur"}],"date_osd.x":[{required:!0,message:"请输入date_osd_x",trigger:"blur"}],"date_osd.y":[{required:!0,message:"请输入date_osd_y",trigger:"blur"}]},extraInfosAdd:[],TSencFormData:{is_multi:!0,multi_ip:"224.1.1.2",local_ip:"10.1.41.22",port:2e3},TSencRules:{is_multi:[{required:!0,message:"请选择接收类型",trigger:"change"}],multi_ip:[{required:!0,message:"请输入组播ip",trigger:"blur"}],local_ip:[{required:!0,message:"请输入本地ip",trigger:"blur"}],port:[{required:!0,message:"请输入接收端口",trigger:"blur"}]},is_multiOptions:[{label:"单播",value:!1},{label:"组播",value:!0}],TSdecFormData:{dest_ip:"224.1.1.2",local_ip:"10.1.41.22",dest_port:2e3,reset_tm:!0},TSdecRules:{dest_ip:[],local_ip:[],dest_port:[{required:!0,message:"请输入目标端口",trigger:"blur"}],reset_tm:[{required:!0,message:"请选择重校对时间戳",trigger:"change"}]},rtpPassbyDecFormData:{dest_ip:"224.1.1.2",local_ip:"10.1.41.22",video_port:2e3,audio_port:2002,reset_tm:!1,aac_out:!1},rtpPassbyDecRules:{dest_ip:[],local_ip:[],video_port:[],audio_port:[],reset_tm:[{required:!0,message:"请选择重校对时间戳",trigger:"change"}],aac_out:[{required:!0,message:"请选择强制aac输出",trigger:"change"}]},reset_tmOptions:[{label:"是",value:!0},{label:"否",value:!1}],aac_outOptions:[{label:"是",value:!0},{label:"否",value:!1}],rtpPassbyEncFormData:{is_multi:!0,multi_ip:"224.1.1.2",local_ip:"10.1.41.22",video_port:2e3,audio_port:2002},rtpPassbyEncRules:{is_multi:[{required:!0,message:"请选择接收类型",trigger:"change"}],multi_ip:[{required:!0,message:"请输入组播ip",trigger:"blur"}],local_ip:[{required:!0,message:"请输入本地ip",trigger:"blur"}],video_port:[],audio_port:[]},rtspEncFormData:{url:void 0},rtspEncRules:{url:[{required:!0,message:"请输入流地址",trigger:"blur"}]},rtmpEncFormData:{url:void 0},rtmpEncRules:{url:[{required:!0,message:"请输入流地址",trigger:"blur"}]},onvifEncFormData:{onvif_user:"anonymous",onvif_pwd:"anonymous",onvif_ip:"10.1.41.223",onvif_port:80,onvif_sel_index:0},onvifEncRules:{onvif_user:[{required:!0,message:"请输入用户名",trigger:"blur"}],onvif_pwd:[{required:!0,message:"请输入密码",trigger:"blur"}],onvif_ip:[],onvif_port:[{required:!0,message:"请输入控制端口",trigger:"blur"}],onvif_sel_index:[{required:!0,message:"请输入选择码率索引",trigger:"blur"}]},bqEncFormData:{bq_type:"6931S",url:"sstp+udp://127.0.0.1:8002/68ED6661-A641-4A95-9482-96F0AA024424"},bqEncRules:{bq_type:[{required:!0,message:"请选择设备类型",trigger:"change"}],url:[{required:!0,message:"请输入流地址",trigger:"blur"}]},bq_typeOptions:[{label:"6501S",value:"6501S"},{label:"6601S",value:"6601S"},{label:"6931S",value:"6931S"},{label:"8201C",value:"8201C"},{label:"8361C",value:"8361C"},{label:"8361P",value:"8361P"},{label:"8601C",value:"8601C"},{label:"ts_stream",value:"ts_stream"}],transcodeEecFormData:{dst_codec:"h264",width:720,height:576,fps:25,gop_size:25,url:""},transcodeEecRules:{dst_codec:[{required:!0,message:"请选择编码类型",trigger:"change"}],width:[{required:!0,message:"请输入视频宽度",trigger:"blur"}],height:[{required:!0,message:"请输入视频高度",trigger:"blur"}],fps:[{required:!0,message:"请输入视频帧率",trigger:"blur"}],gop_size:[{required:!0,message:"请输入帧间隔",trigger:"blur"}],url:[{required:!0,message:"请输入url",trigger:"blur"}]},dst_codecOptions:[{label:"h264",value:"h264"},{label:"h265",value:"h265"}],TSencFormMultiIpDis:!1,rtpPassbyEncFormMultiIpDis:!1,isFictitiouVisable:!0,configChannels:[{channelTemplateID:1,channelCnt:1,channelName:"VenusAudioIn"},{channelTemplateID:2,channelCnt:0,channelName:"VenusAudioOut"},{channelTemplateID:3,channelCnt:1,channelName:"VenusVideoIn"},{channelTemplateID:4,channelCnt:0,channelName:"VenusVideoOut"}],bitrateDisable:!1,bqEncoderFormData:{bq_type:"6931S",bq_ip:"192.168.1.123",bq_port:8088,bq_user:"admin",bq_passwd:"admin",index:1},bqEncoderRules:{bq_ip:[{required:!0,message:"请输入ip",trigger:"blur"}],bq_port:[{required:!0,message:"请输入端口",trigger:"blur"}]},bqDecoderFormData:{bq_type:"D1",bq_ip:"192.168.1.123",bq_port:8088,bq_user:"admin",bq_passwd:"admin",index:1},bqDecoderRules:{bq_ip:[{required:!0,message:"请输入ip",trigger:"blur"}],bq_port:[{required:!0,message:"请输入端口",trigger:"blur"}],bq_user:[{required:!0,message:"请输入设备账号",trigger:"blur"}],bq_passwd:[{required:!0,message:"请输入设备密码",trigger:"blur"}],index:[{required:!0,message:"请输入设备序号",trigger:"blur"}]},bqDecoderOption:[{label:1,value:1}]}},computed:{bundleFormMulticastEncode:function(){return this.bundleForm.multicastEncode}},watch:{bundleFormMulticastEncode:function(e){e||(this.bundleForm.multicastEncodeAddr="")}},methods:{handleTabClick:function(e,t){"AddBundle"!==e.name&&this.$router.push("/"+e.name)},devTypeChange:function(e){var t=this.extraParam.dev_type=e[e.length-1];if(["sip_enc","sip_dec","sip_enc_dec","28181_enc"].indexOf(t)>-1?this.cardVisable=!1:this.cardVisable=!0,["sip_enc","sip_dec","sip_enc_dec","28181_enc"].indexOf(t)>-1)this.isSipShow=!0,this.bundleForm.username="",this.bundleForm.onlinePassword="",this.bundleForm.checkPass="";else{this.isSipShow=!1;var a=this.randomString(12);this.bundleForm.username=this.randomString(12),this.bundleForm.onlinePassword=a,this.bundleForm.checkPass=a}["sip_enc","dh_camera","ts_enc","rtp_passby_enc","rtsp_enc","rtmp_enc","onvif_enc","bq_enc","28181_enc","bq_encoder"].indexOf(t)>-1?(this.isFictitiouVisable=!0,this.bundleForm.coderType="ENCODER",this.configChannels=[{channelTemplateID:1,channelCnt:1,channelName:"VenusAudioIn"},{channelTemplateID:2,channelCnt:0,channelName:"VenusAudioOut"},{channelTemplateID:3,channelCnt:1,channelName:"VenusVideoIn"},{channelTemplateID:4,channelCnt:0,channelName:"VenusVideoOut"}]):(this.isFictitiouVisable=!1,this.bundleForm.coderType="DECODER",this.configChannels=[{channelTemplateID:1,channelCnt:0,channelName:"VenusAudioIn"},{channelTemplateID:2,channelCnt:1,channelName:"VenusAudioOut"},{channelTemplateID:3,channelCnt:0,channelName:"VenusVideoIn"},{channelTemplateID:4,channelCnt:1,channelName:"VenusVideoOut"}])},addExtraInfo:function(){this.extraInfos.push({})},remove:function(e){var t=this.extraInfos.indexOf(e);-1!==t&&this.extraInfos.splice(t,1)},randomString:function(e){e=e||32;for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",a=t.length,l="",r=0;r<e;r++)l+=t.charAt(Math.floor(Math.random()*a));return l},reset:function(){},submit:function(){var e=this,t=this;if(this.validateBaseInfo()&&this.validateExtraInfo()){if(!this.isSipShow){var a=this.randomString(12);this.bundleForm.username=this.randomString(12),this.bundleForm.onlinePassword=a,this.bundleForm.checkPass=a}this.$refs.dahuaForm.validate(function(a){if(a){var l,r=e.extraParam;if("cdn"==e.extraParam.deviceModel&&(!/\d/.test(e.extraParam.alarmSize)||e.extraParam.alarmSize<0))return void e.$message({type:"waring",message:"告警容量必须为数字且大于等于0"});switch(r.address=e.bundleForm.location,t.extraParam.dev_type){case"dh_camera":r.param=e.dahuaFormData;break;case"sip_enc":case"sip_dec":case"sip_enc_dec":case"28181_enc":r.param={};break;case"ts_enc":r.param=e.TSencFormData;break;case"ts_dec":r.param=e.TSdecFormData;break;case"rtp_passby_dec":r.param=e.rtpPassbyDecFormData;break;case"rtp_passby_enc":r.param=e.rtpPassbyEncFormData;break;case"rtsp_enc":r.param=e.rtspEncFormData;break;case"rtmp_enc":r.param=e.rtmpEncFormData;break;case"onvif_enc":r.param=e.onvifEncFormData;break;case"bq_enc":r.param=e.bqEncFormData;break;case"transcode_dec":r.param=e.transcodeEecFormData;break;case"bq_encoder":r.param=e.bqEncoderFormData;break;case"bq_decoder":r.param=e.bqDecoderFormData}l=[].concat(X()(e.extraInfos),[{name:"extend_param",value:r}]);var o={bundle:O()(e.bundleForm),extraInfoVOList:O()(l)};Object(x.a)(o).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"添加成功",type:"success"}),e.handleConfigBundle(t.bundleId))})}else;})}},validateBaseInfo:function(){var e=!1;return this.$refs.bundleForm.validate(function(t){e=t}),e},validateExtraInfo:function(){var e=!0,t=!1,a=void 0;try{for(var l,r=A()(this.extraInfos);!(e=(l=r.next()).done);e=!0){var o=l.value;if(!o.name||!o.value)return this.$message({message:"扩展字段不能为空",type:"error"}),!1}}catch(e){t=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw a}}return!0},handleChangeFolder:function(){var e=this;e.dialog.changeFolder.visible=!0,Object(x._9)().then(function(t){console.log(t),200===t.status?e.dialog.changeFolder.tree.data=t.data:e.$message({type:"error",message:t.message})})},handleChangeFolderClose:function(){this.dialog.changeFolder.visible=!1,this.dialog.changeFolder.tree.data.splice(0,this.dialog.changeFolder.tree.data.length),this.dialog.changeFolder.tree.current=""},handleChangeFolderCommit:function(){this.bundleForm.bundleFolderId=this.dialog.changeFolder.tree.current.id,this.bundleForm.bundleFolderName=this.dialog.changeFolder.tree.current.name,this.handleChangeFolderClose()},currentTreeNodeChange:function(e,t){this.dialog.changeFolder.tree.current=e},treeNodeAppend:function(e,t){this.dialog.addFolder.parent=t,this.dialog.addFolder.parentNode=e,this.dialog.addFolder.visible=!0},handleAddFolderClose:function(){this.dialog.addFolder.parent="",this.dialog.addFolder.parentNode="",this.dialog.addFolder.visible=!1,this.dialog.addFolder.folderName="",this.dialog.addFolder.toLdap="否"},handleAddFolderCommit:function(){var e=this;Object(x.b)({name:e.dialog.addFolder.folderName,parentId:e.dialog.addFolder.parent.id,toLdap:"是"===e.dialog.addFolder.toLdap}).then(function(t){e.dialog.addFolder.parent.children=e.dialog.addFolder.parent.children||[],t.errMsg||(e.dialog.addFolder.parent.children.push(t.folder),e.$refs.changeFolderTree.append(t.folder,e.dialog.addFolder.parentNode),e.handleAddFolderClose())})},handleSelectLayerNode:function(){this.$refs.selectLayerNode.show()},layerNodeSelected:function(e,t){this.bundleForm.accessNodeUid=e.nodeUid,this.bundleForm.accessNodeName=e.name,t()},submitForm:function(){this.$refs.dahuaForm.validate(function(e){})},resetForm:function(){this.$refs.dahuaForm.resetFields()},handleConfigBundle:function(e){var t={bundleId:e,configChannels:O()(this.configChannels),configEditableAttrs:O()([])};Object(x.l)(t).then(function(e){})},TSencFormIsMultiChange:function(e){this.TSencFormMultiIpDis=!e},rtpPassbyEncFormIsMultiChange:function(e){this.rtpPassbyEncFormMultiIpDis=!e},deviceModelChange:function(e){"jv210"==e?(this.isFictitiouVisable=!0,this.alarmSizeVisable=!1,this.isSipShow=!0,this.bundleForm.username="",this.bundleForm.onlinePassword="",this.bundleForm.checkPass="",this.extraParam.region="self",this.devType=[]):(this.isFictitiouVisable=!1,this.alarmSizeVisable=!0,this.isSipShow=!0,this.bundleFolderVisable=!1,this.bundleForm.username="",this.bundleForm.onlinePassword="",this.bundleForm.checkPass="",this.extraParam.region="self",this.devType=["enc","sip_enc"])},encodeModeChange:function(e){"bitrate_first"==e?(this.dahuaFormData.enc_param.bitrate=1024,this.bitrateDisable=!0):"quality_first"==e?(this.dahuaFormData.enc_param.bitrate=8192,this.bitrateDisable=!0):this.bitrateDisable=!1},bqTypeChange:function(e){this.bqDecoderOption="D1"==e?[{label:1,value:1}]:[{label:1,value:1},{label:2,value:2},{label:3,value:3},{label:4,value:4},{label:5,value:5},{label:6,value:6},{label:7,value:7},{label:8,value:8}]}},mounted:function(){var e=this;this.$nextTick(function(){Object(x.L)().then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.regionOption=t.data.rows,e.regionOption.unshift({id:99999,identity:"self",stationName:"本域"}))}),e.$parent.$parent.$parent.$parent.$parent.setActive("/LwLocalBundleManage")})}},ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"资源列表",name:"LwLocalBundleManage"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"添加资源",name:"LwAddBundle"}})],1),e._v(" "),a("el-form",{ref:"bundleForm",attrs:{model:e.bundleForm,rules:e.rules,"label-width":"100px",inline:!0,size:"small"}},[a("el-form-item",{attrs:{size:"small",label:"设备形态",prop:"deviceModel"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"small"},on:{change:e.deviceModelChange},model:{value:e.bundleForm.deviceModel,callback:function(t){e.$set(e.bundleForm,"deviceModel",t)},expression:"bundleForm.deviceModel"}},e._l(e.deviceModelOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),"jv210"==e.bundleForm.deviceModel?a("el-form-item",{attrs:{label:"设备类型"}},[a("el-cascader",{attrs:{options:e.devTypeOption},on:{change:e.devTypeChange},model:{value:e.devType,callback:function(t){e.devType=t},expression:"devType"}})],1):e._e(),e._v(" "),"jv210"==e.bundleForm.deviceModel?a("el-form-item",{attrs:{label:"域类型"}},[a("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"请选择域类型"},model:{value:e.extraParam.region,callback:function(t){e.$set(e.extraParam,"region",t)},expression:"extraParam.region"}},e._l(e.regionOption,function(e){return a("el-option",{key:e.uuid,attrs:{label:e.stationName,value:e.identity}})}),1)],1):e._e(),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"ws"==e.bundleForm.deviceModel,expression:"bundleForm.deviceModel=='ws'"}],attrs:{size:"small",label:"编解码类型",prop:"coderType"}},[a("el-select",{staticStyle:{width:"200px"},model:{value:e.bundleForm.coderType,callback:function(t){e.$set(e.bundleForm,"coderType",t)},expression:"bundleForm.coderType"}},e._l(e.wsTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"别名",prop:"bundleAlias"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.bundleAlias,callback:function(t){e.$set(e.bundleForm,"bundleAlias",t)},expression:"bundleForm.bundleAlias"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"地点",prop:"bundleAlias"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.location,callback:function(t){e.$set(e.bundleForm,"location",t)},expression:"bundleForm.location"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"设备名称",prop:"bundleName"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.bundleName,callback:function(t){e.$set(e.bundleForm,"bundleName",t)},expression:"bundleForm.bundleName"}})],1),e._v(" "),e.bundleFolderVisable?a("el-form-item",{attrs:{size:"small",label:"设备分组",prop:"bundleFolderName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{readOnly:""},nativeOn:{click:function(t){return e.handleChangeFolder(t)}},model:{value:e.bundleForm.bundleFolderName,callback:function(t){e.$set(e.bundleForm,"bundleFolderName",t)},expression:"bundleForm.bundleFolderName"}})],1):e._e(),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isSipShow,expression:"isSipShow"}],attrs:{size:"small",label:"设备账号",prop:"username"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.username,callback:function(t){e.$set(e.bundleForm,"username",t)},expression:"bundleForm.username"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isSipShow,expression:"isSipShow"}],attrs:{size:"small",label:"设备密码",prop:"onlinePassword"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"password","auto-complete":"off",required:""},model:{value:e.bundleForm.onlinePassword,callback:function(t){e.$set(e.bundleForm,"onlinePassword",t)},expression:"bundleForm.onlinePassword"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isSipShow,expression:"isSipShow"}],attrs:{size:"small",label:"确认密码",prop:"checkPass"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"password","auto-complete":"off",required:""},model:{value:e.bundleForm.checkPass,callback:function(t){e.$set(e.bundleForm,"checkPass",t)},expression:"bundleForm.checkPass"}})],1),e._v(" "),e.alarmSizeVisable?a("el-form-item",{attrs:{size:"small",label:"告警容量",prop:"alarmSize"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"auto-complete":"off",placeholder:"单位：GB"},model:{value:e.extraParam.alarmSize,callback:function(t){e.$set(e.extraParam,"alarmSize",e._n(t))},expression:"extraParam.alarmSize"}})],1):e._e(),e._v(" "),"jv210"==e.bundleForm.deviceModel?a("el-form-item",{attrs:{size:"small",label:"接入层UID",prop:"accessNodeUid"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{readonly:""},nativeOn:{click:function(t){return e.handleSelectLayerNode(t)}},model:{value:e.bundleForm.accessNodeName,callback:function(t){e.$set(e.bundleForm,"accessNodeName",t)},expression:"bundleForm.accessNodeName"}}),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.bundleForm.accessNodeUid,callback:function(t){e.$set(e.bundleForm,"accessNodeUid",t)},expression:"bundleForm.accessNodeUid"}})],1):e._e(),e._v(" "),e.isFictitiouVisable?a("el-form-item",{attrs:{size:"small",label:"源组播Ip"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.multicastSourceIp,callback:function(t){e.$set(e.bundleForm,"multicastSourceIp",t)},expression:"bundleForm.multicastSourceIp"}})],1):e._e(),e._v(" "),e.isFictitiouVisable?a("el-form-item",{attrs:{size:"small",label:"编码组播地址"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.multicastEncodeAddr,callback:function(t){e.$set(e.bundleForm,"multicastEncodeAddr",t)},expression:"bundleForm.multicastEncodeAddr"}})],1):e._e(),e._v(" "),e.isFictitiouVisable?a("el-form-item",{attrs:{size:"small",label:"编码组播"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.bundleForm.multicastEncode,callback:function(t){e.$set(e.bundleForm,"multicastEncode",t)},expression:"bundleForm.multicastEncode"}})],1):e._e()],1),e._v(" "),a("el-card",{directives:[{name:"show",rawName:"v-show",value:e.cardVisable,expression:"cardVisable"}],staticClass:"box-card",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("设备参数设置")])]),e._v(" "),a("div",{staticClass:"bundleConfig"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"dh_camera"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'dh_camera'"}]},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("编码参数")]),e._v(" "),a("el-row",{attrs:{gutter:6}},[a("el-form",{ref:"dahuaForm",attrs:{model:e.dahuaFormData,rules:e.dahuaRules,size:"mini","label-width":"140px"}},[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"url",prop:"url"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入url",clearable:""},model:{value:e.dahuaFormData.url,callback:function(t){e.$set(e.dahuaFormData,"url",t)},expression:"dahuaFormData.url"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"模式设置",prop:"url"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.encodeModeChange},model:{value:e.dahuaFormData.modelConfig,callback:function(t){e.$set(e.dahuaFormData,"modelConfig",t)},expression:"dahuaFormData.modelConfig"}},[a("el-option",{attrs:{label:"质量优先",value:"quality_first"}}),e._v(" "),a("el-option",{attrs:{label:"码率优先",value:"bitrate_first"}}),e._v(" "),a("el-option",{attrs:{label:"自定义",value:"other"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"字幕大小（px）",prop:"osd_font_size"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.dahuaFormData.osd_font_size,callback:function(t){e.$set(e.dahuaFormData,"osd_font_size",e._n(t))},expression:"dahuaFormData.osd_font_size"}},[a("el-option",{attrs:{label:"16*16",value:16}}),e._v(" "),a("el-option",{attrs:{label:"32*32",value:32}}),e._v(" "),a("el-option",{attrs:{label:"48*48",value:48}}),e._v(" "),a("el-option",{attrs:{label:"64*64",value:64}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"编码方式",prop:"enc_param.br_ctrl"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.dahuaFormData.enc_param.br_ctrl,callback:function(t){e.$set(e.dahuaFormData.enc_param,"br_ctrl",t)},expression:"dahuaFormData.enc_param.br_ctrl"}},[a("el-option",{attrs:{label:"固定码率",value:"cbr"}}),e._v(" "),a("el-option",{attrs:{label:"可变码率",value:"vbr"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"编码类型",prop:"enc_param.codec"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.dahuaFormData.enc_param.codec,callback:function(t){e.$set(e.dahuaFormData.enc_param,"codec",t)},expression:"dahuaFormData.enc_param.codec"}},[a("el-option",{attrs:{label:"H264",value:"h264"}}),e._v(" "),a("el-option",{attrs:{label:"H265",value:"h265"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"编码质量",prop:"enc_param.quality"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.dahuaFormData.enc_param.quality,callback:function(t){e.$set(e.dahuaFormData.enc_param,"quality",t)},expression:"dahuaFormData.enc_param.quality"}},[a("el-option",{attrs:{label:"10",value:10}}),e._v(" "),a("el-option",{attrs:{label:"30",value:30}}),e._v(" "),a("el-option",{attrs:{label:"50",value:50}}),e._v(" "),a("el-option",{attrs:{label:"60",value:60}}),e._v(" "),a("el-option",{attrs:{label:"80",value:80}}),e._v(" "),a("el-option",{attrs:{label:"100",value:100}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"编码码率",prop:"enc_param.bitrate"}},[a("el-input",{style:{width:"100%"},attrs:{disabled:e.bitrateDisable,placeholder:"请输入编码码率",clearable:""},model:{value:e.dahuaFormData.enc_param.bitrate,callback:function(t){e.$set(e.dahuaFormData.enc_param,"bitrate",e._n(t))},expression:"dahuaFormData.enc_param.bitrate"}},[a("template",{slot:"append"},[e._v("kbps")])],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"视频宽度",prop:"enc_param.width"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入width",clearable:""},model:{value:e.dahuaFormData.enc_param.width,callback:function(t){e.$set(e.dahuaFormData.enc_param,"width",e._n(t))},expression:"dahuaFormData.enc_param.width"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"视频帧率",prop:"enc_param.frame_rate"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入frame_rate",clearable:""},model:{value:e.dahuaFormData.enc_param.frame_rate,callback:function(t){e.$set(e.dahuaFormData.enc_param,"frame_rate",e._n(t))},expression:"dahuaFormData.enc_param.frame_rate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"视频高度",prop:"enc_param.height"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入height",clearable:""},model:{value:e.dahuaFormData.enc_param.height,callback:function(t){e.$set(e.dahuaFormData.enc_param,"height",e._n(t))},expression:"dahuaFormData.enc_param.height"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"视频I帧间隔",prop:"enc_param.iframe_interva"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入视频I帧间隔",clearable:""},model:{value:e.dahuaFormData.enc_param.iframe_interva,callback:function(t){e.$set(e.dahuaFormData.enc_param,"iframe_interva",e._n(t))},expression:"dahuaFormData.enc_param.iframe_interva"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("标题字幕")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"是否启用",prop:"text_osd.enable"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.dahuaFormData.text_osd.enable,callback:function(t){e.$set(e.dahuaFormData.text_osd,"enable",t)},expression:"dahuaFormData.text_osd.enable"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"标题内容",prop:"text_osd.content"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入标题内容",clearable:""},model:{value:e.dahuaFormData.text_osd.content,callback:function(t){e.$set(e.dahuaFormData.text_osd,"content",t)},expression:"dahuaFormData.text_osd.content"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"字幕颜色",prop:"text_osd.color",required:""}},[a("el-color-picker",{attrs:{size:"medium",predefine:e.predefineColors},model:{value:e.dahuaFormData.text_osd.color,callback:function(t){e.$set(e.dahuaFormData.text_osd,"color",t)},expression:"dahuaFormData.text_osd.color"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"横坐标",prop:"text_osd.x"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入text_osd_x",clearable:""},model:{value:e.dahuaFormData.text_osd.x,callback:function(t){e.$set(e.dahuaFormData.text_osd,"x",e._n(t))},expression:"dahuaFormData.text_osd.x"}},[a("template",{slot:"append"},[e._v("[0-8192]")])],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"纵坐标",prop:"text_osd.y"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入text_osd_y",clearable:""},model:{value:e.dahuaFormData.text_osd.y,callback:function(t){e.$set(e.dahuaFormData.text_osd,"y",e._n(t))},expression:"dahuaFormData.text_osd.y"}},[a("template",{slot:"append"},[e._v("[0-8192]")])],2)],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("日期字幕")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"是否启用",prop:"date_osd.enable"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.dahuaFormData.date_osd.enable,callback:function(t){e.$set(e.dahuaFormData.date_osd,"enable",t)},expression:"dahuaFormData.date_osd.enable"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"启用星期",prop:"date_osd.has_week"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.dahuaFormData.date_osd.has_week,callback:function(t){e.$set(e.dahuaFormData.date_osd,"has_week",t)},expression:"dahuaFormData.date_osd.has_week"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"字幕颜色",prop:"date_osd.color",required:""}},[a("el-color-picker",{attrs:{size:"medium",predefine:e.predefineColors},model:{value:e.dahuaFormData.date_osd.color,callback:function(t){e.$set(e.dahuaFormData.date_osd,"color",t)},expression:"dahuaFormData.date_osd.color"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"横坐标",prop:"date_osd.x"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入date_osd_x",clearable:""},model:{value:e.dahuaFormData.date_osd.x,callback:function(t){e.$set(e.dahuaFormData.date_osd,"x",e._n(t))},expression:"dahuaFormData.date_osd.x"}},[a("template",{slot:"append"},[e._v("[0-8192]")])],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"纵坐标",prop:"date_osd.y"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入date_osd_y",clearable:""},model:{value:e.dahuaFormData.date_osd.y,callback:function(t){e.$set(e.dahuaFormData.date_osd,"y",e._n(t))},expression:"dahuaFormData.date_osd.y"}},[a("template",{slot:"append"},[e._v("[0-8192]")])],2)],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"ts_enc"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'ts_enc'"}]},[a("el-row",{attrs:{gutter:10}},[a("el-form",{ref:"TSencForm",attrs:{model:e.TSencFormData,rules:e.TSencRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"接收类型",prop:"is_multi"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择接收类型"},on:{change:e.TSencFormIsMultiChange},model:{value:e.TSencFormData.is_multi,callback:function(t){e.$set(e.TSencFormData,"is_multi",t)},expression:"TSencFormData.is_multi"}},e._l(e.is_multiOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"组播ip",prop:"multi_ip"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入组播ip",clearable:"",disabled:!e.TSencFormData.is_multi},model:{value:e.TSencFormData.multi_ip,callback:function(t){e.$set(e.TSencFormData,"multi_ip",t)},expression:"TSencFormData.multi_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"本机ip",prop:e.TSencFormData.is_multi?"local_ip":""}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入本机ip",clearable:""},model:{value:e.TSencFormData.local_ip,callback:function(t){e.$set(e.TSencFormData,"local_ip",t)},expression:"TSencFormData.local_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"接收端口",prop:"port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入接收端口",clearable:""},model:{value:e.TSencFormData.port,callback:function(t){e.$set(e.TSencFormData,"port",e._n(t))},expression:"TSencFormData.port"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"ts_dec"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'ts_dec'"}]},[a("el-row",{attrs:{gutter:10}},[a("el-form",{ref:"TSdecForm",attrs:{model:e.TSdecFormData,rules:e.TSdecRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"目标ip",prop:"dest_ip"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入目标ip",clearable:""},model:{value:e.TSdecFormData.dest_ip,callback:function(t){e.$set(e.TSdecFormData,"dest_ip",t)},expression:"TSdecFormData.dest_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"本机ip",prop:"local_ip"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入本机ip",clearable:""},model:{value:e.TSdecFormData.local_ip,callback:function(t){e.$set(e.TSdecFormData,"local_ip",t)},expression:"TSdecFormData.local_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"目标端口",prop:"dest_port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入目标端口",clearable:""},model:{value:e.TSdecFormData.dest_port,callback:function(t){e.$set(e.TSdecFormData,"dest_port",e._n(t))},expression:"TSdecFormData.dest_port"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"重校对时间戳",prop:"reset_tm"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择重校对时间戳"},model:{value:e.TSdecFormData.reset_tm,callback:function(t){e.$set(e.TSdecFormData,"reset_tm",t)},expression:"TSdecFormData.reset_tm"}},e._l(e.reset_tmOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"rtp_passby_enc"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'rtp_passby_enc'"}]},[a("el-row",{attrs:{gutter:10}},[a("el-form",{ref:"rtpPassbyEncForm",attrs:{model:e.rtpPassbyEncFormData,rules:e.rtpPassbyEncRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"接收类型",prop:"is_multi"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择接收类型"},on:{change:e.rtpPassbyEncFormIsMultiChange},model:{value:e.rtpPassbyEncFormData.is_multi,callback:function(t){e.$set(e.rtpPassbyEncFormData,"is_multi",t)},expression:"rtpPassbyEncFormData.is_multi"}},e._l(e.is_multiOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"组播ip",prop:e.rtpPassbyEncFormData.is_multi?"multi_ip":""}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入组播ip",clearable:"",disabled:e.rtpPassbyEncFormMultiIpDis},model:{value:e.rtpPassbyEncFormData.multi_ip,callback:function(t){e.$set(e.rtpPassbyEncFormData,"multi_ip",t)},expression:"rtpPassbyEncFormData.multi_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"本机ip",prop:e.rtpPassbyEncFormData.is_multi?"local_ip":""}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入本机ip",clearable:""},model:{value:e.rtpPassbyEncFormData.local_ip,callback:function(t){e.$set(e.rtpPassbyEncFormData,"local_ip",t)},expression:"rtpPassbyEncFormData.local_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"视频接收端口",prop:"video_port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入视频接收端口",clearable:""},model:{value:e.rtpPassbyEncFormData.video_port,callback:function(t){e.$set(e.rtpPassbyEncFormData,"video_port",e._n(t))},expression:"rtpPassbyEncFormData.video_port"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"音频接收端口",prop:"audio_port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入音频接收端口",clearable:""},model:{value:e.rtpPassbyEncFormData.audio_port,callback:function(t){e.$set(e.rtpPassbyEncFormData,"audio_port",e._n(t))},expression:"rtpPassbyEncFormData.audio_port"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"rtp_passby_dec"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'rtp_passby_dec'"}]},[a("el-row",{attrs:{gutter:10}},[a("el-form",{ref:"rtpPassbyDecForm",attrs:{model:e.rtpPassbyDecFormData,rules:e.rtpPassbyDecRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"目标ip",prop:"dest_ip"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入目标ip",clearable:""},model:{value:e.rtpPassbyDecFormData.dest_ip,callback:function(t){e.$set(e.rtpPassbyDecFormData,"dest_ip",t)},expression:"rtpPassbyDecFormData.dest_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"本机ip",prop:"local_ip"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入本机ip",clearable:""},model:{value:e.rtpPassbyDecFormData.local_ip,callback:function(t){e.$set(e.rtpPassbyDecFormData,"local_ip",t)},expression:"rtpPassbyDecFormData.local_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"视频发送端口",prop:"video_port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入视频发送端口",clearable:""},model:{value:e.rtpPassbyDecFormData.video_port,callback:function(t){e.$set(e.rtpPassbyDecFormData,"video_port",e._n(t))},expression:"rtpPassbyDecFormData.video_port"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"音频发送端口",prop:"audio_port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入音发送收端口",clearable:""},model:{value:e.rtpPassbyDecFormData.audio_port,callback:function(t){e.$set(e.rtpPassbyDecFormData,"audio_port",e._n(t))},expression:"rtpPassbyDecFormData.audio_port"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"重校对时间戳",prop:"reset_tm"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择重校对时间戳"},model:{value:e.rtpPassbyDecFormData.reset_tm,callback:function(t){e.$set(e.rtpPassbyDecFormData,"reset_tm",t)},expression:"rtpPassbyDecFormData.reset_tm"}},e._l(e.reset_tmOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"强制aac输出",prop:"aac_out"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择强制aac输出"},model:{value:e.rtpPassbyDecFormData.aac_out,callback:function(t){e.$set(e.rtpPassbyDecFormData,"aac_out",t)},expression:"rtpPassbyDecFormData.aac_out"}},e._l(e.aac_outOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"rtsp_enc"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'rtsp_enc'"}]},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"rtspEncForm",attrs:{model:e.rtspEncFormData,rules:e.rtspEncRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"流地址",prop:"url"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"rtsp://xxxxx","show-word-limit":"",clearable:""},model:{value:e.rtspEncFormData.url,callback:function(t){e.$set(e.rtspEncFormData,"url",t)},expression:"rtspEncFormData.url"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"rtmp_enc"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'rtmp_enc'"}]},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"rtspEncForm",attrs:{model:e.rtmpEncFormData,rules:e.rtmpEncRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"流地址",prop:"url"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"rtmp://xxxxx","show-word-limit":"",clearable:""},model:{value:e.rtmpEncFormData.url,callback:function(t){e.$set(e.rtmpEncFormData,"url",t)},expression:"rtmpEncFormData.url"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"onvif_enc"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'onvif_enc'"}]},[a("el-row",{attrs:{gutter:10}},[a("el-form",{ref:"onvifEncForm",attrs:{model:e.onvifEncFormData,rules:e.onvifEncRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"用户名",prop:"onvif_user"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入用户名",clearable:""},model:{value:e.onvifEncFormData.onvif_user,callback:function(t){e.$set(e.onvifEncFormData,"onvif_user",t)},expression:"onvifEncFormData.onvif_user"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"密码",prop:"onvif_pwd"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入密码",clearable:""},model:{value:e.onvifEncFormData.onvif_pwd,callback:function(t){e.$set(e.onvifEncFormData,"onvif_pwd",t)},expression:"onvifEncFormData.onvif_pwd"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"控制IP",prop:"onvif_ip"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入控制IP",clearable:""},model:{value:e.onvifEncFormData.onvif_ip,callback:function(t){e.$set(e.onvifEncFormData,"onvif_ip",t)},expression:"onvifEncFormData.onvif_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"控制端口",prop:"onvif_port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入控制端口",clearable:""},model:{value:e.onvifEncFormData.onvif_port,callback:function(t){e.$set(e.onvifEncFormData,"onvif_port",e._n(t))},expression:"onvifEncFormData.onvif_port"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"选择码率索引",prop:"onvif_sel_index"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入选择码率索引",clearable:""},model:{value:e.onvifEncFormData.onvif_sel_index,callback:function(t){e.$set(e.onvifEncFormData,"onvif_sel_index",e._n(t))},expression:"onvifEncFormData.onvif_sel_index"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"bq_enc"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'bq_enc'"}]},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"bqEncForm",attrs:{model:e.bqEncFormData,rules:e.bqEncRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"设备类型",prop:"bq_type"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择设备类型"},model:{value:e.bqEncFormData.bq_type,callback:function(t){e.$set(e.bqEncFormData,"bq_type",t)},expression:"bqEncFormData.bq_type"}},e._l(e.bq_typeOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:15}},[a("el-form-item",{attrs:{label:"流地址",prop:"url"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入流地址",clearable:""},model:{value:e.bqEncFormData.url,callback:function(t){e.$set(e.bqEncFormData,"url",t)},expression:"bqEncFormData.url"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"transcode_dec"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'transcode_dec'"}]},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"transcodeEecForm",attrs:{model:e.transcodeEecFormData,rules:e.transcodeEecRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"编码类型",prop:"dst_codec"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择编码类型"},model:{value:e.transcodeEecFormData.dst_codec,callback:function(t){e.$set(e.transcodeEecFormData,"dst_codec",t)},expression:"transcodeEecFormData.dst_codec"}},e._l(e.dst_codecOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"视频宽度",prop:"width"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入视频宽度",clearable:""},model:{value:e.transcodeEecFormData.width,callback:function(t){e.$set(e.transcodeEecFormData,"width",e._n(t))},expression:"transcodeEecFormData.width"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"视频高度",prop:"height"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入视频高度",clearable:""},model:{value:e.transcodeEecFormData.height,callback:function(t){e.$set(e.transcodeEecFormData,"height",e._n(t))},expression:"transcodeEecFormData.height"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"视频帧率",prop:"fps"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入视频帧率",clearable:""},model:{value:e.transcodeEecFormData.fps,callback:function(t){e.$set(e.transcodeEecFormData,"fps",e._n(t))},expression:"transcodeEecFormData.fps"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"视频I帧间隔",prop:"gop_size"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入帧间隔",clearable:""},model:{value:e.transcodeEecFormData.gop_size,callback:function(t){e.$set(e.transcodeEecFormData,"gop_size",e._n(t))},expression:"transcodeEecFormData.gop_size"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"url",prop:"url"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"udp://ip:port@localip",clearable:""},model:{value:e.transcodeEecFormData.url,callback:function(t){e.$set(e.transcodeEecFormData,"url",e._n(t))},expression:"transcodeEecFormData.url"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"bq_encoder"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'bq_encoder'"}]},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"bqEncForm",attrs:{model:e.bqEncoderFormData,rules:e.bqEncoderRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"设备类型",prop:"bq_type"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择设备类型"},model:{value:e.bqEncoderFormData.bq_type,callback:function(t){e.$set(e.bqEncoderFormData,"bq_type",t)},expression:"bqEncoderFormData.bq_type"}},[a("el-option",{attrs:{label:"6931S",value:"6931S"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"ip地址",prop:"bq_ip"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入ip",clearable:""},model:{value:e.bqEncoderFormData.bq_ip,callback:function(t){e.$set(e.bqEncoderFormData,"bq_ip",t)},expression:"bqEncoderFormData.bq_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"端口号",prop:"bq_port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入端口号",clearable:""},model:{value:e.bqEncoderFormData.bq_port,callback:function(t){e.$set(e.bqEncoderFormData,"bq_port",t)},expression:"bqEncoderFormData.bq_port"}})],1)],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{span:7}},[a("el-form-item",{attrs:{label:"设备账号",prop:"bq_user"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入设备账号",clearable:""},model:{value:e.bqEncoderFormData.bq_user,callback:function(t){e.$set(e.bqEncoderFormData,"bq_user",t)},expression:"bqEncoderFormData.bq_user"}})],1)],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{span:7}},[a("el-form-item",{attrs:{label:"设备密码",prop:"bq_passwd"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入设备密码",clearable:""},model:{value:e.bqEncoderFormData.bq_passwd,callback:function(t){e.$set(e.bqEncoderFormData,"bq_passwd",t)},expression:"bqEncoderFormData.bq_passwd"}})],1)],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{span:7}},[a("el-form-item",{attrs:{label:"通道序号",prop:"index"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入通道序号",clearable:""},model:{value:e.bqEncoderFormData.index,callback:function(t){e.$set(e.bqEncoderFormData,"index",t)},expression:"bqEncoderFormData.index"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"bq_decoder"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'bq_decoder'"}]},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"bqEncForm",attrs:{model:e.bqDecoderFormData,rules:e.bqDecoderRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"类型",prop:"bq_type"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择设备类型"},on:{change:e.bqTypeChange},model:{value:e.bqDecoderFormData.bq_type,callback:function(t){e.$set(e.bqDecoderFormData,"bq_type",t)},expression:"bqDecoderFormData.bq_type"}},[a("el-option",{attrs:{label:"D1",value:"D1"}}),e._v(" "),a("el-option",{attrs:{label:"D8",value:"D8"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"ip地址",prop:"bq_ip"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入ip",clearable:""},model:{value:e.bqDecoderFormData.bq_ip,callback:function(t){e.$set(e.bqDecoderFormData,"bq_ip",t)},expression:"bqDecoderFormData.bq_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"端口号",prop:"bq_port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入端口号",clearable:""},model:{value:e.bqDecoderFormData.bq_port,callback:function(t){e.$set(e.bqDecoderFormData,"bq_port",t)},expression:"bqDecoderFormData.bq_port"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"设备账号",prop:"bq_user"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入设备账号",clearable:""},model:{value:e.bqDecoderFormData.bq_user,callback:function(t){e.$set(e.bqDecoderFormData,"bq_user",t)},expression:"bqDecoderFormData.bq_user"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"设备密码",prop:"bq_passwd"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入设备密码",clearable:""},model:{value:e.bqDecoderFormData.bq_passwd,callback:function(t){e.$set(e.bqDecoderFormData,"bq_passwd",t)},expression:"bqDecoderFormData.bq_passwd"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"通道序号",prop:"index"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择通道序号"},model:{value:e.bqDecoderFormData.index,callback:function(t){e.$set(e.bqDecoderFormData,"index",t)},expression:"bqDecoderFormData.index"}},e._l(e.bqDecoderOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)],1)],1)])]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticStyle:{"margin-top":"10px","margin-left":"30px"},attrs:{type:"info",size:"small"},on:{click:e.addExtraInfo}},[e._v("新增扩展字段")]),e._v(" "),e._l(e.extraInfos,function(t,l){return a("div",{staticStyle:{"margin-top":"10px","margin-left":"30px"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"扩展字段名"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"extraInfo.name"}}),e._v(" "),a("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{size:"small",placeholder:"扩展字段值"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"extraInfo.value"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"danger"},on:{click:function(a){return a.preventDefault(),e.remove(t)}}},[e._v("删除")])],1)}),e._v(" "),a("div",{staticStyle:{"margin-top":"30px","margin-left":"30px"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1),e._v(" "),[a("el-dialog",{attrs:{title:"选择分组",visible:e.dialog.changeFolder.visible,width:"650px","before-close":e.handleChangeFolderClose},on:{"update:visible":function(t){return e.$set(e.dialog.changeFolder,"visible",t)}}},[a("div",{staticStyle:{height:"500px",position:"relative"}},[a("el-scrollbar",{staticStyle:{height:"100%"}},[a("el-tree",{ref:"changeFolderTree",attrs:{props:e.dialog.changeFolder.tree.props,data:e.dialog.changeFolder.tree.data,"node-key":"id","check-strictly":"","expand-on-click-node":!1,"default-expand-all":"","highlight-current":""},on:{"current-change":e.currentTreeNodeChange},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.node,r=t.data;return a("span",{staticStyle:{flex:"1",display:"flex","align-items":"center","justify-content":"space-between","padding-right":"8px"}},[a("span",{staticStyle:{"font-size":"14px"}},[a("span",{staticClass:"icon-folder-close"}),e._v(" "),a("span",[e._v(e._s(r.name))])]),e._v(" "),a("span",[a("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.treeNodeAppend(l,r)}}},[a("span",{staticClass:"icon-plus",staticStyle:{"font-size":"16px"}})])],1)])}}])})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:e.handleChangeFolderClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.handleChangeFolderCommit}},[e._v("确定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"添加分组",visible:e.dialog.addFolder.visible,width:"450px","before-close":e.handleAddFolderClose},on:{"update:visible":function(t){return e.$set(e.dialog.addFolder,"visible",t)}}},[a("el-form",{attrs:{"label-width":"110px"}},[a("el-form-item",{attrs:{label:"分组名称"}},[a("el-input",{model:{value:e.dialog.addFolder.folderName,callback:function(t){e.$set(e.dialog.addFolder,"folderName",t)},expression:"dialog.addFolder.folderName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否同步ldap"}},[a("el-select",{model:{value:e.dialog.addFolder.toLdap,callback:function(t){e.$set(e.dialog.addFolder,"toLdap",t)},expression:"dialog.addFolder.toLdap"}},[a("el-option",{key:"是",attrs:{label:"是",value:"是"}},[e._v("\n              是\n            ")]),e._v(" "),a("el-option",{key:"否",attrs:{label:"否",value:"否"}},[e._v("\n              否\n            ")])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:e.handleAddFolderClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.handleAddFolderCommit}},[e._v("确定")])],1)],1)],e._v(" "),[a("selectLayerNode",{ref:"selectLayerNode",on:{"layer-node-selected":e.layerNodeSelected}})]],2)},staticRenderFns:[]};var te=a("VU/8")(K,ee,!1,function(e){a("mQ+h")},null,null).exports,ae={name:"LwModifyBundle",data:function(){return{activeTabName:"LwModifyBundle",bundleId:this.$route.query.bundleId,bundleName:this.$route.query.bundleName,location:this.$route.query.location,deviceIp:this.$route.query.deviceIp,devicePort:this.$route.query.devicePort,multicastEncode:this.$route.query.multicastEncode,multicastEncodeAddr:this.$route.query.multicastEncodeAddr,multicastDecode:this.$route.query.multicastDecode,extraInfos:[],bundleFolderId:this.$route.query.bundleFolderId,bundleFolderName:this.$route.query.bundleFolderName,transcod:this.$route.query.transcod,multicastSourceIp:this.$route.query.multicastSourceIp,accessNodeName:this.$route.query.accessNodeName,deviceModel:this.$route.query.deviceModel,dialog:{changeFolder:{visible:!1,tree:{props:{label:"name",children:"children"},expandOnClickNode:!1,data:[],current:""}},addFolder:{visible:!1,parent:"",parentNode:"",folderName:"",toLdap:"否"}},devTypeOption:[{label:"sip编码器",value:"sip_enc"},{label:"sip解码器",value:"sip_dec"},{label:"sip编解码器",value:"sip_enc_dec"},{label:"大华摄像机",value:"dh_camera"},{label:"ts输入(虚编码)",value:"ts_enc"},{label:"ts输出(虚解码)",value:"ts_dec"},{label:"rtp透传输入(虚编码)",value:"rtp_passby_enc"},{label:"rtp透传输出(虚解码)",value:"rtp_passby_dec"},{label:"rtsp输入(虚编码)",value:"rtsp_enc"},{label:"rtmp输入(虚编码)",value:"rtmp_enc"},{label:"onvif输入(虚编码)",value:"onvif_enc"},{label:"北清编码器输入",value:"bq_enc"},{label:"28181编码器输入",value:"28181_enc"},{label:"转码输出(虚解码)",value:"transcode_dec"},{label:"北清接入编码器",value:"bq_encoder"},{label:"北清接入解码器",value:"bq_decoder"}],params:{},extraInfosEdit:[],extraParam:{dev_type:"",region:"",address:""},alarmSize:"",deviceModelOptions:[{label:"终端设备",value:"jv210"},{label:"存储设备",value:"cdn"}],regionOption:[{name:"本域",key:"self"},{name:"外域",key:"external"},{name:"卫通",key:"weitong"}],modelConfig:"other",alarmSizeVisable:!1,dahuaFormData:{url:"",osd_font_size:void 0,enc_param:{br_ctrl:void 0,codec:void 0,quality:void 0,bitrate:void 0,width:void 0,frame_rate:void 0,height:void 0,iframe_interva:void 0},text_osd:{enable:void 0,content:void 0,x:void 0,y:void 0,color:void 0},date_osd:{enable:void 0,has_week:void 0,x:void 0,y:void 0,color:void 0}},dahuaRules:{url:[{required:!0,message:"请输入url",trigger:"blur"}],osd_font_size:[{required:!0,message:"请输入osd_font_size",trigger:"blur"}],"enc_param.br_ctrl":[{required:!0,message:"请输入br_ctrl",trigger:"blur"}],"enc_param.codec":[{required:!0,message:"请输入codec",trigger:"blur"}],"enc_param.quality":[{required:!0,message:"请输入quality",trigger:"blur"}],"enc_param.bitrate":[{required:!0,message:"请输入bitrate",trigger:"blur"}],"enc_param.width":[{required:!0,message:"请输入width",trigger:"blur"}],"enc_param.frame_rate":[{required:!0,message:"请输入frame_rate",trigger:"blur"}],"enc_param.height":[{required:!0,message:"请输入height",trigger:"blur"}],"enc_param.iframe_interva":[{required:!0,message:"请输入iframe_interva",trigger:"blur"}],"text_osd.enable":[{required:!0,message:"请输入text_osd_enable",trigger:"blur"}],"text_osd.content":[{required:!0,message:"请输入text_osd_content",trigger:"blur"}],"text_osd.x":[{required:!0,message:"请输入text_osd_x",trigger:"blur"}],"text_osd.y":[{required:!0,message:"请输入text_osd_y",trigger:"blur"}],"date_osd.enable":[{required:!0,message:"请输入date_osd_enable",trigger:"blur"}],"date_osd.has_week":[{required:!0,message:"请输入date_osd_has_week",trigger:"blur"}],"date_osd.x":[{required:!0,message:"请输入date_osd_x",trigger:"blur"}],"date_osd.y":[{required:!0,message:"请输入date_osd_y",trigger:"blur"}]},cardVisable:!1,extraInfosAdd:[],TSencFormData:{is_multi:!0,multi_ip:"224.1.1.2",local_ip:"10.1.41.22",port:2e3},TSencRules:{is_multi:[{required:!0,message:"请选择接收类型",trigger:"change"}],multi_ip:[{required:!0,message:"请输入组播ip",trigger:"blur"}],local_ip:[{required:!0,message:"请输入本地ip",trigger:"blur"}],port:[{required:!0,message:"请输入接收端口",trigger:"blur"}]},is_multiOptions:[{label:"单播",value:!1},{label:"组播",value:!0}],TSdecFormData:{dest_ip:"224.1.1.2",local_ip:"10.1.41.22",dest_port:2e3,reset_tm:!0},TSdecRules:{dest_ip:[],local_ip:[],dest_port:[{required:!0,message:"请输入目标端口",trigger:"blur"}],reset_tm:[{required:!0,message:"请选择重校对时间戳",trigger:"change"}]},reset_tmOptions:[{label:"是",value:!0},{label:"否",value:!1}],rtpPassbyDecFormData:{dest_ip:"224.1.1.2",local_ip:"10.1.41.22",video_port:2e3,audio_port:2002,reset_tm:!1,aac_out:!1},rtpPassbyDecRules:{dest_ip:[],local_ip:[],video_port:[],audio_port:[],reset_tm:[{required:!0,message:"请选择重校对时间戳",trigger:"change"}],aac_out:[{required:!0,message:"请选择强制aac输出",trigger:"change"}]},aac_outOptions:[{label:"是",value:!0},{label:"否",value:!1}],rtpPassbyEncFormData:{is_multi:!0,multi_ip:"224.1.1.2",local_ip:"10.1.41.22",video_port:2e3,audio_port:2002},rtpPassbyEncRules:{is_multi:[{required:!0,message:"请选择接收类型",trigger:"change"}],multi_ip:[{required:!0,message:"请输入组播ip",trigger:"blur"}],local_ip:[{required:!0,message:"请输入本地ip",trigger:"blur"}],video_port:[],audio_port:[]},rtspEncFormData:{url:void 0},rtspEncRules:{url:[{required:!0,message:"请输入流地址",trigger:"blur"}]},rtmpEncFormData:{url:void 0},rtmpEncRules:{url:[{required:!0,message:"请输入流地址",trigger:"blur"}]},onvifEncFormData:{onvif_user:"anonymous",onvif_pwd:"anonymous",onvif_ip:"10.1.41.223",onvif_port:80,onvif_sel_index:0},onvifEncRules:{onvif_user:[{required:!0,message:"请输入用户名",trigger:"blur"}],onvif_pwd:[{required:!0,message:"请输入密码",trigger:"blur"}],onvif_ip:[],onvif_port:[{required:!0,message:"请输入控制端口",trigger:"blur"}],onvif_sel_index:[{required:!0,message:"请输入选择码率索引",trigger:"blur"}]},bqEncFormData:{bq_type:"6931S",url:"sstp+udp://127.0.0.1:8002/68ED6661-A641-4A95-9482-96F0AA024424"},bqEncRules:{bq_type:[{required:!0,message:"请选择设备类型",trigger:"change"}],url:[{required:!0,message:"请输入流地址",trigger:"blur"}]},bq_typeOptions:[{label:"6501S",value:"6501S"},{label:"6601S",value:"6601S"},{label:"6931S",value:"6931S"},{label:"8201C",value:"8201C"},{label:"8361C",value:"8361C"},{label:"8361P",value:"8361P"},{label:"8601C",value:"8601C"},{label:"ts_stream",value:"ts_stream"}],transcodeEecFormData:{dst_codec:"h264",width:720,height:576,fps:25,gop_size:25,url:""},transcodeEecRules:{dst_codec:[{required:!0,message:"请选择编码类型",trigger:"change"}],width:[{required:!0,message:"请输入视频宽度",trigger:"blur"}],height:[{required:!0,message:"请输入视频高度",trigger:"blur"}],fps:[{required:!0,message:"请输入视频帧率",trigger:"blur"}],gop_size:[{required:!0,message:"请输入视频I帧间隔",trigger:"blur"}],url:[{required:!0,message:"请输入url",trigger:"blur"}]},dst_codecOptions:[{label:"h264",value:"h264"},{label:"h265",value:"h265"}],TSencFormMultiIpDis:!1,rtpPassbyEncFormMultiIpDis:!1,isFictitiouVisable:!0,bitrateDisable:!1,configChannels:[{channelTemplateID:1,channelCnt:1,channelName:"VenusAudioIn"},{channelTemplateID:2,channelCnt:0,channelName:"VenusAudioOut"},{channelTemplateID:3,channelCnt:1,channelName:"VenusVideoIn"},{channelTemplateID:4,channelCnt:0,channelName:"VenusVideoOut"}],bqEncoderFormData:{bq_type:"6931S",bq_ip:"192.168.1.123",bq_port:8088,bq_user:"admin",bq_passwd:"admin",index:1},bqEncoderRules:{bq_ip:[{required:!0,message:"请输入ip",trigger:"blur"}],bq_port:[{required:!0,message:"请输入端口",trigger:"blur"}]},bqDecoderFormData:{bq_type:"D1",bq_ip:"192.168.1.123",bq_port:8088,bq_user:"admin",bq_passwd:"admin",index:1},bqDecoderRules:{bq_ip:[{required:!0,message:"请输入ip",trigger:"blur"}],bq_port:[{required:!0,message:"请输入端口",trigger:"blur"}],bq_user:[{required:!0,message:"请输入设备账号",trigger:"blur"}],bq_passwd:[{required:!0,message:"请输入设备密码",trigger:"blur"}],index:[{required:!0,message:"请输入设备序号",trigger:"blur"}]},bqDecoderOption:[{label:1,value:1},{label:2,value:2},{label:3,value:3},{label:4,value:4},{label:5,value:5},{label:6,value:6},{label:7,value:7},{label:8,value:8}]}},methods:{handleTabClick:function(e,t){"LwModifyBundle"!==e.name&&this.$router.push("/"+e.name)},queryBundleExtraInfo:function(){var e=this,t=this,a={bundleId:this.bundleId};Object(x._3)(a).then(function(a){if(a.errMsg)e.$message({message:a.errMsg,type:"error"});else{for(var l=a.extraInfos,r=0;r<l.length;r++)if("extend_param"==l[r].name){var o=JSON.parse(l[r].value);t.params=o.param,t.extraParam.dev_type=o.dev_type,t.extraParam.region=o.region,t.alarmSize=o.alarmSize,t.location=o.address,t.extraInfos=l[r]}["sip_enc","sip_dec","sip_enc_dec","28181_enc"].indexOf(o.dev_type)>-1?t.cardVisable=!1:t.cardVisable=!0;switch(["sip_enc","dh_camera","ts_enc","rtp_passby_enc","rtsp_enc","rtmp_enc","onvif_enc","bq_enc","28181_enc"].indexOf(o.dev_type)>-1?e.isFictitiouVisable=!0:e.isFictitiouVisable=!1,"cdn"==e.deviceModel&&(e.isFictitiouVisable=!1,e.bundleFolderVisable=!1),t.extraParam.dev_type){case"dh_camera":t.dahuaFormData=t.params;break;case"ts_enc":t.TSencFormData=t.params;break;case"ts_dec":t.TSdecFormData=t.params;break;case"rtp_passby_dec":t.rtpPassbyDecFormData=t.params;break;case"rtp_passby_enc":t.rtpPassbyEncFormData=t.params;break;case"rtsp_enc":t.rtspEncFormData=t.params;break;case"rtmp_enc":t.rtmpEncFormData=t.params;break;case"onvif_enc":t.onvifEncFormData=t.params;break;case"bq_enc":t.bqEncFormData=t.params;break;case"transcode_dec":t.transcodeEecFormData=t.params;break;case"bq_encoder":t.bqEncoderFormData=t.params;break;case"bq_decoder":t.bqDecoderFormData=t.params}}})},devTypeChange:function(e){["sip_enc","sip_dec","sip_enc_dec","28181_enc"].indexOf(e)>-1?this.cardVisable=!1:this.cardVisable=!0;["ts_dec","rtp_passby_dec","transcode_dec"].indexOf(e)>-1?this.isFictitiouVisable=!1:this.isFictitiouVisable=!0,["sip_enc","dh_camera","ts_enc","rtp_passby_enc","rtsp_enc","rtmp_enc","onvif_enc","bq_enc","28181_enc"].indexOf(e)>-1?(this.bundleForm.coderType="ENCODER",this.configChannels=[{channelTemplateID:1,channelCnt:1,channelName:"VenusAudioIn"},{channelTemplateID:2,channelCnt:0,channelName:"VenusAudioOut"},{channelTemplateID:3,channelCnt:1,channelName:"VenusVideoIn"},{channelTemplateID:4,channelCnt:0,channelName:"VenusVideoOut"}]):(this.bundleForm.coderType="DECODER",this.configChannels=[{channelTemplateID:1,channelCnt:0,channelName:"VenusAudioIn"},{channelTemplateID:2,channelCnt:1,channelName:"VenusAudioOut"},{channelTemplateID:3,channelCnt:0,channelName:"VenusVideoIn"},{channelTemplateID:4,channelCnt:1,channelName:"VenusVideoOut"}])},addExtraInfo:function(){this.extraInfos.push({})},remove:function(e){var t=this.extraInfos.indexOf(e);-1!==t&&this.extraInfos.splice(t,1)},submit:function(){var e=this,t=this.extraParam;switch(t.address=this.location,t.alarmSize=this.alarmSize,this.extraParam.dev_type){case"dh_camera":t.param=this.dahuaFormData;break;case"sip_enc":case"sip_dec":case"sip_enc_dec":case"28181_enc":t.param={};break;case"ts_enc":t.param=this.TSencFormData;break;case"ts_dec":t.param=this.TSdecFormData;break;case"rtp_passby_dec":t.param=this.rtpPassbyDecFormData,breakcase;case"rtp_passby_enc":t.param=this.rtpPassbyEncFormData;break;case"rtsp_enc":t.param=this.rtspEncFormData;break;case"rtmp_enc":t.param=this.rtmpEncFormData;break;case"onvif_enc":t.param=this.onvifEncFormData;break;case"bq_enc":t.param=this.bqEncFormData;break;case"transcode_dec":t.param=this.transcodeEecFormData;break;case"bq_encoder":t.param=this.bqEncoderFormData;break;case"bq_decoder":t.param=this.bqDecoderFormData}this.extraInfos.value=t;var a={bundleId:this.bundleId,bundleName:this.bundleName,location:this.location,folderId:this.bundleFolderId,deviceIp:this.deviceIp,devicePort:this.devicePort,multicastEncode:this.multicastEncode,multicastEncodeAddr:this.multicastEncodeAddr,multicastDecode:this.multicastDecode,transcod:this.transcod,multicastSourceIp:this.multicastSourceIp,extraInfos:O()([this.extraInfos])};Object(x.Z)(a).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"修改成功",type:"success"}),e.handleConfigBundle(t.bundleId))})},validateExtraInfo:function(){},handleConfigBundle:function(e){var t={bundleId:e,configChannels:O()(this.configChannels),configEditableAttrs:O()([])};configBundle(t).then(function(e){})},handleChangeFolder:function(){var e=this;e.dialog.changeFolder.visible=!0,Object(x._9)().then(function(t){if(200===t.status){if(e.dialog.changeFolder.tree.data.splice(0,e.dialog.changeFolder.tree.data.length),t.data&&t.data.length>0)for(var a=0;a<t.data.length;a++)e.dialog.changeFolder.tree.data.push(t.data[a])}else e.$message({type:"error",message:t.message})})},handleChangeFolderClose:function(){this.dialog.changeFolder.visible=!1,this.dialog.changeFolder.tree.data.splice(0,this.dialog.changeFolder.tree.data.length),this.dialog.changeFolder.tree.current=""},handleChangeFolderCommit:function(){console.log(this.dialog.changeFolder),this.bundleFolderId=this.dialog.changeFolder.tree.current.id,this.bundleFolderName=this.dialog.changeFolder.tree.current.name,this.handleChangeFolderClose()},currentTreeNodeChange:function(e,t){this.dialog.changeFolder.tree.current=e},treeNodeAppend:function(e,t){this.dialog.addFolder.parent=t,this.dialog.addFolder.parentNode=e,this.dialog.addFolder.visible=!0},handleAddFolderClose:function(){this.dialog.addFolder.parent="",this.dialog.addFolder.parentNode="",this.dialog.addFolder.visible=!1,this.dialog.addFolder.folderName="",this.dialog.addFolder.toLdap="否"},handleAddFolderCommit:function(){var e=this;addFolder({name:e.dialog.addFolder.folderName,parentId:e.dialog.addFolder.parent.id,toLdap:"是"===e.dialog.addFolder.toLdap}).then(function(t){e.dialog.addFolder.parent.children=e.dialog.addFolder.parent.children||[],t.errMsg||(e.dialog.addFolder.parent.children.push(t.folder),e.$refs.changeFolderTree.append(t.folder,e.dialog.addFolder.parentNode),e.handleAddFolderClose())})},handleSelectLayerNode:function(){this.$refs.selectLayerNode.show()},layerNodeSelected:function(e,t){this.bundleForm.accessNodeUid=e.nodeUid,t()},TSencFormIsMultiChange:function(e){this.TSencFormMultiIpDis=!e},rtpPassbyEncFormIsMultiChange:function(e){this.rtpPassbyEncFormMultiIpDis=!e},encodeModeChange:function(e){"bitrate_first"==e?(this.dahuaFormData.enc_param.bitrate=1024,this.bitrateDisable=!0):"quality_first"==e?(this.dahuaFormData.enc_param.bitrate=8192,this.bitrateDisable=!0):this.bitrateDisable=!1}},mounted:function(){var e=this;this.queryBundleExtraInfo(),this.row=JSON.parse(sessionStorage.getItem("row")),Object(x.L)().then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.regionOption=t.data.rows,e.regionOption.unshift({id:99999,identity:"self",stationName:"本域"}))})}},le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"资源列表",name:"LwLocalBundleManage"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"修改资源",name:"LwModifyBundle"}})],1),e._v(" "),a("el-form",{attrs:{"label-width":"100px",inline:!0}},[a("el-form-item",{attrs:{size:"small",label:"设备名称",prop:"bundleName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入新的设备名称"},model:{value:e.bundleName,callback:function(t){e.bundleName=t},expression:"bundleName"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"设备形态",prop:"deviceModel"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"small"},on:{change:e.deviceModelChange},model:{value:e.deviceModel,callback:function(t){e.deviceModel=t},expression:"deviceModel"}},e._l(e.deviceModelOptions,function(e){return a("el-option",{key:e.value,attrs:{disabled:"",label:e.label,value:e.value}})}),1)],1),e._v(" "),"jv210"==e.deviceModel?a("el-form-item",{attrs:{size:"small",label:"设备类型"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},on:{change:e.devTypeChange},model:{value:e.extraParam.dev_type,callback:function(t){e.$set(e.extraParam,"dev_type",t)},expression:"extraParam.dev_type"}},[e._l(e.devTypeOption,function(e){return[a("el-option",{key:e.value,attrs:{disabled:"",label:e.label,value:e.value}})]})],2)],1):e._e(),e._v(" "),"jv210"==e.deviceModel?a("el-form-item",{attrs:{size:"small",label:"域类型"}},[a("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"请选择域类型"},model:{value:e.extraParam.region,callback:function(t){e.$set(e.extraParam,"region",t)},expression:"extraParam.region"}},e._l(e.regionOption,function(e){return a("el-option",{key:e.uuid,attrs:{disabled:"",label:e.stationName,value:e.identity}})}),1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"地点",prop:"bundleAlias"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.location,callback:function(t){e.location=t},expression:"location"}})],1),e._v(" "),"jv210"==e.deviceModel?a("el-form-item",{attrs:{size:"small",label:"接入层",prop:"accessNodeName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{readOnly:""},model:{value:e.accessNodeName,callback:function(t){e.accessNodeName=t},expression:"accessNodeName"}})],1):e._e(),e._v(" "),e.isFictitiouVisable?a("el-form-item",{attrs:{size:"small",label:"源组播Ip"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.multicastSourceIp,callback:function(t){e.multicastSourceIp=t},expression:"multicastSourceIp"}})],1):e._e(),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isFictitiouVisable,expression:"isFictitiouVisable"}],attrs:{size:"small",label:"编码组播地址"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.multicastEncodeAddr,callback:function(t){e.multicastEncodeAddr=t},expression:"multicastEncodeAddr"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isFictitiouVisable,expression:"isFictitiouVisable"}],attrs:{size:"small",label:"编码组播"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.multicastEncode,callback:function(t){e.multicastEncode=t},expression:"multicastEncode"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"设备分组",prop:"bundleFolderName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{readOnly:""},nativeOn:{click:function(t){return e.handleChangeFolder(t)}},model:{value:e.bundleFolderName,callback:function(t){e.bundleFolderName=t},expression:"bundleFolderName"}})],1),e._v(" "),"cdn"==e.deviceModel?a("el-form-item",{attrs:{size:"small",label:"告警容量"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"auto-complete":"off",required:""},model:{value:e.alarmSize,callback:function(t){e.alarmSize=t},expression:"alarmSize"}})],1):e._e()],1),e._v(" "),a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("设备参数设置")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.cardVisable,expression:"cardVisable"}],staticClass:"bundleConfig"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"dh_camera"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'dh_camera'"}]},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("编码参数")]),e._v(" "),a("el-row",{attrs:{gutter:6}},[a("el-form",{ref:"dahuaForm",attrs:{model:e.dahuaFormData,rules:e.dahuaRules,size:"mini","label-width":"140px"}},[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"url",prop:"url"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入url",clearable:""},model:{value:e.dahuaFormData.url,callback:function(t){e.$set(e.dahuaFormData,"url",t)},expression:"dahuaFormData.url"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"模式设置",prop:"url"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.encodeModeChange},model:{value:e.modelConfig,callback:function(t){e.modelConfig=t},expression:"modelConfig"}},[a("el-option",{attrs:{label:"质量优先",value:"quality_first"}}),e._v(" "),a("el-option",{attrs:{label:"码率优先",value:"bitrate_first"}}),e._v(" "),a("el-option",{attrs:{label:"自定义",value:"other"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"字幕大小（px）",prop:"osd_font_size"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.dahuaFormData.osd_font_size,callback:function(t){e.$set(e.dahuaFormData,"osd_font_size",e._n(t))},expression:"dahuaFormData.osd_font_size"}},[a("el-option",{attrs:{label:"16*16",value:16}}),e._v(" "),a("el-option",{attrs:{label:"32*32",value:32}}),e._v(" "),a("el-option",{attrs:{label:"48*48",value:48}}),e._v(" "),a("el-option",{attrs:{label:"64*64",value:64}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"编码方式",prop:"enc_param.br_ctrl"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.dahuaFormData.enc_param.br_ctrl,callback:function(t){e.$set(e.dahuaFormData.enc_param,"br_ctrl",t)},expression:"dahuaFormData.enc_param.br_ctrl"}},[a("el-option",{attrs:{label:"固定码率",value:"cbr"}}),e._v(" "),a("el-option",{attrs:{label:"可变码率",value:"vbr"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"编码类型",prop:"enc_param.codec"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.dahuaFormData.enc_param.codec,callback:function(t){e.$set(e.dahuaFormData.enc_param,"codec",t)},expression:"dahuaFormData.enc_param.codec"}},[a("el-option",{attrs:{label:"H264",value:"h264"}}),e._v(" "),a("el-option",{attrs:{label:"H265",value:"h265"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"编码质量",prop:"enc_param.quality"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.dahuaFormData.enc_param.quality,callback:function(t){e.$set(e.dahuaFormData.enc_param,"quality",t)},expression:"dahuaFormData.enc_param.quality"}},[a("el-option",{attrs:{label:"10",value:10}}),e._v(" "),a("el-option",{attrs:{label:"30",value:30}}),e._v(" "),a("el-option",{attrs:{label:"50",value:50}}),e._v(" "),a("el-option",{attrs:{label:"60",value:60}}),e._v(" "),a("el-option",{attrs:{label:"80",value:80}}),e._v(" "),a("el-option",{attrs:{label:"100",value:100}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"编码码率",prop:"enc_param.bitrate"}},[a("el-input",{style:{width:"100%"},attrs:{disabled:e.bitrateDisable,placeholder:"请输入编码码率",clearable:""},model:{value:e.dahuaFormData.enc_param.bitrate,callback:function(t){e.$set(e.dahuaFormData.enc_param,"bitrate",e._n(t))},expression:"dahuaFormData.enc_param.bitrate"}},[a("template",{slot:"append"},[e._v("kbps")])],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"视频宽度",prop:"enc_param.width"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入width",clearable:""},model:{value:e.dahuaFormData.enc_param.width,callback:function(t){e.$set(e.dahuaFormData.enc_param,"width",e._n(t))},expression:"dahuaFormData.enc_param.width"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"视频帧率",prop:"enc_param.frame_rate"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入frame_rate",clearable:""},model:{value:e.dahuaFormData.enc_param.frame_rate,callback:function(t){e.$set(e.dahuaFormData.enc_param,"frame_rate",e._n(t))},expression:"dahuaFormData.enc_param.frame_rate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"视频高度",prop:"enc_param.height"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入height",clearable:""},model:{value:e.dahuaFormData.enc_param.height,callback:function(t){e.$set(e.dahuaFormData.enc_param,"height",e._n(t))},expression:"dahuaFormData.enc_param.height"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"视频I帧间隔",prop:"enc_param.iframe_interva"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入视频I帧间隔",clearable:""},model:{value:e.dahuaFormData.enc_param.iframe_interva,callback:function(t){e.$set(e.dahuaFormData.enc_param,"iframe_interva",e._n(t))},expression:"dahuaFormData.enc_param.iframe_interva"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("标题字幕")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"启用",prop:"text_osd.enable"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.dahuaFormData.text_osd.enable,callback:function(t){e.$set(e.dahuaFormData.text_osd,"enable",t)},expression:"dahuaFormData.text_osd.enable"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"标题内容",prop:"text_osd.content"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入标题内容",clearable:""},model:{value:e.dahuaFormData.text_osd.content,callback:function(t){e.$set(e.dahuaFormData.text_osd,"content",t)},expression:"dahuaFormData.text_osd.content"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"字幕颜色",prop:"text_osd.color",required:""}},[a("el-color-picker",{attrs:{size:"medium"},model:{value:e.dahuaFormData.text_osd.color,callback:function(t){e.$set(e.dahuaFormData.text_osd,"color",t)},expression:"dahuaFormData.text_osd.color"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"横坐标",prop:"text_osd.x"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入text_osd_x",clearable:""},model:{value:e.dahuaFormData.text_osd.x,callback:function(t){e.$set(e.dahuaFormData.text_osd,"x",e._n(t))},expression:"dahuaFormData.text_osd.x"}},[a("template",{slot:"append"},[e._v("[0-8192]")])],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"纵坐标",prop:"text_osd.y"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入text_osd_y",clearable:""},model:{value:e.dahuaFormData.text_osd.y,callback:function(t){e.$set(e.dahuaFormData.text_osd,"y",e._n(t))},expression:"dahuaFormData.text_osd.y"}},[a("template",{slot:"append"},[e._v("[0-8192]")])],2)],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("日期字幕")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"是否启用",prop:"date_osd.enable"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.dahuaFormData.date_osd.enable,callback:function(t){e.$set(e.dahuaFormData.date_osd,"enable",t)},expression:"dahuaFormData.date_osd.enable"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"启用星期",prop:"date_osd.has_week"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.dahuaFormData.date_osd.has_week,callback:function(t){e.$set(e.dahuaFormData.date_osd,"has_week",t)},expression:"dahuaFormData.date_osd.has_week"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"字幕颜色",prop:"date_osd.color",required:""}},[a("el-color-picker",{attrs:{size:"medium"},model:{value:e.dahuaFormData.date_osd.color,callback:function(t){e.$set(e.dahuaFormData.date_osd,"color",t)},expression:"dahuaFormData.date_osd.color"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"横坐标",prop:"date_osd.x"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入date_osd_x",clearable:""},model:{value:e.dahuaFormData.date_osd.x,callback:function(t){e.$set(e.dahuaFormData.date_osd,"x",e._n(t))},expression:"dahuaFormData.date_osd.x"}},[a("template",{slot:"append"},[e._v("[0-8192]")])],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"纵坐标",prop:"date_osd.y"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入date_osd_y",clearable:""},model:{value:e.dahuaFormData.date_osd.y,callback:function(t){e.$set(e.dahuaFormData.date_osd,"y",e._n(t))},expression:"dahuaFormData.date_osd.y"}},[a("template",{slot:"append"},[e._v("[0-8192]")])],2)],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"ts_enc"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'ts_enc'"}]},[a("el-row",{attrs:{gutter:10}},[a("el-form",{ref:"TSencForm",attrs:{model:e.TSencFormData,rules:e.TSencRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"接收类型",prop:"is_multi"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择接收类型"},on:{change:e.TSencFormIsMultiChange},model:{value:e.TSencFormData.is_multi,callback:function(t){e.$set(e.TSencFormData,"is_multi",t)},expression:"TSencFormData.is_multi"}},e._l(e.is_multiOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"组播ip",prop:e.TSencFormData.is_multi?"multi_ip":""}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入组播ip",clearable:"",disabled:e.TSencFormMultiIpDis},model:{value:e.TSencFormData.multi_ip,callback:function(t){e.$set(e.TSencFormData,"multi_ip",t)},expression:"TSencFormData.multi_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"本机ip",prop:e.TSencFormData.is_multi?"local_ip":""}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入本机ip",clearable:""},model:{value:e.TSencFormData.local_ip,callback:function(t){e.$set(e.TSencFormData,"local_ip",t)},expression:"TSencFormData.local_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"接收端口",prop:"port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入接收端口",clearable:""},model:{value:e.TSencFormData.port,callback:function(t){e.$set(e.TSencFormData,"port",e._n(t))},expression:"TSencFormData.port"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"ts_dec"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'ts_dec'"}]},[a("el-row",{attrs:{gutter:10}},[a("el-form",{ref:"TSdecForm",attrs:{model:e.TSdecFormData,rules:e.TSdecRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"目标ip",prop:"dest_ip"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入目标ip",clearable:""},model:{value:e.TSdecFormData.dest_ip,callback:function(t){e.$set(e.TSdecFormData,"dest_ip",t)},expression:"TSdecFormData.dest_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"本机ip",prop:"local_ip"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入本机ip",clearable:""},model:{value:e.TSdecFormData.local_ip,callback:function(t){e.$set(e.TSdecFormData,"local_ip",t)},expression:"TSdecFormData.local_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"目标端口",prop:"dest_port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入目标端口",clearable:""},model:{value:e.TSdecFormData.dest_port,callback:function(t){e.$set(e.TSdecFormData,"dest_port",e._n(t))},expression:"TSdecFormData.dest_port"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"重校对时间戳",prop:"reset_tm"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择重校对时间戳"},model:{value:e.TSdecFormData.reset_tm,callback:function(t){e.$set(e.TSdecFormData,"reset_tm",t)},expression:"TSdecFormData.reset_tm"}},e._l(e.reset_tmOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"rtp_passby_enc"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'rtp_passby_enc'"}]},[a("el-row",{attrs:{gutter:10}},[a("el-form",{ref:"rtpPassbyEncForm",attrs:{model:e.rtpPassbyEncFormData,rules:e.rtpPassbyEncRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"接收类型",prop:"is_multi"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择接收类型"},on:{change:e.rtpPassbyEncFormIsMultiChange},model:{value:e.rtpPassbyEncFormData.is_multi,callback:function(t){e.$set(e.rtpPassbyEncFormData,"is_multi",t)},expression:"rtpPassbyEncFormData.is_multi"}},e._l(e.is_multiOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"组播ip",prop:e.rtpPassbyEncFormData.is_multi?"multi_ip":""}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入组播ip",clearable:"",disabled:e.rtpPassbyEncFormMultiIpDis},model:{value:e.rtpPassbyEncFormData.multi_ip,callback:function(t){e.$set(e.rtpPassbyEncFormData,"multi_ip",t)},expression:"rtpPassbyEncFormData.multi_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"本机ip",prop:e.rtpPassbyEncFormData.is_multi?"local_ip":""}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入本机ip",clearable:""},model:{value:e.rtpPassbyEncFormData.local_ip,callback:function(t){e.$set(e.rtpPassbyEncFormData,"local_ip",t)},expression:"rtpPassbyEncFormData.local_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"视频接收端口",prop:"video_port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入视频接收端口",clearable:""},model:{value:e.rtpPassbyEncFormData.video_port,callback:function(t){e.$set(e.rtpPassbyEncFormData,"video_port",e._n(t))},expression:"rtpPassbyEncFormData.video_port"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"音频接收端口",prop:"audio_port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入音频接收端口",clearable:""},model:{value:e.rtpPassbyEncFormData.audio_port,callback:function(t){e.$set(e.rtpPassbyEncFormData,"audio_port",e._n(t))},expression:"rtpPassbyEncFormData.audio_port"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"rtp_passby_dec"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'rtp_passby_dec'"}]},[a("el-row",{attrs:{gutter:10}},[a("el-form",{ref:"rtpPassbyDecForm",attrs:{model:e.rtpPassbyDecFormData,rules:e.rtpPassbyDecRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"目标ip",prop:"dest_ip"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入目标ip",clearable:""},model:{value:e.rtpPassbyDecFormData.dest_ip,callback:function(t){e.$set(e.rtpPassbyDecFormData,"dest_ip",t)},expression:"rtpPassbyDecFormData.dest_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"本机ip",prop:"local_ip"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入本机ip",clearable:""},model:{value:e.rtpPassbyDecFormData.local_ip,callback:function(t){e.$set(e.rtpPassbyDecFormData,"local_ip",t)},expression:"rtpPassbyDecFormData.local_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"视频接收端口",prop:"video_port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入视频接收端口",clearable:""},model:{value:e.rtpPassbyDecFormData.video_port,callback:function(t){e.$set(e.rtpPassbyDecFormData,"video_port",e._n(t))},expression:"rtpPassbyDecFormData.video_port"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"音频接收端口",prop:"audio_port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入音频接收端口",clearable:""},model:{value:e.rtpPassbyDecFormData.audio_port,callback:function(t){e.$set(e.rtpPassbyDecFormData,"audio_port",e._n(t))},expression:"rtpPassbyDecFormData.audio_port"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"重校对时间戳",prop:"reset_tm"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择重校对时间戳"},model:{value:e.rtpPassbyDecFormData.reset_tm,callback:function(t){e.$set(e.rtpPassbyDecFormData,"reset_tm",t)},expression:"rtpPassbyDecFormData.reset_tm"}},e._l(e.reset_tmOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"强制aac输出",prop:"aac_out"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择强制aac输出"},model:{value:e.rtpPassbyDecFormData.aac_out,callback:function(t){e.$set(e.rtpPassbyDecFormData,"aac_out",t)},expression:"rtpPassbyDecFormData.aac_out"}},e._l(e.aac_outOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"rtsp_enc"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'rtsp_enc'"}]},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"rtspEncForm",attrs:{model:e.rtspEncFormData,rules:e.rtspEncRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"流地址",prop:"url"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"rtsp://xxxxx","show-word-limit":"",clearable:""},model:{value:e.rtspEncFormData.url,callback:function(t){e.$set(e.rtspEncFormData,"url",t)},expression:"rtspEncFormData.url"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"rtmp_enc"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'rtmp_enc'"}]},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"rtspEncForm",attrs:{model:e.rtmpEncFormData,rules:e.rtmpEncRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"流地址",prop:"url"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"rtmp://xxxxx","show-word-limit":"",clearable:""},model:{value:e.rtmpEncFormData.url,callback:function(t){e.$set(e.rtmpEncFormData,"url",t)},expression:"rtmpEncFormData.url"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"onvif_enc"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'onvif_enc'"}]},[a("el-row",{attrs:{gutter:10}},[a("el-form",{ref:"onvifEncForm",attrs:{model:e.onvifEncFormData,rules:e.onvifEncRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"用户名",prop:"onvif_user"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入用户名",clearable:""},model:{value:e.onvifEncFormData.onvif_user,callback:function(t){e.$set(e.onvifEncFormData,"onvif_user",t)},expression:"onvifEncFormData.onvif_user"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"密码",prop:"onvif_pwd"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入密码",clearable:""},model:{value:e.onvifEncFormData.onvif_pwd,callback:function(t){e.$set(e.onvifEncFormData,"onvif_pwd",t)},expression:"onvifEncFormData.onvif_pwd"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"控制IP",prop:"onvif_ip"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入控制IP",clearable:""},model:{value:e.onvifEncFormData.onvif_ip,callback:function(t){e.$set(e.onvifEncFormData,"onvif_ip",t)},expression:"onvifEncFormData.onvif_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"控制端口",prop:"onvif_port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入控制端口",clearable:""},model:{value:e.onvifEncFormData.onvif_port,callback:function(t){e.$set(e.onvifEncFormData,"onvif_port",e._n(t))},expression:"onvifEncFormData.onvif_port"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"选择码率索引",prop:"onvif_sel_index"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入选择码率索引",clearable:""},model:{value:e.onvifEncFormData.onvif_sel_index,callback:function(t){e.$set(e.onvifEncFormData,"onvif_sel_index",e._n(t))},expression:"onvifEncFormData.onvif_sel_index"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"bq_enc"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'bq_enc'"}]},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"bqEncForm",attrs:{model:e.bqEncFormData,rules:e.bqEncRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"设备类型",prop:"bq_type"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择设备类型"},model:{value:e.bqEncFormData.bq_type,callback:function(t){e.$set(e.bqEncFormData,"bq_type",t)},expression:"bqEncFormData.bq_type"}},e._l(e.bq_typeOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:15}},[a("el-form-item",{attrs:{label:"流地址",prop:"url"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入流地址",clearable:""},model:{value:e.bqEncFormData.url,callback:function(t){e.$set(e.bqEncFormData,"url",t)},expression:"bqEncFormData.url"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"transcode_dec"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'transcode_dec'"}]},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"transcodeEecForm",attrs:{model:e.transcodeEecFormData,rules:e.transcodeEecRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"编码类型",prop:"dst_codec"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择编码类型"},model:{value:e.transcodeEecFormData.dst_codec,callback:function(t){e.$set(e.transcodeEecFormData,"dst_codec",t)},expression:"transcodeEecFormData.dst_codec"}},e._l(e.dst_codecOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"视频宽度",prop:"width"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入视频宽度",clearable:""},model:{value:e.transcodeEecFormData.width,callback:function(t){e.$set(e.transcodeEecFormData,"width",e._n(t))},expression:"transcodeEecFormData.width"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"视频高度",prop:"height"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入视频高度",clearable:""},model:{value:e.transcodeEecFormData.height,callback:function(t){e.$set(e.transcodeEecFormData,"height",e._n(t))},expression:"transcodeEecFormData.height"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"视频帧率",prop:"fps"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入视频帧率",clearable:""},model:{value:e.transcodeEecFormData.fps,callback:function(t){e.$set(e.transcodeEecFormData,"fps",e._n(t))},expression:"transcodeEecFormData.fps"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"视频I帧间隔",prop:"gop_size"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入帧间隔",clearable:""},model:{value:e.transcodeEecFormData.gop_size,callback:function(t){e.$set(e.transcodeEecFormData,"gop_size",e._n(t))},expression:"transcodeEecFormData.gop_size"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"url",prop:"url"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"udp://ip:port@localip",clearable:""},model:{value:e.transcodeEecFormData.url,callback:function(t){e.$set(e.transcodeEecFormData,"url",e._n(t))},expression:"transcodeEecFormData.url"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"bq_encoder"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'bq_encoder'"}]},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"bqEncForm",attrs:{model:e.bqEncoderFormData,rules:e.bqEncoderRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"设备类型",prop:"bq_type"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择设备类型"},model:{value:e.bqEncoderFormData.bq_type,callback:function(t){e.$set(e.bqEncoderFormData,"bq_type",t)},expression:"bqEncoderFormData.bq_type"}},[a("el-option",{attrs:{label:"6931S",value:"6931S"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"ip地址",prop:"bq_ip"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入ip",clearable:""},model:{value:e.bqEncoderFormData.bq_ip,callback:function(t){e.$set(e.bqEncoderFormData,"bq_ip",t)},expression:"bqEncoderFormData.bq_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"端口号",prop:"bq_port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入端口号",clearable:""},model:{value:e.bqEncoderFormData.bq_port,callback:function(t){e.$set(e.bqEncoderFormData,"bq_port",t)},expression:"bqEncoderFormData.bq_port"}})],1)],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{span:7}},[a("el-form-item",{attrs:{label:"设备账号",prop:"bq_user"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入设备账号",clearable:""},model:{value:e.bqEncoderFormData.bq_user,callback:function(t){e.$set(e.bqEncoderFormData,"bq_user",t)},expression:"bqEncoderFormData.bq_user"}})],1)],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{span:7}},[a("el-form-item",{attrs:{label:"设备密码",prop:"bq_passwd"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入设备密码",clearable:""},model:{value:e.bqEncoderFormData.passwd,callback:function(t){e.$set(e.bqEncoderFormData,"passwd",t)},expression:"bqEncoderFormData.passwd"}})],1)],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{span:7}},[a("el-form-item",{attrs:{label:"通道序号",prop:"index"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入通道序号",clearable:""},model:{value:e.bqEncoderFormData.index,callback:function(t){e.$set(e.bqEncoderFormData,"index",t)},expression:"bqEncoderFormData.index"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"bq_decoder"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'bq_decoder'"}]},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"bqEncForm",attrs:{model:e.bqDecoderFormData,rules:e.bqDecoderRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"类型",prop:"bq_type"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择设备类型"},on:{change:e.bqTypeChange},model:{value:e.bqDecoderFormData.bq_type,callback:function(t){e.$set(e.bqDecoderFormData,"bq_type",t)},expression:"bqDecoderFormData.bq_type"}},[a("el-option",{attrs:{disabled:"",label:"D1",value:"D1"}}),e._v(" "),a("el-option",{attrs:{disabled:"",label:"D8",value:"D8"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"ip地址",prop:"bq_ip"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入ip",clearable:""},model:{value:e.bqDecoderFormData.bq_ip,callback:function(t){e.$set(e.bqDecoderFormData,"bq_ip",t)},expression:"bqDecoderFormData.bq_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"端口号",prop:"bq_port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入端口号",clearable:""},model:{value:e.bqDecoderFormData.bq_port,callback:function(t){e.$set(e.bqDecoderFormData,"bq_port",t)},expression:"bqDecoderFormData.bq_port"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"设备账号",prop:"bq_user"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入设备账号",clearable:""},model:{value:e.bqDecoderFormData.bq_user,callback:function(t){e.$set(e.bqDecoderFormData,"bq_user",t)},expression:"bqDecoderFormData.bq_user"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"设备密码",prop:"passwd"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入设备密码",clearable:""},model:{value:e.bqDecoderFormData.bq_passwd,callback:function(t){e.$set(e.bqDecoderFormData,"bq_passwd",t)},expression:"bqDecoderFormData.bq_passwd"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"通道序号",prop:"index"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择通道序号"},model:{value:e.bqDecoderFormData.index,callback:function(t){e.$set(e.bqDecoderFormData,"index",t)},expression:"bqDecoderFormData.index"}},e._l(e.bqDecoderOption,function(e){return a("el-option",{key:e.value,attrs:{disabled:"",label:e.label,value:e.value}})}),1)],1)],1)],1)],1)],1)])]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticStyle:{"margin-top":"20px","margin-left":"30px"},attrs:{type:"info",size:"small"},on:{click:e.addExtraInfo}},[e._v("新增扩展字段")]),e._v(" "),a("div",{staticStyle:{"margin-top":"30px","margin-left":"30px"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submit}},[e._v("提交")])],1),e._v(" "),[a("el-dialog",{attrs:{title:"选择分组",visible:e.dialog.changeFolder.visible,width:"650px","before-close":e.handleChangeFolderClose},on:{"update:visible":function(t){return e.$set(e.dialog.changeFolder,"visible",t)}}},[a("div",{staticStyle:{height:"500px",position:"relative"}},[a("el-scrollbar",{staticStyle:{height:"100%"}},[a("el-tree",{ref:"changeFolderTree",attrs:{props:e.dialog.changeFolder.tree.props,data:e.dialog.changeFolder.tree.data,"node-key":"id","check-strictly":"","expand-on-click-node":!1,"default-expand-all":"","highlight-current":""},on:{"current-change":e.currentTreeNodeChange},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.node,r=t.data;return a("span",{staticStyle:{flex:"1",display:"flex","align-items":"center","justify-content":"space-between","padding-right":"8px"}},[a("span",{staticStyle:{"font-size":"14px"}},[a("span",{staticClass:"icon-folder-close"}),e._v(" "),a("span",[e._v(e._s(r.name))])]),e._v(" "),a("span",[a("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.treeNodeAppend(l,r)}}},[a("span",{staticClass:"icon-plus",staticStyle:{"font-size":"16px"}})])],1)])}}])})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:e.handleChangeFolderClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.handleChangeFolderCommit}},[e._v("确定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"添加分组",visible:e.dialog.addFolder.visible,width:"450px","before-close":e.handleAddFolderClose},on:{"update:visible":function(t){return e.$set(e.dialog.addFolder,"visible",t)}}},[a("el-form",{attrs:{"label-width":"110px"}},[a("el-form-item",{attrs:{label:"分组名称"}},[a("el-input",{model:{value:e.dialog.addFolder.folderName,callback:function(t){e.$set(e.dialog.addFolder,"folderName",t)},expression:"dialog.addFolder.folderName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否同步ldap"}},[a("el-select",{model:{value:e.dialog.addFolder.toLdap,callback:function(t){e.$set(e.dialog.addFolder,"toLdap",t)},expression:"dialog.addFolder.toLdap"}},[a("el-option",{key:"是",attrs:{label:"是",value:"是"}},[e._v("\n              是\n            ")]),e._v(" "),a("el-option",{key:"否",attrs:{label:"否",value:"否"}},[e._v("\n              否\n            ")])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:e.handleAddFolderClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.handleAddFolderCommit}},[e._v("确定")])],1)],1)]],2)},staticRenderFns:[]};var re=a("VU/8")(ae,le,!1,function(e){a("gstv")},"data-v-717aaa36",null).exports,oe={name:"ConfigBundle",data:function(){return{activeTabName:"LwConfigBundle",bundleId:this.$route.query.bundleId,templateTree:[],treeProps:{children:"children",label:"label"},configChannels:[],configEditableAttrs:[]}},methods:{handleTabClick:function(e,t){"LwConfigBundle"!==e.name&&this.$router.push("/"+e.name)},displayBundleAbility:function(e){var t=this,a={bundleId:this.bundleId};Object(x.B)(a).then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):(t.templateTree=e.tree,t.configChannels=e.configChannels,t.configEditableAttrs=e.configEditableAttrs)})},submit:function(){var e=this,t={bundleId:this.bundleId,configChannels:O()(this.configChannels),configEditableAttrs:O()(this.configEditableAttrs)};Object(x.l)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.$message({message:"配置成功",type:"success"})})}},mounted:function(){this.displayBundleAbility()}},ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"资源列表",name:"LwLocalBundleManage"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"能力配置",name:"LwConfigBundle"}})],1),e._v(" "),a("el-card",{staticStyle:{float:"left","margin-left":"50px","margin-top":"10px",width:"40%","min-height":"700px"},attrs:{"body-style":"padding:0px"}},[a("div",{staticStyle:{height:"15px"},attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{float:"left","font-size":"18px"}},[e._v("模板属性")])]),e._v(" "),a("el-tree",{attrs:{data:e.templateTree,props:e.treeProps,"node-key":"label","default-expanded-keys":["channels"]}})],1),e._v(" "),a("el-card",{staticStyle:{float:"left","margin-top":"10px",width:"50%","min-height":"700px"},attrs:{"body-style":"padding:0px"}},[a("div",{staticStyle:{height:"15px"},attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{float:"left","font-size":"18px"}},[e._v("配置")])]),e._v(" "),e._l(e.configChannels,function(t,l){return a("div",{staticStyle:{"margin-top":"10px"}},[a("el-input",{attrs:{placeholder:"请输入整数"},model:{value:t.channelCnt,callback:function(a){e.$set(t,"channelCnt",a)},expression:"channel.channelCnt"}},[a("template",{slot:"prepend"},[e._v(e._s(t.channelName)+" 通道数")])],2)],1)}),e._v(" "),e._l(e.configEditableAttrs,function(t,l){return a("div",{staticStyle:{"margin-top":"10px"}},[a("el-input",{attrs:{placeholder:"请输入字段值"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"editableAttr.value"}},[a("template",{slot:"prepend"},[e._v(e._s(t.name))])],2)],1)}),e._v(" "),a("div",{staticStyle:{"margin-top":"50px"}},[a("el-button",{staticStyle:{"margin-left":"300px"},attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],2)],1)},staticRenderFns:[]};var ie=a("VU/8")(oe,ne,!1,function(e){a("exDE")},"data-v-ca82770e",null).exports,se=a("nvbp"),de=a.n(se),ce={data:function(){return{treeData:[],folderTreeSelected:{value:"",label:""},defaultProps:{children:"children",label:"name"},defaultExpandAll:!1,expandOnClickNode:!1,activeTabName:"BindRoleResource",deviceModelOptions:[{label:"全部设备",value:""},{label:"终端设备",value:"jv210"},{label:"存储设备",value:"cdn"}],roles:[],currentRoleRow:null,resources:[],bindTypeOptions:[{value:"all",label:"全部"},{value:"binded",label:"已绑定"},{value:"unbinded",label:"未绑定"}],filters:{deviceModel:"jv210",keyword:"",bindType:"all",countPerPage:""},total:0,pageNum:1,countPerPage:20,roleTableLoading:!1,resourceTableLoading:!1,prevReadChecks:[],prevWriteChecks:[],prevCloudChecks:[],prevDownloadChecks:[],prevLocalReadChecks:[],prevHJChecks:[],prevZKChecks:[],prevHYChecks:[],readChecks:[],writeChecks:[],cloudChecks:[],downloadChecks:[],LocalReadChecks:[],HJchecks:[],ZKchecks:[],HYchecks:[],detailDialogVisible:!1,detailInfos:[],users:[],userTableLoading:!1,resourceTableShow:!0,userTableShow:!1,checkReadAll:!1,checkWriteAll:!1,checkCloudAll:!1,checkHJAll:!1,checkZKAll:!1,checkHYAll:!1,checkDownLoadAll:!1,checkLocalReadAll:!1}},methods:{dataFilter:function(e){this.$refs.tree.filter(e)},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},initTree:function(e){var t=this;Object(x.T)().then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):t.treeData=t.treeData.concat(e.tree)})},handleNodeClick:function(e){this.folderTreeSelected.value=e.id,this.folderTreeSelected.label=e.name,this.$refs.selectTree.blur()},clearHandle:function(){this.folderTreeSelected.value="",this.folderTreeSelected.label="",this.$refs.tree.filter("")},deviceModelChange:function(e){this.pageNum=1},handleTabClick:function(e,t){"BindResource"!==e.name&&this.$router.push("/"+e.name)},handleRoleTableRowChange:function(e){this.currentRoleRow=e,this.resourceTableShow?this.getResources():this.userTableShow&&this.getUsers()},renderCheckReadHeader:function(e,t){var a=this;return e("el-checkbox",de()([{attrs:{value:a.checkReadAll},on:{input:function(e){a.checkReadAll=e}}},{directives:[{name:"model",value:a.checkReadAll}]},{on:{change:this.handleCheckReadAllChange}}]),["服务端录制"])},renderCheckWriteHeader:function(e,t){var a=this;return e("el-checkbox",de()([{attrs:{value:a.checkWriteAll},on:{input:function(e){a.checkWriteAll=e}}},{directives:[{name:"model",value:a.checkWriteAll}]},{on:{change:this.handleCheckWriteAllChange}}]),["点播"])},renderCheckCloudHeader:function(e,t){var a=this;return e("el-checkbox",de()([{attrs:{value:a.checkCloudAll},on:{input:function(e){a.checkCloudAll=e}}},{directives:[{name:"model",value:a.checkCloudAll}]},{on:{change:this.handleCheckCloudAllChange}}]),["云台"])},renderCheckDownLoadHeader:function(e,t){var a=this;return e("el-checkbox",de()([{attrs:{value:a.checkDownLoadAll},on:{input:function(e){a.checkDownLoadAll=e}}},{directives:[{name:"model",value:a.checkDownLoadAll}]},{on:{change:this.handleCheckDownLoadAllChange}}]),["下载"])},renderCheckLocalReadHeader:function(e,t){var a=this;return e("el-checkbox",de()([{attrs:{value:a.checkLocalReadAll},on:{input:function(e){a.checkLocalReadAll=e}}},{directives:[{name:"model",value:a.checkLocalReadAll}]},{on:{change:this.handleCheckLocalReadAllChange}}]),["本地录制"])},renderCheckHJHeader:function(e,t){var a=this;return e("el-checkbox",de()([{attrs:{value:a.checkHJAll},on:{input:function(e){a.checkHJAll=e}}},{directives:[{name:"model",value:a.checkHJAll}]},{on:{change:this.handleCheckHJAllChange}}]),["呼叫"])},renderCheckZKHeader:function(e,t){var a=this;return e("el-checkbox",de()([{attrs:{value:a.checkZKAll},on:{input:function(e){a.checkZKAll=e}}},{directives:[{name:"model",value:a.checkZKAll}]},{on:{change:this.handleCheckZKAllChange}}]),["指挥"])},renderCheckHYHeader:function(e,t){var a=this;return e("el-checkbox",de()([{attrs:{value:a.checkHYAll},on:{input:function(e){a.checkHYAll=e}}},{directives:[{name:"model",value:a.checkHYAll}]},{on:{change:this.handleCheckHYAllChange}}]),["会议"])},handleCheckReadAllChange:function(e){this.checkAllChange(e,"readChecks","hasReadPrivilege")},handleCheckWriteAllChange:function(e){this.checkAllChange(e,"writeChecks","hasWritePrivilege")},handleCheckCloudAllChange:function(e){this.checkAllChange(e,"cloudChecks","hasCloudPrivilege")},handleCheckDownLoadAllChange:function(e){this.checkAllChange(e,"downloadChecks","hasDownloadPrivilege")},handleCheckLocalReadAllChange:function(e){this.checkAllChange(e,"LocalReadChecks","hasLocalReadPrivilege")},checkAllChange:function(e,t,a){if(this.resourceTableShow)if(e){this[t]=[];var l=!0,r=!1,o=void 0;try{for(var n,i=A()(this.resources);!(l=(n=i.next()).done);l=!0){var s=n.value;this[t].push(s.bundleId),s[a]=!0}}catch(e){r=!0,o=e}finally{try{!l&&i.return&&i.return()}finally{if(r)throw o}}}else{this[t]=[];var d=!0,c=!1,u=void 0;try{for(var p,m=A()(this.resources);!(d=(p=m.next()).done);d=!0){p.value[a]=!1}}catch(e){c=!0,u=e}finally{try{!d&&m.return&&m.return()}finally{if(c)throw u}}}else if(this.userTableShow)if(e){this[t]=[];var h=!0,b=!1,f=void 0;try{for(var v,g=A()(this.users);!(h=(v=g.next()).done);h=!0){var y=v.value;this[t].push(y.userNo),y[a]=!0}}catch(e){b=!0,f=e}finally{try{!h&&g.return&&g.return()}finally{if(b)throw f}}}else{this[t]=[];var _=!0,w=!1,x=void 0;try{for(var F,k=A()(this.users);!(_=(F=k.next()).done);_=!0){F.value[a]=!1}}catch(e){w=!0,x=e}finally{try{!_&&k.return&&k.return()}finally{if(w)throw x}}}},handleCheckHJAllChange:function(e){if(this.userTableShow)if(e){var t=!0,a=!1,l=void 0;try{for(var r,o=A()(this.users);!(t=(r=o.next()).done);t=!0){var n=r.value;this.HJchecks.push(n.userNo),n.hasHJPrivilege=!0}}catch(e){a=!0,l=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw l}}}else{this.HJchecks=[];var i=!0,s=!1,d=void 0;try{for(var c,u=A()(this.users);!(i=(c=u.next()).done);i=!0){c.value.hasHJPrivilege=!1}}catch(e){s=!0,d=e}finally{try{!i&&u.return&&u.return()}finally{if(s)throw d}}}},handleCheckZKAllChange:function(e){if(this.userTableShow)if(e){var t=!0,a=!1,l=void 0;try{for(var r,o=A()(this.users);!(t=(r=o.next()).done);t=!0){var n=r.value;this.ZKchecks.push(n.userNo),n.hasZKPrivilege=!0}}catch(e){a=!0,l=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw l}}}else{this.ZKchecks=[];var i=!0,s=!1,d=void 0;try{for(var c,u=A()(this.users);!(i=(c=u.next()).done);i=!0){c.value.hasZKPrivilege=!1}}catch(e){s=!0,d=e}finally{try{!i&&u.return&&u.return()}finally{if(s)throw d}}}},handleCheckHYAllChange:function(e){if(this.userTableShow)if(e){var t=!0,a=!1,l=void 0;try{for(var r,o=A()(this.users);!(t=(r=o.next()).done);t=!0){var n=r.value;this.HYchecks.push(n.userNo),n.hasHYPrivilege=!0}}catch(e){a=!0,l=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw l}}}else{this.HYchecks=[];var i=!0,s=!1,d=void 0;try{for(var c,u=A()(this.users);!(i=(c=u.next()).done);i=!0){c.value.hasHYPrivilege=!1}}catch(e){s=!0,d=e}finally{try{!i&&u.return&&u.return()}finally{if(s)throw d}}}},handleCheckReadChange:function(e){this.checkChange(e,"hasReadPrivilege","readChecks","checkReadAll")},handleCheckWriteChange:function(e){this.checkChange(e,"hasWritePrivilege","writeChecks","checkWriteAll")},handleCheckCloudChange:function(e){this.checkChange(e,"hasCloudPrivilege","cloudChecks","checkCloudAll")},handleCheckDownLoadChange:function(e){this.checkChange(e,"hasDownloadPrivilege","downloadChecks","checkDownLoadAll")},handleCheckLocalReadChange:function(e){this.checkChange(e,"hasLocalReadPrivilege","LocalReadChecks","checkLocalReadAll")},checkChange:function(e,t,a,l){this.resourceTableShow?e[t]?(this[a].push(e.bundleId),this[a].length===this.resources.length&&(this[l]=!0)):(this[a].splice(this[a].indexOf(e.bundleId),1),this[l]=!1):this.userTableShow&&(e[t]?(this[a].push(e.userNo),this[a].length===this.user.length&&(this[l]=!0)):(this[a].splice(this[a].indexOf(e.userNo),1),this[l]=!1))},handleCheckHJChange:function(e){this.userTableShow&&(e.hasHJPrivilege?(this.HJchecks.push(e.userNo),this.HJchecks.length===this.users.length&&(this.checkHJAll=!0)):(this.HJchecks.splice(this.HJchecks.indexOf(e.userNo),1),this.checkHJAll=!1))},handleCheckZKChange:function(e){this.userTableShow&&(e.hasZKPrivilege?(this.ZKchecks.push(e.userNo),this.ZKchecks.length===this.users.length&&(this.checkZKAll=!0)):(this.ZKchecks.splice(this.ZKchecks.indexOf(e.userNo),1),this.checkZKAll=!1))},handleCheckHYChange:function(e){this.userTableShow&&(e.hasHYPrivilege?(this.HYchecks.push(e.userNo),this.HYchecks.length===this.users.length&&(this.checkHYAll=!0)):(this.HYchecks.splice(this.HYchecks.indexOf(e.userNo),1),this.checkHYAll=!1))},getRoles:function(){var e=this;this.roleTableLoading=!0,Object(x.z)({}).then(function(t){if(t.errMsg)e.$message({message:t.errMsg,type:"error"});else for(var a=0;a<t.roles.length;a++){var l=t.roles[a];7==l.id||4==l.id||6==l.id||e.roles.push(l)}e.roleTableLoading=!1})},getDeviceModels:function(){var e=this;Object(x.G)().then(function(t){if(!t.errMsg&&t.deviceModels){e.deviceModelOptions.push({value:"",label:"全部类型"});var a=!0,l=!1,r=void 0;try{for(var o,n=A()(t.deviceModels);!(a=(o=n.next()).done);a=!0){var i=o.value,s={value:i,label:i};e.deviceModelOptions.push(s)}}catch(e){l=!0,r=e}finally{try{!a&&n.return&&n.return()}finally{if(l)throw r}}}})},getResources:function(){var e=this;if(this.currentRoleRow){this.resourceTableShow=!0,this.userTableShow=!1,this.prevReadChecks=[],this.prevWriteChecks=[],this.prevCloudChecks=[],this.prevDownloadChecks=[],this.prevLocalReadChecks=[],this.readChecks=[],this.writeChecks=[],this.cloudChecks=[],this.downloadChecks=[],this.LocalReadChecks=[],this.checkReadAll=!1,this.checkWriteAll=!1,this.checkCloudAll=!1,this.checkHJAll=!1,this.checkZKAll=!1,this.checkHYAll=!1,this.countPerPage=20,/^[1-9]+[0-9]*]*$/.test(this.filters.countPerPage)&&(this.countPerPage=parseInt(this.filters.countPerPage)),this.resourceTableShow&&this.countPerPage*(this.pageNum-1)>this.total&&(this.pageNum=Math.ceil(this.total/this.countPerPage)),""!=this.filters.deviceModel||""!=this.filters.keyword||this.folderTreeSelected.value;var t={roleId:this.currentRoleRow.id,bindType:this.filters.bindType,deviceModel:this.filters.deviceModel,keyword:this.filters.keyword,folderId:this.folderTreeSelected.value,pageNum:this.pageNum,countPerPage:this.countPerPage};this.resourceTableLoading=!0,Object(x.F)(t).then(function(t){if(t.errMsg)e.$message({message:t.errMsg,type:"error"});else{e.total=t.total,e.resources=t.resources;var a=!0,l=!1,r=void 0;try{for(var o,n=A()(e.resources);!(a=(o=n.next()).done);a=!0){var i=o.value;i.hasReadPrivilege&&(e.prevReadChecks.push(i.bundleId),e.readChecks.push(i.bundleId)),i.hasWritePrivilege&&(e.prevWriteChecks.push(i.bundleId),e.writeChecks.push(i.bundleId)),i.hasCloudPrivilege&&(e.prevCloudChecks.push(i.bundleId),e.cloudChecks.push(i.bundleId)),i.hasDownloadPrivilege&&(e.prevDownloadChecks.push(i.bundleId),e.downloadChecks.push(i.bundleId)),i.hasLocalReadPrivilege&&(e.prevLocalReadChecks.push(i.bundleId),e.LocalReadChecks.push(i.bundleId))}}catch(e){l=!0,r=e}finally{try{!a&&n.return&&n.return()}finally{if(l)throw r}}e.readChecks.length===e.resources.length&&(e.checkReadAll=!0),e.writeChecks.length===e.resources.length&&(e.checkWriteAll=!0),e.cloudChecks.length===e.resources.length&&(e.checkCloudAll=!0),e.downloadChecks.length===e.resources.length&&(e.checkDownLoadAll=!0),e.LocalReadChecks.length===e.resources.length&&(e.checkLocalReadAll=!0)}e.resourceTableLoading=!1})}else this.$message({message:"请先选择角色",type:"error"})},handleCurrentPageChange:function(e){this.pageNum=e,this.resourceTableShow?this.getResources():this.getUsers()},getUsers:function(){var e=this;if(this.resourceTableShow&&(this.pageNum=1),this.currentRoleRow){this.resourceTableShow=!1,this.userTableShow=!0,this.prevReadChecks=[],this.prevWriteChecks=[],this.prevCloiudChecks=[],this.readChecks=[],this.writeChecks=[],this.cloudChecks=[],this.prevHJChecks=[],this.prevZKChecks=[],this.prevHYChecks=[],this.HJchecks=[],this.ZKchecks=[],this.HYchecks=[],this.checkReadAll=!1,this.checkWriteAll=!1,this.checkCloudAll=!1,this.checkHJAll=!1,this.checkZKAll=!1,this.checkHYAll=!1,this.countPerPage=20,/^[1-9]+[0-9]*]*$/.test(this.filters.countPerPage)&&(this.countPerPage=parseInt(this.filters.countPerPage)),this.resourceTableShow||this.countPerPage*(this.pageNum-1)>this.total&&(this.pageNum=Math.ceil(this.total/this.countPerPage)),""==this.filters.keyword&&""==this.folderTreeSelected.value||(this.pageNum=1);var t={roleId:this.currentRoleRow.id,keyword:this.filters.keyword,folderId:this.folderTreeSelected.value,pageNum:this.pageNum,countPerPage:this.countPerPage};this.userTableLoading=!0,Object(x.O)(t).then(function(t){if(t.errMsg)e.$message({message:t.errMsg,type:"error"});else{e.total=t.total,e.users=t.users;var a=!0,l=!1,r=void 0;try{for(var o,n=A()(e.users);!(a=(o=n.next()).done);a=!0){var i=o.value;i.hasReadPrivilege&&(e.prevReadChecks.push(i.userNo),e.readChecks.push(i.userNo)),i.hasWritePrivilege&&(e.prevWriteChecks.push(i.userNo),e.writeChecks.push(i.userNo)),i.hasCloudPrivilege&&(e.prevCloudChecks.push(i.userNo),e.cloudChecks.push(i.userNo)),i.hasHJPrivilege&&(e.prevHJChecks.push(i.userNo),e.HJchecks.push(i.userNo)),i.hasZKPrivilege&&(e.prevZKChecks.push(i.userNo),e.ZKchecks.push(i.userNo)),i.hasHYPrivilege&&(e.prevHYChecks.push(i.userNo),e.HYchecks.push(i.userNo))}}catch(e){l=!0,r=e}finally{try{!a&&n.return&&n.return()}finally{if(l)throw r}}e.readChecks.length===e.users.length&&(e.checkReadAll=!0),e.writeChecks.length===e.users.length&&(e.checkWriteAll=!0),e.cloudChecks.length===e.users.length&&(e.checkCloudAll=!0),e.HJchecks.length===e.users.length&&(e.checkHJAll=!0),e.ZKchecks.length===e.users.length&&(e.checkZKAll=!0),e.HYchecks.length===e.users.length&&(e.checkHYAll=!0)}e.userTableLoading=!1})}else this.$message({message:"请先选择角色",type:"error"})},submitPrivilege:function(){var e=this;if(this.resourceTableShow){var t={roleId:this.currentRoleRow.id,prevReadChecks:this.prevReadChecks.join(","),prevWriteChecks:this.prevWriteChecks.join(","),prevCloudChecks:this.prevCloudChecks.join(","),prevDownloadChecks:this.prevDownloadChecks.join(","),prevLocalReadChecks:this.prevLocalReadChecks.join(","),readChecks:this.readChecks.join(","),writeChecks:this.writeChecks.join(","),cloudChecks:this.cloudChecks.join(","),downloadChecks:this.downloadChecks.join(","),localReadChecks:this.LocalReadChecks.join(",")};this.resourceTableLoading=!0,Object(x._29)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"提交成功",type:"success"}),e.prevReadChecks=[].concat(e.readChecks),e.prevWriteChecks=[].concat(e.writeChecks),e.prevCloudChecks=[].concat(e.cloudChecks),e.prevDownloadChecks=[].concat(e.downloadChecks),e.prevLocalReadChecks=[].concat(e.LocalReadChecks),e.getResources()),e.resourceTableLoading=!1})}else if(this.userTableShow){var a={roleId:this.currentRoleRow.id,prevReadChecks:this.prevReadChecks.join(","),prevWriteChecks:this.prevWriteChecks.join(","),prevCloudChecks:this.prevCloudChecks.join(","),prevDownloadChecks:this.prevDownloadChecks.join(","),prevLocalReadChecks:this.prevLocalReadChecks.join(","),prevHJChecks:this.prevHJChecks.join(","),prevZKChecks:this.prevZKChecks.join(","),prevHYChecks:this.prevHYChecks.join(","),readChecks:this.readChecks.join(","),writeChecks:this.writeChecks.join(","),cloudChecks:this.cloudChecks.join(","),downloadChecks:this.downloadChecks.join(","),localReadChecks:this.LocalReadChecks.join(","),hjChecks:this.HJchecks.join(","),zkChecks:this.ZKchecks.join(","),hyChecks:this.HYchecks.join(",")};this.userTableLoading=!0,Object(x._30)(a).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"提交成功",type:"success"}),e.prevReadChecks=[].concat(e.readChecks),e.prevWriteChecks=[].concat(e.writeChecks),e.prevCloudChecks=[].concat(e.cloudChecks),e.prevHJChecks=[].concat(e.HJchecks),e.prevZKChecks=[].concat(e.ZKchecks),e.prevHYChecks=[].concat(e.HYchecks)),e.userTableLoading=!1})}}},mounted:function(){this.getRoles(),this.initTree()}},ue={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-card",{staticStyle:{float:"left","margin-top":"10px",width:"15%","font-size":"18px"},attrs:{"body-style":"padding:0px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.roleTableLoading,expression:"roleTableLoading"}],ref:"roleTable",staticStyle:{width:"100%"},attrs:{data:e.roles,"highlight-current-row":""},on:{"current-change":e.handleRoleTableRowChange}},[a("el-table-column",{attrs:{prop:"name",label:"角色名",sortable:""}})],1)],1),e._v(" "),a("el-card",{staticStyle:{float:"left","margin-left":"20px","margin-top":"10px",width:"80%"},attrs:{"body-style":"padding-left:30px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{float:"left","font-size":"14px",height:"34px","line-height":"34px"}},[e._v("选择分组：")]),e._v(" "),a("el-select",{ref:"selectTree",staticStyle:{float:"left",width:"200px"},attrs:{size:"medium",placeholder:"选择分组",filterable:"","filter-method":e.dataFilter,clearable:""},on:{clear:e.clearHandle},model:{value:e.folderTreeSelected.label,callback:function(t){e.$set(e.folderTreeSelected,"label",t)},expression:"folderTreeSelected.label"}},[a("el-option",{staticClass:"tree-select",staticStyle:{width:"200px",height:"auto",overflow:"hidden"},attrs:{value:e.folderTreeSelected.value,label:e.folderTreeSelected.label}},[a("el-tree",{ref:"tree",attrs:{data:e.treeData,props:e.defaultProps,"default-expand-all":e.defaultExpandAll,"filter-node-method":e.filterNode,"expand-on-click-node":e.expandOnClickNode},on:{"node-click":e.handleNodeClick}})],1)],1),e._v(" "),a("el-select",{staticStyle:{float:"left","margin-left":"10px",width:"120px"},attrs:{size:"medium",placeholder:"选择资源类型"},on:{change:e.deviceModelChange},model:{value:e.filters.deviceModel,callback:function(t){e.$set(e.filters,"deviceModel",t)},expression:"filters.deviceModel"}},e._l(e.deviceModelOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{staticStyle:{float:"left","margin-left":"10px",width:"200px"},attrs:{size:"medium",placeholder:"关键字"},model:{value:e.filters.keyword,callback:function(t){e.$set(e.filters,"keyword",t)},expression:"filters.keyword"}}),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{size:"small",type:"info"},on:{click:e.getResources}},[e._v("查询设备")])],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.resourceTableShow,expression:"resourceTableShow"},{name:"loading",rawName:"v-loading",value:e.resourceTableLoading,expression:"resourceTableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.resources,"max-height":"450"}},[a("el-table-column",{attrs:{prop:"name",label:"名称",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceModel",label:"资源类型",width:"120",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return["jv210"==t.row.deviceModel?a("div",[e._v("终端设备")]):a("div",[e._v("存储设备")])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"150","render-header":e.renderCheckReadHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.handleCheckReadChange(t.row)}},model:{value:t.row.hasReadPrivilege,callback:function(a){e.$set(t.row,"hasReadPrivilege",a)},expression:"scope.row.hasReadPrivilege"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100","render-header":e.renderCheckWriteHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.handleCheckWriteChange(t.row)}},model:{value:t.row.hasWritePrivilege,callback:function(a){e.$set(t.row,"hasWritePrivilege",a)},expression:"scope.row.hasWritePrivilege"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100","render-header":e.renderCheckCloudHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.handleCheckCloudChange(t.row)}},model:{value:t.row.hasCloudPrivilege,callback:function(a){e.$set(t.row,"hasCloudPrivilege",a)},expression:"scope.row.hasCloudPrivilege"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100","render-header":e.renderCheckDownLoadHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.handleCheckDownLoadChange(t.row)}},model:{value:t.row.hasDownloadPrivilege,callback:function(a){e.$set(t.row,"hasDownloadPrivilege",a)},expression:"scope.row.hasDownloadPrivilege"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"150","render-header":e.renderCheckLocalReadHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.handleCheckLocalReadChange(t.row)}},model:{value:t.row.hasLocalReadPrivilege,callback:function(a){e.$set(t.row,"hasLocalReadPrivilege",a)},expression:"scope.row.hasLocalReadPrivilege"}})]}}])})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitPrivilege}},[e._v("提交")]),e._v(" "),a("el-input",{staticStyle:{float:"right","margin-right":"30px",width:"200px"},attrs:{size:"small",placeholder:"单页显示数量,默认20"},model:{value:e.filters.countPerPage,callback:function(t){e.$set(e.filters,"countPerPage",t)},expression:"filters.countPerPage"}}),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":e.countPerPage,"current-page":e.pageNum,total:e.total},on:{"current-change":e.handleCurrentPageChange}})],1)],1)],1)},staticRenderFns:[]};var pe=a("VU/8")(ce,ue,!1,function(e){a("VNDC")},null,null).exports,me=a("u4Bf"),he={components:{draggable:a.n(me).a},data:function(){return{activeTabName:"EncodeManage",drag:!1,dialogFormVisible:!1,treeLoading:!1,tree:[{id:1,parentId:-1,name:"xx基地",beFolder:!0,toLdap:!0,bundleId:null,username:null,folderType:null,children:[{id:11,parentId:1,name:"发射场",beFolder:!0,toLdap:!0,bundleId:null,username:null,folderType:null,children:[],systemSourceType:!0,folderIndex:1,nodeType:"FOLDER"},{id:13,parentId:1,name:"指控中心",beFolder:!0,toLdap:!0,bundleId:null,username:null,folderType:null,children:[{id:15,parentId:13,name:"网络摄像头",beFolder:!0,toLdap:!0,bundleId:null,username:null,folderType:null,children:[{id:100089,parentId:15,name:"大华摄像头1",beFolder:!1,toLdap:null,bundleId:"bc7e14ce41e540649e92f479cb173c43",username:null,folderType:null,children:null,systemSourceType:!0,folderIndex:1,nodeType:"BUNDLE"},{id:100135,parentId:15,name:"大华摄像头2",beFolder:!1,toLdap:null,bundleId:"49bab374fbb04de584d66c28716ab3f7",username:null,folderType:null,children:null,systemSourceType:!0,folderIndex:2,nodeType:"BUNDLE"}],systemSourceType:!0,folderIndex:1,nodeType:"FOLDER"},{id:23,parentId:13,name:"值班室",beFolder:!0,toLdap:!0,bundleId:null,username:null,folderType:null,children:[{id:100137,parentId:23,name:"北清摄像头1",beFolder:!1,toLdap:null,bundleId:"5e4505a56c75408c82abb7789994447f",username:null,folderType:null,children:null,systemSourceType:!0,folderIndex:1,nodeType:"BUNDLE"}],systemSourceType:!0,folderIndex:2,nodeType:"FOLDER"},{id:25,parentId:13,name:"监视器",beFolder:!0,toLdap:!0,bundleId:null,username:null,folderType:null,children:[],systemSourceType:!0,folderIndex:3,nodeType:"FOLDER"}],systemSourceType:!0,folderIndex:2,nodeType:"FOLDER"}],systemSourceType:!0,folderIndex:0,nodeType:"FOLDER"},{id:43,parentId:-1,name:"xx基地2",beFolder:!0,toLdap:!0,bundleId:null,username:null,folderType:null,children:[{id:45,parentId:43,name:"xx发射场",beFolder:!0,toLdap:!0,bundleId:null,username:null,folderType:null,children:[{id:100143,parentId:45,name:"发射场东侧摄像头",beFolder:!1,toLdap:null,bundleId:"cc7580e5445041abaf07156f19e52530",username:null,folderType:null,children:null,systemSourceType:!1,folderIndex:null,nodeType:"BUNDLE"}],systemSourceType:!1,folderIndex:1,nodeType:"FOLDER"}],systemSourceType:!1,folderIndex:1,nodeType:"FOLDER"}],filterText:"",tree1:[{id:1,parentId:-1,name:"xx基地",beFolder:!0,toLdap:!0,bundleId:null,username:null,folderType:null,children:[{id:13,parentId:1,name:"指控中心",beFolder:!0,toLdap:!0,bundleId:null,username:null,folderType:null,children:[{id:27,parentId:13,name:"电视墙",beFolder:!0,toLdap:!0,bundleId:null,username:null,folderType:null,children:[{id:100145,parentId:27,name:"指控中心东侧显示器",beFolder:!1,toLdap:null,bundleId:"a37641acfafc4ce2bb8f3bfdc277a239",username:null,folderType:null,children:null,systemSourceType:!0,folderIndex:1,nodeType:"BUNDLE"}],systemSourceType:!0,folderIndex:4,nodeType:"FOLDER"},{id:23,parentId:13,name:"值班室",beFolder:!0,toLdap:!0,bundleId:null,username:null,folderType:null,children:[{id:100149,parentId:23,name:"北清外域解码器",beFolder:!1,toLdap:null,bundleId:"4746f74b504742bf9fe3ff8564ba02c2",username:null,folderType:null,children:null,systemSourceType:!0,folderIndex:2,nodeType:"BUNDLE"}],systemSourceType:!0,folderIndex:2,nodeType:"FOLDER"}],systemSourceType:!0,folderIndex:2,nodeType:"FOLDER"}],systemSourceType:!0,folderIndex:0,nodeType:"FOLDER"}],dataOption:[],defaultProps:{children:"children",label:"name"}}},created:function(){this.initTree()},watch:{filterText:function(e){this.$refs.tree.filter(e)}},methods:{filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},initTree:function(e){var t=this;this.treeLoading=!0,Object(x.S)().then(function(e){e.errMsg?(t.$message({message:e.errMsg,type:"error"}),t.treeLoading=!1):(t.tree=e.tree,t.tree1=JSON.parse(O()(t.tree)),t.treeLoading=!1)})},handleNodeClick:function(e){console.log(e),e.children||(console.log(e.name),this.inputDevice=e.name,this.dialogFormVisible=!1)},onStart:function(){this.drag=!0},onEnd:function(){this.drag=!1},onMove2:function(e,t){return!1},handleDelete:function(e,t){e.splice(t,1)},handleTabClick:function(e,t){"EncodeManage"!==e.name&&this.$router.push("/"+e.name)}}},be={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[[a("div",{staticClass:"itxst"},[a("div",{staticClass:"col"},[a("div",{staticClass:"title"},[e._v("编码器")]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],staticClass:"custom-tree-container"},[a("div",[a("el-tree",{ref:"tree",attrs:{"filter-node-method":e.filterNode,data:e.tree,"default-expand-all":"","node-key":"id","highlight-current":"","expand-on-click-node":!1,props:e.defaultProps},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var l=t.data;return[l.children?a("span",[e._v(e._s(l.name))]):a("draggable",{attrs:{element:"span",options:{group:{name:"site",pull:"clone"},sort:!0},animation:"300"}},[a("span",{staticClass:"item"},[e._v(e._s(l.name))])])]}}])})],1)])])])],e._v(" "),[a("div",{staticClass:"itxst"},[a("div",{staticClass:"col"},[a("div",{staticClass:"title"},[e._v("解码器")]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],staticClass:"custom-tree-container"},[a("div",[a("el-tree",{ref:"tree1",attrs:{data:e.tree1,"default-expand-all":"","node-key":"id","highlight-current":"","expand-on-click-node":!1,props:e.defaultProps},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var l=t.data;return[a("draggable",{attrs:{element:"span",group:"site",animation:"300"}},[a("span",{staticClass:"item"},[e._v(e._s(l.name))])])]}}])})],1)])])])]],2)},staticRenderFns:[]};var fe=a("VU/8")(he,be,!1,function(e){a("92tY")},"data-v-e0223a82",null).exports,ve={name:"my-pie",props:{optionData:{type:Array,default:function(){return[]}},titleText:{type:String,default:""},legend:{type:Array,default:function(){return[]}},titleType:{type:String,default:""},capacityData:{type:Object,default:function(){return{}}}},data:function(){return{currentNum:void 0,totalNum:void 0}},methods:{initNum:function(){"ImageAccess"==this.titleType?(this.currentNum=this.capacityData.vedioCount||0,this.totalNum=this.capacityData.vedioCapacity):"onLine"==this.titleType?(this.currentNum=this.capacityData.userCount||0,this.totalNum=this.capacityData.userCapacity):"transiter"==this.titleType?(this.currentNum=this.capacityData.turnCount||0,this.totalNum=this.capacityData.turnCapacity):"playback"==this.titleType&&(this.currentNum=this.capacityData.reCount||0,this.totalNum=this.capacityData.replayCapacity)},myEcharts:function(){var e=this.$echarts.init(document.getElementById(this.echartsId)),t={title:{text:this.titleText,subtext:"",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:this.legend},series:[{name:"图像信息容量",type:"pie",radius:"55%",center:["60%","50%"],data:this.optionData,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};this.initNum(),e.setOption(t)}},computed:{echartsId:function(){return"echarts"+1e5*Math.random()}},watch:{optionData:function(e,t){this.myEcharts()}},created:function(){},mounted:function(){}},ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Echarts"},[a("div",{staticStyle:{width:"500px",height:"350px"},attrs:{id:e.echartsId}}),e._v(" "),a("div",{staticClass:"data-box"},[e._v("占用："+e._s(e.currentNum)+" "),a("br"),e._v("空闲："+e._s(e.totalNum-e.currentNum))])])},staticRenderFns:[]};var ye={name:"Echarts",data:function(){return{resData:{},optionData:{ImageAccess:[],onLine:[],transiter:[],playback:[]},dialogVisible:!1,initForm:{vedioCapacity:"",userCapacity:"",turnCapacity:"",replayCapacity:""},legend:{ImageAccess:["已接入","空闲"],onLine:["在线","空闲"],transiter:["已占用转发","空闲"],playback:["同时回放路数","空闲"]}}},components:{"my-pie":a("VU/8")(ve,ge,!1,function(e){a("qxgj")},null,null).exports},computed:{optionDataComputed:function(){var e=this.resData;return this.optionData.ImageAccess=[{value:e.vedioCount?e.vedioCount:0,name:"已接入"},{value:e.vedioIdleCount?e.vedioIdleCount:e.vedioCapacity,name:"空闲"}],this.optionData.onLine=[{value:e.userCount?e.userCount:0,name:"在线"},{value:e.userIdleCount?e.userIdleCount:e.userCapacity,name:"空闲"}],this.optionData.transiter=[{value:e.turnCount?e.turnCount:0,name:"已占用转发"},{value:e.turnIdleCount?e.turnIdleCount:e.turnCapacity,name:"空闲"}],this.optionData.playback=[{value:e.reCount?e.reCount:0,name:"同时回放路数"},{value:e.reIdleCount?e.reIdleCount:e.replayCapacity,name:"空闲"}],this.optionData}},methods:{filterData:function(){},handleInit:function(){this.dialogVisible=!0},initSubmit:function(){var e=this;/^\d{1,5}$/.test(this.initForm.vedioCapacity)&&/^\d{1,5}$/.test(this.initForm.userCapacity)?/^\d{1,5}$/.test(this.initForm.turnCapacity)?/^\d{1,5}$/.test(this.initForm.replayCapacity)?Object(x.R)(this.initForm).then(function(t){e.$message({type:"success",message:"设置成功！"}),e.dialogVisible=!1,Object(x._5)({id:1}).then(function(t){e.resData=t,e.initForm.vedioCapacity=t.vedioCapacity,e.initForm.userCapacity=t.userCapacity,e.initForm.turnCapacity=t.turnCapacity,e.initForm.replayCapacity=t.replayCapacity})}):e.$message({type:"waring",message:"当前回放总路数为1-5位数字！"}):e.$message({type:"waring",message:"在线用户总人数为1-5位数字！"}):e.$message({type:"waring",message:"图像信息接入总路数为1-5位数字！"})}},mounted:function(){var e=this;Object(x._5)({id:1}).then(function(t){e.resData=t,e.initForm.vedioCapacity=t.vedioCapacity,e.initForm.userCapacity=t.userCapacity,e.initForm.turnCapacity=t.turnCapacity,e.initForm.replayCapacity=t.replayCapacity})}},_e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Echarts"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleInit}},[e._v("初始化容量")]),e._v(" "),a("el-row",{attrs:{gutter:0}},[a("el-col",{staticClass:"col",attrs:{xs:24,sm:12,xl:12}},[a("my-pie",{attrs:{optionData:e.optionDataComputed.ImageAccess,titleText:"图像信息接入路数",legend:e.legend.ImageAccess,capacityData:e.resData,titleType:"ImageAccess"}})],1),e._v(" "),a("el-col",{staticClass:"col",attrs:{xs:24,sm:12,xl:12}},[a("my-pie",{attrs:{optionData:e.optionDataComputed.onLine,titleText:"在线用户人数",legend:e.legend.onLine,capacityData:e.resData,titleType:"onLine"}})],1),e._v(" "),a("el-col",{staticClass:"col",attrs:{xs:24,sm:12,xl:12}},[a("my-pie",{attrs:{optionData:e.optionDataComputed.transiter,titleText:"当前转发路数",legend:e.legend.transiter,capacityData:e.resData,titleType:"transiter"}})],1),e._v(" "),a("el-col",{staticClass:"col",attrs:{xs:24,sm:12,xl:12}},[a("my-pie",{attrs:{optionData:e.optionDataComputed.playback,titleText:"当前回放路数",legend:e.legend.playback,capacityData:e.resData,titleType:"playback"}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"初始化",visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"initForm",attrs:{model:e.initForm,"label-width":"200px"}},[a("el-form-item",{attrs:{label:"图像信息接入总路数",prop:"vedioCapacity"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.initForm.vedioCapacity,callback:function(t){e.$set(e.initForm,"vedioCapacity",t)},expression:"initForm.vedioCapacity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"在线用户总人数",prop:"userCapacity"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.initForm.userCapacity,callback:function(t){e.$set(e.initForm,"userCapacity",t)},expression:"initForm.userCapacity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"当前转发总路数",prop:"turnCapacity"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.initForm.turnCapacity,callback:function(t){e.$set(e.initForm,"turnCapacity",t)},expression:"initForm.turnCapacity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"当前回放总路数",prop:"replayCapacity"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.initForm.replayCapacity,callback:function(t){e.$set(e.initForm,"replayCapacity",t)},expression:"initForm.replayCapacity"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.initSubmit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var we=a("VU/8")(ye,_e,!1,function(e){a("qz8m")},null,null).exports,xe=document.location.origin,Fe={data:function(){return{activeTabName:"FolderManage",resources:[],users:[],resourceTableShow:!0,userTableShow:!1,deviceModelOptions:[{label:"终端设备",value:"jv210"},{label:"存储设备",value:"cdn"}],filters:{deviceModel:"jv210",keyword:""},multipleSelection:[],disableSetFolderBtn:!0,disableAddFolderBtn:!0,disableModifyFolderBtn:!0,disableDeleteFolderBtn:!0,disableResetRootBtn:!1,disableReleaseRootBtn:!0,defaultExpandKeys:[],tree:[],defaultProps:{children:"children",label:"name"},currentSelectNode:null,expandNodeKeysArr:[],resourceTableLoading:!1,userTableLoading:!1,dialogAddForderFormVisible:!1,dialogmodifyForderFormVisible:!1,folderForm:{name:"",toLdap:!1},dialogsetRootVisible:!1,setRootId:"",setRootOptions:[],modifyForm:{},uploadUrl:xe+"/folder/import",uploadUserUrl:xe+"/folder/user/import",myHeaders:{"tetris-001":sessionStorage.getItem("token")},treeLoading:!1,toLdapoptions:[{value:!0,label:"是"},{value:!1,label:"否"}],ldapLoading:!1}},methods:{handleChange:function(e,t){var a=this;if(e.raw){var l=new FileReader;l.onload=function(e){a.contentHtml=e.target.result},l.readAsText(e.raw,"utf-8")}console.log(e,t)},initTree:function(e){var t=this;this.treeLoading=!0,Object(x.S)().then(function(a){a.errMsg?(t.$message({message:a.errMsg,type:"error"}),t.treeLoading=!1):(t.tree=a.tree,e||(t.expandNodeKeysArr.splice(0,t.expandNodeKeysArr.length),t.expandNodeKeysArr=t.tree.map(function(e){return e.id})),t.defaultExpandKeys=t.expandNodeKeysArr,t.treeLoading=!1,t.disableSetFolderBtn=!0,t.disableAddFolderBtn=!0,t.disableModifyFolderBtn=!0,t.disableDeleteFolderBtn=!0,t.disableResetRootBtn=!1,t.disableReleaseRootBtn=!0)})},getBundles:function(){var e=this;this.resourceTableShow=!0,this.userTableShow=!1;var t={deviceModel:this.filters.deviceModel,keyword:this.filters.keyword};this.resourceTableLoading=!0,Object(x._4)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.resources=t.resources,e.resourceTableLoading=!1})},getUsers:function(){var e=this;this.resourceTableShow=!1,this.userTableShow=!0;var t={keyword:this.filters.keyword};this.userTableLoading=!0,Object(x._18)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.users=t.users,e.userTableLoading=!1})},syncFolderToLdap:function(){var e=this;this.$confirm("是否确认上传LDAP?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.resourceTableLoading=!0,e.ldapLoading=!0;Object(x._35)({}).then(function(t){e.resourceTableLoading=!1,e.ldapLoading=!1,t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"同步成功数量："+t.successCnt,type:"success"}),e.initTree(!0))})}).catch(function(){e.$message({type:"info",message:"已取消"})})},downLoadFolderFromLdap:function(){var e=this;this.$confirm("是否确认从LDAP下载?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.resourceTableLoading=!0,e.ldapLoading=!0;Object(x._34)({}).then(function(t){e.resourceTableLoading=!1,e.ldapLoading=!1,t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"同步成功数量："+t.successCnt,type:"success"}),e.initTree())})}).catch(function(){e.$message({type:"info",message:"已取消"})})},cleanUpLdap:function(){var e=this;this.$confirm("确认清空所有上传到LDAP和从LDAP下载的信息么？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.resourceTableLoading=!0,e.ldapLoading=!0;Object(x.j)({}).then(function(t){e.resourceTableLoading=!1,e.ldapLoading=!1,t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"操作成功",type:"success"}),e.initTree(),e.getBundles())})}).catch(function(){e.$message({type:"info",message:"已取消"})})},showAddFolderDialog:function(){this.dialogAddForderFormVisible=!0},addFolder:function(){var e=this;if(this.folderForm.name.length){var t={name:this.folderForm.name,parentId:this.currentSelectNode.id,toLdap:this.folderForm.toLdap};Object(x.b)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.initTree(!0),e.dialogAddForderFormVisible=!1)})}else this.$message({message:"请输入分组名称",type:"error"})},showModifyFolderDialog:function(){this.dialogmodifyForderFormVisible=!0,this.modifyForm={name:this.currentSelectNode.name,toLdap:this.currentSelectNode.toLdap}},modifyFolder:function(){var e=this;if(this.modifyForm.name.length){var t={id:this.currentSelectNode.id,name:this.modifyForm.name,toLdap:this.modifyForm.toLdap};Object(x._0)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.initTree(!0),e.dialogmodifyForderFormVisible=!1)})}else this.$message({message:"请输入分组名称",type:"error"})},deleteFolder:function(){var e=this;if(this.currentSelectNode.beFolder){this.treeLoading=!0;var t={id:this.currentSelectNode.id};Object(x.q)(t).then(function(t){t.errMsg?(e.$message({message:t.errMsg,type:"error"}),e.treeLoading=!1):e.initTree(!0)})}else if(this.currentSelectNode.bundleId){this.treeLoading=!0;var a={bundleIds:this.currentSelectNode.bundleId};Object(x._20)(a).then(function(t){t.errMsg?(e.$message({message:t.errMsg,type:"error"}),e.treeLoading=!1):(e.initTree(!0),e.getBundles())})}else if(this.currentSelectNode.id){this.treeLoading=!0;var l={userIds:this.currentSelectNode.id};Object(x._21)(l).then(function(t){t.errMsg?(e.$message({message:t.errMsg,type:"error"}),e.treeLoading=!1):(e.initTree(!0),e.getUsers())})}},resetRoot:function(){var e=this;Object(x._22)({}).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.initTree()})},releaseRoot:function(){var e=this;Object(x._19)({folderId:this.currentSelectNode.id}).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"操作成功！",type:"success"}),e.initTree())})},handleNodeExpand:function(e,t){this.expandNodeKeysArr.push(t.key)},handleNodeCollapse:function(e,t){for(var a=0;a<this.expandNodeKeysArr.length;a++)this.expandNodeKeysArr[a]===t.key&&this.expandNodeKeysArr.splice(a,1)},setFolder:function(){var e=this;if(this.resourceTableShow){var t=this.multipleSelection.map(function(e){return e.bundleId}),a={folderId:this.currentSelectNode.id,bundleIds:t.join(",")};Object(x._25)(a).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.currentSelectNode.children=e.currentSelectNode.children.concat(t.bundleNodes),e.getBundles())})}else if(this.userTableShow){var l=this.multipleSelection,r={folderId:this.currentSelectNode.id,users:O()(l)};Object(x._26)(r).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.currentSelectNode.children=e.currentSelectNode.children.concat(t.userNodes),e.getUsers())})}},handleSelectionChange:function(e){this.multipleSelection=e,this.multipleSelection.length&&this.currentSelectNode&&this.currentSelectNode.beFolder?this.disableSetFolderBtn=!1:this.disableSetFolderBtn=!0},handleNodeClick:function(e,t,a){this.currentSelectNode=e,e.beFolder?(this.disableAddFolderBtn=!1,this.disableModifyFolderBtn=!1,this.multipleSelection.length&&(this.disableSetFolderBtn=!1),e.children&&e.children.length||e.parentId<0?this.disableDeleteFolderBtn=!0:this.disableDeleteFolderBtn=!1,-1==e.parentId?this.disableReleaseRootBtn=!1:this.disableReleaseRootBtn=!0):(this.disableAddFolderBtn=!0,this.disableModifyFolderBtn=!0,this.disableSetFolderBtn=!0,this.disableDeleteFolderBtn=!1,this.disableReleaseRootBtn=!0),e.systemSourceType||(this.disableAddFolderBtn=!0,this.disableModifyFolderBtn=!0,this.disableSetFolderBtn=!0,this.disableDeleteFolderBtn=!0,this.disableReleaseRootBtn=!0)},handleNodeDragEnd:function(e,t,a,l){var r=this;if(l.stopPropagation(),"none"!==a){if("USER"===e.data.nodeType&&"USER"===t.data.nodeType)return"inner"!==a&&(console.log("交换两个用户的排序"),console.log(a),void Object(x.e)({draggingId:e.data.id,dropId:t.data.id,folderId:e.data.parentId,type:a}).then(function(e){e.errMsg&&r.$message({message:e.errMsg,type:"error"}),r.initTree(!0)}));var o,n;"FOLDER"===e.data.nodeType?o=e.data.id:"BUNDLE"===e.data.nodeType?o=e.data.bundleId:"USER"===e.data.nodeType&&(o=e.data.username),"FOLDER"===t.data.nodeType?n=t.data.id:"BUNDLE"===t.data.nodeType?n=t.data.bundleId:"USER"===t.data.nodeType&&(n=t.data.username);var i={nodeId:o,changeType:a,nodeType:e.data.nodeType,newTargetId:n,newTargetType:t.data.nodeType,newTargetIndex:t.data.folderIndex,newTargetParentId:t.data.parentId};Object(x.f)(i).then(function(e){e.errMsg&&r.$message({message:e.errMsg,type:"error"}),console.log("change end, initTree"),r.initTree(!0)})}},allowDrop:function(e,t,a){if("USER"===e.data.nodeType&&"USER"!==t.data.nodeType)return!1;if(e.data.parentId!==t.data.parentId)return!1;if("inner"===a)return!1;if(e.id===t.id)return!1;if("none"===a)return!1;if(t.data.systemSourceType&&-1===e.data.parentId&&e.data.systemSourceType)return!1;if("ON_DEMAND"===t.data.folderType)return!1;if("FOLDER"!==t.data.nodeType&&(-1!==t.data.parentId&&"ON_DEMAND"===this.$refs.tree.getNode(t.data.parentId).data.folderType))return!1;return"next"!==a&&"prev"!==a||-1!==t.data.parentId},allowDrag:function(e){return("FOLDER"===e.data.nodeType||"USER"===e.data.nodeType)&&(!(-1===e.data.parentId&&!e.data.systemSourceType)&&("ON_DEMAND"!==e.data.folderType&&!!e.data.systemSourceType))},showSetRootDialog:function(){this.dialogsetRootVisible=!0,this.getRootoptions()},getRootoptions:function(){var e=this;this.setRootOptions=[],Object(x._14)({}).then(function(t){if(t.errMsg)e.$message({message:t.errMsg,type:"error"});else{var a=!0,l=!1,r=void 0;try{for(var o,n=A()(t.rootOptions);!(a=(o=n.next()).done);a=!0){var i=o.value,s={value:i.id,label:i.name};e.setRootOptions.push(s)}}catch(e){l=!0,r=e}finally{try{!a&&n.return&&n.return()}finally{if(l)throw r}}}})},setRoot:function(){var e=this,t={rootId:this.setRootId};Object(x._27)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.dialogsetRootVisible=!1,e.initTree())})},uploadSuccess:function(e){e.errMsg?this.$message({message:e.errMsg,type:"error"}):(null!=e.successCnt?this.$message({message:"成功导入分组的数量："+e.successCnt,type:"success"}):this.$message({message:"导入失败",type:"error"}),this.initTree(!0))},uploadError:function(e){this.$message({message:"上传文件错误: "+O()(e),type:"error"})},onprogress:function(){},exportFolder:function(){var e=this;Object(x.x)(null).then(function(e){var t=new Blob([e.data],{type:"application/octet-stream;charset=utf-8"}),a=document.createElement("a");a.download="Folder.csv",a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}).catch(function(t){e.$message({message:t,type:"error"})})},exportUser:function(){var e=this;Object(x.y)(null).then(function(e){var t=new Blob([e.data],{type:"application/octet-stream;charset=utf-8"}),a=document.createElement("a");a.download="UserFolder.csv",a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}).catch(function(t){e.$message({message:t,type:"error"})})}},mounted:function(){var e=this;e.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/LwFolderManage")}),this.initTree(),this.getBundles()}},ke={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{staticStyle:{float:"left",width:"100%"},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"分组管理",name:"分组管理"}})],1),e._v(" "),a("el-card",{staticStyle:{float:"left","margin-top":"10px",width:"45%","font-size":"18px","min-height":"800px"},attrs:{"body-style":"padding:0px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"clearfix-first",staticStyle:{position:"relative",width:"100%",height:"37px"}},[a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",size:"small",disabled:e.disableAddFolderBtn},on:{click:e.showAddFolderDialog}},[e._v("添加目录\n        ")]),e._v(" "),a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",size:"small",disabled:e.disableModifyFolderBtn},on:{click:e.showModifyFolderDialog}},[e._v("修改\n        ")]),e._v(" "),a("el-button",{staticStyle:{float:"left"},attrs:{type:"danger",size:"small",disabled:e.disableDeleteFolderBtn},on:{click:e.deleteFolder}},[e._v("删除\n        ")]),e._v(" "),a("el-button",{staticStyle:{float:"left"},attrs:{type:"danger",size:"small",disabled:e.disableReleaseRootBtn},on:{click:e.releaseRoot}},[e._v("解除根目录")]),e._v(" "),a("el-dropdown",{staticStyle:{float:"left","margin-left":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small",loading:e.ldapLoading}},[e._v("\n            用户及分组LDAP操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.syncFolderToLdap()}}},[e._v("上传到LDAP")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(t){return e.downLoadFolderFromLdap()}}},[e._v("从LDAP下载")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(t){return e.cleanUpLdap()}}},[e._v("重置LDAP数据")])],1)],1)],1),e._v(" "),a("div",{staticClass:"clearfix-second",staticStyle:{position:"relative"}},[a("el-upload",{staticClass:"upload-folder",staticStyle:{float:"left"},attrs:{action:e.uploadUrl,name:"filePoster",headers:e.myHeaders,"show-file-list":!1,accept:".csv","on-success":e.uploadSuccess,"on-error":e.uploadError,"on-progress":e.onprogress}},[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("导入分组")])],1),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:e.exportFolder}},[e._v("导出分组\n        ")]),e._v(" "),a("el-upload",{staticClass:"upload-user",staticStyle:{float:"left","margin-left":"10px"},attrs:{action:e.uploadUserUrl,name:"userFile",headers:e.myHeaders,"show-file-list":!1,"on-success":e.uploadSuccess,accept:".csv","on-error":e.uploadError,"on-progress":e.onprogress,"on-change":e.handleChange}},[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("导入用户")])],1),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:e.exportUser}},[e._v("\n          导出用户\n        ")])],1)]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],staticClass:"custom-tree-container"},[a("div",[a("el-tree",{ref:"tree",attrs:{data:e.tree,"node-key":"id","highlight-current":"","expand-on-click-node":!1,props:e.defaultProps,"default-expanded-keys":e.defaultExpandKeys,draggable:"","allow-drop":e.allowDrop,"allow-drag":e.allowDrag},on:{"node-click":e.handleNodeClick,"node-drag-end":e.handleNodeDragEnd,"node-expand":e.handleNodeExpand,"node-collapse":e.handleNodeCollapse}})],1)])]),e._v(" "),a("el-card",{staticStyle:{float:"left","margin-left":"50px","margin-top":"10px",width:"50%","min-height":"800px"},attrs:{"body-style":"padding:0px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-select",{staticStyle:{float:"left","margin-left":"30px",width:"100px"},attrs:{size:"small",placeholder:"选择设备类型"},model:{value:e.filters.deviceModel,callback:function(t){e.$set(e.filters,"deviceModel",t)},expression:"filters.deviceModel"}},e._l(e.deviceModelOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{staticStyle:{float:"left","margin-left":"30px",width:"150px"},attrs:{size:"small",placeholder:"关键字"},model:{value:e.filters.keyword,callback:function(t){e.$set(e.filters,"keyword",t)},expression:"filters.keyword"}}),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"30px"},attrs:{type:"info",size:"small"},on:{click:e.getBundles}},[e._v("查询设备\n      ")]),e._v(" "),a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",size:"small",disabled:e.disableSetFolderBtn},on:{click:e.setFolder}},[e._v("加入分组\n      ")])],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.resourceTableShow,expression:"resourceTableShow"},{name:"loading",rawName:"v-loading",value:e.resourceTableLoading,expression:"resourceTableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.resources},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{width:"50",type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bundleName",label:"名称",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceModel",label:"资源类型",width:"150",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"账号",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"bundleId",label:"资源ID",width:"300",sortable:""}})],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.userTableShow,expression:"userTableShow"},{name:"loading",rawName:"v-loading",value:e.userTableLoading,expression:"userTableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.users},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{width:"50",type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"userNo",label:"用户编号",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"creater",label:"创建者",width:"250",sortable:""}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加分组",visible:e.dialogAddForderFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogAddForderFormVisible=t}}},[a("el-form",{attrs:{model:e.folderForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分组名称"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{"auto-complete":"off"},model:{value:e.folderForm.name,callback:function(t){e.$set(e.folderForm,"name",t)},expression:"folderForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传LDAP"}},[a("el-select",{attrs:{placeholder:"是否上传LDAP"},model:{value:e.folderForm.toLdap,callback:function(t){e.$set(e.folderForm,"toLdap",t)},expression:"folderForm.toLdap"}},e._l(e.toLdapoptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogAddForderFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addFolder}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改分组",visible:e.dialogmodifyForderFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogmodifyForderFormVisible=t}}},[a("el-form",{attrs:{model:e.modifyForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分组名称"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{"auto-complete":"off"},model:{value:e.modifyForm.name,callback:function(t){e.$set(e.modifyForm,"name",t)},expression:"modifyForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传LDAP"}},[a("el-select",{attrs:{placeholder:"是否上传LDAP"},model:{value:e.modifyForm.toLdap,callback:function(t){e.$set(e.modifyForm,"toLdap",t)},expression:"modifyForm.toLdap"}},e._l(e.toLdapoptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogmodifyForderFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.modifyFolder}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"设置根目录",visible:e.dialogsetRootVisible,width:"30%"},on:{"update:visible":function(t){e.dialogsetRootVisible=t}}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-select",{staticStyle:{float:"left","margin-left":"30px",width:"200px"},attrs:{placeholder:"选择根目录"},model:{value:e.setRootId,callback:function(t){e.setRootId=t},expression:"setRootId"}},e._l(e.setRootOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogsetRootVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.setRoot}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var De=a("VU/8")(Fe,ke,!1,function(e){a("1OYB")},null,null).exports,Se=a("woOf"),Ce=a.n(Se),Ne={data:function(){return{gadgets:{visible:!1,url:""},filters:{},activeTab:"serInfoTab",serInfoVOs:[],total:0,page:1,listLoading:!1,ldapLoading:!1,sels:[],serInfoEditFormVisible:!1,serInfoEditBtnVisible:!1,serInfoAddBtnVisible:!1,editLoading:!1,serTypeOptions:[{value:4,label:"应用服务单元"},{value:5,label:"信令控制服务单元"},{value:6,label:"媒体处理服务单元"}],serProOptions:[{value:1,label:"TCP"},{value:2,label:"UDP"},{value:3,label:"TCP和UDP"}],serNodeEditForm:{id:0,nodeUuid:"",nodeName:"",nodeFather:"",nodeRelations:"",nodeFactInfo:"",nodePublisher:""},serInfoEditFormRules:{},serNodeVOs:[],serNodeEditFormVisible:!1,serNodeEditBtnVisible:!1,serNodeAddBtnVisible:!1,serInfoEditForm:{id:0,serUuid:"",serName:"",serAddr:"",serPort:5060,serPwd:"",serType:"",serPro:""},serNodeEditFormRules:{},fatherNodeOptions:[],relationNodeOptions:[],fatherTag:[],relationTag:[],dialog:{node:{type:"",table:{data:[]},visible:!1,selection:[]}}}},methods:{handleClick:function(e,t){this.queryList()},selsChange:function(e){this.sels=e},resetForm:function(e){void 0!=this.$refs[e]&&this.$refs[e].resetFields()},serTypeFormat:function(e,t){var a=e[t.property];if(void 0==a)return"";switch(a){case 1:return"业务控制单元";case 4:return"应用服务单元";case 5:return"信令控制服务单元";case 6:return"媒体处理服务单元"}},syncStatusFormat:function(e,t){var a=e[t.property];if(void 0==a)return"";switch(a){case"ASYNC":return"未同步";case"SYNC":return"已同步"}},sourceTypeFormat:function(e,t){var a=e[t.property];if(void 0==a)return"";switch(a){case"SYSTEM":return"BVC";case"EXTERNAL":return"LDAP"}},queryList:function(){var e=this,t={};this.listLoading=!0,"serInfoTab"===this.activeTab?Object(x._15)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):e.serInfoVOs=t.serInfoVOs,e.listLoading=!1}):"serNodeTab"===this.activeTab&&Object(x._16)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):e.serNodeVOs=t.serNodeVOs,e.listLoading=!1})},handleShowAddDialog:function(){var e=this;if(console.log("add"),"serInfoTab"===this.activeTab)this.resetForm("serInfoEditForm"),this.serInfoAddBtnVisible=!0,this.serInfoEditFormVisible=!0,this.serInfoEditBtnVisible=!1;else if("serNodeTab"===this.activeTab){Object(x._8)({}).then(function(t){null!==t.errMsg&&""!==t.errMsg?console.log(x._8,error):(e.fatherNodeOptions=t.serNodeVOs,e.relationNodeOptions=t.serNodeVOs,console.log("queryFatherNodeOptions, success",O()(t.serNodeVOs)))}),this.resetForm("serNodeEditForm"),this.serNodeAddBtnVisible=!0,this.serNodeEditFormVisible=!0,this.serNodeEditBtnVisible=!1}},handleShowEditDialog:function(e,t){var a=this;if(console.log("edit"),"serInfoTab"===this.activeTab)this.resetForm("serInfoEditForm"),this.serInfoAddBtnVisible=!1,this.serInfoEditBtnVisible=!1,this.serInfoEditFormVisible=!0,this.serInfoEditBtnVisible=!0,this.serInfoEditForm=Ce()({},t);else if("serNodeTab"===this.activeTab){Object(x._8)({}).then(function(e){null!==e.errMsg&&""!==e.errMsg?console.log(x._8,error):a.fatherNodeOptions=e.serNodeVOs});var l=this.serNodeVOs;if("NULL"!=t.nodeFather)for(var r=t.nodeFather.split(","),o=0;o<r.length;o++)for(var n=0;n<l.length;n++)if(l[n].nodeUuid===r[o]){this.fatherTag.push(l[n]),console.log(this.fatherTag);break}if("NULL"!=t.nodeRelations){var i=t.nodeRelations.split(",");console.log(i);for(o=0;o<i.length;o++)for(n=0;n<l.length;n++)if(l[n].nodeUuid===i[o]){this.relationTag.push(l[n]);break}}this.resetForm("serNodeEditForm"),this.serNodeAddBtnVisible=!1,this.serNodeEditBtnVisible=!1,this.serNodeEditFormVisible=!0,this.serNodeEditBtnVisible=!0,this.serNodeEditForm=Ce()({},t)}},handleAddSerInfo:function(){var e=this;this.$refs.serInfoEditForm.validate(function(t){t&&e.$confirm("确认新增服务设备信息吗？","提示",{}).then(function(){e.editLoading=!0;var t={serNo:e.serInfoEditForm.serNo,serName:e.serInfoEditForm.serName,serAddr:e.serInfoEditForm.serAddr,serPort:e.serInfoEditForm.serPort,serPwd:e.serInfoEditForm.serPwd,serType:e.serInfoEditForm.serType,serPro:e.serInfoEditForm.serPro};console.log(O()(t)),Object(x.c)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"新增成功",type:"success"}),e.$refs.serInfoEditForm.resetFields(),e.serInfoEditFormVisible=!1,e.addSerInfoBtnVisibale=!1,e.queryList())}),e.editLoading=!1})})},handleEditSerInfo:function(){var e=this;this.$refs.serInfoEditForm.validate(function(t){t&&e.$confirm("确认修改服务设备信息吗？","提示",{}).then(function(){e.editLoading=!0;var t={id:e.serInfoEditForm.id,serUuid:e.serInfoEditForm.serUuid,serNo:e.serInfoEditForm.serNo,serName:e.serInfoEditForm.serName,serAddr:e.serInfoEditForm.serAddr,serPort:e.serInfoEditForm.serPort,serPwd:e.serInfoEditForm.serPwd,serType:e.serInfoEditForm.serType,serPro:e.serInfoEditForm.serPro};console.log(O()(t)),Object(x._1)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"修改成功",type:"success"}),e.$refs.serInfoEditForm.resetFields(),e.serInfoEditFormVisible=!1,e.serInfoEditBtnVisibale=!1,e.queryList())}),e.editLoading=!1})})},handleAddSerNode:function(){var e=this;this.$refs.serNodeEditForm.validate(function(t){t&&e.$confirm("确认新增服务节点信息吗？","提示",{}).then(function(){e.editLoading=!0;var t={nodeName:e.serNodeEditForm.nodeName,nodeFather:e.serNodeEditForm.nodeFather,nodeRelations:e.serNodeEditForm.nodeRelations,nodeFactInfo:e.serNodeEditForm.nodeFactInfo};console.log(O()(t)),Object(x.d)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"新增成功",type:"success"}),e.$refs.serNodeEditForm.resetFields(),e.serNodeEditFormVisible=!1,e.serNodeAddBtnVisibale=!1,e.queryList())}),e.editLoading=!1})})},handleEditSerNode:function(){var e=this;this.$refs.serNodeEditForm.validate(function(t){t&&e.$confirm("确认修改服务节点信息吗？","提示",{}).then(function(){e.editLoading=!0;for(var t=[],a=[],l=0;l<e.fatherTag.length;l++)t.push(e.fatherTag[l].nodeUuid);for(l=0;l<e.relationTag.length;l++)a.push(e.relationTag[l].nodeUuid);var r={nodeUuid:e.serNodeEditForm.nodeUuid,nodeName:e.serNodeEditForm.nodeName,nodeFather:t.join(","),nodeRelations:a.join(","),nodeFactInfo:e.serNodeEditForm.nodeFactInfo,nodePublisher:e.serNodeEditForm.nodePublisher};Object(x._2)(r).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"修改成功",type:"success"}),e.$refs.serNodeEditForm.resetFields(),e.serNodeEditFormVisible=!1,e.serNodeEditBtnVisible=!1,e.queryList())}),e.editLoading=!1,e.fatherTag=[],e.relationTag=[]})})},handleEditSerNodeClose:function(){this.serNodeEditFormVisible=!1,this.fatherTag=[],this.relationTag=[]},beforeClose:function(e){this.fatherTag=[],this.relationTag=[],e()},handleDelSerInfo:function(e,t){var a=this;this.$confirm("删除此服务设备信息，确认？","提示",{}).then(function(){var e={serUuid:t.serUuid};Object(x.n)(e).then(function(e){null!==e.errMsg&&""!==e.errMsg?a.$message({message:e.errMsg,type:"error",duration:3e3}):a.queryList()})})},handleDelSerNode:function(e,t){var a=this;this.$confirm("删除此服务节点信息，确认？","提示",{}).then(function(){var e={nodeUuid:t.nodeUuid};Object(x.o)(e).then(function(e){null!==e.errMsg&&""!==e.errMsg?a.$message({message:e.errMsg,type:"error",duration:3e3}):a.queryList()})})},handleGotoGadgets:function(e,t){window.location.protocol.indexOf("https")>=0?this.gadgets.url="https://"+t.serAddr+":8912/":this.gadgets.url="http://"+t.serAddr+":8910/",this.gadgets.visible=!0},exitGadgets:function(){this.gadgets.url="",this.gadgets.visible=!1},handleSyncToLdap:function(){var e=this;this.$confirm("确认将本地未同步信息同步到LDAP服务器么？","提示",{}).then(function(){e.editLoading=!0;var t={};"serInfoTab"===e.activeTab?Object(x._37)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"同步成功, 共上传"+t.successCnt+"条信息",type:"success"}),e.queryList())}):"serNodeTab"===e.activeTab&&Object(x._39)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"同步成功, 共上传"+t.successCnt+"条信息",type:"success"}),e.queryList())}),e.editLoading=!1})},handleSyncFromLdap:function(){var e=this;this.$confirm("确认将从LDAP服务器同步下载信息么？","提示",{}).then(function(){e.editLoading=!0;var t={};"serInfoTab"===e.activeTab?Object(x._36)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"同步成功, 共下载"+t.successCnt+"条信息",type:"success"}),e.queryList())}):"serNodeTab"===e.activeTab&&Object(x._38)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"同步成功, 共下载"+t.successCnt+"条信息",type:"success"}),e.queryList())}),e.editLoading=!1})},handleCleanUpLdap:function(){var e=this;this.$confirm("确认清空上传到LDAP何从LDAP下载的所有信息么？","提示",{}).then(function(){e.editLoading=!0;var t={};"serInfoTab"===e.activeTab?Object(x.h)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"重置成功",type:"success"}),e.queryList())}):"serNodeTab"===e.activeTab&&Object(x.i)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"重置成功",type:"success"}),e.queryList())}),e.editLoading=!1})},handleClose:function(e){var t=this.fatherNodeOptions;this.dialog.node.selection;t.push(e);for(var a=this.relationTag.length-1;a>=0;a--)if(this.relationTag[a].nodeUuid===e.nodeUuid){this.relationTag.splice(a,1);break}},handleFatherClose:function(e){var t=this.fatherNodeOptions;this.dialog.node.selection;t.push(e);for(var a=this.fatherTag.length-1;a>=0;a--)if(this.fatherTag[a].nodeUuid===e.nodeUuid){this.fatherTag.splice(a,1);break}e.nodeUuid==this.serNodeEditForm.nodePublisher&&(this.serNodeEditForm.nodePublisher="")},handleDialogCommit:function(){for(var e=this.dialog.node.table.data,t=0;t<this.dialog.node.selection.length;t++)for(var a=e.length-1;a>=0;a--)if(e[a].nodeUuid===this.dialog.node.selection[t].nodeUuid){e.splice(a,1);break}if("relation"===this.dialog.node.type)for(t=0;t<this.dialog.node.selection.length;t++)this.relationTag.push(this.dialog.node.selection[t]);if("father"===this.dialog.node.type)for(t=0;t<this.dialog.node.selection.length;t++)this.fatherTag.push(this.dialog.node.selection[t]);this.dialog.node.visible=!1},handleSelectionChange:function(e){this.dialog.node.selection=e},handleDialogClose:function(){this.$refs.selectNodeTable.clearSelection(),this.dialog.node.visible=!1},addRelationNode:function(){this.dialog.node.type="relation",this.dialog.node.table.data=this.fatherNodeOptions,this.dialog.node.visible=!0},addFatherNode:function(){this.dialog.node.type="father",this.dialog.node.table.data=this.fatherNodeOptions,this.dialog.node.visible=!0},handleLdapBackUp:function(){var e=this;this.ldapLoading=!0,Object(x.U)(null).then(function(t){console.log(t),200!==t.status?(e.$message({message:response.message,type:"error"}),e.ldapLoading=!1):(e.$message({message:"备份成功",type:"success"}),e.ldapLoading=!1)})},handleLdapResume:function(){var e=this;this.ldapLoading=!0,Object(x.V)(null).then(function(t){200!==t.status?(e.$message({message:response.message,type:"error"}),e.ldapLoading=!1):(e.$message({message:"恢复成功",type:"success"}),e.ldapLoading=!1)})}},mounted:function(){this.queryList()}},Te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"服务设备信息",name:"serInfoTab"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"服务节点信息",name:"serNodeTab"}})],1),e._v(" "),a("el-form",{ref:"filters",attrs:{inline:!0,model:e.filters,"label-width":"80px",size:"mini"}},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px",margin:"0px"},attrs:{span:24}},[a("el-form-item",{attrs:{span:3}},[a("el-button",{on:{click:function(t){return e.queryList()}}},[e._v("查询")])],1),e._v(" "),a("el-form-item",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleShowAddDialog()}}},[e._v("新增")])],1),e._v(" "),a("el-form-item",{attrs:{span:3}},[a("el-dropdown",[a("el-button",{attrs:{type:"primary"}},[e._v("\n                    LDAP操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.handleSyncToLdap()}}},[e._v("上传到LDAP")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(t){return e.handleSyncFromLdap()}}},[e._v("从LDAP下载")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(t){return e.handleCleanUpLdap()}}},[e._v("重置LDAP数据")])],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{span:3}},["serNodeTab"===e.activeTab?a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.ldapLoading,expression:"ldapLoading"}],attrs:{type:"primary"},on:{click:function(t){return e.handleLdapBackUp()}}},[e._v("LDAP备份")]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{span:3}},["serNodeTab"===e.activeTab?a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.ldapLoading,expression:"ldapLoading"}],attrs:{type:"primary"},on:{click:function(t){return e.handleLdapResume()}}},[e._v("LDAP恢复")]):e._e()],1)],1)],1),e._v(" "),"serInfoTab"===e.activeTab?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.serInfoVOs,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{prop:"serNo",label:"设备编号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serName",label:"设备名称",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serAddr",label:"IP地址",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serPort",label:"端口",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serType",label:"设备类型",formatter:e.serTypeFormat,width:"180",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"sourceType",label:"来源",formatter:e.sourceTypeFormat,width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"syncStatus",label:"同步状态",formatter:e.syncStatusFormat,width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["SYSTEM"===t.row.sourceType?a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.handleShowEditDialog(t.$index,t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),"SYSTEM"===t.row.sourceType?a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.handleDelSerInfo(t.$index,t.row)}}},[e._v("删除")]):e._e(),e._v(" "),"SYSTEM"===t.row.sourceType?a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.handleGotoGadgets(t.$index,t.row)}}},[e._v("小工具")]):e._e()]}}],null,!1,3261597134)})],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"服务设备信息编辑",visible:e.serInfoEditFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.serInfoEditFormVisible=t}}},[a("el-form",{ref:"serInfoEditForm",attrs:{model:e.serInfoEditForm,"label-width":"160px",rules:e.serInfoEditFormRules}},[e._e(),e._v(" "),e.serInfoEditBtnVisible?a("el-form-item",{attrs:{label:"设备UUID",prop:"serUuid"}},[a("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:e.serInfoEditForm.serUuid,callback:function(t){e.$set(e.serInfoEditForm,"serUuid",t)},expression:"serInfoEditForm.serUuid"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"设备编号",prop:"serNo"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serNo,callback:function(t){e.$set(e.serInfoEditForm,"serNo",t)},expression:"serInfoEditForm.serNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备名称",prop:"serName"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serName,callback:function(t){e.$set(e.serInfoEditForm,"serName",t)},expression:"serInfoEditForm.serName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"IP地址",prop:"serAddr"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serAddr,callback:function(t){e.$set(e.serInfoEditForm,"serAddr",t)},expression:"serInfoEditForm.serAddr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"端口",prop:"serPort"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serPort,callback:function(t){e.$set(e.serInfoEditForm,"serPort",t)},expression:"serInfoEditForm.serPort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"serPwd"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serPwd,callback:function(t){e.$set(e.serInfoEditForm,"serPwd",t)},expression:"serInfoEditForm.serPwd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备类型",prop:"serType"}},[[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.serInfoEditForm.serType,callback:function(t){e.$set(e.serInfoEditForm,"serType",t)},expression:"serInfoEditForm.serType"}},e._l(e.serTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)]],2),e._v(" "),a("el-form-item",{attrs:{label:"协议类型",prop:"serPro"}},[[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.serInfoEditForm.serPro,callback:function(t){e.$set(e.serInfoEditForm,"serPro",t)},expression:"serInfoEditForm.serPro"}},e._l(e.serProOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)]],2)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.serInfoEditBtnVisible?a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleEditSerInfo()}}},[e._v("修改")]):e._e(),e._v(" "),e.serInfoAddBtnVisible?a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleAddSerInfo()}}},[e._v("新增")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"small"},nativeOn:{click:function(t){e.serInfoEditFormVisible=!1}}},[e._v("关闭")])],1)],1),e._v(" "),"serNodeTab"===e.activeTab?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.serNodeVOs,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"nodeName",label:"节点名称",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeUuid",label:"节点UUID",width:"280"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeFather",label:"上级服务节点ID",width:"280",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeRelations",label:"关联服务节点ID",width:"160",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeFactInfo",label:"厂商名称",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sourceType",label:"来源",formatter:e.sourceTypeFormat,width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"syncStatus",label:"同步状态",formatter:e.syncStatusFormat,width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["SYSTEM"===t.row.sourceType?a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.handleShowEditDialog(t.$index,t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),"SYSTEM"===t.row.sourceType?a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.handleDelSerNode(t.$index,t.row)}}},[e._v("删除")]):e._e()]}}],null,!1,4020406125)})],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"服务节点信息编辑",visible:e.serNodeEditFormVisible,"close-on-click-modal":!1,"before-close":e.beforeClose},on:{"update:visible":function(t){e.serNodeEditFormVisible=t}}},[a("el-form",{ref:"serNodeEditForm",attrs:{model:e.serNodeEditForm,"label-width":"160px",rules:e.serNodeEditFormRules}},[e._e(),e._v(" "),e.serNodeEditBtnVisible?a("el-form-item",{attrs:{label:"服务节点UUID",prop:"nodeUuid"}},[a("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:e.serNodeEditForm.nodeUuid,callback:function(t){e.$set(e.serNodeEditForm,"nodeUuid",t)},expression:"serNodeEditForm.nodeUuid"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"服务节点名称",prop:"nodeName"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serNodeEditForm.nodeName,callback:function(t){e.$set(e.serNodeEditForm,"nodeName",t)},expression:"serNodeEditForm.nodeName"}})],1),e._v(" "),e.serNodeEditBtnVisible?a("el-form-item",{attrs:{label:"上级服务节点",prop:"nodeFather"}},[e._l(e.fatherTag,function(t){return a("el-tag",{key:t.nodeUuid,attrs:{closable:""},on:{close:function(a){return e.handleFatherClose(t)}}},[e._v("\n            "+e._s(t.nodeName)+"\n          ")])}),e._v(" "),a("el-button",{staticClass:"button-new-tag-father",attrs:{icon:"el-icon-plus",size:"small"},on:{click:e.addFatherNode}})],2):e._e(),e._v(" "),e.serNodeEditBtnVisible?a("el-form-item",{attrs:{label:"订阅节点",prop:"nodePublish"}},[a("el-select",{attrs:{placeholder:"请先选择上级服务节点"},model:{value:e.serNodeEditForm.nodePublisher,callback:function(t){e.$set(e.serNodeEditForm,"nodePublisher",t)},expression:"serNodeEditForm.nodePublisher"}},e._l(e.fatherTag,function(e){return a("el-option",{key:e.nodeUuid,attrs:{label:e.nodeName,value:e.nodeUuid}})}),1)],1):e._e(),e._v(" "),e.serNodeEditBtnVisible?a("el-form-item",{attrs:{label:"关联服务节点",prop:"nodeRelations"}},[e._l(e.relationTag,function(t){return a("el-tag",{key:t.nodeUuid,attrs:{closable:""},on:{close:function(a){return e.handleClose(t)}}},[e._v("\n              "+e._s(t.nodeName)+"\n            ")])}),e._v(" "),a("el-button",{staticClass:"button-new-tag-relation",attrs:{icon:"el-icon-plus",size:"small"},on:{click:e.addRelationNode}})],2):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"厂商信息",prop:"nodeFactInfo"}},[a("el-input",{attrs:{type:"textarea","auto-complete":"off"},model:{value:e.serNodeEditForm.nodeFactInfo,callback:function(t){e.$set(e.serNodeEditForm,"nodeFactInfo",t)},expression:"serNodeEditForm.nodeFactInfo"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.serNodeEditBtnVisible?a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleEditSerNode()}}},[e._v("修改")]):e._e(),e._v(" "),e.serNodeAddBtnVisible?a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleAddSerNode()}}},[e._v("新增")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleEditSerNodeClose()}}},[e._v("关闭")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"选择节点",visible:e.dialog.node.visible,width:"800px","before-close":e.handleDialogClose},on:{"update:visible":function(t){return e.$set(e.dialog.node,"visible",t)}}},[a("div",{staticStyle:{height:"450px",position:"relative"}},[a("div",{staticStyle:{position:"absolute",left:"-20px",top:"-20px",right:"-20px",bottom:"-20px"}},[a("div",{staticStyle:{width:"100%",height:"100%",position:"relative"}},[a("div",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0px",right:"0",bottom:"0",padding:"0 10px","box-sizing":"border-box"}},[a("el-table",{ref:"selectNodeTable",staticStyle:{width:"100%"},attrs:{data:e.dialog.node.table.data,height:"100%"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeName",width:"300",label:"节点名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeUuid",label:"节点Uuid"}})],1)],1)])])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.handleDialogClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleDialogCommit}},[e._v("确定")])],1)]),e._v(" "),e.gadgets.visible?a("div",{staticStyle:{position:"fixed",left:"0",top:"0",right:"0",bottom:"0","z-index":"5000"}},[a("div",{staticStyle:{width:"100%",height:"100%",position:"relative"}},[a("el-button",{staticStyle:{position:"absolute",right:"10px",top:"25px","z-index":"100"},attrs:{size:"mini",type:"primary",icon:"el-icon-d-arrow-left"},on:{click:e.exitGadgets}},[e._v("返回")]),e._v(" "),a("iframe",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.gadgets.url,frameborder:"0"}})],1)]):e._e()],1)},staticRenderFns:[]},Ie=a("VU/8")(Ne,Te,!1,null,null,null).exports,Ee={data:function(){return{outLandTableData:[],createRegionDialog:{visable:!1,name:"",password:"",roleIds:"",roleNames:"",iscreate:"",selectArr:[],serNodeId:null,rules:{name:[{required:!0,message:"请输入外域名称",trigger:"blur"}],password:[{required:!0,message:"请输入口令",trigger:"blur"}],roleIds:[{required:!0,message:"请输入角色",trigger:"change"}]}},localConfigDialog:{visable:!1,name:"",password:"",rules:{name:[{required:!0,message:"请输入外域名称",trigger:"blur"}],password:[{required:!0,message:"请输入口令",trigger:"blur"}]}},dialogBindRole:{bindRoleDialogTableVisible:!1},roleOption:[],defaultProps:{children:"children",label:"name"},treeData:[]}},methods:{createOutLand:function(){this.createRegionDialog.iscreate=!0,this.createRegionDialog.visable=!0},localConfig:function(){var e=this;this.localConfigDialog.visable=!0,Object(x._10)().then(function(t){(t=t.data).nodeName&&(e.localConfigDialog.name=t.nodeName,e.localConfigDialog.password=t.password)})},editOutland:function(e){for(var t=JSON.parse(e.businessRoles),a=[],l=[],r=0;r<t.length;r++)"7"!=t[r].id&&"6"!=t[r].id&&(a.push(t[r].name),l.push(t[r].id));this.createRegionDialog.iscreate=!1,this.createRegionDialog.serNodeId=e.id,this.createRegionDialog.name=e.nodeName,this.createRegionDialog.password=e.password,this.createRegionDialog.roleNames=a.join(","),this.createRegionDialog.roleIds=l.join(","),this.createRegionDialog.visable=!0},submitCreateRegionForm:function(){var e=this;e.$nextTick(function(){this.$refs.createRegionDialogForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;if(e.createRegionDialog.iscreate){var a={name:e.createRegionDialog.name,password:e.createRegionDialog.password,roleIds:e.createRegionDialog.roleIds};Object(x.m)(a).then(function(t){console.log(t),200==t.status&&(e.$message({type:"success",message:"创建成功！"}),e.queryOutland(),e.createRegionDialog.visable=!1)})}else{a={serNodeId:e.createRegionDialog.serNodeId,name:e.createRegionDialog.name,password:e.createRegionDialog.password,roleIds:e.createRegionDialog.roleIds};Object(x.v)(a).then(function(t){console.log(t),200==t.status&&(e.$message({type:"success",message:"修改成功！"}),e.queryOutland(),e.createRegionDialog.visable=!1)})}})})},submitLocalConfigForm:function(){var e=this;e.$nextTick(function(){this.$refs.localConfigDialogForm.validate(function(t){if(!t)return!1;var a={name:e.localConfigDialog.name,password:e.localConfigDialog.password};Object(x.u)(a).then(function(t){e.$message({type:"success",message:"修改成功！"}),e.localConfigDialog.visable=!1})})})},queryOutland:function(){var e=this;Object(x._12)().then(function(t){console.log(t),200==t.status&&(e.outLandTableData=t.data)})},linkOutland:function(e){var t=this;Object(x.W)({serNodeId:e}).then(function(e){t.$message({type:"success",message:"连接成功！"}),t.queryOutland(),t.localConfigDialog.visable=!1})},unLinkOutland:function(e){var t=this;Object(x._41)({serNodeId:e}).then(function(e){t.$message({type:"success",message:"断开成功！"}),t.queryOutland(),t.localConfigDialog.visable=!1})},deleteOutland:function(e){var t=this;Object(x.s)({serNodeId:e}).then(function(e){t.$message({type:"success",message:"删除成功！"}),t.queryOutland()})},handleChangeFolder:function(e){var t=this;t.dialogBindRole.bindRoleDialogTableVisible=!0,t.$nextTick(function(){var e=t.createRegionDialog.roleIds.split(",");console.log(t.roleOption),t.roleOption.forEach(function(a){e.includes(String(a.id))?t.$refs.roleTable&&t.$refs.roleTable.toggleRowSelection(a,!0):t.$refs.roleTable&&t.$refs.roleTable.toggleRowSelection(a,!1)})})},handleSelectionChange:function(e){console.log(e),this.createRegionDialog.selectArr=e},getRoles:function(){var e=this,t=this;t.roleOption=[],Object(x.z)({}).then(function(a){if(a.errMsg)e.$message({message:a.errMsg,type:"error"});else{for(var l=0;l<a.roles.length;l++){var r=a.roles[l];7==r.id||4==r.id||6==r.id||t.roleOption.push(r)}console.log(t.roleOption)}})},handleBindRoleSubmit:function(){this.dialogBindRole.bindRoleDialogTableVisible=!1;var e=[],t=[];this.createRegionDialog.selectArr.map(function(a){e.push(a.name),t.push(a.id)}),this.createRegionDialog.roleNames=e.join(","),this.createRegionDialog.roleIds=t.join(",")},queryOutlandBundle:function(e,t){var a=this;Object(x._13)({serNodeId:e}).then(function(e){200==e.status&&(a.treeData=[{name:t,children:e.data}])})},rowClick:function(e,t,a){console.log(e)},currentRowChange:function(e,t){console.log(e),this.queryOutlandBundle(e.id,e.nodeName)},cancleForm:function(e){this.createRegionDialog.visable=!1,this.createRegionDialog.name="",this.createRegionDialog.password="",this.createRegionDialog.role=""},cancleForm1:function(e){this.localConfigDialog.visable=!1,this.localConfigDialog.name="",this.localConfigDialog.password=""}},mounted:function(){var e=this;e.$nextTick(function(){e.queryOutland(),e.getRoles(),e.$parent.$parent.$parent.$parent.$parent.setActive("/LwRegionManage")})}},Ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{position:"absolute",left:"20px",top:"20px",right:"20px",bottom:"20px"}},[a("el-row",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.createOutLand}},[e._v("创建外域")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.localConfig}},[e._v("本域设置")])],1),e._v(" "),a("el-table",{staticStyle:{width:"75%"},attrs:{data:e.outLandTableData,"highlight-current-row":""},on:{"current-change":e.currentRowChange}},[a("el-table-column",{attrs:{prop:"nodeName",label:"外域名称",width:"180",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"password",label:"口令",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"role",label:"绑定角色"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["OFF"==t.row.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.linkOutland(t.row.id)}}},[e._v("连接")]):e._e(),e._v(" "),"ON"==t.row.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.unLinkOutland(t.row.id)}}},[e._v("断开")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.editOutland(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteOutland(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"bundle-tree"},[e._v("\n    组织结构：\n    "),a("el-tree",{ref:"tree2",staticClass:"filter-tree",attrs:{data:e.treeData,props:e.defaultProps,"default-expand-all":""}})],1),e._v(" "),e.createRegionDialog.visable?a("el-dialog",{attrs:{title:"外域设置",visible:e.createRegionDialog.visable,width:"500px"},on:{"update:visible":function(t){return e.$set(e.createRegionDialog,"visable",t)}}},[a("el-form",{ref:"createRegionDialogForm",attrs:{"label-width":"80px",model:e.createRegionDialog,size:"small",rules:e.createRegionDialog.rules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.createRegionDialog.name,callback:function(t){e.$set(e.createRegionDialog,"name",t)},expression:"createRegionDialog.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"口令",prop:"password"}},[a("el-input",{model:{value:e.createRegionDialog.password,callback:function(t){e.$set(e.createRegionDialog,"password",t)},expression:"createRegionDialog.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"绑定角色",prop:"roleIds"}},[a("el-input",{nativeOn:{click:function(t){return e.handleChangeFolder(t)}},model:{value:e.createRegionDialog.roleNames,callback:function(t){e.$set(e.createRegionDialog,"roleNames",t)},expression:"createRegionDialog.roleNames"}}),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.createRegionDialog.roleIds,callback:function(t){e.$set(e.createRegionDialog,"roleIds",t)},expression:"createRegionDialog.roleIds"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitCreateRegionForm()}}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:function(t){return e.cancleForm()}}},[e._v("取消")])],1)],1)],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"本域设置",visible:e.localConfigDialog.visable,width:"500px"},on:{"update:visible":function(t){return e.$set(e.localConfigDialog,"visable",t)}}},[a("el-form",{ref:"localConfigDialogForm",attrs:{"label-width":"80px",model:e.localConfigDialog,size:"small",rules:e.localConfigDialog.rules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.localConfigDialog.name,callback:function(t){e.$set(e.localConfigDialog,"name",t)},expression:"localConfigDialog.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"口令",prop:"password"}},[a("el-input",{model:{value:e.localConfigDialog.password,callback:function(t){e.$set(e.localConfigDialog,"password",t)},expression:"localConfigDialog.password"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitLocalConfigForm()}}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:function(t){return e.cancleForm1()}}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"绑定角色",visible:e.dialogBindRole.bindRoleDialogTableVisible},on:{"update:visible":function(t){return e.$set(e.dialogBindRole,"bindRoleDialogTableVisible",t)}}},[a("el-table",{ref:"roleTable",attrs:{data:e.roleOption,"row-key":e.roleOption.id,width:"100%"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"200"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleBindRoleSubmit}},[a("span",{staticClass:"icon-plus",staticStyle:{position:"relative",right:"1px"}}),e._v(" 确定")])],1)],1)},staticRenderFns:[]};var Me=a("VU/8")(Ee,Ae,!1,function(e){a("vXHD")},"data-v-a35dafbc",null).exports,Le={name:"AddBundle",components:{selectLayerNode:W},data:function(){var e=this;return{activeTabName:"LwAddBundleForTest",extraInfos:[],initPort:1e3,bundleNumber:1,bundleFolderVisable:!0,bundleForm:{deviceDomain:"",deviceModel:"jv210",bundleType:"",bundleName:"",location:"",username:"",onlinePassword:"",checkPass:"",bundleAlias:"",accessNodeUid:"",accessNodeName:"",bundleFolderId:null,bundleFolderName:"",transcod:!1,multicastSourceIp:"",deviceAddr:{deviceIp:"",devicePort:5060},multicastEncode:!1,multicastEncodeAddr:"",multicastDecode:!1,coderType:"ENCODER",longitude:"",latitude:"",streamUrl:""},alarmSizeVisable:!1,predefineColors:["#ffffff","#000000","#409EFF","#E6A23C","#F56C6C"],regionOption:[{name:"本域",key:"self"},{name:"外域",key:"external"},{name:"卫通",key:"weitong"}],extraParam:{dev_type:"ts_enc",region:"self",address:"",alarmSize:""},rules:{deviceModel:[{required:!0,message:"请选择设备形态",trigger:"change"}],bundleName:[{required:!0,message:"请输入设备名称",trigger:"blur"},{min:1,max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}],username:[{required:!0,message:"请输入设备账号",trigger:"blur"}],onlinePassword:[{validator:function(t,a,l){""===a?l(new Error("请输入密码")):(""!==e.bundleForm.checkPass&&e.$refs.bundleForm.validateField("checkPass"),l())},trigger:"blur",required:!0}],checkPass:[{validator:function(t,a,l){""===a?l(new Error("请再次输入密码")):a!==e.bundleForm.onlinePassword?l(new Error("两次输入密码不一致!")):l()},trigger:"blur",required:!0}],accessNodeUid:[{required:!0,message:"请输入接入层标识",trigger:"change"}],bundleFolderName:[{required:!0,message:"请选择所属分组",trigger:"change"}],alarmSize:[{type:"number",message:"年龄必须为数字值"}]},deviceModelOptions:[{label:"终端设备",value:"jv210"},{label:"存储设备",value:"cdn"}],devTypeOption:[{label:"编码器",value:"enc",children:[{label:"ts输入(虚编码)",value:"ts_enc"},{label:"rtp透传输入(虚编码)",value:"rtp_passby_enc"}]}],devType:["enc","ts_enc"],deviceDomainOptions:[{label:"本域资源",value:"2"}],coderTypeOptions:[{label:"编码器",value:"ENCODER"},{label:"解码器",value:"DECODER"},{label:"默认",value:"DEFAULT"}],wsTypeOptions:[{label:"编码器",value:"ENCODER"},{label:"解码器",value:"DECODER"},{label:"软终端",value:"DEFAULT"}],bundleTypeOptions:[{label:"终端",value:"VenusTerminal"},{label:"混合器",value:"VenusMixer"},{label:"转发器",value:"VenusTransporter"},{label:"外部输出设备",value:"VenusOutConnection"},{label:"大屏设备",value:"VenusVideoMatrix"}],dialog:{changeFolder:{visible:!1,tree:{props:{label:"name",children:"children"},expandOnClickNode:!1,data:[],current:""}},addFolder:{visible:!1,parent:"",parentNode:"",folderName:"",toLdap:"否"}},cardVisable:!1,isSipShow:!0,dahuaFormData:{url:"dh://admin:suma123456@10.1.41.234:37777",modelConfig:"other",osd_font_size:64,enc_param:{br_ctrl:"cbr",codec:"h264",quality:80,bitrate:2048,width:1920,frame_rate:25,height:1080,iframe_interva:25},text_osd:{enable:!0,content:"指控中心东侧摄像头b-2",x:0,y:0,color:"#5acad3"},date_osd:{enable:!0,has_week:!1,x:8192,y:7168,color:"#7d59f9"}},dahuaRules:{url:[{required:!0,message:"请输入url",trigger:"blur"}],osd_font_size:[{required:!0,message:"请输入osd_font_size",trigger:"blur"}],"enc_param.br_ctrl":[{required:!0,message:"请输入br_ctrl",trigger:"blur"}],"enc_param.codec":[{required:!0,message:"请输入codec",trigger:"blur"}],"enc_param.quality":[{required:!0,message:"请输入quality",trigger:"blur"}],"enc_param.bitrate":[{required:!0,message:"请输入编码码率",trigger:"blur"}],"enc_param.width":[{required:!0,message:"请输入视频宽度",trigger:"blur"}],"enc_param.frame_rate":[{required:!0,message:"请输入视频帧率",trigger:"blur"}],"enc_param.height":[{required:!0,message:"请输入视频高度",trigger:"blur"}],"enc_param.iframe_interva":[{required:!0,message:"请输入iframe_interva",trigger:"blur"}],"text_osd.enable":[{required:!0,message:"请输入text_osd_enable",trigger:"blur"}],"text_osd.content":[{required:!0,message:"请输入标题内容",trigger:"blur"}],"text_osd.x":[{required:!0,message:"请输入text_osd_x",trigger:"blur"}],"text_osd.y":[{required:!0,message:"请输入text_osd_y",trigger:"blur"}],"date_osd.enable":[{required:!0,message:"请输入date_osd_enable",trigger:"blur"}],"date_osd.has_week":[{required:!0,message:"请输入date_osd_has_week",trigger:"blur"}],"date_osd.x":[{required:!0,message:"请输入date_osd_x",trigger:"blur"}],"date_osd.y":[{required:!0,message:"请输入date_osd_y",trigger:"blur"}]},extraInfosAdd:[],TSencFormData:{is_multi:!0,multi_ip:"224.1.1.2",local_ip:"10.1.41.22",port:2e3},TSencRules:{is_multi:[{required:!0,message:"请选择接收类型",trigger:"change"}],multi_ip:[{required:!0,message:"请输入组播ip",trigger:"blur"}],local_ip:[{required:!0,message:"请输入本地ip",trigger:"blur"}],port:[{required:!0,message:"请输入接收端口",trigger:"blur"}]},is_multiOptions:[{label:"组播",value:!0}],TSdecFormData:{dest_ip:"224.1.1.2",local_ip:"10.1.41.22",dest_port:2e3,reset_tm:!0},TSdecRules:{dest_ip:[],local_ip:[],dest_port:[{required:!0,message:"请输入目标端口",trigger:"blur"}],reset_tm:[{required:!0,message:"请选择重校对时间戳",trigger:"change"}]},rtpPassbyDecFormData:{dest_ip:"224.1.1.2",local_ip:"10.1.41.22",video_port:2e3,audio_port:2002,reset_tm:!1,aac_out:!1},rtpPassbyDecRules:{dest_ip:[],local_ip:[],video_port:[],audio_port:[],reset_tm:[{required:!0,message:"请选择重校对时间戳",trigger:"change"}],aac_out:[{required:!0,message:"请选择强制aac输出",trigger:"change"}]},reset_tmOptions:[{label:"是",value:!0},{label:"否",value:!1}],aac_outOptions:[{label:"是",value:!0},{label:"否",value:!1}],rtpPassbyEncFormData:{is_multi:!0,multi_ip:"224.1.1.2",local_ip:"10.1.41.22",video_port:2e3,audio_port:2002},rtpPassbyEncRules:{is_multi:[{required:!0,message:"请选择接收类型",trigger:"change"}],multi_ip:[{required:!0,message:"请输入组播ip",trigger:"blur"}],local_ip:[{required:!0,message:"请输入本地ip",trigger:"blur"}],video_port:[],audio_port:[]},rtspEncFormData:{url:void 0},rtspEncRules:{url:[{required:!0,message:"请输入流地址",trigger:"blur"}]},rtmpEncFormData:{url:void 0},rtmpEncRules:{url:[{required:!0,message:"请输入流地址",trigger:"blur"}]},onvifEncFormData:{onvif_user:"anonymous",onvif_pwd:"anonymous",onvif_ip:"10.1.41.223",onvif_port:80,onvif_sel_index:0},onvifEncRules:{onvif_user:[{required:!0,message:"请输入用户名",trigger:"blur"}],onvif_pwd:[{required:!0,message:"请输入密码",trigger:"blur"}],onvif_ip:[],onvif_port:[{required:!0,message:"请输入控制端口",trigger:"blur"}],onvif_sel_index:[{required:!0,message:"请输入选择码率索引",trigger:"blur"}]},bqEncFormData:{bq_type:"6931S",url:"sstp+udp://127.0.0.1:8002/68ED6661-A641-4A95-9482-96F0AA024424"},bqEncRules:{bq_type:[{required:!0,message:"请选择设备类型",trigger:"change"}],url:[{required:!0,message:"请输入流地址",trigger:"blur"}]},bq_typeOptions:[{label:"6501S",value:"6501S"},{label:"6601S",value:"6601S"},{label:"6931S",value:"6931S"},{label:"8201C",value:"8201C"},{label:"8361C",value:"8361C"},{label:"8361P",value:"8361P"},{label:"8601C",value:"8601C"},{label:"ts_stream",value:"ts_stream"}],transcodeEecFormData:{dst_codec:"h264",width:720,height:576,fps:25,gop_size:25,url:""},transcodeEecRules:{dst_codec:[{required:!0,message:"请选择编码类型",trigger:"change"}],width:[{required:!0,message:"请输入视频宽度",trigger:"blur"}],height:[{required:!0,message:"请输入视频高度",trigger:"blur"}],fps:[{required:!0,message:"请输入视频帧率",trigger:"blur"}],gop_size:[{required:!0,message:"请输入帧间隔",trigger:"blur"}],url:[{required:!0,message:"请输入url",trigger:"blur"}]},dst_codecOptions:[{label:"h264",value:"h264"},{label:"h265",value:"h265"}],TSencFormMultiIpDis:!1,rtpPassbyEncFormMultiIpDis:!1,isFictitiouVisable:!0,configChannels:[{channelTemplateID:1,channelCnt:1,channelName:"VenusAudioIn"},{channelTemplateID:2,channelCnt:0,channelName:"VenusAudioOut"},{channelTemplateID:3,channelCnt:1,channelName:"VenusVideoIn"},{channelTemplateID:4,channelCnt:0,channelName:"VenusVideoOut"}],bitrateDisable:!1,bqEncoderFormData:{bq_type:"6931S",bq_ip:"192.168.1.123",bq_port:8088,bq_user:"admin",bq_passwd:"admin",index:1},bqEncoderRules:{bq_ip:[{required:!0,message:"请输入ip",trigger:"blur"}],bq_port:[{required:!0,message:"请输入端口",trigger:"blur"}]},bqDecoderFormData:{bq_type:"D1",bq_ip:"192.168.1.123",bq_port:8088,bq_user:"admin",bq_passwd:"admin",index:1},bqDecoderRules:{bq_ip:[{required:!0,message:"请输入ip",trigger:"blur"}],bq_port:[{required:!0,message:"请输入端口",trigger:"blur"}],bq_user:[{required:!0,message:"请输入设备账号",trigger:"blur"}],bq_passwd:[{required:!0,message:"请输入设备密码",trigger:"blur"}],index:[{required:!0,message:"请输入设备序号",trigger:"blur"}]},bqDecoderOption:[{label:1,value:1}]}},computed:{bundleFormMulticastEncode:function(){return this.bundleForm.multicastEncode}},watch:{bundleFormMulticastEncode:function(e){e||(this.bundleForm.multicastEncodeAddr="")}},methods:{handleTabClick:function(e,t){"AddBundle"!==e.name&&this.$router.push("/"+e.name)},devTypeChange:function(e){var t=this.extraParam.dev_type=e[e.length-1];["sip_enc","sip_dec","sip_enc_dec","28181_enc"].indexOf(t)>-1?this.cardVisable=!1:this.cardVisable=!0,["sip_enc","dh_camera","ts_enc","rtp_passby_enc","rtsp_enc","rtmp_enc","onvif_enc","bq_enc","28181_enc","bq_encoder"].indexOf(t)>-1?(this.isFictitiouVisable=!0,this.bundleForm.coderType="ENCODER",this.configChannels=[{channelTemplateID:1,channelCnt:1,channelName:"VenusAudioIn"},{channelTemplateID:2,channelCnt:0,channelName:"VenusAudioOut"},{channelTemplateID:3,channelCnt:1,channelName:"VenusVideoIn"},{channelTemplateID:4,channelCnt:0,channelName:"VenusVideoOut"}]):(this.isFictitiouVisable=!1,this.bundleForm.coderType="DECODER",this.configChannels=[{channelTemplateID:1,channelCnt:0,channelName:"VenusAudioIn"},{channelTemplateID:2,channelCnt:1,channelName:"VenusAudioOut"},{channelTemplateID:3,channelCnt:0,channelName:"VenusVideoIn"},{channelTemplateID:4,channelCnt:1,channelName:"VenusVideoOut"}])},addExtraInfo:function(){this.extraInfos.push({})},remove:function(e){var t=this.extraInfos.indexOf(e);-1!==t&&this.extraInfos.splice(t,1)},randomString:function(e){e=e||32;for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",a=t.length,l="",r=0;r<e;r++)l+=t.charAt(Math.floor(Math.random()*a));return l},reset:function(){},submit:function(){var e=this;if(this.validateBaseInfo()&&this.validateExtraInfo())for(var t=0;t<this.bundleNumber;t++){var a,l={dev_type:this.extraParam.dev_type,region:this.extraParam.region,address:this.bundleForm.location+"-address-"+t},r={};"ts_enc"==this.extraParam.dev_type?(l.param={is_multi:this.TSencFormData.is_multi,multi_ip:this.TSencFormData.multi_ip,local_ip:this.TSencFormData.local_ip,port:this.initPort},r={deviceModel:this.bundleForm.deviceModel,bundleType:this.bundleForm.bundleType,bundleName:this.bundleForm.bundleName+"-"+t,location:this.bundleForm.location,username:this.bundleForm.username+"-"+t,onlinePassword:this.bundleForm.onlinePassword+"-"+t,checkPass:this.bundleForm.checkPass+"-"+t,bundleAlias:this.bundleForm.bundleAlias+"-"+t,accessNodeUid:this.bundleForm.accessNodeUid,accessNodeName:this.bundleForm.accessNodeName,bundleFolderId:this.bundleForm.bundleFolderId,bundleFolderName:this.bundleForm.bundleFolderName,transcod:this.bundleForm.transcod,multicastSourceIp:this.bundleForm.multicastSourceIp,deviceAddr:{deviceIp:"",devicePort:5060}},this.initPort+=2):"rtp_passby_enc"==this.extraParam.dev_type&&(l.param={is_multi:this.rtpPassbyEncFormData.is_multi,multi_ip:this.TSencFormData.multi_ip,local_ip:this.TSencFormData.local_ip,video_port:this.TSencFormData.port,audio_port:this.TSencFormData.port+2},r={deviceModel:this.bundleForm.deviceModel,bundleType:this.bundleForm.bundleType,bundleName:this.bundleForm.bundleName+"-"+t,location:this.bundleForm.location,username:this.bundleForm.username+"-"+t,onlinePassword:this.bundleForm.onlinePassword+"-"+t,checkPass:this.bundleForm.checkPass+"-"+t,bundleAlias:this.bundleForm.bundleAlias+"-"+t,accessNodeUid:this.bundleForm.accessNodeUid,accessNodeName:this.bundleForm.accessNodeName,bundleFolderId:this.bundleForm.bundleFolderId,bundleFolderName:this.bundleForm.bundleFolderName,transcod:this.bundleForm.transcod,multicastSourceIp:this.bundleForm.multicastSourceIp,deviceAddr:{deviceIp:"",devicePort:5060}},this.TSencFormData.port+=4),a=[].concat(X()(this.extraInfos),[{name:"extend_param",value:l}]);var o={bundle:O()(r),extraInfoVOList:O()(a)};console.log(o),Object(x.a)(o).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"添加成功",type:"success"}),e.handleConfigBundle(t.bundleId))})}},validateBaseInfo:function(){var e=!1;return this.$refs.bundleForm.validate(function(t){e=t}),e},validateExtraInfo:function(){var e=!0,t=!1,a=void 0;try{for(var l,r=A()(this.extraInfos);!(e=(l=r.next()).done);e=!0){var o=l.value;if(!o.name||!o.value)return this.$message({message:"扩展字段不能为空",type:"error"}),!1}}catch(e){t=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw a}}return!0},handleChangeFolder:function(){var e=this;e.dialog.changeFolder.visible=!0,Object(x._9)().then(function(t){console.log(t),200===t.status?e.dialog.changeFolder.tree.data=t.data:e.$message({type:"error",message:t.message})})},handleChangeFolderClose:function(){this.dialog.changeFolder.visible=!1,this.dialog.changeFolder.tree.data.splice(0,this.dialog.changeFolder.tree.data.length),this.dialog.changeFolder.tree.current=""},handleChangeFolderCommit:function(){this.bundleForm.bundleFolderId=this.dialog.changeFolder.tree.current.id,this.bundleForm.bundleFolderName=this.dialog.changeFolder.tree.current.name,this.handleChangeFolderClose()},currentTreeNodeChange:function(e,t){this.dialog.changeFolder.tree.current=e},treeNodeAppend:function(e,t){this.dialog.addFolder.parent=t,this.dialog.addFolder.parentNode=e,this.dialog.addFolder.visible=!0},handleAddFolderClose:function(){this.dialog.addFolder.parent="",this.dialog.addFolder.parentNode="",this.dialog.addFolder.visible=!1,this.dialog.addFolder.folderName="",this.dialog.addFolder.toLdap="否"},handleAddFolderCommit:function(){var e=this;Object(x.b)({name:e.dialog.addFolder.folderName,parentId:e.dialog.addFolder.parent.id,toLdap:"是"===e.dialog.addFolder.toLdap}).then(function(t){e.dialog.addFolder.parent.children=e.dialog.addFolder.parent.children||[],t.errMsg||(e.dialog.addFolder.parent.children.push(t.folder),e.$refs.changeFolderTree.append(t.folder,e.dialog.addFolder.parentNode),e.handleAddFolderClose())})},handleSelectLayerNode:function(){this.$refs.selectLayerNode.show()},layerNodeSelected:function(e,t){this.bundleForm.accessNodeUid=e.nodeUid,this.bundleForm.accessNodeName=e.name,t()},submitForm:function(){this.$refs.dahuaForm.validate(function(e){})},resetForm:function(){this.$refs.dahuaForm.resetFields()},handleConfigBundle:function(e){var t={bundleId:e,configChannels:O()(this.configChannels),configEditableAttrs:O()([])};Object(x.l)(t).then(function(e){})},TSencFormIsMultiChange:function(e){this.TSencFormMultiIpDis=!e},rtpPassbyEncFormIsMultiChange:function(e){this.rtpPassbyEncFormMultiIpDis=!e},deviceModelChange:function(e){"jv210"==e?(this.isFictitiouVisable=!0,this.alarmSizeVisable=!1,this.isSipShow=!0,this.bundleForm.username="",this.bundleForm.onlinePassword="",this.bundleForm.checkPass="",this.extraParam.region="self",this.devType=[]):(this.isFictitiouVisable=!1,this.alarmSizeVisable=!0,this.isSipShow=!0,this.bundleFolderVisable=!1,this.bundleForm.username="",this.bundleForm.onlinePassword="",this.bundleForm.checkPass="",this.extraParam.region="self",this.devType=["enc","sip_enc"])},encodeModeChange:function(e){"bitrate_first"==e?(this.dahuaFormData.enc_param.bitrate=1024,this.bitrateDisable=!0):"quality_first"==e?(this.dahuaFormData.enc_param.bitrate=8192,this.bitrateDisable=!0):this.bitrateDisable=!1},bqTypeChange:function(e){this.bqDecoderOption="D1"==e?[{label:1,value:1}]:[{label:1,value:1},{label:2,value:2},{label:3,value:3},{label:4,value:4},{label:5,value:5},{label:6,value:6},{label:7,value:7},{label:8,value:8}]}},mounted:function(){var e=this;this.$nextTick(function(){Object(x.L)().then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.regionOption=t.data.rows,e.regionOption.unshift({id:99999,identity:"self",stationName:"本域"}))}),e.$parent.$parent.$parent.$parent.$parent.setActive("/LwLocalBundleManage")})}},Pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"批量添加资源",name:"LwAddBundleForTest"}})],1),e._v(" "),a("el-form",{ref:"bundleForm",attrs:{model:e.bundleForm,rules:e.rules,"label-width":"130px",inline:!0,size:"small"}},[a("el-form-item",{attrs:{size:"small",label:"设备形态",prop:"deviceModel"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"small"},on:{change:e.deviceModelChange},model:{value:e.bundleForm.deviceModel,callback:function(t){e.$set(e.bundleForm,"deviceModel",t)},expression:"bundleForm.deviceModel"}},e._l(e.deviceModelOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),"jv210"==e.bundleForm.deviceModel?a("el-form-item",{attrs:{label:"设备类型"}},[a("el-cascader",{attrs:{options:e.devTypeOption},on:{change:e.devTypeChange},model:{value:e.devType,callback:function(t){e.devType=t},expression:"devType"}})],1):e._e(),e._v(" "),"jv210"==e.bundleForm.deviceModel?a("el-form-item",{attrs:{label:"域类型"}},[a("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"请选择域类型"},model:{value:e.extraParam.region,callback:function(t){e.$set(e.extraParam,"region",t)},expression:"extraParam.region"}},e._l(e.regionOption,function(e){return a("el-option",{key:e.uuid,attrs:{label:e.stationName,value:e.identity}})}),1)],1):e._e(),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"ws"==e.bundleForm.deviceModel,expression:"bundleForm.deviceModel=='ws'"}],attrs:{size:"small",label:"编解码类型",prop:"coderType"}},[a("el-select",{staticStyle:{width:"200px"},model:{value:e.bundleForm.coderType,callback:function(t){e.$set(e.bundleForm,"coderType",t)},expression:"bundleForm.coderType"}},e._l(e.wsTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"别名前缀",prop:"bundleAlias"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.bundleAlias,callback:function(t){e.$set(e.bundleForm,"bundleAlias",t)},expression:"bundleForm.bundleAlias"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"地点",prop:"bundleAlias"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.location,callback:function(t){e.$set(e.bundleForm,"location",t)},expression:"bundleForm.location"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"设备名称前缀",prop:"bundleName"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.bundleName,callback:function(t){e.$set(e.bundleForm,"bundleName",t)},expression:"bundleForm.bundleName"}})],1),e._v(" "),e.bundleFolderVisable?a("el-form-item",{attrs:{size:"small",label:"设备分组",prop:"bundleFolderName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{readOnly:""},nativeOn:{click:function(t){return e.handleChangeFolder(t)}},model:{value:e.bundleForm.bundleFolderName,callback:function(t){e.$set(e.bundleForm,"bundleFolderName",t)},expression:"bundleForm.bundleFolderName"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"设备账号前缀",prop:"username"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.username,callback:function(t){e.$set(e.bundleForm,"username",t)},expression:"bundleForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"设备密码前缀",prop:"onlinePassword"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"password","auto-complete":"off",required:""},model:{value:e.bundleForm.onlinePassword,callback:function(t){e.$set(e.bundleForm,"onlinePassword",t)},expression:"bundleForm.onlinePassword"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"确认密码",prop:"checkPass"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"password","auto-complete":"off",required:""},model:{value:e.bundleForm.checkPass,callback:function(t){e.$set(e.bundleForm,"checkPass",t)},expression:"bundleForm.checkPass"}})],1),e._v(" "),e.alarmSizeVisable?a("el-form-item",{attrs:{size:"small",label:"告警容量",prop:"alarmSize"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"auto-complete":"off",placeholder:"单位：GB"},model:{value:e.extraParam.alarmSize,callback:function(t){e.$set(e.extraParam,"alarmSize",e._n(t))},expression:"extraParam.alarmSize"}})],1):e._e(),e._v(" "),"jv210"==e.bundleForm.deviceModel?a("el-form-item",{attrs:{size:"small",label:"接入层UID",prop:"accessNodeUid"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{readonly:""},nativeOn:{click:function(t){return e.handleSelectLayerNode(t)}},model:{value:e.bundleForm.accessNodeName,callback:function(t){e.$set(e.bundleForm,"accessNodeName",t)},expression:"bundleForm.accessNodeName"}}),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.bundleForm.accessNodeUid,callback:function(t){e.$set(e.bundleForm,"accessNodeUid",t)},expression:"bundleForm.accessNodeUid"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"创建设备个数"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleNumber,callback:function(t){e.bundleNumber=t},expression:"bundleNumber"}})],1)],1),e._v(" "),a("el-card",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"box-card",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("设备参数设置")])]),e._v(" "),a("div",{staticClass:"bundleConfig"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"ts_enc"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'ts_enc'"}]},[a("el-row",{attrs:{gutter:10}},[a("el-form",{ref:"TSencForm",attrs:{model:e.TSencFormData,rules:e.TSencRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"接收类型",prop:"is_multi"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择接收类型"},on:{change:e.TSencFormIsMultiChange},model:{value:e.TSencFormData.is_multi,callback:function(t){e.$set(e.TSencFormData,"is_multi",t)},expression:"TSencFormData.is_multi"}},e._l(e.is_multiOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"组播ip",prop:"multi_ip"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入组播ip",clearable:"",disabled:!e.TSencFormData.is_multi},model:{value:e.TSencFormData.multi_ip,callback:function(t){e.$set(e.TSencFormData,"multi_ip",t)},expression:"TSencFormData.multi_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"本机ip",prop:e.TSencFormData.is_multi?"local_ip":""}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入本机ip",clearable:""},model:{value:e.TSencFormData.local_ip,callback:function(t){e.$set(e.TSencFormData,"local_ip",t)},expression:"TSencFormData.local_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"接收端口起始值",prop:"port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入接收端口",clearable:""},model:{value:e.initPort,callback:function(t){e.initPort=e._n(t)},expression:"initPort"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"接收端口",prop:"port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入接收端口",clearable:""},model:{value:e.TSencFormData.port,callback:function(t){e.$set(e.TSencFormData,"port",e._n(t))},expression:"TSencFormData.port"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"rtp_passby_enc"==e.extraParam.dev_type,expression:"extraParam.dev_type == 'rtp_passby_enc'"}]},[a("el-row",{attrs:{gutter:10}},[a("el-form",{ref:"rtpPassbyEncForm",attrs:{model:e.rtpPassbyEncFormData,rules:e.rtpPassbyEncRules,size:"mini","label-width":"135px"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"接收类型",prop:"is_multi"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择接收类型"},on:{change:e.rtpPassbyEncFormIsMultiChange},model:{value:e.rtpPassbyEncFormData.is_multi,callback:function(t){e.$set(e.rtpPassbyEncFormData,"is_multi",t)},expression:"rtpPassbyEncFormData.is_multi"}},e._l(e.is_multiOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"组播ip",prop:e.rtpPassbyEncFormData.is_multi?"multi_ip":""}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入组播ip",clearable:"",disabled:e.rtpPassbyEncFormMultiIpDis},model:{value:e.rtpPassbyEncFormData.multi_ip,callback:function(t){e.$set(e.rtpPassbyEncFormData,"multi_ip",t)},expression:"rtpPassbyEncFormData.multi_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"本机ip",prop:e.rtpPassbyEncFormData.is_multi?"local_ip":""}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入本机ip",clearable:""},model:{value:e.rtpPassbyEncFormData.local_ip,callback:function(t){e.$set(e.rtpPassbyEncFormData,"local_ip",t)},expression:"rtpPassbyEncFormData.local_ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"视频起始端口",prop:"video_port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入视频接收端口",clearable:""},model:{value:e.rtpPassbyEncFormData.video_port,callback:function(t){e.$set(e.rtpPassbyEncFormData,"video_port",e._n(t))},expression:"rtpPassbyEncFormData.video_port"}})],1)],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{span:7}},[a("el-form-item",{attrs:{label:"音频端口",prop:"audio_port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入音频接收端口",clearable:""},model:{value:e.rtpPassbyEncFormData.audio_port,callback:function(t){e.$set(e.rtpPassbyEncFormData,"audio_port",e._n(t))},expression:"rtpPassbyEncFormData.audio_port"}})],1)],1)],1)],1)],1)])]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticStyle:{"margin-top":"10px","margin-left":"30px"},attrs:{type:"info",size:"small"},on:{click:e.addExtraInfo}},[e._v("新增扩展字段")]),e._v(" "),e._l(e.extraInfos,function(t,l){return a("div",{staticStyle:{"margin-top":"10px","margin-left":"30px"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"扩展字段名"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"extraInfo.name"}}),e._v(" "),a("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{size:"small",placeholder:"扩展字段值"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"extraInfo.value"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"danger"},on:{click:function(a){return a.preventDefault(),e.remove(t)}}},[e._v("删除")])],1)}),e._v(" "),a("div",{staticStyle:{"margin-top":"30px","margin-left":"30px"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("批量创建")])],1),e._v(" "),[a("el-dialog",{attrs:{title:"选择分组",visible:e.dialog.changeFolder.visible,width:"650px","before-close":e.handleChangeFolderClose},on:{"update:visible":function(t){return e.$set(e.dialog.changeFolder,"visible",t)}}},[a("div",{staticStyle:{height:"500px",position:"relative"}},[a("el-scrollbar",{staticStyle:{height:"100%"}},[a("el-tree",{ref:"changeFolderTree",attrs:{props:e.dialog.changeFolder.tree.props,data:e.dialog.changeFolder.tree.data,"node-key":"id","check-strictly":"","expand-on-click-node":!1,"default-expand-all":"","highlight-current":""},on:{"current-change":e.currentTreeNodeChange},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.node,r=t.data;return a("span",{staticStyle:{flex:"1",display:"flex","align-items":"center","justify-content":"space-between","padding-right":"8px"}},[a("span",{staticStyle:{"font-size":"14px"}},[a("span",{staticClass:"icon-folder-close"}),e._v(" "),a("span",[e._v(e._s(r.name))])]),e._v(" "),a("span",[a("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.treeNodeAppend(l,r)}}},[a("span",{staticClass:"icon-plus",staticStyle:{"font-size":"16px"}})])],1)])}}])})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:e.handleChangeFolderClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.handleChangeFolderCommit}},[e._v("确定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"添加分组",visible:e.dialog.addFolder.visible,width:"450px","before-close":e.handleAddFolderClose},on:{"update:visible":function(t){return e.$set(e.dialog.addFolder,"visible",t)}}},[a("el-form",{attrs:{"label-width":"110px"}},[a("el-form-item",{attrs:{label:"分组名称"}},[a("el-input",{model:{value:e.dialog.addFolder.folderName,callback:function(t){e.$set(e.dialog.addFolder,"folderName",t)},expression:"dialog.addFolder.folderName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否同步ldap"}},[a("el-select",{model:{value:e.dialog.addFolder.toLdap,callback:function(t){e.$set(e.dialog.addFolder,"toLdap",t)},expression:"dialog.addFolder.toLdap"}},[a("el-option",{key:"是",attrs:{label:"是",value:"是"}},[e._v("\n              是\n            ")]),e._v(" "),a("el-option",{key:"否",attrs:{label:"否",value:"否"}},[e._v("\n              否\n            ")])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:e.handleAddFolderClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.handleAddFolderCommit}},[e._v("确定")])],1)],1)],e._v(" "),[a("selectLayerNode",{ref:"selectLayerNode",on:{"layer-node-selected":e.layerNodeSelected}})]],2)},staticRenderFns:[]};var Re=a("VU/8")(Le,Pe,!1,function(e){a("B93b")},null,null).exports,Oe=[{path:"/404",component:l.default,name:"",hidden:!0},{path:"/LwBindRoleResource",component:pe,name:"",hidden:!0},{path:"/",component:r.default,name:"资源",iconCls:"el-icon-message",children:[{path:"/main",component:o.default,name:"主页",hidden:!0},{path:"/BundleManage",component:c.default,name:"资源管理"},{path:"/AddBundle",component:u.default,name:"添加资源",hidden:!0},{path:"/ModifyBundle",component:p.default,name:"修改资源",hidden:!0},{path:"/ConfigBundle",component:m.default,name:"能力配置",hidden:!0},{path:"/BundleTemplateManage",component:s.default,name:"模板管理"},{path:"/ChannelTemplateManage",component:d.default,name:"通道模板管理",hidden:!0},{path:"/LayerNodeManage",component:h.default,name:"层节点管理"},{path:"/AddLayerNode",component:b.default,name:"添加层节点",hidden:!0},{path:"/ModifyLayernode",component:f.default,name:"修改层节点",hidden:!0},{path:"/BindResource",component:n.default,name:"绑定资源权限"},{path:"/BindVirtualResource",component:i.default,name:"绑定虚拟资源",hidden:!0},{path:"/FolderManage",component:v.default,name:"分组管理"},{path:"/SerInfoAndNode",component:g.default,name:"服务设备信息"},{path:"/UserBindBundle",component:y.default,name:"用户绑定设备"},{path:"/LwRecordManage",component:D,name:"录制管理"},{path:"/LwCurTask",component:N,name:"当前任务"},{path:"/LwNetIframe",component:I,name:"网管",hidden:!0},{path:"/LwEncodeManage",component:fe,name:"编码解码管理"},{path:"/LwLayerNodeManage",component:P,name:"层节点管理"},{path:"/LwAddLayerNode",component:B,name:"添加层节点",hidden:!0},{path:"/LwModifyLayerNode",component:j,name:"修改层节点",hidden:!0},{path:"/LwLocalBundleManage",component:J,name:"本地资源管理"},{path:"/LwAddBundle",component:te,name:"添加资源",hidden:!0},{path:"/LwModifyBundle",component:re,name:"修改资源",hidden:!0},{path:"/LwConfigBundle",component:ie,name:"能力配置",hidden:!0},{path:"/LwBindRoleResource",component:pe,name:"",hidden:!0},{path:"/LwCapacity",component:we,name:"",hidden:!0},{path:"/LwFolderManage",component:De,name:"分组管理",hidden:!0},{path:"/LwSerInfoAndNode",component:Ie,name:"级联页面",hidden:!0},{path:"/LwRegionManage",component:Me,name:"级联管理",hidden:!0},{path:"/LwAddBundleForTest",component:Re,name:"添加设备测试",hidden:!0}]},{path:"*",hidden:!0,redirect:{path:"/404"}}];t.a=Oe},exDE:function(e,t){},fIJV:function(e,t){},gstv:function(e,t){},iVmd:function(e,t){},ifcc:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),r=a.n(l),o=a("BO1k"),n=a.n(o),i=a("bOdI"),s=a.n(i),d=a("P9l9"),c={name:"AddBundle",components:{selectLayerNode:a("/Qkj").default},data:function(){var e=this;return{activeTabName:"AddBundle",extraInfos:[],bundleForm:s()({deviceModel:"",bundleType:"",bundleName:"",username:"",onlinePassword:"",checkPass:"",bundleAlias:"",accessNodeUid:"",bundleFolderId:null,bundleFolderName:"根目录",deviceAddr:{deviceIp:"",devicePort:5060},multicastEncode:!1,multicastEncodeAddr:"",multicastDecode:!1,coderType:"DEFAULT",longitude:"",latitude:"",streamUrl:""},"streamUrl",""),rules:{deviceModel:[{required:!0,message:"请选择设备形态",trigger:"change"}],bundleName:[{required:!0,message:"请输入设备名称",trigger:"blur"},{min:1,max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}],username:[{required:!0,message:"请输入设备账号",trigger:"blur"}],onlinePassword:[{validator:function(t,a,l){""===a?l(new Error("请输入密码")):(""!==e.bundleForm.checkPass&&e.$refs.bundleForm.validateField("checkPass"),l())},trigger:"blur"}],checkPass:[{validator:function(t,a,l){""===a?l(new Error("请再次输入密码")):a!==e.bundleForm.onlinePassword?l(new Error("两次输入密码不一致!")):l()},trigger:"blur"}]},deviceModelOptions:[],coderTypeOptions:[{label:"编码器",value:"ENCODER"},{label:"解码器",value:"DECODER"},{label:"默认",value:"DEFAULT"}],wsTypeOptions:[{label:"编码器",value:"ENCODER"},{label:"解码器",value:"DECODER"},{label:"软终端",value:"DEFAULT"}],bundleTypeOptions:[{label:"终端",value:"VenusTerminal"},{label:"混合器",value:"VenusMixer"},{label:"转发器",value:"VenusTransporter"},{label:"外部输出设备",value:"VenusOutConnection"},{label:"大屏设备",value:"VenusVideoMatrix"}],dialog:{changeFolder:{visible:!1,tree:{props:{label:"name",children:"children"},expandOnClickNode:!1,data:[],current:""}},addFolder:{visible:!1,parent:"",parentNode:"",folderName:"",toLdap:"否"}}}},computed:{bundleFormMulticastEncode:function(){return this.bundleForm.multicastEncode}},watch:{bundleFormMulticastEncode:function(e){e||(this.bundleForm.multicastEncodeAddr="")}},methods:{handleTabClick:function(e,t){"AddBundle"!==e.name&&this.$router.push("/"+e.name)},getDeviceModels:function(){var e=this;Object(d.G)().then(function(t){if(!t.errMsg&&t.deviceModels){var a=!0,l=!1,r=void 0;try{for(var o,i=n()(t.deviceModels);!(a=(o=i.next()).done);a=!0){var s=o.value,d={value:s,label:s};e.deviceModelOptions.push(d)}}catch(e){l=!0,r=e}finally{try{!a&&i.return&&i.return()}finally{if(l)throw r}}}})},addExtraInfo:function(){this.extraInfos.push({})},remove:function(e){var t=this.extraInfos.indexOf(e);-1!==t&&this.extraInfos.splice(t,1)},reset:function(){this.$refs.bundleForm.resetFields(),this.bundleForm.bundleFolderId=null,this.bundleForm.bundleFolderName="根目录"},submit:function(){var e=this;if(this.validateBaseInfo()&&this.validateExtraInfo()){var t={bundle:r()(this.bundleForm),extraInfoVOList:r()(this.extraInfos)};Object(d.a)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"添加成功",type:"success"}),setTimeout(function(){window.location.reload()},1e3))})}},validateBaseInfo:function(){var e=!1;return this.$refs.bundleForm.validate(function(t){e=t}),e},validateExtraInfo:function(){var e=!0,t=!1,a=void 0;try{for(var l,r=n()(this.extraInfos);!(e=(l=r.next()).done);e=!0){var o=l.value;if(!o.name||!o.value)return this.$message({message:"扩展字段不能为空",type:"error"}),!1}}catch(e){t=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw a}}return!0},handleChangeFolder:function(){var e=this;e.dialog.changeFolder.visible=!0,Object(d._9)().then(function(t){if(200===t.status){if(e.dialog.changeFolder.tree.data.splice(0,e.dialog.changeFolder.tree.data.length),t.data&&t.data.length>0)for(var a=0;a<t.data.length;a++)e.dialog.changeFolder.tree.data.push(t.data[a])}else e.$message({type:"error",message:t.message})})},handleChangeFolderClose:function(){this.dialog.changeFolder.visible=!1,this.dialog.changeFolder.tree.data.splice(0,this.dialog.changeFolder.tree.data.length),this.dialog.changeFolder.tree.current=""},handleChangeFolderCommit:function(){this.bundleForm.bundleFolderId=this.dialog.changeFolder.tree.current.id,this.bundleForm.bundleFolderName=this.dialog.changeFolder.tree.current.name,this.handleChangeFolderClose()},currentTreeNodeChange:function(e,t){this.dialog.changeFolder.tree.current=e},treeNodeAppend:function(e,t){this.dialog.addFolder.parent=t,this.dialog.addFolder.parentNode=e,this.dialog.addFolder.visible=!0},handleAddFolderClose:function(){this.dialog.addFolder.parent="",this.dialog.addFolder.parentNode="",this.dialog.addFolder.visible=!1,this.dialog.addFolder.folderName="",this.dialog.addFolder.toLdap="否"},handleAddFolderCommit:function(){var e=this;Object(d.b)({name:e.dialog.addFolder.folderName,parentId:e.dialog.addFolder.parent.id,toLdap:"是"===e.dialog.addFolder.toLdap}).then(function(t){e.dialog.addFolder.parent.children=e.dialog.addFolder.parent.children||[],t.errMsg||(e.dialog.addFolder.parent.children.push(t.folder),e.$refs.changeFolderTree.append(t.folder,e.dialog.addFolder.parentNode),e.handleAddFolderClose())})},handleSelectLayerNode:function(){this.$refs.selectLayerNode.show()},layerNodeSelected:function(e,t){this.bundleForm.accessNodeUid=e.nodeUid,t()}},mounted:function(){var e=this;this.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/BundleManage")}),this.getDeviceModels()}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"资源列表",name:"BundleManage"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"添加资源",name:"AddBundle"}})],1),e._v(" "),a("el-form",{ref:"bundleForm",attrs:{model:e.bundleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{size:"small",label:"设备形态",prop:"deviceModel"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:e.bundleForm.deviceModel,callback:function(t){e.$set(e.bundleForm,"deviceModel",t)},expression:"bundleForm.deviceModel"}},e._l(e.deviceModelOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"jv210"==e.bundleForm.deviceModel,expression:"bundleForm.deviceModel=='jv210'"}],attrs:{size:"small",label:"编解码类型",prop:"coderType"}},[a("el-select",{staticStyle:{width:"200px"},model:{value:e.bundleForm.coderType,callback:function(t){e.$set(e.bundleForm,"coderType",t)},expression:"bundleForm.coderType"}},e._l(e.coderTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"ws"==e.bundleForm.deviceModel,expression:"bundleForm.deviceModel=='ws'"}],attrs:{size:"small",label:"编解码类型",prop:"coderType"}},[a("el-select",{staticStyle:{width:"200px"},model:{value:e.bundleForm.coderType,callback:function(t){e.$set(e.bundleForm,"coderType",t)},expression:"bundleForm.coderType"}},e._l(e.wsTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"别名",prop:"bundleAlias"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.bundleAlias,callback:function(t){e.$set(e.bundleForm,"bundleAlias",t)},expression:"bundleForm.bundleAlias"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"设备名称",prop:"bundleName"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.bundleName,callback:function(t){e.$set(e.bundleForm,"bundleName",t)},expression:"bundleForm.bundleName"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"设备分组",prop:"bundleFolderName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{readOnly:""},nativeOn:{click:function(t){return e.handleChangeFolder(t)}},model:{value:e.bundleForm.bundleFolderName,callback:function(t){e.$set(e.bundleForm,"bundleFolderName",t)},expression:"bundleForm.bundleFolderName"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"设备账号",prop:"username"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.username,callback:function(t){e.$set(e.bundleForm,"username",t)},expression:"bundleForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"设备密码",prop:"onlinePassword"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"password","auto-complete":"off"},model:{value:e.bundleForm.onlinePassword,callback:function(t){e.$set(e.bundleForm,"onlinePassword",t)},expression:"bundleForm.onlinePassword"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"确认密码",prop:"checkPass"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"password","auto-complete":"off"},model:{value:e.bundleForm.checkPass,callback:function(t){e.$set(e.bundleForm,"checkPass",t)},expression:"bundleForm.checkPass"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"jv210"==e.bundleForm.deviceModel||"ws"==e.bundleForm.deviceModel,expression:"bundleForm.deviceModel=='jv210' || bundleForm.deviceModel=='ws'"}],attrs:{size:"small",label:"接入层UID",prop:"accessNodeUid"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{readOnly:""},nativeOn:{click:function(t){return e.handleSelectLayerNode(t)}},model:{value:e.bundleForm.accessNodeUid,callback:function(t){e.$set(e.bundleForm,"accessNodeUid",t)},expression:"bundleForm.accessNodeUid"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"设备IP"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.deviceAddr.deviceIp,callback:function(t){e.$set(e.bundleForm.deviceAddr,"deviceIp",t)},expression:"bundleForm.deviceAddr.deviceIp"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"设备端口"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.deviceAddr.devicePort,callback:function(t){e.$set(e.bundleForm.deviceAddr,"devicePort",t)},expression:"bundleForm.deviceAddr.devicePort"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"编码组播"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.bundleForm.multicastEncode,callback:function(t){e.$set(e.bundleForm,"multicastEncode",t)},expression:"bundleForm.multicastEncode"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"编码组播地址"}},[e.bundleForm.multicastEncode?a("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.multicastEncodeAddr,callback:function(t){e.$set(e.bundleForm,"multicastEncodeAddr",t)},expression:"bundleForm.multicastEncodeAddr"}}):a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:e.bundleForm.multicastEncodeAddr,callback:function(t){e.$set(e.bundleForm,"multicastEncodeAddr",t)},expression:"bundleForm.multicastEncodeAddr"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"解码组播"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.bundleForm.multicastDecode,callback:function(t){e.$set(e.bundleForm,"multicastDecode",t)},expression:"bundleForm.multicastDecode"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"ipc"==e.bundleForm.deviceModel||"speaker"==e.bundleForm.deviceModel,expression:"bundleForm.deviceModel=='ipc' || bundleForm.deviceModel=='speaker'"}],attrs:{size:"small",label:"坐标经度(°)",prop:"longitude"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.longitude,callback:function(t){e.$set(e.bundleForm,"longitude",t)},expression:"bundleForm.longitude"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"ipc"==e.bundleForm.deviceModel||"speaker"==e.bundleForm.deviceModel,expression:"bundleForm.deviceModel=='ipc' || bundleForm.deviceModel=='speaker'"}],attrs:{size:"small",label:"坐标纬度(°)",prop:"latitude"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.latitude,callback:function(t){e.$set(e.bundleForm,"latitude",t)},expression:"bundleForm.latitude"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"ipc"==e.bundleForm.deviceModel,expression:"bundleForm.deviceModel=='ipc'"}],attrs:{size:"small",label:"流地址",prop:"streamUrl"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.streamUrl,callback:function(t){e.$set(e.bundleForm,"streamUrl",t)},expression:"bundleForm.streamUrl"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"speaker"==e.bundleForm.deviceModel,expression:"bundleForm.deviceModel=='speaker'"}],attrs:{size:"small",label:"标识",prop:"identify"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.identify,callback:function(t){e.$set(e.bundleForm,"identify",t)},expression:"bundleForm.identify"}})],1),e._v(" "),a("el-button",{staticStyle:{"margin-top":"10px","margin-left":"30px"},attrs:{type:"info",size:"small"},on:{click:e.addExtraInfo}},[e._v("新增扩展字段")]),e._v(" "),e._l(e.extraInfos,function(t,l){return a("div",{staticStyle:{"margin-top":"10px","margin-left":"30px"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"扩展字段名"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"extraInfo.name"}}),e._v(" "),a("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{size:"small",placeholder:"扩展字段值"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"extraInfo.value"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"danger"},on:{click:function(a){return a.preventDefault(),e.remove(t)}}},[e._v("删除")])],1)}),e._v(" "),a("div",{staticStyle:{"margin-top":"30px","margin-left":"30px"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.reset()}}},[e._v("重置")])],1)],2),e._v(" "),[a("el-dialog",{attrs:{title:"选择分组",visible:e.dialog.changeFolder.visible,width:"650px","before-close":e.handleChangeFolderClose},on:{"update:visible":function(t){return e.$set(e.dialog.changeFolder,"visible",t)}}},[a("div",{staticStyle:{height:"500px",position:"relative"}},[a("el-scrollbar",{staticStyle:{height:"100%"}},[a("el-tree",{ref:"changeFolderTree",attrs:{props:e.dialog.changeFolder.tree.props,data:e.dialog.changeFolder.tree.data,"node-key":"id","check-strictly":"","expand-on-click-node":!1,"default-expand-all":"","highlight-current":""},on:{"current-change":e.currentTreeNodeChange},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.node,r=t.data;return a("span",{staticStyle:{flex:"1",display:"flex","align-items":"center","justify-content":"space-between","padding-right":"8px"}},[a("span",{staticStyle:{"font-size":"14px"}},[a("span",{staticClass:"icon-folder-close"}),e._v(" "),a("span",[e._v(e._s(r.name))])]),e._v(" "),a("span",[a("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.treeNodeAppend(l,r)}}},[a("span",{staticClass:"icon-plus",staticStyle:{"font-size":"16px"}})])],1)])}}])})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:e.handleChangeFolderClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.handleChangeFolderCommit}},[e._v("确定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"添加分组",visible:e.dialog.addFolder.visible,width:"450px","before-close":e.handleAddFolderClose},on:{"update:visible":function(t){return e.$set(e.dialog.addFolder,"visible",t)}}},[a("el-form",{attrs:{"label-width":"110px"}},[a("el-form-item",{attrs:{label:"分组名称"}},[a("el-input",{model:{value:e.dialog.addFolder.folderName,callback:function(t){e.$set(e.dialog.addFolder,"folderName",t)},expression:"dialog.addFolder.folderName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否同步ldap"}},[a("el-select",{model:{value:e.dialog.addFolder.toLdap,callback:function(t){e.$set(e.dialog.addFolder,"toLdap",t)},expression:"dialog.addFolder.toLdap"}},[a("el-option",{key:"是",attrs:{label:"是",value:"是"}},[e._v("\n                是\n              ")]),e._v(" "),a("el-option",{key:"否",attrs:{label:"否",value:"否"}},[e._v("\n                否\n              ")])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:e.handleAddFolderClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.handleAddFolderCommit}},[e._v("确定")])],1)],1)],e._v(" "),[a("selectLayerNode",{ref:"selectLayerNode",on:{"layer-node-selected":e.layerNodeSelected}})]],2)},staticRenderFns:[]};var p=a("VU/8")(c,u,!1,function(e){a("cpB7")},"data-v-24364892",null);t.default=p.exports},j7e0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("UOlw"),r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("el-header",{staticStyle:{padding:"0px",height:"50px"}},[a("headerbar",{attrs:{sysUserName:e.sysUserName,routes:e.shortCutsRoutes,active:e.$route.path}})],1),e._v(" "),a("el-container",{staticStyle:{height:"calc(100% - 50px)"}},[a("sidebar",{attrs:{routes:e.routes,active:e.active,menurouter:e.menurouter}}),e._v(" "),a("el-main",{staticStyle:{position:"relative"}},[a("transition",[a("section",{staticClass:"content-container"},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-col",{staticClass:"content-wrapper",attrs:{span:24}},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)],1)],1)])])],1)],1)],1)},staticRenderFns:[]};var o=function(e){a("4aoo")},n=a("VU/8")(l.a,r,!1,o,"data-v-9687682a",null);t.default=n.exports},kCLY:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),r=a.n(l),o=a("BO1k"),n=a.n(o),i=a("P9l9"),s=document.location.origin,d={data:function(){return{activeTabName:"FolderManage",resources:[],users:[],resourceTableShow:!0,userTableShow:!1,deviceModelOptions:[],filters:{deviceModel:"jv210",keyword:""},multipleSelection:[],disableSetFolderBtn:!0,disableAddFolderBtn:!0,disableModifyFolderBtn:!0,disableDeleteFolderBtn:!0,disableResetRootBtn:!1,disableReleaseRootBtn:!0,defaultExpandKeys:[],tree:[],defaultProps:{children:"children",label:"name"},currentSelectNode:null,expandNodeKeysArr:[],resourceTableLoading:!1,userTableLoading:!1,dialogAddForderFormVisible:!1,dialogmodifyForderFormVisible:!1,folderForm:{name:"",toLdap:!1},dialogsetRootVisible:!1,setRootId:"",setRootOptions:[],modifyForm:{},uploadUrl:s+"/folder/import",uploadUserUrl:s+"/folder/user/import",myHeaders:{"tetris-001":sessionStorage.getItem("token")},treeLoading:!1,toLdapoptions:[{value:!0,label:"是"},{value:!1,label:"否"}],ldapLoading:!1}},methods:{getDeviceModels:function(){var e=this;Object(i.G)().then(function(t){if(!t.errMsg&&t.deviceModels){e.deviceModelOptions.push({value:"",label:"全部类型"});var a=!0,l=!1,r=void 0;try{for(var o,i=n()(t.deviceModels);!(a=(o=i.next()).done);a=!0){var s=o.value,d={value:s,label:s};e.deviceModelOptions.push(d)}}catch(e){l=!0,r=e}finally{try{!a&&i.return&&i.return()}finally{if(l)throw r}}}})},handleChange:function(e,t){var a=this;if(e.raw){var l=new FileReader;l.onload=function(e){a.contentHtml=e.target.result},l.readAsText(e.raw,"utf-8")}console.log(e,t)},initTree:function(e){var t=this;this.treeLoading=!0,Object(i.S)().then(function(a){a.errMsg?(t.$message({message:a.errMsg,type:"error"}),t.treeLoading=!1):(t.tree=a.tree,e||(t.expandNodeKeysArr.splice(0,t.expandNodeKeysArr.length),t.expandNodeKeysArr=t.tree.map(function(e){return e.id})),t.defaultExpandKeys=t.expandNodeKeysArr,t.treeLoading=!1,t.disableSetFolderBtn=!0,t.disableAddFolderBtn=!0,t.disableModifyFolderBtn=!0,t.disableDeleteFolderBtn=!0,t.disableResetRootBtn=!1,t.disableReleaseRootBtn=!0)})},getBundles:function(){var e=this;this.resourceTableShow=!0,this.userTableShow=!1;var t={deviceModel:this.filters.deviceModel,keyword:this.filters.keyword};this.resourceTableLoading=!0,Object(i._4)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.resources=t.resources,e.resourceTableLoading=!1})},getUsers:function(){var e=this;this.resourceTableShow=!1,this.userTableShow=!0;var t={keyword:this.filters.keyword};this.userTableLoading=!0,Object(i._18)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.users=t.users,e.userTableLoading=!1})},syncFolderToLdap:function(){var e=this;this.$confirm("是否确认上传LDAP?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.resourceTableLoading=!0,e.ldapLoading=!0;Object(i._35)({}).then(function(t){e.resourceTableLoading=!1,e.ldapLoading=!1,t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"同步成功数量："+t.successCnt,type:"success"}),e.initTree(!0))})}).catch(function(){e.$message({type:"info",message:"已取消"})})},downLoadFolderFromLdap:function(){var e=this;this.$confirm("是否确认从LDAP下载?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.resourceTableLoading=!0,e.ldapLoading=!0;Object(i._34)({}).then(function(t){e.resourceTableLoading=!1,e.ldapLoading=!1,t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"同步成功数量："+t.successCnt,type:"success"}),e.initTree())})}).catch(function(){e.$message({type:"info",message:"已取消"})})},cleanUpLdap:function(){var e=this;this.$confirm("确认清空所有上传到LDAP和从LDAP下载的信息么？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.resourceTableLoading=!0,e.ldapLoading=!0;Object(i.j)({}).then(function(t){e.resourceTableLoading=!1,e.ldapLoading=!1,t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"操作成功",type:"success"}),e.initTree(),e.getBundles())})}).catch(function(){e.$message({type:"info",message:"已取消"})})},showAddFolderDialog:function(){this.dialogAddForderFormVisible=!0},addFolder:function(){var e=this;if(this.folderForm.name.length){var t={name:this.folderForm.name,parentId:this.currentSelectNode.id,toLdap:this.folderForm.toLdap};Object(i.b)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.initTree(!0),e.dialogAddForderFormVisible=!1)})}else this.$message({message:"请输入分组名称",type:"error"})},showModifyFolderDialog:function(){this.dialogmodifyForderFormVisible=!0,this.modifyForm={name:this.currentSelectNode.name,toLdap:this.currentSelectNode.toLdap}},modifyFolder:function(){var e=this;if(this.modifyForm.name.length){var t={id:this.currentSelectNode.id,name:this.modifyForm.name,toLdap:this.modifyForm.toLdap};Object(i._0)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.initTree(!0),e.dialogmodifyForderFormVisible=!1)})}else this.$message({message:"请输入分组名称",type:"error"})},deleteFolder:function(){var e=this;if(this.currentSelectNode.beFolder){this.treeLoading=!0;var t={id:this.currentSelectNode.id};Object(i.q)(t).then(function(t){t.errMsg?(e.$message({message:t.errMsg,type:"error"}),e.treeLoading=!1):e.initTree(!0)})}else if(this.currentSelectNode.bundleId){this.treeLoading=!0;var a={bundleIds:this.currentSelectNode.bundleId};Object(i._20)(a).then(function(t){t.errMsg?(e.$message({message:t.errMsg,type:"error"}),e.treeLoading=!1):(e.initTree(!0),e.getBundles())})}else if(this.currentSelectNode.id){this.treeLoading=!0;var l={userIds:this.currentSelectNode.id};Object(i._21)(l).then(function(t){t.errMsg?(e.$message({message:t.errMsg,type:"error"}),e.treeLoading=!1):(e.initTree(!0),e.getUsers())})}},resetRoot:function(){var e=this;Object(i._22)({}).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.initTree()})},releaseRoot:function(){var e=this;Object(i._19)({folderId:this.currentSelectNode.id}).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"操作成功！",type:"success"}),e.initTree())})},handleNodeExpand:function(e,t){this.expandNodeKeysArr.push(t.key)},handleNodeCollapse:function(e,t){for(var a=0;a<this.expandNodeKeysArr.length;a++)this.expandNodeKeysArr[a]===t.key&&this.expandNodeKeysArr.splice(a,1)},setFolder:function(){var e=this;if(this.resourceTableShow){var t=this.multipleSelection.map(function(e){return e.bundleId}),a={folderId:this.currentSelectNode.id,bundleIds:t.join(",")};Object(i._25)(a).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.currentSelectNode.children=e.currentSelectNode.children.concat(t.bundleNodes),e.getBundles())})}else if(this.userTableShow){var l=this.multipleSelection,o={folderId:this.currentSelectNode.id,users:r()(l)};Object(i._26)(o).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.currentSelectNode.children=e.currentSelectNode.children.concat(t.userNodes),e.getUsers())})}},handleSelectionChange:function(e){this.multipleSelection=e,this.multipleSelection.length&&this.currentSelectNode&&this.currentSelectNode.beFolder?this.disableSetFolderBtn=!1:this.disableSetFolderBtn=!0},handleNodeClick:function(e,t,a){this.currentSelectNode=e,e.beFolder?(this.disableAddFolderBtn=!1,this.disableModifyFolderBtn=!1,this.multipleSelection.length&&(this.disableSetFolderBtn=!1),e.children&&e.children.length||e.parentId<0?this.disableDeleteFolderBtn=!0:this.disableDeleteFolderBtn=!1,-1==e.parentId?this.disableReleaseRootBtn=!1:this.disableReleaseRootBtn=!0):(this.disableAddFolderBtn=!0,this.disableModifyFolderBtn=!0,this.disableSetFolderBtn=!0,this.disableDeleteFolderBtn=!1,this.disableReleaseRootBtn=!0),e.systemSourceType||(this.disableAddFolderBtn=!0,this.disableModifyFolderBtn=!0,this.disableSetFolderBtn=!0,this.disableDeleteFolderBtn=!0,this.disableReleaseRootBtn=!0)},handleNodeDragEnd:function(e,t,a,l){var r=this;if(l.stopPropagation(),"none"!==a){if("USER"===e.data.nodeType&&"USER"===t.data.nodeType)return"inner"!==a&&(console.log("交换两个用户的排序"),console.log(a),void Object(i.e)({draggingId:e.data.id,dropId:t.data.id,folderId:e.data.parentId,type:a}).then(function(e){e.errMsg&&r.$message({message:e.errMsg,type:"error"}),r.initTree(!0)}));var o,n;"FOLDER"===e.data.nodeType?o=e.data.id:"BUNDLE"===e.data.nodeType?o=e.data.bundleId:"USER"===e.data.nodeType&&(o=e.data.username),"FOLDER"===t.data.nodeType?n=t.data.id:"BUNDLE"===t.data.nodeType?n=t.data.bundleId:"USER"===t.data.nodeType&&(n=t.data.username);var s={nodeId:o,changeType:a,nodeType:e.data.nodeType,newTargetId:n,newTargetType:t.data.nodeType,newTargetIndex:t.data.folderIndex,newTargetParentId:t.data.parentId};Object(i.f)(s).then(function(e){e.errMsg&&r.$message({message:e.errMsg,type:"error"}),console.log("change end, initTree"),r.initTree(!0)})}},allowDrop:function(e,t,a){if("USER"===e.data.nodeType&&"USER"!==t.data.nodeType)return!1;if(e.data.parentId!==t.data.parentId)return!1;if("inner"===a)return!1;if(e.id===t.id)return!1;if("none"===a)return!1;if(t.data.systemSourceType&&-1===e.data.parentId&&e.data.systemSourceType)return!1;if("ON_DEMAND"===t.data.folderType)return!1;if("FOLDER"!==t.data.nodeType&&(-1!==t.data.parentId&&"ON_DEMAND"===this.$refs.tree.getNode(t.data.parentId).data.folderType))return!1;return"next"!==a&&"prev"!==a||-1!==t.data.parentId},allowDrag:function(e){return("FOLDER"===e.data.nodeType||"USER"===e.data.nodeType)&&(!(-1===e.data.parentId&&!e.data.systemSourceType)&&("ON_DEMAND"!==e.data.folderType&&!!e.data.systemSourceType))},showSetRootDialog:function(){this.dialogsetRootVisible=!0,this.getRootoptions()},getRootoptions:function(){var e=this;this.setRootOptions=[],Object(i._14)({}).then(function(t){if(t.errMsg)e.$message({message:t.errMsg,type:"error"});else{var a=!0,l=!1,r=void 0;try{for(var o,i=n()(t.rootOptions);!(a=(o=i.next()).done);a=!0){var s=o.value,d={value:s.id,label:s.name};e.setRootOptions.push(d)}}catch(e){l=!0,r=e}finally{try{!a&&i.return&&i.return()}finally{if(l)throw r}}}})},setRoot:function(){var e=this,t={rootId:this.setRootId};Object(i._27)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.dialogsetRootVisible=!1,e.initTree())})},uploadSuccess:function(e){e.errMsg?this.$message({message:e.errMsg,type:"error"}):(null!=e.successCnt?this.$message({message:"成功导入分组的数量："+e.successCnt,type:"success"}):this.$message({message:"导入失败",type:"error"}),this.initTree(!0))},uploadError:function(e){this.$message({message:"上传文件错误: "+r()(e),type:"error"})},onprogress:function(){},exportFolder:function(){var e=this;Object(i.x)(null).then(function(e){var t=new Blob([e.data],{type:"application/octet-stream;charset=utf-8"}),a=document.createElement("a");a.download="Folder.csv",a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}).catch(function(t){e.$message({message:t,type:"error"})})},exportUser:function(){var e=this;Object(i.y)(null).then(function(e){var t=new Blob([e.data],{type:"application/octet-stream;charset=utf-8"}),a=document.createElement("a");a.download="UserFolder.csv",a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}).catch(function(t){e.$message({message:t,type:"error"})})}},mounted:function(){var e=this;e.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/FolderManage")}),this.initTree(),this.getDeviceModels(),this.getBundles()}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{staticStyle:{float:"left",width:"100%"},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"分组管理",name:"分组管理"}})],1),e._v(" "),a("el-card",{staticStyle:{float:"left","margin-top":"10px",width:"45%","font-size":"18px","min-height":"800px"},attrs:{"body-style":"padding:0px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"clearfix-first",staticStyle:{position:"relative",width:"100%",height:"37px"}},[a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",size:"small",disabled:e.disableAddFolderBtn},on:{click:e.showAddFolderDialog}},[e._v("添加目录\n        ")]),e._v(" "),a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",size:"small",disabled:e.disableModifyFolderBtn},on:{click:e.showModifyFolderDialog}},[e._v("修改\n        ")]),e._v(" "),a("el-button",{staticStyle:{float:"left"},attrs:{type:"danger",size:"small",disabled:e.disableDeleteFolderBtn},on:{click:e.deleteFolder}},[e._v("删除\n        ")]),e._v(" "),a("el-button",{staticStyle:{float:"left"},attrs:{type:"danger",size:"small",disabled:e.disableReleaseRootBtn},on:{click:e.releaseRoot}},[e._v("解除根目录")]),e._v(" "),a("el-dropdown",{staticStyle:{float:"left","margin-left":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small",loading:e.ldapLoading}},[e._v("\n            用户及分组LDAP操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.syncFolderToLdap()}}},[e._v("上传到LDAP")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(t){return e.downLoadFolderFromLdap()}}},[e._v("从LDAP下载")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(t){return e.cleanUpLdap()}}},[e._v("重置LDAP数据")])],1)],1)],1),e._v(" "),a("div",{staticClass:"clearfix-second",staticStyle:{position:"relative"}},[a("el-upload",{staticClass:"upload-folder",staticStyle:{float:"left"},attrs:{action:e.uploadUrl,name:"filePoster",headers:e.myHeaders,"show-file-list":!1,accept:".csv","on-success":e.uploadSuccess,"on-error":e.uploadError,"on-progress":e.onprogress}},[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("导入分组")])],1),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:e.exportFolder}},[e._v("导出分组\n        ")]),e._v(" "),a("el-upload",{staticClass:"upload-user",staticStyle:{float:"left","margin-left":"10px"},attrs:{action:e.uploadUserUrl,name:"userFile",headers:e.myHeaders,"show-file-list":!1,"on-success":e.uploadSuccess,accept:".csv","on-error":e.uploadError,"on-progress":e.onprogress,"on-change":e.handleChange}},[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("导入用户")])],1),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:e.exportUser}},[e._v("\n          导出用户\n        ")])],1)]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],staticClass:"custom-tree-container"},[a("div",[a("el-tree",{ref:"tree",attrs:{data:e.tree,"node-key":"id","highlight-current":"","expand-on-click-node":!1,props:e.defaultProps,"default-expanded-keys":e.defaultExpandKeys,draggable:"","allow-drop":e.allowDrop,"allow-drag":e.allowDrag},on:{"node-click":e.handleNodeClick,"node-drag-end":e.handleNodeDragEnd,"node-expand":e.handleNodeExpand,"node-collapse":e.handleNodeCollapse}})],1)])]),e._v(" "),a("el-card",{staticStyle:{float:"left","margin-left":"50px","margin-top":"10px",width:"50%","min-height":"800px"},attrs:{"body-style":"padding:0px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-select",{staticStyle:{float:"left","margin-left":"30px",width:"100px"},attrs:{size:"small",placeholder:"选择设备类型"},model:{value:e.filters.deviceModel,callback:function(t){e.$set(e.filters,"deviceModel",t)},expression:"filters.deviceModel"}},e._l(e.deviceModelOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{staticStyle:{float:"left","margin-left":"30px",width:"150px"},attrs:{size:"small",placeholder:"关键字"},model:{value:e.filters.keyword,callback:function(t){e.$set(e.filters,"keyword",t)},expression:"filters.keyword"}}),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"30px"},attrs:{type:"info",size:"small"},on:{click:e.getBundles}},[e._v("查询设备\n      ")]),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"30px"},attrs:{type:"info",size:"small"},on:{click:e.getUsers}},[e._v("查询用户\n      ")]),e._v(" "),a("el-button",{staticStyle:{float:"right","margin-right":"50px"},attrs:{type:"primary",size:"small",disabled:e.disableSetFolderBtn},on:{click:e.setFolder}},[e._v("加入分组\n      ")])],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.resourceTableShow,expression:"resourceTableShow"},{name:"loading",rawName:"v-loading",value:e.resourceTableLoading,expression:"resourceTableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.resources},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{width:"50",type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bundleName",label:"名称",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceModel",label:"资源类型",width:"150",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"账号",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"bundleId",label:"资源ID",width:"300",sortable:""}})],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.userTableShow,expression:"userTableShow"},{name:"loading",rawName:"v-loading",value:e.userTableLoading,expression:"userTableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.users},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{width:"50",type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"userNo",label:"用户编号",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"creater",label:"创建者",width:"250",sortable:""}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加分组",visible:e.dialogAddForderFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogAddForderFormVisible=t}}},[a("el-form",{attrs:{model:e.folderForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分组名称"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{"auto-complete":"off"},model:{value:e.folderForm.name,callback:function(t){e.$set(e.folderForm,"name",t)},expression:"folderForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传LDAP"}},[a("el-select",{attrs:{placeholder:"是否上传LDAP"},model:{value:e.folderForm.toLdap,callback:function(t){e.$set(e.folderForm,"toLdap",t)},expression:"folderForm.toLdap"}},e._l(e.toLdapoptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogAddForderFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addFolder}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改分组",visible:e.dialogmodifyForderFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogmodifyForderFormVisible=t}}},[a("el-form",{attrs:{model:e.modifyForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分组名称"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{"auto-complete":"off"},model:{value:e.modifyForm.name,callback:function(t){e.$set(e.modifyForm,"name",t)},expression:"modifyForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传LDAP"}},[a("el-select",{attrs:{placeholder:"是否上传LDAP"},model:{value:e.modifyForm.toLdap,callback:function(t){e.$set(e.modifyForm,"toLdap",t)},expression:"modifyForm.toLdap"}},e._l(e.toLdapoptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogmodifyForderFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.modifyFolder}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"设置根目录",visible:e.dialogsetRootVisible,width:"30%"},on:{"update:visible":function(t){e.dialogsetRootVisible=t}}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-select",{staticStyle:{float:"left","margin-left":"30px",width:"200px"},attrs:{placeholder:"选择根目录"},model:{value:e.setRootId,callback:function(t){e.setRootId=t},expression:"setRootId"}},e._l(e.setRootOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogsetRootVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.setRoot}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var u=a("VU/8")(d,c,!1,function(e){a("umnT")},null,null);t.default=u.exports},lq5M:function(e,t){},lqyR:function(e,t){},"mQ+h":function(e,t){},qoXU:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),r=a.n(l),o=a("BO1k"),n=a.n(o),i=a("P9l9"),s=document.location.origin,d={name:"templateManage",data:function(){return{activeTabName:"BundleTemplateManage",filters:{keyword:""},tableLoading:!1,templates:[],multipleSelection:[],templateTree:[],treeProps:{children:"children",label:"label"},uploadUrl:s+"/template/import",myHeaders:{"tetris-001":sessionStorage.getItem("token")}}},methods:{handleTabClick:function(e,t){"BundleTemplateManage"!==e.name&&this.$router.push("/"+e.name)},getTemplates:function(){var e=this;this.tableLoading=!0;var t={name:this.filters.keyword};Object(i.N)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.templates=t.templates,e.tableLoading=!1})},handleSelectionChange:function(e){this.multipleSelection=e},handleDetail:function(e){var t=this,a={channelTemplateId:e.id};Object(i.M)(a).then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):t.templateTree=e.tree})},handleSingleDelete:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={templateIds:e.id};Object(i.t)(a).then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):(t.$message({message:"删除成功",type:"success"}),t.getTemplates(),t.templateTree=[])})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleMultiDelete:function(){var e=this;this.multipleSelection.length?this.$confirm("是否确认删除所有选定行?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t="",a=!0,l=!1,r=void 0;try{for(var o,s=n()(e.multipleSelection);!(a=(o=s.next()).done);a=!0){t+=o.value.id,t+=";"}}catch(e){l=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(l)throw r}}var d={templateIds:t};Object(i.t)(d).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"删除成功",type:"success"}),e.getTemplates(),e.templateTree=[])})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message({message:"请至少选择一行",type:"warning"})},uploadSuccess:function(e){e.errMsg?this.$message({message:e.errMsg,type:"error"}):(this.$message({message:"导入成功",type:"success"}),this.getTemplates())},uploadError:function(e,t,a){this.$message({message:"上传文件错误"+r()(e),type:"error"})}},mounted:function(){var e=this;if(this.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/BundleTemplateManage")}),this.getTemplates(),-1!==this.uploadUrl.indexOf("__requestIP__")){var t=document.location.host.split(":")[0];this.uploadUrl=this.uploadUrl.replace("__requestIP__",t)}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"设备模板管理",name:"BundleTemplateManage"}})],1),e._v(" "),a("el-card",{staticStyle:{float:"left","margin-top":"10px",width:"50%","min-height":"700px"},attrs:{"body-style":"padding:0px"}},[a("div",{staticStyle:{height:"30px"},attrs:{slot:"header"},slot:"header"},[a("el-input",{staticStyle:{float:"left",width:"150px"},attrs:{size:"small",placeholder:"关键字"},model:{value:e.filters.keyword,callback:function(t){e.$set(e.filters,"keyword",t)},expression:"filters.keyword"}}),e._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"30px"},attrs:{size:"small",type:"info"},on:{click:e.getTemplates}},[e._v("查询")]),e._v(" "),a("el-upload",{staticClass:"upload-demo",staticStyle:{float:"right","margin-right":"10px"},attrs:{action:e.uploadUrl,name:"filePoster",headers:e.myHeaders,"show-file-list":!1,"on-success":e.uploadSuccess,"on-error":e.uploadError}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("导入模板")])],1),e._v(" "),a("el-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",type:"danger"},on:{click:e.handleMultiDelete}},[e._v("批量删除")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.templates},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{width:"100",type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceModel",label:"设备类型",width:"300",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDetail(t.row)}}},[e._v("详情")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleSingleDelete(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-card",{staticStyle:{float:"left","margin-left":"50px","margin-top":"10px",width:"40%","min-height":"700px"},attrs:{"body-style":"padding:0px"}},[a("div",{staticStyle:{height:"30px"},attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{float:"left","font-size":"18px"}},[e._v("模板属性")])]),e._v(" "),a("el-tree",{attrs:{data:e.templateTree,props:e.treeProps,"default-expand-all":""}})],1)],1)},staticRenderFns:[]};var u=a("VU/8")(d,c,!1,function(e){a("2+xZ")},"data-v-2d5e22a4",null);t.default=u.exports},qxgj:function(e,t){},qz8m:function(e,t){},r1Id:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("P9l9"),r={data:function(){return{form:{encodeId:"",encodeBundleId:"",encodeBundleName:"",encodeDeviceModel:"",encodeUsername:"",encodeIp:"",decodeId:"",decodeBundleId:"",decodeBundleName:"",decodeDeviceModel:"",decodeUsername:"",decodeIp:""},tree:{props:{label:"name",children:"children",isLeaf:"isLeaf"},data:[],currentUser:""},table:{data:[]},dialog:{bindBundle:{visible:!1},selectEncoder:{visible:!1,condition:{bundleName:"",bundleNo:"",ip:"",bundleId:""},table:{data:[],page:{total:0,currentPage:0,pageSize:50},current:""}},selectDecoder:{visible:!1,condition:{bundleName:"",bundleNo:"",ip:"",bundleId:""},table:{data:[],page:{total:0,currentPage:0,pageSize:50},current:""}}}}},methods:{refreshUser:function(){var e=this;Object(l.A)().then(function(t){if(t.errMsg)e.$message({message:t.errMsg,type:"error"});else if(e.tree.data.splice(0,e.tree.data.length),e.tree.data.push({id:0,uuid:"FOLDER_0",type:"FOLDER",name:"用户列表",children:[],isLeaf:!1}),t.users&&t.users.length>0)for(var a=0;a<t.users.length;a++)e.tree.data[0].children.push({id:t.users[a].id,uuid:"USER_"+t.users[a].id,name:t.users[a].name,type:"USER",userNo:t.users[a].userNo,isLeaf:!0})})},currentTreeNodeChange:function(e){var t=this;t.table.data.splice(0,t.table.data.length),"FOLDER"===e.type?t.tree.currentUser="":(t.tree.currentUser=e,Object(l._17)({userId:e.id}).then(function(e){if(200!==e.status)t.$message({message:e.message,type:"error"});else{var a=e.data;a.userId?(a.encodeBundleId?(t.form.encodeId=a.encodeId,t.form.encodeBundleId=a.encodeBundleId,t.form.encodeBundleName=a.encodeBundleName,t.form.encodeDeviceModel=a.encodeDeviceModel,t.form.encodeUsername=a.encodeUsername,t.form.encodeIp=a.encodeIp,t.table.data.push({bundleId:a.encodeBundleId,bundleName:a.encodeBundleName,deviceModel:a.encodeDeviceModel,username:a.encodeUserName,ip:a.encodeIp,type:"编码器"})):(t.form.encodeId="",t.form.encodeBundleId="",t.form.encodeBundleName="",t.form.encodeDeviceModel="",t.form.encodeUsername="",t.form.encodeIp=""),a.decodeBundleId?(t.form.decodeId=a.decodeId,t.form.decodeBundleId=a.decodeBundleId,t.form.decodeBundleName=a.decodeBundleName,t.form.decodeDeviceModel=a.decodeDeviceModel,t.form.decodeUsername=a.decodeUsername,t.form.decodeIp=a.decodeIp,t.table.data.push({bundleId:a.decodeBundleId,bundleName:a.decodeBundleName,deviceModel:a.decodeDeviceModel,username:a.decodeUserName,ip:a.decodeIp,type:"解码器"})):(t.form.decodeId="",t.form.decodeBundleId="",t.form.decodeBundleName="",t.form.decodeDeviceModel="",t.form.decodeUsername="",t.form.decodeIp="")):(t.form.encodeId="",t.form.encodeBundleId="",t.form.encodeBundleName="",t.form.encodeDeviceModel="",t.form.encodeUsername="",t.form.encodeIp="",t.form.decodeId="",t.form.decodeBundleId="",t.form.decodeBundleName="",t.form.decodeDeviceModel="",t.form.decodeUsername="",t.form.decodeIp="")}}))},handleBindBundle:function(){this.dialog.bindBundle.visible=!0},handleBindBundleClose:function(){this.dialog.bindBundle.visible=!1},handleBindBundleCommit:function(){var e=this;Object(l._28)({userId:e.tree.currentUser.id,userName:e.tree.currentUser.name,encodeId:e.form.encodeId,encodeBundleId:e.form.encodeBundleId,encodeBundleName:e.form.encodeBundleName,encodeDeviceModel:e.form.encodeDeviceModel,decodeId:e.form.decodeId,decodeBundleId:e.form.decodeBundleId,decodeBundleName:e.form.decodeBundleName,decodeDeviceModel:e.form.decodeDeviceModel}).then(function(t){200!==t.status?e.$message({message:t.message,type:"error"}):(e.table.data.splice(0,e.table.data.length),e.table.data.push({bundleId:e.form.encodeBundleId,bundleName:e.form.encodeBundleName,deviceModel:e.form.encodeDeviceModel,username:e.form.encodeUsername,ip:e.form.encodeIp,type:"编码器"}),e.table.data.push({bundleId:e.form.decodeBundleId,bundleName:e.form.decodeBundleName,deviceModel:e.form.decodeDeviceModel,username:e.form.decodeUsername,ip:e.form.decodeIp,type:"解码器"}),e.handleBindBundleClose())})},refreshEncoder:function(e){var t=this;t.dialog.selectEncoder.table.data.splice(0,t.dialog.selectEncoder.table.data.length),Object(l._7)({currentPage:e,pageSize:t.dialog.selectEncoder.table.page.pageSize,bundleName:t.dialog.selectEncoder.condition.bundleName||null,username:t.dialog.selectEncoder.condition.bundleNo||null,ip:t.dialog.selectEncoder.condition.ip||null,bundleId:t.dialog.selectEncoder.condition.bundleId||null}).then(function(a){if(200!==a.status)t.$message({message:a.message,type:"error"});else{var l=a.data,r=l.total,o=l.rows;if(o&&o.length>0)for(var n=0;n<o.length;n++)t.dialog.selectEncoder.table.data.push(o[n]);t.dialog.selectEncoder.table.page.total=r||0,t.dialog.selectEncoder.table.page.currentPage=e}})},selectEncoderTableRowKey:function(e){return e.bundleId},handleRefreshEncoder:function(){this.refreshEncoder(1)},handleSelectEncoder:function(){this.dialog.selectEncoder.visible=!0,this.refreshEncoder(1)},handleSelectEncoderClose:function(){this.dialog.selectEncoder.visible=!1,this.dialog.selectEncoder.condition.bundleName="",this.dialog.selectEncoder.condition.bundleNo="",this.dialog.selectEncoder.condition.ip="",this.dialog.selectEncoder.condition.bundleId="",this.dialog.selectEncoder.table.data.splice(0,this.dialog.selectEncoder.table.data.length),this.dialog.selectEncoder.table.page.total=0,this.dialog.selectEncoder.table.page.currentPage=0,this.dialog.selectEncoder.table.current=""},handleSelectEncoderCommit:function(){this.form.encodeId=this.dialog.selectEncoder.table.current.id,this.form.encodeBundleId=this.dialog.selectEncoder.table.current.bundleId,this.form.encodeBundleName=this.dialog.selectEncoder.table.current.bundleName,this.form.encodeDeviceModel=this.dialog.selectEncoder.table.current.deviceModel,this.form.encodeUsername=this.dialog.selectEncoder.table.current.username,this.form.encodeIp=this.dialog.selectEncoder.table.current.ip,this.handleSelectEncoderClose()},handleSelectEncoderCurrentChange:function(e){this.refreshEncoder(e)},selectEncoderCurrentChange:function(e){this.dialog.selectEncoder.table.current=e},refreshDecoder:function(e){var t=this;t.dialog.selectDecoder.table.data.splice(0,t.dialog.selectDecoder.table.data.length),Object(l._6)({currentPage:e,pageSize:t.dialog.selectDecoder.table.page.pageSize,bundleName:t.dialog.selectDecoder.condition.bundleName||null,username:t.dialog.selectDecoder.condition.bundleNo||null,ip:t.dialog.selectDecoder.condition.ip||null,bundleId:t.dialog.selectDecoder.condition.bundleId||null}).then(function(a){if(200!==a.status)t.$message({message:a.message,type:"error"});else{var l=a.data,r=l.total,o=l.rows;if(o&&o.length>0)for(var n=0;n<o.length;n++)t.dialog.selectDecoder.table.data.push(o[n]);t.dialog.selectDecoder.table.page.total=r||0,t.dialog.selectDecoder.table.page.currentPage=e}})},selectDecoderTableRowKey:function(e){return e.bundleId},handleRefreshDecoder:function(){this.refreshDecoder(1)},handleSelectDecoder:function(){this.dialog.selectDecoder.visible=!0,this.refreshDecoder(1)},handleSelectDecoderClose:function(){this.dialog.selectDecoder.visible=!1,this.dialog.selectDecoder.condition.bundleName="",this.dialog.selectDecoder.condition.bundleNo="",this.dialog.selectDecoder.condition.ip="",this.dialog.selectDecoder.condition.bundleId="",this.dialog.selectDecoder.table.data.splice(0,this.dialog.selectDecoder.table.data.length),this.dialog.selectDecoder.table.page.total=0,this.dialog.selectDecoder.table.page.currentPage=0,this.dialog.selectDecoder.table.current=""},handleSelectDecoderCommit:function(){this.form.decodeId=this.dialog.selectDecoder.table.current.id,this.form.decodeBundleId=this.dialog.selectDecoder.table.current.bundleId,this.form.decodeBundleName=this.dialog.selectDecoder.table.current.bundleName,this.form.decodeDeviceModel=this.dialog.selectDecoder.table.current.deviceModel,this.form.decodeUsername=this.dialog.selectDecoder.table.current.username,this.form.decodeIp=this.dialog.selectDecoder.table.current.ip,this.handleSelectDecoderClose()},handleSelectDecoderCurrentChange:function(e){this.refreshDecoder(e)},selectDecoderCurrentChange:function(e){this.dialog.selectDecoder.table.current=e},handleRemove:function(e){var t=this;Object(l._42)({userId:t.tree.currentUser.id,type:e.type}).then(function(a){if(200!==a.status)t.$message({message:a.message,type:"error"});else for(var l=t.table.data,r=l.length-1;r>=0;r--)e.type==l[r].type&&l.splice(r,1)})}},mounted:function(){var e=this;e.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/UserBindBundle")}),e.refreshUser()}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{position:"absolute",left:"20px",top:"20px",right:"20px",bottom:"20px"}},[a("div",{staticStyle:{width:"100%",height:"100%",position:"relative"}},[a("div",{staticStyle:{position:"absolute",left:"0",top:"0",bottom:"0",width:"400px","background-color":"#fff","border-right":"1px solid #EBEEF5",padding:"10px","box-sizing":"border-box"}},[a("el-scrollbar",{staticStyle:{height:"100%"}},[a("el-tree",{ref:"userTree",attrs:{props:e.tree.props,data:e.tree.data,"node-key":"uuid","check-strictly":"","expand-on-click-node":!1,"default-expand-all":"","highlight-current":""},on:{"current-change":e.currentTreeNodeChange},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var l=t.data;return a("span",{staticStyle:{flex:"1",display:"flex","align-items":"center","justify-content":"space-between","padding-right":"8px"}},[a("span",{staticStyle:{"font-size":"14px"}},["FOLDER"===l.type?a("span",{staticClass:"icon-folder-open"}):a("span",{staticClass:"icon-user"}),e._v(" "),a("span",[e._v(e._s(l.name))])])])}}])})],1)],1),e._v(" "),e.tree.currentUser?a("div",{staticStyle:{position:"absolute",left:"401px",top:"0",bottom:"0",right:"0","background-color":"#fff","box-sizing":"border-box",padding:"10px"}},[a("el-scrollbar",{staticStyle:{height:"100%"}},[a("div",{staticStyle:{"margin-bottom":"22px"}},[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:e.handleBindBundle}},[e._v("绑定设备")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.table.data}},[a("el-table-column",{attrs:{prop:"bundleName",label:"设备名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bundleId",width:"300",label:"bundleId"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"设备号码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"ip"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleRemove(t.row)}}},[e._v("解绑")])]}}],null,!1,640721411)})],1)],1)],1):e._e()]),e._v(" "),[a("el-dialog",{attrs:{title:"绑定设备",visible:e.dialog.bindBundle.visible,width:"500px","before-close":e.handleBindBundleClose},on:{"update:visible":function(t){return e.$set(e.dialog.bindBundle,"visible",t)}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"编码器"}},[a("el-input",{attrs:{readonly:"",placeholder:"点击选择设备"},nativeOn:{click:function(t){return e.handleSelectEncoder(t)}},model:{value:e.form.encodeBundleName,callback:function(t){e.$set(e.form,"encodeBundleName",t)},expression:"form.encodeBundleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"解码器"}},[a("el-input",{attrs:{readonly:"",placeholder:"点击选择设备"},nativeOn:{click:function(t){return e.handleSelectDecoder(t)}},model:{value:e.form.decodeBundleName,callback:function(t){e.$set(e.form,"decodeBundleName",t)},expression:"form.decodeBundleName"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:e.handleBindBundleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.handleBindBundleCommit}},[e._v("确定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"选择编码器",visible:e.dialog.selectEncoder.visible,width:"1000px","before-close":e.handleSelectEncoderClose},on:{"update:visible":function(t){return e.$set(e.dialog.selectEncoder,"visible",t)}}},[a("div",{staticStyle:{height:"450px",position:"relative"}},[a("div",{staticStyle:{position:"absolute",left:"-20px",top:"-20px",right:"-20px",bottom:"-20px"}},[a("div",{staticStyle:{width:"100%",height:"100%",position:"relative"}},[a("div",{staticStyle:{width:"100%",height:"40px","padding-left":"20px","padding-right":"20px","box-sizing":"border-box",position:"relative",bottom:"5px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{staticStyle:{width:"173px"},attrs:{size:"small",placeholder:"名称"},model:{value:e.dialog.selectEncoder.condition.bundleName,callback:function(t){e.$set(e.dialog.selectEncoder.condition,"bundleName",t)},expression:"dialog.selectEncoder.condition.bundleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"号码"}},[a("el-input",{staticStyle:{width:"173px"},attrs:{size:"small",placeholder:"号码"},model:{value:e.dialog.selectEncoder.condition.bundleNo,callback:function(t){e.$set(e.dialog.selectEncoder.condition,"bundleNo",t)},expression:"dialog.selectEncoder.condition.bundleNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"ip"}},[a("el-input",{staticStyle:{width:"173px"},attrs:{size:"small",placeholder:"ip"},model:{value:e.dialog.selectEncoder.condition.ip,callback:function(t){e.$set(e.dialog.selectEncoder.condition,"ip",t)},expression:"dialog.selectEncoder.condition.ip"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"bundleId"}},[a("el-input",{staticStyle:{width:"173px"},attrs:{size:"small",placeholder:"bundleId"},model:{value:e.dialog.selectEncoder.condition.bundleId,callback:function(t){e.$set(e.dialog.selectEncoder.condition,"bundleId",t)},expression:"dialog.selectEncoder.condition.bundleId"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{width:"32px",padding:"0",height:"32px","font-size":"16px",position:"relative",top:"1px"},attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleRefreshEncoder}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"40px",right:"0",bottom:"0",padding:"0 10px","box-sizing":"border-box"}},[a("el-table",{ref:"selectEncoderTable",staticStyle:{width:"100%"},attrs:{data:e.dialog.selectEncoder.table.data,height:"100%","highlight-current-row":"","row-key":"selectEncoderTableRowKey"},on:{"current-change":e.selectEncoderCurrentChange}},[a("el-table-column",{attrs:{prop:"bundleName",label:"设备名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bundleId",width:"300",label:"bundleId"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"设备号码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"ip"}})],1)],1)])])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-pagination",{staticStyle:{float:"left"},attrs:{background:"",layout:"total, prev, pager, next, jumper",pageSize:e.dialog.selectEncoder.table.page.pageSize,total:e.dialog.selectEncoder.table.page.total}}),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.handleSelectEncoderClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSelectEncoderCommit}},[e._v("确定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"选择解码器",visible:e.dialog.selectDecoder.visible,width:"1000px","before-close":e.handleSelectDecoderClose},on:{"update:visible":function(t){return e.$set(e.dialog.selectDecoder,"visible",t)}}},[a("div",{staticStyle:{height:"450px",position:"relative"}},[a("div",{staticStyle:{position:"absolute",left:"-20px",top:"-20px",right:"-20px",bottom:"-20px"}},[a("div",{staticStyle:{width:"100%",height:"100%",position:"relative"}},[a("div",{staticStyle:{width:"100%",height:"40px","padding-left":"20px","padding-right":"20px","box-sizing":"border-box",position:"relative",bottom:"5px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{staticStyle:{width:"173px"},attrs:{size:"small",placeholder:"名称"},model:{value:e.dialog.selectDecoder.condition.bundleName,callback:function(t){e.$set(e.dialog.selectDecoder.condition,"bundleName",t)},expression:"dialog.selectDecoder.condition.bundleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"号码"}},[a("el-input",{staticStyle:{width:"173px"},attrs:{size:"small",placeholder:"号码"},model:{value:e.dialog.selectDecoder.condition.bundleNo,callback:function(t){e.$set(e.dialog.selectDecoder.condition,"bundleNo",t)},expression:"dialog.selectDecoder.condition.bundleNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"ip"}},[a("el-input",{staticStyle:{width:"173px"},attrs:{size:"small",placeholder:"ip"},model:{value:e.dialog.selectDecoder.condition.ip,callback:function(t){e.$set(e.dialog.selectDecoder.condition,"ip",t)},expression:"dialog.selectDecoder.condition.ip"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"bundleId"}},[a("el-input",{staticStyle:{width:"173px"},attrs:{size:"small",placeholder:"bundleId"},model:{value:e.dialog.selectDecoder.condition.bundleId,callback:function(t){e.$set(e.dialog.selectDecoder.condition,"bundleId",t)},expression:"dialog.selectDecoder.condition.bundleId"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{width:"32px",padding:"0",height:"32px","font-size":"16px",position:"relative",top:"1px"},attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleRefreshDecoder}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"40px",right:"0",bottom:"0",padding:"0 10px","box-sizing":"border-box"}},[a("el-table",{ref:"selectDecoderTable",staticStyle:{width:"100%"},attrs:{data:e.dialog.selectDecoder.table.data,height:"100%","highlight-current-row":""},on:{"current-change":e.selectDecoderCurrentChange}},[a("el-table-column",{attrs:{prop:"bundleName",label:"设备名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bundleId",width:"300",label:"bundleId"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"设备号码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"ip"}})],1)],1)])])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-pagination",{staticStyle:{float:"left"},attrs:{background:"",layout:"total, prev, pager, next, jumper",pageSize:e.dialog.selectDecoder.table.page.pageSize,total:e.dialog.selectDecoder.table.page.total}}),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.handleSelectDecoderClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSelectDecoderCommit}},[e._v("确定")])],1)])]],2)},staticRenderFns:[]};var n=a("VU/8")(r,o,!1,function(e){a("MhHE")},"data-v-dc0f7d30",null);t.default=n.exports},sh0o:function(e,t){},snKp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),r=a.n(l),o=a("P9l9"),n={name:"ModifyLayernode",data:function(){var e=function(e,t,a){t&&!/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-4]\d{4}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/.test(t)?a(new Error("端口格式错误")):a()};return{activeTabName:"ModifyLayernode",typeOptions:[{label:"JV230接入",value:"ACCESS_JV230"},{label:"机顶盒接入",value:"ACCESS_TVOS"},{label:"混合器接入",value:"ACCESS_MIXER"},{label:"手机接入",value:"ACCESS_MOBILE"},{label:"音视频转发服务设备",value:"ACCESS_JV210"},{label:"录像存储服务单元A型",value:"ACCESS_CDN"},{label:"录像存储服务单元B型",value:"ACCESS_VOD"},{label:"监控资源汇接网关",value:"ACCESS_IPC"},{label:"流媒体管理服务设备",value:"ACCESS_STREAMMEDIA"},{label:"联网服务设备",value:"ACCESS_NETWORK"},{label:"显控汇接网关",value:"ACCESS_DISPLAYCTRL"},{label:"流转发器接入",value:"ACCESS_S100"},{label:"webrtc接入",value:"ACCESS_WEBRTC"},{label:"联网接入",value:"ACCESS_LIANWANG"},{label:"LDAP目录资源服务设备",value:"ACCESS_LDAP"},{label:"综合运维服务设备",value:"ACCESS_OMMS"},{label:"ws接入",value:"ACCESS_WS"}],id:this.$route.query.id,nodeForm:{type:"",name:"",ip:"",nodeUid:"",monitorUrl:"",netUrl:""},rules:{type:[{required:!0,message:"请选择节点类型",trigger:"change"}],name:[{required:!0,message:"请输入节点名称",trigger:"change"},{min:1,max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}],ip:[{validator:function(e,t,a){t&&!/^((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)$/.test(t)?a(new Error("IP格式错误")):a()},trigger:"blur"}],port:[{validator:e,trigger:"blur"}],downloadPort:[{validator:e,trigger:"blur"}]}}},methods:{handleTabClick:function(e,t){"ModifyLayernode"!==e.name&&this.$router.push("/"+e.name)},reset:function(){this.$refs.nodeForm.resetFields()},getNode:function(){var e=this,t={id:this.id};Object(o.I)(t).then(function(t){t.errmsg?e.$message({message:t.errMsg,type:"error"}):e.nodeForm=t.node})},submit:function(){var e=this;if(this.validate()){var t={json:r()(this.nodeForm)};Object(o._43)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.$message({message:"修改成功",type:"success"})})}},validate:function(){var e=!1;return this.$refs.nodeForm.validate(function(t){e=t}),e}},mounted:function(){this.getNode()}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"层节点列表",name:"LayernodeManage"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"修改层节点",name:"ModifyLayernode"}})],1),e._v(" "),a("el-form",{ref:"nodeForm",attrs:{model:e.nodeForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"节点类型",prop:"type"}},[a("el-select",{staticStyle:{width:"200px"},model:{value:e.nodeForm.type,callback:function(t){e.$set(e.nodeForm,"type",t)},expression:"nodeForm.type"}},e._l(e.typeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.name,callback:function(t){e.$set(e.nodeForm,"name",t)},expression:"nodeForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"节点ID",prop:"nodeUid"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.nodeUid,callback:function(t){e.$set(e.nodeForm,"nodeUid",t)},expression:"nodeForm.nodeUid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"节点IP",prop:"ip"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.ip,callback:function(t){e.$set(e.nodeForm,"ip",t)},expression:"nodeForm.ip"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"节点端口",prop:"port"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.port,callback:function(t){e.$set(e.nodeForm,"port",t)},expression:"nodeForm.port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"下载端口",prop:"downloadPort"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"录制资源下载端口，可不填"},model:{value:e.nodeForm.downloadPort,callback:function(t){e.$set(e.nodeForm,"downloadPort",t)},expression:"nodeForm.downloadPort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"监控地址",prop:"monitorUrl"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"监控页面地址，可不填"},model:{value:e.nodeForm.monitorUrl,callback:function(t){e.$set(e.nodeForm,"monitorUrl",t)},expression:"nodeForm.monitorUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"网管地址",prop:"netUrl"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"网管页面地址，可不填"},model:{value:e.nodeForm.netUrl,callback:function(t){e.$set(e.nodeForm,"netUrl",t)},expression:"nodeForm.netUrl"}})],1),e._v(" "),a("div",{staticStyle:{"margin-top":"30px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.reset()}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,i,!1,function(e){a("2T1O")},"data-v-60d594b6",null);t.default=s.exports},tvR6:function(e,t){},umnT:function(e,t){},vXHD:function(e,t){},vi2b:function(e,t){},"wdO+":function(e,t){},xTTl:function(e,t){},ypyz:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.03a1bf609f1066a8dfad.js.map