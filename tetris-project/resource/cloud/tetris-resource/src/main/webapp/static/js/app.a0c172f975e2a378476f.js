webpackJsonp([2],{"+H76":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={render:function(){var e=this.$createElement;return(this._self._c||e)("p",{staticClass:"page-container"},[this._v("404 page not found")])},staticRenderFns:[]};var r=n("VU/8")(null,l,!1,function(e){n("6098")},"data-v-8d50caea",null);t.default=r.exports},"+b1m":function(e,t,n){"use strict";var l=n("7+uW");t.a=new l.default},"+k1e":function(e,t){},"/Qkj":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("P9l9"),r={name:"selectLayerNode",data:function(){return{visible:!1,table:{totalData:[],filterData:[],currentRow:""},layerNodeTypes:[{value:"ACCESS_JV230",label:"JV230接入"},{value:"ACCESS_TVOS",label:"机顶盒接入"},{value:"ACCESS_MIXER",label:"混合器接入"},{value:"ACCESS_MOBILE",label:"手机终端接入"},{value:"ACCESS_JV210",label:"音视频转发服务设备"},{value:"ACCESS_CDN",label:"录像存储服务单元A型"},{value:"ACCESS_VOD",label:"录像存储服务单元B型"},{value:"ACCESS_IPC",label:"监控资源汇接网关"},{value:"ACCESS_STREAMMEDIA",label:"流媒体管理服务设备"},{value:"ACCESS_NETWORK",label:"联网服务设备"},{value:"ACCESS_DISPLAYCTRL",label:"显控汇接网关"},{value:"ACCESS_S100",label:"流转发器接入"},{value:"ACCESS_VODPROXY",label:"点播代理服务设备"}],filters:{type:"",name:"",ip:""}}},methods:{show:function(){var e=this;e.visible=!0,Object(l.E)({type:"",keyword:""}).then(function(t){if(e.table.totalData.splice(0,e.table.totalData.length),e.table.filterData.splice(0,e.table.filterData.length),t.errMsg)e.$message({type:"error",message:t.errMsg});else if(t.nodes&&t.nodes.length>0)for(var n=0;n<t.nodes.length;n++){for(var l=0;l<e.layerNodeTypes.length;l++)if(e.layerNodeTypes[l].value===t.nodes[n].type){t.nodes[n].typeName=e.layerNodeTypes[l].label;break}e.table.totalData.push(t.nodes[n]),e.table.filterData.push(t.nodes[n])}})},handleClose:function(){this.visible=!1,this.table.totalData.splice(0,this.table.totalData.length),this.table.filterData.splice(0,this.table.filterData.length),this.table.currentRow="",this.filters.type="",this.filters.name="",this.filters.ip=""},handleCommit:function(){var e=this;e.$emit("layer-node-selected",e.table.currentRow,function(){e.handleClose()})},handleFilter:function(){this.table.filterData.splice(0,this.table.filterData.length);for(var e=0;e<this.table.totalData.length;e++){var t=!0,n=this.table.totalData[e];this.filters.type&&n.type!==this.filters.type&&(t=!1),t&&this.filters.name&&n.name.toLowerCase().indexOf(this.filters.name.toLowerCase())<0&&(t=!1),t&&this.filters.ip&&n.ip.indexOf(this.filters.ip)<0&&(t=!1),t&&this.table.filterData.push(n)}},currentRowChange:function(e,t){this.table.currentRow=e}},mounted:function(){}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"选择接入层",visible:e.visible,width:"800px","before-close":e.handleClose},on:{"update:visible":function(t){e.visible=t}}},[n("div",{staticStyle:{height:"500px",position:"relative"}},[n("div",{staticStyle:{height:"50px",width:"100%"}},[n("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"接入层类型"},model:{value:e.filters.type,callback:function(t){e.$set(e.filters,"type",t)},expression:"filters.type"}},[n("el-option",{attrs:{value:""}},[e._v("全部类型")]),e._v(" "),e._l(e.layerNodeTypes,function(e){return n("el-option",{attrs:{label:e.label,value:e.value}})})],2),e._v(" "),n("el-input",{staticStyle:{width:"auto","margin-right":"10px"},attrs:{placeholder:"接入层名称"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}}),e._v(" "),n("el-input",{staticStyle:{width:"auto","margin-right":"10px"},attrs:{placeholder:"接入成ip"},model:{value:e.filters.ip,callback:function(t){e.$set(e.filters,"ip",t)},expression:"filters.ip"}}),e._v(" "),n("el-button",{on:{click:e.handleFilter}},[e._v("查询")])],1),e._v(" "),n("div",{staticStyle:{position:"absolute",left:"0",top:"50px",right:"0",bottom:"0"}},[n("el-scrollbar",{staticStyle:{height:"100%"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.table.filterData,"highlight-current-row":""},on:{"current-change":e.currentRowChange}},[n("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"ip",label:"ip"}}),e._v(" "),n("el-table-column",{attrs:{prop:"typeName",label:"类型"}})],1)],1)],1)]),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.handleCommit}},[e._v("确定")])],1)])},staticRenderFns:[]};var i=n("VU/8")(r,a,!1,function(e){n("4AgO")},null,null);t.default=i.exports},"/aOI":function(e,t){},"0nep":function(e,t,n){e.exports={queryRouterUrl:"http://__requestIP__:8093/privilege/queryMenu",serviceName:"suma-venus-resource"}},"4AgO":function(e,t){},"4vq3":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("BO1k"),r=n.n(l),a=n("nvbp"),i=n.n(a),o=n("mvHQ"),s=n.n(o),d=n("bOdI"),c=n.n(d),u=n("P9l9"),h={data:function(){var e;return e={treeData:[],folderTreeSelected:{value:"",label:""},defaultProps:{children:"children",label:"name"},defaultExpandAll:!1,expandOnClickNode:!1,activeTabName:"BindResource",deviceModelOptions:[],roles:[],currentRoleRow:null,resources:[],bindTypeOptions:[{value:"all",label:"全部"},{value:"binded",label:"已绑定"},{value:"unbinded",label:"未绑定"}]},c()(e,"deviceModelOptions",[]),c()(e,"filters",{deviceModel:"",keyword:"",bindType:"all",countPerPage:""}),c()(e,"total",0),c()(e,"pageNum",1),c()(e,"countPerPage",20),c()(e,"roleTableLoading",!1),c()(e,"resourceTableLoading",!1),c()(e,"prevReadChecks",[]),c()(e,"prevWriteChecks",[]),c()(e,"prevHJChecks",[]),c()(e,"prevZKChecks",[]),c()(e,"readChecks",[]),c()(e,"writeChecks",[]),c()(e,"HJchecks",[]),c()(e,"ZKchecks",[]),c()(e,"detailDialogVisible",!1),c()(e,"detailInfos",[]),c()(e,"users",[]),c()(e,"userTableLoading",!1),c()(e,"resourceTableShow",!0),c()(e,"userTableShow",!1),c()(e,"checkReadAll",!1),c()(e,"checkWriteAll",!1),c()(e,"checkHJAll",!1),c()(e,"checkZKAll",!1),e},methods:{dataFilter:function(e){this.$refs.tree.filter(e)},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},initTree:function(e){var t=this;Object(u.L)().then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):(t.treeData=t.treeData.concat(e.tree),console.log(s()(t.treeData)))})},handleNodeClick:function(e){this.folderTreeSelected.value=e.id,this.folderTreeSelected.label=e.name,this.$refs.selectTree.blur()},clearHandle:function(){this.folderTreeSelected.value="",this.folderTreeSelected.label="",this.$refs.tree.filter("")},handleTabClick:function(e,t){"BindResource"!==e.name&&this.$router.push("/"+e.name)},handleRoleTableRowChange:function(e){this.currentRoleRow=e,this.resourceTableShow?this.getResources():this.userTableShow&&this.getUsers()},renderCheckReadHeader:function(e,t){var n=this;return e("el-checkbox",i()([{attrs:{value:n.checkReadAll},on:{input:function(e){n.checkReadAll=e}}},{directives:[{name:"model",value:n.checkReadAll}]},{on:{change:this.handleCheckReadAllChange}}]),["录制"])},renderCheckWriteHeader:function(e,t){var n=this;return e("el-checkbox",i()([{attrs:{value:n.checkWriteAll},on:{input:function(e){n.checkWriteAll=e}}},{directives:[{name:"model",value:n.checkWriteAll}]},{on:{change:this.handleCheckWriteAllChange}}]),["点播"])},renderCheckHJHeader:function(e,t){var n=this;return e("el-checkbox",i()([{attrs:{value:n.checkHJAll},on:{input:function(e){n.checkHJAll=e}}},{directives:[{name:"model",value:n.checkHJAll}]},{on:{change:this.handleCheckHJAllChange}}]),["呼叫"])},renderCheckZKHeader:function(e,t){var n=this;return e("el-checkbox",i()([{attrs:{value:n.checkZKAll},on:{input:function(e){n.checkZKAll=e}}},{directives:[{name:"model",value:n.checkZKAll}]},{on:{change:this.handleCheckZKAllChange}}]),["指挥"])},handleCheckReadAllChange:function(e){if(this.resourceTableShow)if(e){var t=!0,n=!1,l=void 0;try{for(var a,i=r()(this.resources);!(t=(a=i.next()).done);t=!0){var o=a.value;this.readChecks.push(o.bundleId),o.hasReadPrivilege=!0}}catch(e){n=!0,l=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw l}}}else{this.readChecks=[];var s=!0,d=!1,c=void 0;try{for(var u,h=r()(this.resources);!(s=(u=h.next()).done);s=!0){u.value.hasReadPrivilege=!1}}catch(e){d=!0,c=e}finally{try{!s&&h.return&&h.return()}finally{if(d)throw c}}}else if(this.userTableShow)if(e){var p=!0,m=!1,f=void 0;try{for(var b,v=r()(this.users);!(p=(b=v.next()).done);p=!0){var g=b.value;this.readChecks.push(g.userNo),g.hasReadPrivilege=!0}}catch(e){m=!0,f=e}finally{try{!p&&v.return&&v.return()}finally{if(m)throw f}}}else{this.readChecks=[];var y=!0,I=!1,w=void 0;try{for(var A,N=r()(this.users);!(y=(A=N.next()).done);y=!0){A.value.hasReadPrivilege=!1}}catch(e){I=!0,w=e}finally{try{!y&&N.return&&N.return()}finally{if(I)throw w}}}},handleCheckWriteAllChange:function(e){if(this.resourceTableShow)if(e){var t=!0,n=!1,l=void 0;try{for(var a,i=r()(this.resources);!(t=(a=i.next()).done);t=!0){var o=a.value;this.writeChecks.push(o.bundleId),o.hasWritePrivilege=!0}}catch(e){n=!0,l=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw l}}}else{this.writeChecks=[];var s=!0,d=!1,c=void 0;try{for(var u,h=r()(this.resources);!(s=(u=h.next()).done);s=!0){u.value.hasWritePrivilege=!1}}catch(e){d=!0,c=e}finally{try{!s&&h.return&&h.return()}finally{if(d)throw c}}}else if(this.userTableShow)if(e){var p=!0,m=!1,f=void 0;try{for(var b,v=r()(this.users);!(p=(b=v.next()).done);p=!0){var g=b.value;this.writeChecks.push(g.userNo),g.hasWritePrivilege=!0}}catch(e){m=!0,f=e}finally{try{!p&&v.return&&v.return()}finally{if(m)throw f}}}else{this.writeChecks=[];var y=!0,I=!1,w=void 0;try{for(var A,N=r()(this.users);!(y=(A=N.next()).done);y=!0){A.value.hasWritePrivilege=!1}}catch(e){I=!0,w=e}finally{try{!y&&N.return&&N.return()}finally{if(I)throw w}}}},handleCheckHJAllChange:function(e){if(this.userTableShow)if(e){var t=!0,n=!1,l=void 0;try{for(var a,i=r()(this.users);!(t=(a=i.next()).done);t=!0){var o=a.value;this.HJchecks.push(o.userNo),o.hasHJPrivilege=!0}}catch(e){n=!0,l=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw l}}}else{this.HJchecks=[];var s=!0,d=!1,c=void 0;try{for(var u,h=r()(this.users);!(s=(u=h.next()).done);s=!0){u.value.hasHJPrivilege=!1}}catch(e){d=!0,c=e}finally{try{!s&&h.return&&h.return()}finally{if(d)throw c}}}},handleCheckZKAllChange:function(e){if(this.userTableShow)if(e){var t=!0,n=!1,l=void 0;try{for(var a,i=r()(this.users);!(t=(a=i.next()).done);t=!0){var o=a.value;this.ZKchecks.push(o.userNo),o.hasZKPrivilege=!0}}catch(e){n=!0,l=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw l}}}else{this.ZKchecks=[];var s=!0,d=!1,c=void 0;try{for(var u,h=r()(this.users);!(s=(u=h.next()).done);s=!0){u.value.hasZKPrivilege=!1}}catch(e){d=!0,c=e}finally{try{!s&&h.return&&h.return()}finally{if(d)throw c}}}},handleCheckReadChange:function(e){this.resourceTableShow?e.hasReadPrivilege?(this.readChecks.push(e.bundleId),this.readChecks.length===this.resources.length&&(this.checkReadAll=!0)):(this.readChecks.splice(this.readChecks.indexOf(e.bundleId),1),this.checkReadAll=!1):this.userTableShow&&(e.hasReadPrivilege?(this.readChecks.push(e.userNo),this.readChecks.length===this.users.length&&(this.checkReadAll=!0)):(this.readChecks.splice(this.readChecks.indexOf(e.userNo),1),this.checkReadAll=!1))},handleCheckWriteChange:function(e){this.resourceTableShow?e.hasWritePrivilege?(this.writeChecks.push(e.bundleId),this.writeChecks.length===this.resources.length&&(this.checkWriteAll=!0)):(this.writeChecks.splice(this.writeChecks.indexOf(e.bundleId),1),this.checkWriteAll=!1):this.userTableShow&&(e.hasWritePrivilege?(this.writeChecks.push(e.userNo),this.writeChecks.length===this.users.length&&(this.checkWriteAll=!0)):(this.writeChecks.splice(this.writeChecks.indexOf(e.userNo),1),this.checkWriteAll=!1))},handleCheckHJChange:function(e){this.userTableShow&&(e.hasHJPrivilege?(this.HJchecks.push(e.userNo),this.HJchecks.length===this.users.length&&(this.checkHJAll=!0)):(this.HJchecks.splice(this.HJchecks.indexOf(e.userNo),1),this.checkHJAll=!1))},handleCheckZKChange:function(e){this.userTableShow&&(e.hasZKPrivilege?(this.ZKchecks.push(e.userNo),this.ZKchecks.length===this.users.length&&(this.checkZKAll=!0)):(this.ZKchecks.splice(this.ZKchecks.indexOf(e.userNo),1),this.checkHJAll=!1))},getRoles:function(){var e=this;this.roleTableLoading=!0,Object(u.u)({}).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.roles=t.roles,e.roleTableLoading=!1})},getDeviceModels:function(){var e=this;Object(u.B)().then(function(t){if(!t.errMsg&&t.deviceModels){e.deviceModelOptions.push({value:"",label:"全部类型"});var n=!0,l=!1,a=void 0;try{for(var i,o=r()(t.deviceModels);!(n=(i=o.next()).done);n=!0){var s=i.value,d={value:s,label:s};e.deviceModelOptions.push(d)}}catch(e){l=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(l)throw a}}}})},getResources:function(){var e=this;if(this.currentRoleRow){this.resourceTableShow=!0,this.userTableShow=!1,this.prevReadChecks=[],this.prevWriteChecks=[],this.readChecks=[],this.writeChecks=[],this.checkReadAll=!1,this.checkWriteAll=!1,this.checkHJAll=!1,this.checkZKAll=!1,this.countPerPage=20,/^[1-9]+[0-9]*]*$/.test(this.filters.countPerPage)&&(this.countPerPage=parseInt(this.filters.countPerPage));var t={roleId:this.currentRoleRow.id,bindType:this.filters.bindType,deviceModel:this.filters.deviceModel,keyword:this.filters.keyword,folderId:this.folderTreeSelected.value,pageNum:this.pageNum,countPerPage:this.countPerPage};this.resourceTableLoading=!0,Object(u.A)(t).then(function(t){if(t.errMsg)e.$message({message:t.errMsg,type:"error"});else{e.total=t.total,e.resources=t.resources;var n=!0,l=!1,a=void 0;try{for(var i,o=r()(e.resources);!(n=(i=o.next()).done);n=!0){var s=i.value;s.hasReadPrivilege&&(e.prevReadChecks.push(s.bundleId),e.readChecks.push(s.bundleId)),s.hasWritePrivilege&&(e.prevWriteChecks.push(s.bundleId),e.writeChecks.push(s.bundleId))}}catch(e){l=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(l)throw a}}e.readChecks.length===e.resources.length&&(e.checkReadAll=!0),e.writeChecks.length===e.resources.length&&(e.checkWriteAll=!0)}e.resourceTableLoading=!1})}else this.$message({message:"请先选择角色",type:"error"})},handleCurrentPageChange:function(e){this.pageNum=e,this.resourceTableShow?this.getResources():this.getUsers()},getUsers:function(){var e=this;if(this.currentRoleRow){this.resourceTableShow=!1,this.userTableShow=!0,this.prevReadChecks=[],this.prevWriteChecks=[],this.readChecks=[],this.writeChecks=[],this.prevHJChecks=[],this.prevZKChecks=[],this.HJchecks=[],this.ZKchecks=[],this.checkReadAll=!1,this.checkWriteAll=!1,this.checkHJAll=!1,this.countPerPage=20,/^[1-9]+[0-9]*]*$/.test(this.filters.countPerPage)&&(this.countPerPage=parseInt(this.filters.countPerPage));var t={roleId:this.currentRoleRow.id,keyword:this.filters.keyword,folderId:this.folderTreeSelected.value,pageNum:this.pageNum,countPerPage:this.countPerPage};this.userTableLoading=!0,Object(u.H)(t).then(function(t){if(t.errMsg)e.$message({message:t.errMsg,type:"error"});else{e.total=t.total,e.users=t.users;var n=!0,l=!1,a=void 0;try{for(var i,o=r()(e.users);!(n=(i=o.next()).done);n=!0){var s=i.value;s.hasReadPrivilege&&(e.prevReadChecks.push(s.userNo),e.readChecks.push(s.userNo)),s.hasWritePrivilege&&(e.prevWriteChecks.push(s.userNo),e.writeChecks.push(s.userNo)),s.hasHJPrivilege&&(e.prevHJChecks.push(s.userNo),e.HJchecks.push(s.userNo)),s.hasZKPrivilege&&(e.prevZKChecks.push(s.userNo),e.ZKchecks.push(s.userNo))}}catch(e){l=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(l)throw a}}e.readChecks.length===e.users.length&&(e.checkReadAll=!0),e.writeChecks.length===e.users.length&&(e.checkWriteAll=!0),e.HJchecks.length===e.users.length&&(e.checkHJAll=!0),e.ZKchecks.length===e.users.length&&(e.checkZKAll=!0)}e.userTableLoading=!1})}else this.$message({message:"请先选择角色",type:"error"})},submitPrivilege:function(){var e=this;if(this.resourceTableShow){var t={roleId:this.currentRoleRow.id,prevReadChecks:this.prevReadChecks.join(","),prevWriteChecks:this.prevWriteChecks.join(","),readChecks:this.readChecks.join(","),writeChecks:this.writeChecks.join(",")};this.resourceTableLoading=!0,Object(u._12)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"提交成功",type:"success"}),e.prevReadChecks=[].concat(e.readChecks),e.prevWriteChecks=[].concat(e.writeChecks)),e.resourceTableLoading=!1})}else if(this.userTableShow){var n={roleId:this.currentRoleRow.id,prevReadChecks:this.prevReadChecks.join(","),prevWriteChecks:this.prevWriteChecks.join(","),prevHJChecks:this.prevHJChecks.join(","),prevZKChecks:this.prevZKChecks.join(","),readChecks:this.readChecks.join(","),writeChecks:this.writeChecks.join(","),hjChecks:this.HJchecks.join(","),zkChecks:this.ZKchecks.join(",")};this.userTableLoading=!0,Object(u._13)(n).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"提交成功",type:"success"}),e.prevReadChecks=[].concat(e.readChecks),e.prevWriteChecks=[].concat(e.writeChecks),e.prevHJChecks=[].concat(e.HJchecks),e.prevZKChecks=[].concat(e.ZKchecks)),e.userTableLoading=!1})}}},mounted:function(){var e=this;e.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/BindResource")}),e.getRoles(),e.getDeviceModels(),e.initTree()}},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[n("el-tab-pane",{attrs:{label:"绑定资源用户",name:"BindResource"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"绑定虚拟资源",name:"BindVirtualResource"}})],1),e._v(" "),n("el-card",{staticStyle:{float:"left","margin-top":"10px",width:"20%","font-size":"18px"},attrs:{"body-style":"padding:0px"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.roleTableLoading,expression:"roleTableLoading"}],ref:"roleTable",staticStyle:{width:"100%"},attrs:{data:e.roles,"highlight-current-row":""},on:{"current-change":e.handleRoleTableRowChange}},[n("el-table-column",{attrs:{prop:"name",label:"角色名",sortable:""}})],1)],1),e._v(" "),n("el-card",{staticStyle:{float:"left","margin-left":"50px","margin-top":"10px",width:"70%"},attrs:{"body-style":"padding:0px"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticStyle:{float:"left","font-size":"14px",height:"34px","line-height":"34px"}},[e._v("选择分组：")]),e._v(" "),n("el-select",{ref:"selectTree",staticStyle:{float:"left",width:"200px"},attrs:{size:"medium",placeholder:"选择分组",filterable:"","filter-method":e.dataFilter,clearable:""},on:{clear:e.clearHandle},model:{value:e.folderTreeSelected.label,callback:function(t){e.$set(e.folderTreeSelected,"label",t)},expression:"folderTreeSelected.label"}},[n("el-option",{staticClass:"tree-select",staticStyle:{width:"200px",height:"auto",overflow:"hidden"},attrs:{value:e.folderTreeSelected.value,label:e.folderTreeSelected.label}},[n("el-tree",{ref:"tree",attrs:{data:e.treeData,props:e.defaultProps,"default-expand-all":e.defaultExpandAll,"filter-node-method":e.filterNode,"expand-on-click-node":e.expandOnClickNode},on:{"node-click":e.handleNodeClick}})],1)],1),e._v(" "),n("el-select",{staticStyle:{float:"left","margin-left":"10px",width:"120px"},attrs:{size:"medium",placeholder:"选择资源类型"},model:{value:e.filters.deviceModel,callback:function(t){e.$set(e.filters,"deviceModel",t)},expression:"filters.deviceModel"}},e._l(e.deviceModelOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),n("el-input",{staticStyle:{float:"left","margin-left":"10px",width:"200px"},attrs:{size:"medium",placeholder:"关键字"},model:{value:e.filters.keyword,callback:function(t){e.$set(e.filters,"keyword",t)},expression:"filters.keyword"}}),e._v(" "),n("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{size:"small",type:"info"},on:{click:e.getResources}},[e._v("查询设备")]),e._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{size:"small",type:"info"},on:{click:e.getUsers}},[e._v("查询用户")])],1),e._v(" "),n("el-table",{directives:[{name:"show",rawName:"v-show",value:e.resourceTableShow,expression:"resourceTableShow"},{name:"loading",rawName:"v-loading",value:e.resourceTableLoading,expression:"resourceTableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.resources}},[n("el-table-column",{attrs:{type:"index",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"名称",width:"200",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"deviceModel",label:"资源类型",width:"200",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"username",label:"设备账号",width:"270"}}),e._v(" "),n("el-table-column",{attrs:{width:"150","render-header":e.renderCheckReadHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{on:{change:function(n){e.handleCheckReadChange(t.row)}},model:{value:t.row.hasReadPrivilege,callback:function(n){e.$set(t.row,"hasReadPrivilege",n)},expression:"scope.row.hasReadPrivilege"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"150","render-header":e.renderCheckWriteHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{on:{change:function(n){e.handleCheckWriteChange(t.row)}},model:{value:t.row.hasWritePrivilege,callback:function(n){e.$set(t.row,"hasWritePrivilege",n)},expression:"scope.row.hasWritePrivilege"}})]}}])})],1),e._v(" "),n("el-table",{directives:[{name:"show",rawName:"v-show",value:e.userTableShow,expression:"userTableShow"},{name:"loading",rawName:"v-loading",value:e.userTableLoading,expression:"userTableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.users}},[n("el-table-column",{attrs:{type:"index",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"名称",width:"200",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"userNo",label:"用户编号",width:"270"}}),e._v(" "),n("el-table-column",{attrs:{width:"150","render-header":e.renderCheckReadHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{on:{change:function(n){e.handleCheckReadChange(t.row)}},model:{value:t.row.hasReadPrivilege,callback:function(n){e.$set(t.row,"hasReadPrivilege",n)},expression:"scope.row.hasReadPrivilege"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"150","render-header":e.renderCheckWriteHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{on:{change:function(n){e.handleCheckWriteChange(t.row)}},model:{value:t.row.hasWritePrivilege,callback:function(n){e.$set(t.row,"hasWritePrivilege",n)},expression:"scope.row.hasWritePrivilege"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"150","render-header":e.renderCheckHJHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{on:{change:function(n){e.handleCheckHJChange(t.row)}},model:{value:t.row.hasHJPrivilege,callback:function(n){e.$set(t.row,"hasHJPrivilege",n)},expression:"scope.row.hasHJPrivilege"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"150","render-header":e.renderCheckZKHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{on:{change:function(n){e.handleCheckZKChange(t.row)}},model:{value:t.row.hasZKPrivilege,callback:function(n){e.$set(t.row,"hasZKPrivilege",n)},expression:"scope.row.hasZKPrivilege"}})]}}])})],1),e._v(" "),n("el-col",{staticClass:"toolbar",attrs:{span:24}},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitPrivilege}},[e._v("提交")]),e._v(" "),n("el-input",{staticStyle:{float:"right","margin-right":"30px",width:"200px"},attrs:{size:"small",placeholder:"单页显示数量,默认20"},model:{value:e.filters.countPerPage,callback:function(t){e.$set(e.filters,"countPerPage",t)},expression:"filters.countPerPage"}}),e._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":e.countPerPage,total:e.total},on:{"current-change":e.handleCurrentPageChange}})],1)],1)],1)},staticRenderFns:[]};var m=n("VU/8")(h,p,!1,function(e){n("HLbb")},null,null);t.default=m.exports},"51G+":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKoAAAAoCAYAAABuDmFRAAAACXBIWXMAAAsTAAALEwEAmpwYAAANNGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0xMi0yNFQxNzoxNjoyNyswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOS0wNS0wOVQwOTowOTo0OSswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTktMDUtMDlUMDk6MDk6NDkrMDg6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjRjMWVkODMxLTIwMjMtYTA0NS04ZDU1LWVjMjk4YmQ0OTM2MCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmRjN2NkOTFkLWYwN2MtMDM0Yi1hMTljLWQ3MWIwNDk5OWQ0OCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjljZjlhYTIxLTQzMWItOWY0Zi04NDljLWE3NjQ2NmMyYjQyNSIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB0aWZmOk9yaWVudGF0aW9uPSIxIiB0aWZmOlhSZXNvbHV0aW9uPSI3MjAwMDAvMTAwMDAiIHRpZmY6WVJlc29sdXRpb249IjcyMDAwMC8xMDAwMCIgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIgZXhpZjpDb2xvclNwYWNlPSI2NTUzNSIgZXhpZjpQaXhlbFhEaW1lbnNpb249IjE3MCIgZXhpZjpQaXhlbFlEaW1lbnNpb249IjQwIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5Y2Y5YWEyMS00MzFiLTlmNGYtODQ5Yy1hNzY0NjZjMmI0MjUiIHN0RXZ0OndoZW49IjIwMTgtMTItMjRUMTc6MTY6MjcrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmJmYmQ0NzU2LTQ4NzctYjk0Mi05MTg1LTgxNGQwMjRiZjZlOSIgc3RFdnQ6d2hlbj0iMjAxOC0xMi0yNlQxNjowNToxNyswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6Mjc0ZTIzNzMtZTU3NS00ODRhLTlkYTYtOGQwZDFjNjYyODIwIiBzdEV2dDp3aGVuPSIyMDE4LTEyLTI5VDA5OjAyOjM4KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImRlcml2ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImNvbnZlcnRlZCBmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjZjc3NjA3ZC05ZTA1LTgwNDYtYTBhMS1mZGZmOWNjMTY2NjYiIHN0RXZ0OndoZW49IjIwMTgtMTItMjlUMDk6MDI6MzgrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjRjMWVkODMxLTIwMjMtYTA0NS04ZDU1LWVjMjk4YmQ0OTM2MCIgc3RFdnQ6d2hlbj0iMjAxOS0wNS0wOVQwOTowOTo0OSswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Mjc0ZTIzNzMtZTU3NS00ODRhLTlkYTYtOGQwZDFjNjYyODIwIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZDEzNDgyZWItZGFkYS1iMTQ1LTk2ZDQtYTAwZWY4ZjI1MzNkIiBzdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6OWNmOWFhMjEtNDMxYi05ZjRmLTg0OWMtYTc2NDY2YzJiNDI1Ii8+IDxwaG90b3Nob3A6VGV4dExheWVycz4gPHJkZjpCYWc+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0i6KeG6aKR54K55pKt57O757ufICIgcGhvdG9zaG9wOkxheWVyVGV4dD0i6KeG6aKR54K55pKt57O757ufICIvPiA8cmRmOmxpIHBob3Rvc2hvcDpMYXllck5hbWU9IuinhumikeeCueaSreezu+e7nyAiIHBob3Rvc2hvcDpMYXllclRleHQ9IuinhumikeeCueaSreezu+e7nyAiLz4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpUZXh0TGF5ZXJzPiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6NDFlMTBjNTEtMmJhYi0zZDQxLWIyNGUtYzE3ZWM3NWJjODc1PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDo0QUI5REU1RkQ1OTMxMUU3ODI0M0E4MzA1QzYxNEI0RTwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsTrrT0AABKiSURBVHic7Zt5cB3Fncc/PTPvkGwdlmXLF8aWbIPNYRuMgRDABilUuGKKGNabZQkEpAS2kk2yQFFJNtlkQ+LdFAmESiJtcSQBisQ2bEiwiSRbvvCFjW35lCzJ1vV0n09658z0/vFmpNHTkyzvUpVV1ftWqWamp6/p/vb39+tfPwkpJUkk8f8dyt+6A0kkMREkiZrEpECSqElMCiSJmsSkQJKoSUwKJImaxKRAkqhJTAokiZrEpECSqElMCiSJmsSkgGa2vA9yKmb3i4jUfc8Ipfe76DIdVSC1qR+H/UuflDNzjode7YTKfDx3LSOw+X30Jh+upVdgtLSiZk9HmT6N/t8U41l+Hd5bbyZadY5AWTme5StwXbkYc2AQs7uH4P4K3HjJeHAdP3vyXzkzbxGZfT1IKQnrBqlujZtmuEnRBB1huTRkyOhAyKipH9DZ3RFhbqrG+gVeMj0qA7pM6Y+YC2enp7akTlN7Vv00nxm9O1EWXY8v51Z+Ovc5Qq4ppKtRguEoNX6DIIJ0Pcr2L8z9W499EpcATUbbEGoAo6/5BVnX87ycknFETlv6W63/5P10+/PF1MpjEc/D7ujZaNTtNkAIUBTH1RJlIYZrFWLkM4CIy6MoSCFQrCQJaIrARFDfF6U3pM/b5gsfmJWi7F03P/WeNk1gSEh1CY53hOkJRPGb4us1fZHvzV+YVvh1f/vbOXonIXcKXqFYNQ43G9ebJCYZlMCmQgbe2pAZ2X/seb1GEGy/sTBwbvkvQ9VzCqJ1/NAIZbxglM9WjYqoW12Y6YqRTSI0TSMadQuXipKehpKRDpjpwu1GSU9DuN2AnC40DVQV4U1BaC7AuAxklnR70T1ePAq4NYVBXSIUwVS3Shdq+uEmv7uhsavwcFXH93c1+RFuDZemzPJ6NKUnYrKrqovD5zp3NfTylPfsqfc+8/Z3UCJ9d+ma8nk0gam4MaXE41LxaCoel4KmKSiqomjqJXk8tUDhWC+FEBP6I7Zy5ETzT6QuIH8CeYutvMUXyVfrqHfcvAnK5jvKjipvjd+o/gJlVnrtxSZBMSOrUTPujBi+GU2hQxK560Apu7b9PHxMrh5c8MT3w00PfyfyyiePh5s+qQr8tfRx/UIDkapzr0ZOnTqnNzZ/KXz48OHQ3v27Au/+eatEXtCbW3eEdn1UGNy+8zQYNUZ7+w+I6lOjJ0/9MPzJx35QjunoZ1LKP/jtgppTXyjtprJzMPLDB+Z78cCUrXX9p9sHIk8owdDaUEf/s3NdZqAzwooTrYGtSiT6wSnfwGBXUP/2I1emewz/4EsG2t3PXdgZnPXuG3/sOdr5odLk3ypaqzZ7vAoZKV5OtA2+/YnPf6iyNfDd5p7g6VAgUtUX1m+bIEmLgVzrasM5oTIByi5WqZQyP1FBJybYv0uGlLJ2jPZyHdlyrbyFF+unVbYMqBPDKIprdr11LY5L3+hob0wxAFAMzxcJhT4TENPWLJODs9+MHu+fbhxs+GeOnjsY/bj/paixGr365N8ZRs8CJWNatRwMED139nE5GFwgw+FZelfT9eGqw7dFqqsvV7W0aVFf9drg3j3PCI/HBTLTaG3/ptT1BdHa2huE6v79lPz7C5TsuR2utqZ/1Cv23t7aELimpqHnkenS4Fxjz+tVdV1Le5q63j17rv0xguHrFk/zrqnz+Y+equmYeYPX+PICGX52sC/Ydaa5f01/Z2T11f6mjNveeue13rP6etE37WkzuuTX8mT3g56aA/fJQFCcqO/ZsPOY74beroE708PB2c31nYsuNPf+0wTntQios+7jCVgEDM2M9TwCUsoyay7znelCiPIE5codEz1RT6VsDO6MqVBCiDy7/4526qz7Euu+wMpbEtenckdV8f0tGqdd+/uLpJTFcQS3YSv/kCo7K1CMjgZX31+2pvTtrfbLRbc94lq1bp4546p3gi1gbtvyddG4/yqJkuvypke8t99SYbR3pBmGH9eSxVuALAOD1DvvfzRr44+ukhi9Qrjwrlq92HPzjWtMQmiL8vZp8+edVDLSf6ZkpLeb3d0bZCSYpgPemdmb6equbWro9v/HzoZry/c3rF+mRb+aHhi80N7YfUsW0VPpivlJR1N3pOdC//UVR5vfbKjvTFnpNd5o9fXMJqywomJrmlrz0WP+z65/XhQ++yvvwjVPiQsuxI5DN310uGp+oK6bXJfx4T3zPGunDgR+2XWmlVwR/eQiBHBiIzGyFlxCmTGRQHWvt651ifJfBAUiMfLGKiCltJWr2LmArPtCIDd+YVnvaxkmXIlNZgfKrLJlceVswpUTU9bcBIuxAGs74fgbsfCVwY92/7tsbGwK1zbV99V0EsnIa5bT87YEmyCctexQtKYr24z65iqe7OP6hXqCH5Q+JwAxJbXS7OzOU/Ggzcr5o1573iP1wUyheRtT190NUhaYgJKeVhX8cPurRndrqYxGW0XWtN1mf/9lqneqfzAtcx/1vrPtzV15pXtqywgEmr59c06xKxpaTXcf/o7e83M088CT16Rdf1em75lAn7+ten/9xkOnW96Wg4PL0MPk6f3bDSSh9Ax/+HQv+oHuh43KKCmXFZQH1JTPUt/E5ar+nhIIcfh0y1oG/GSrxq6xJjJu4O2VnWvdx5snW9HiTdqYsOaowFZbR51OM3tR92EiSFB/mRCihGHlLE9QrCg+Pc41KIo37Q4lLUhAYLv9TVYd+TLm+thjVsdIpU4IRc1dsW+gqj0r3NA/P1Rx6EjP23/e1vPf2zdFTU3KJasfihyvGpDSxOjruMH/m9cPmt1931FIBSEwO7oeEAikboQiH1c+ahDGtSRvh9HXT6Tm7Dc1UjDa2tMiVcceV0hThMvjixw/8XmIioAnpXZFjpcrs5V6WedLxdc+8ys3zby/o62LfYdqv0FnD6mqUf+7HdXv7Nl/blu6YnZlRQZ3M9CLJxKor69v+xptraQuy3sxlH35ycDWP7wy+MpPtvfs3fROijb7WHnuAxXVLYGf0N+ODAx+2NnRp+hd3Z8lPEBrY/vRiw0Mw6v8U1HS8dqZoPvg9AltJDL9Q4vGYc6xrhsd5M111JXLsBm2TXO+1X78IiyOb5Bh/zSe4ENqai2QfGJqXM4wgTc6izCs2iOgueYv+JORNuuLYsbcpxRF3hFub42SNu8991fu/jc1GKifkpERDnly3pWR8Gw1e8Y2vaN1p5qadbWS4j2pB3wHvatu24PbRfj8aa+C5wCa5zUZCGI0tp4SpLa4ll/1gjkwMKB3Nq4SfamPavPmnjR7encq/V2760v3Elgx9090da5ccu2crauvuexo04BOiioq0xbnuG+95YpfHDlad8+Jyo7lJ6ZmfQO9NZy3MPPh3DT1gzb0xdlzvM1L/+Hevp7Kivv1XaV/0VJn3qFo6q6BZcvv27vkMyJ6cH+tFuk/lZmT2VBluGaGapo+vnxZztE7lmSFEg3GGHjOcT9h82xNkj3oZY50adVzqaa+PIFaOdurZeSGaBQsgghHP+JRF+82WOo5tIAsApc53gtLIWUC39ruT77dnhCiKE5N7YVkp5WRIJqoGf4+XC7vlvQ77tiirr2VwAcfEm7xkRI1ce85iHrtylbR5HtQdnfjumIRekcTqAJcLkzMd93LluJavZLe3//mZU1kvEx3L9F9BxFofy8JoLhcqNOnfyPcWYs7Zwbua68mWncBj27S3tFHrx4tRY+UaosWQksbd9FPze1Xb8w9eIx1WhfnczJf6mhse2l+8xFql65iMC8P3R3g6jlTv6jkZCMiEUKh8Hlv3vKrtJVXZouo0jnY1Mod1Xt4caB/rb50FTd0nqfh48r2Pa65q1vmLuRz624ebz6dyMfhlzHaRNkTcSS+oHOCHZM7RASneXeQd2N8PZ8iCi2uHGGYFAV2v6y2i62+jFoU8QQl5gKMIJmUstZJdLsOi5iFQInDF4aR31tEbKxtdR/Rvibe/AvTuvvQNm/B3LGdqX39pIZCqBU7EPjduvBEpJBIIZDRCKCAlGCaCED3taLsPYQXgYKGaPRhNjajqRoA0c3vIzQXbjwQNTAjYZAmJjDF6wbNBbMXITq7Wffct/FWn+SphdeT3dzAnDcizMxcSNpAHyv7a/l93xp2kY9r5UqaFA+pgxEMIVCkxPS4kRnZnfJ8Leaxndx5+H12eHJFac9a+fDbFcztr+OarBtpmnITwS2D8MQ9E5lcp5oWkoCQFupIoGbWxqWYYdWw09bH5/20kYBYNophyC3AFlYhRIl1X0xMAQuttPh6SuJ9VCFEnq3olh+c0E+11NTp5xczOmQFMcIW4hg3jc5GNKYWmL2+B0VvXQt4p2iop02UuySZGzh7GlVRUaakIU2JbS8koJKBsXMPIT2ERubnkPJeiZkFMkUx9ArQciRRDd2sczPlv2RTPWZWBni9aCHoSJtGf/ZlPNT8Gj8q/xOZRpenB9djN9Z9tDiK63I/nLg30PaGRF0zQMrDT58vvfvp86W8GvwXym59hOUDPgyXB6GpuAL9pOyuwF1zFmmG6SL9rbXhxp+tPfzqqR60J/1k3Pd098EH2H4w2rL9VzpPRMacZMfgxvtL8YM6rqlleEfvxPoE9U4E+WOY64SwzbxTzSyi2BsaZ125cc8l8WrpQGEc2RL1s9gms8PMl1j9KiGmrGXExsEmfTExi7WJmECMcI0UmIoJ6yC1SJL1A0nqoyae18FVAMrnQb1TNSVaIAQnzqAgkKoKqV40NBQ9CAgkSquEp0BZAepeifiaRHaC9jSo90kEREOYlaeRoRADaGS0tfDV3W/yh5OvscToopXpYYN02UHWt3pJ222Q9jsfWcdbyHjVj7vTRxYGsGbnZma2NNK85Brmlvya7GMVZJyvwlt9BGkat0JasUC700fat3xk7Q6S/koU9S4f0/e3kLlBwT3+LMcQr3pF1kDaA+gkYRmJSWkTcpN1zbXSyhl2I2yyJ/RZhRBjhaDGwqgN2RhIFEdNVHZcX9rZMMPmulAOh7jioxrjBvaJETqPODfLPktcCdgbjJlANfBLkFtBmSdRkYaOCA2goSGDQThxBhWJxA24AFkJtMbK8T4QBrYBVcCXYxqcgogGUUNB2khnw4H3eHnTd+kkg0ay0ZDXgowCA8AyYBbwK2LO9V8BfGST23uBl19/luyuNjy7duMa9AMaBumAuw3MxUAUaAF+bH3XiyCflygVBp6LjBUQI1cJwxNVQmwi8kj804FNdugJhkx8bvyAw7DvZmHcOKq16y+z7mudymdNfG3c80RDZcWOumxFHVU20UJhjEiIpeIlWCEuB1mdBwe2Uo+7QOOhECNEHTAI7CJG2L1APVAK/NbqBhIXCiquSATZXOf42QfTrTIhYAOxST4KPAnMAx6L1SGRuNBQ8QIGGj2kEUFFxQSoBB4CpgLXAc8AWcBuYkxXFCQ+sri96zSvfO9LeFtb6CcdOcyd88CHQLr19yTwAnA3sA5omsjAYA34OO9HKYOMHTnWwpCJqyNGYKeCFlnvC6xJz3XWF0d2ezOXL0cG552KlStHxiUn6lZMVFHtNmtlgoMAR3+klDJfCDG0yRLDJ3DxcVd70wSjF7L9u4ERUIiR7GYgQEwFNxIj1+vALxJ0CwUFSHUmXgXcAmwmdhYeBDzA5cSU7Z6RNcTobaCiozlfPWr1ZTeQbf0VAVcC3wOyhVW6jWwW95xlur+VyEhT/k3rG0qAHwFXAKeAxVa9nwZsFXMqro2h0xkhRJ61IRnyxxyKYquu7QpATOWcqmZv5srjyL4+wbNNhtwJmNdLgiP0Nd5BRB2xuG7CtuVwPLiM4e8qSZTXwoi2FGAPcAy4DPicleE6hk336EZHJ+216nkOeBzoI8bFkFXvt8bpkI0MYsRKB/YBvyNGsF9b/XwI6IGYtoNJD1lE8aLE1NjGz4Eaq3wzkAK8BdxnXf+vsE9pEinuKDNumdR8YoF9J0nLsDYQDnWtI+bLFTvUFIbDOHbUId5s2s92/YmiCvERiwmZfis91+pnwt8giNhvAmy/cmixyZHn+psYDkHlE1PxRAqe0CVQiJnlPGI+4A5ipDtATBF/zMRgAtuJmep7iZnZEmAhcIaYSb8YgsAKoJ0YGX4AfM3qRwtwgpg6jwcBvAvMAb5EzP1oAD4C/pOYYv9v4TRJTjNpk6iMuDCMIyYphOPURg6fmxc5/VXHZBc6/D1bTRGj/Tt7k0bcc52jHbtP8epVlMD3jDfR9vcWiJHHvrbajajT+pZyrM2U5QYM+aZWH4oYfbBgW6Z8hhfLyBDYJUQ8kkjib4bk/0wlMSmQJGoSkwJJoiYxKZAkahKTAkmiJjEpkCRqEpMCSaImMSmQJGoSkwJJoiYxKZAkahKTAv8D9qnfjOqehuUAAAAASUVORK5CYII="},6098:function(e,t){},"71sA":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFwmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0xMi0yOVQwOToxODo1NCswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0xMi0yOVQwOToxODo1NCswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMTItMjlUMDk6MTg6NTQrMDg6MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDkwMTVkMWItYjZkMS0xMjQ5LWE2YmUtNjc4YTFlNDQ1ZjM4IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6NWI1M2FiMTItMjcxNi0yNjQ2LTk1ODAtOTI1MDJmYTA3ZjlmIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NWMwNzljOGItNmIwOC0zZDRlLTliOTEtNTM4NDg1Nzg5NGU2IiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NWMwNzljOGItNmIwOC0zZDRlLTliOTEtNTM4NDg1Nzg5NGU2IiBzdEV2dDp3aGVuPSIyMDE4LTEyLTI5VDA5OjE4OjU0KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowOTAxNWQxYi1iNmQxLTEyNDktYTZiZS02NzhhMWU0NDVmMzgiIHN0RXZ0OndoZW49IjIwMTgtMTItMjlUMDk6MTg6NTQrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+nu0yrgAAAVRJREFUOI211b9LHGEQxvHPRRH8VSkRLCwsztZCRbDwIIWFCLEwhb19IH+HaG9vI6LY2ehhqYg2gnegRUAFKyGIIUZIsXNyt9yt60keWN7ZeWe+Ozvvu+8WDs8q3lA3RsL+iaf6ydJ4sSH4UwZoAnt4wGVcD+GbaJXU2cL/HavxwFOchH8SC5jHD6znAS5jDXdhl1PzJWxGzH3YryqketiPa3RhCq0aPIZj/MFoabz4qzaR7uEiBiWvm7ValYgZjJxXpYEzMW5nwGqqxczUO9PAzzFe5QDepHKaAgsx/s4BTOc0BX5Y/x3YaqM303OznHrgEKYlmzWPHiN2unxeHaqvqAcbmMOA5AvZzQl9kazyRfm8uo+VwuFZZRhV9OaEZFVc7MQt+tqlvOf4gg58lbSlJ+yOrIS3VnUWOxqPry84aBd4hC0sxf1W+Nqu8C++afwFZOofbqdDO4JUlzgAAAAASUVORK5CYII="},"8hj+":function(e,t){},"8tHC":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAhFBMVEUAAAAzNzw+QUVwcHBwcHBsbGxwcHBvcHBlZmdtbW1aW11fYWJdX2CxsbFDRklQVFdIS05ISk2xsbGqqqqGhoadnp+rq6uHiYqUlZaPkJJmaWxwcHCxsbF1dXWsrKylpaWbm5uQkJB7e3upqamioqKJiYl/f3+urq6VlZWBgYGNjY2CgoLBYjowAAAAG3RSTlMAI0H45+Hgy8C0lJKG5E5BYGD44cvAtJSShmDeKnc/AAABHElEQVQ4y22S2baCMAxFExFFZpy1LYMg6r3//38uBU5by37qSk4zk4aLMPA9zw/CgsllEa0EWEULsuF4KSyWMVvfN8JhYwRJ12KGdYr/8P8oxhiM+E6WoY4YBtVUj0fVKBjibwLUf2vll/aGXj5JIugrOVIiRkTEmM9dgicmxlQYAUAJY04hKpQGqCKkYHr2puA1WQPyp+fLFPxPVp88NDmbwoPArkFogT/XRSd0igDvRoI/oYsM9SZKc5JoMxcAo7wLkH9GDerBXwuwYr0sLXgKEJnrVrUcqZVetz6YvpWg7XEwOLlGWjTDyeFoVSd/6BSOlijdl9Kh3KcEsqMrOGZkwJfEdicXJpvsnBjuc0YufD0ddtvt7nC6MoE3vPJULZWJssEAAAAASUVORK5CYII="},"9goZ":function(e,t,n){"use strict";(function(e){var t,l=n("mvHQ"),r=n.n(l),a=n("Dd8w"),i=n.n(a),o=n("//Fk"),s=n.n(o),d=n("YaEn"),c=n("mtWM"),u=n.n(c),h=n("0nep"),p=n.n(h),m=n("eqvY"),f=(n("A66B"),"http://__requestIP__:8093"),b=document.location.host.split(":")[0],v=p.a.queryRouterUrl,g="http://__requestIP__:8093/vue";-1!==v.indexOf("__requestIP__")&&(v=v.replace("__requestIP__",b)),-1!==g.indexOf("__requestIP__")&&(g=g.replace("__requestIP__",b));new Array;var y=u.a.create({headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/x-www-form-urlencoded","Access-Control-Allow-Headers":"Content-Type, Content-Length, Authorization, Accept, X-Requested-With , yourHeaderFeild","Access-Control-Allow-Methods":"PUT,POST,GET,DELETE,OPTIONS"},withCredentials:!1});function I(e){try{var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.href.split("?")[1].match(t);if(null!=n)return unescape(n[2])}catch(e){}return null}function w(e){for(;;){var t=e.match(/(?=\{context:)/);if(!t)break;for(var n="",l=t.index;l<e.length;l++)if(n+=e[l],"}"===e[l]){l;break}var r;n.replace("{context:","").replace("}","").split(";");r=sessionStorage.getItem("token"),e=e.replace(new RegExp(n,"g"),r)}return e}y.interceptors.request.use(function(e){var t=sessionStorage.getItem("token");return t?(e.headers["tetris-001"]=t,e.headers.Authorization=t):(e.headers["tetris-001"]=I("token"),e.headers.Authorization=I("token")),e},function(e){return s.a.reject(e)}),y.interceptors.response.use(function(e){return e},function(e){console.log("error= "+e),401===e.response.status&&(alert("超时，请重新登录!"),window.location.href=f+"/web/app/login/login.html")}),d.a.beforeEach(function(n,l,a){if("/"!==n.path)if(t){var o;if(n.meta.serviceName&&n.meta.serviceName!==p.a.serviceName)o=n.meta.url.split(":")[0]+"://"+b+":"+n.meta.url.split(":")[2],n.meta.urlSuffix&&""!==n.meta.urlSuffix&&null!==n.meta.urlSuffix?window.location.href=o+"?token="+sessionStorage.getItem("token")+n.meta.urlSuffix:window.location.href=o+"?token="+sessionStorage.getItem("token");else a()}else{var s=I("token"),c=sessionStorage.getItem("token");s&&s!==c&&sessionStorage.setItem("token",s),y.post(v).then(function(l){var o,s;408===l.data.status?(alert("超时，请重新登录!"),window.location.href=f+"/web/app/login/login.html"):200===l.data.status&&(t=l.data.vueRouters,o="router",s=t,localStorage.setItem(o,r()(s)),function(n,l){d.a.addRoutes(m.a),function e(t){if(t&&t.length>0)for(var n=0;n<t.length;n++){var l=t[n];l.link&&(l.link=w(l.link)),l.sub&&l.sub.length>0&&e(l.sub)}}(t),function e(t){if(t&&t.length>0)for(var n=0;n<t.length;n++){var l=t[n];l.path=l.title,l.link&&-1!=l.link.indexOf("?token")&&(l.path=l.link.split("#")[1].split("?")[0]),l.sub&&l.sub.length>0&&e(l.sub)}}(t),e.antRouter=t,l(i()({},n,{replace:!0}))}(n,a))})}else a()})}).call(t,n("DuR2"))},A66B:function(e,t,n){e.exports=function(e){return function(){return n("Opzk")("./"+e+".vue")}}},B1Ru:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAG0WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOS0wMS0xNlQxNjowNzo0MiswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOS0wMS0xNlQxNjowNzo0MiswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTktMDEtMTZUMTY6MDc6NDIrMDg6MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NmZmMGIwNzEtMTgzYS00ZjQxLTlmM2YtNzA2MTg2MzliNWY4IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODliYjFhNmYtMzMwMS1jMjQ2LTk3ZGYtNzZhMWExZjM0NDBiIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MTA5NGI5OTMtMzQ3Mi0wNDRhLTkxMWQtZWZmOTE5Y2ZlN2MwIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MTA5NGI5OTMtMzQ3Mi0wNDRhLTkxMWQtZWZmOTE5Y2ZlN2MwIiBzdEV2dDp3aGVuPSIyMDE5LTAxLTE2VDE2OjA3OjQyKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo2ZmYwYjA3MS0xODNhLTRmNDEtOWYzZi03MDYxODYzOWI1ZjgiIHN0RXZ0OndoZW49IjIwMTktMDEtMTZUMTY6MDc6NDIrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDo1YzBlNWJiZC0yZWI0LWYxNGQtYWY0Mi05MGEyZjBiYjM0ZTI8L3JkZjpsaT4gPHJkZjpsaT51dWlkOkFBMUZEM0ZBRTRGOEUxMTE5QTE3OTRDRjcyOEM3MzRDPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDo0NDU5QUZGMkYwNDFFMzExODRENUMzOTBFNDdGMEY1NTwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ptdjv+EAAACISURBVDiN7dS7DcJQDIVh34g6M8AasAnLIHaBSa5YA2agTvHRkCa6ElFiJAqO5OpYv/yQXRCZ6lJpb2CNCElRsyss5VdmeImIvulgScAd+6m3BggDTthkAUfdsB2BtZEwVf0AhCeOc5dSZuZ1mS3vMmY44CxpKQ8cpt5S4BV9y/vK6f2/zTq9AKGkN0rEpt/lAAAAAElFTkSuQmCC"},BXv7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("nvbp"),r=n.n(l),a=n("BO1k"),i=n.n(a),o=n("P9l9"),s={data:function(){return{activeTabName:"BindVirtualResource",roles:[],currentRoleRow:null,roleTableLoading:!1,resources:[],filters:{keyword:"",bindType:""},bindTypeOptions:[{value:"all",label:"全部"},{value:"binded",label:"已绑定"},{value:"unbinded",label:"未绑定"}],total:0,pageNum:1,countPerPage:10,resourceTableLoading:!1,checkAll:!1,prevChecks:[],checks:[],detailDialogVisible:!1,detailInfos:[]}},methods:{handleTabClick:function(e,t){"BindVirtualResource"!==e.name&&this.$router.push("/"+e.name)},handleRoleTableRowChange:function(e){this.currentRoleRow=e,this.getResources()},handleSelectionChange:function(e){this.checks=e},getRoles:function(){var e=this;this.roleTableLoading=!0,Object(o.u)({}).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.roles=t.roles,e.roleTableLoading=!1})},getResources:function(){var e=this;this.prevChecks=[],this.checks=[];var t={roleId:this.currentRoleRow.id,bindType:this.filters.bindType,keyword:this.filters.keyword,pageNum:this.pageNum,countPerPage:this.countPerPage};this.resourceTableLoading=!0,Object(o.J)(t).then(function(t){if(t.errMsg)e.$message({message:t.errMsg,type:"error"});else{e.total=t.total,e.resources=t.resources;var n=!0,l=!1,r=void 0;try{for(var a,o=i()(e.resources);!(n=(a=o.next()).done);n=!0){var s=a.value;s.hasPrivilege&&(e.prevChecks.push(s.resourceId),e.checks.push(s.resourceId))}}catch(e){l=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(l)throw r}}}e.resourceTableLoading=!1})},renderCheckHeader:function(e,t){var n=this;return e("el-checkbox",r()([{attrs:{value:n.checkAll},on:{input:function(e){n.checkAll=e}}},{directives:[{name:"model",value:n.checkAll}]},{on:{change:this.handleCheckAllChange}}]),["全选"])},handleCheckAllChange:function(e){if(e){var t=!0,n=!1,l=void 0;try{for(var r,a=i()(this.resources);!(t=(r=a.next()).done);t=!0){var o=r.value;this.checks.push(o.resourceId),o.hasPrivilege=!0}}catch(e){n=!0,l=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw l}}}else{this.checks=[];var s=!0,d=!1,c=void 0;try{for(var u,h=i()(this.resources);!(s=(u=h.next()).done);s=!0){u.value.hasPrivilege=!1}}catch(e){d=!0,c=e}finally{try{!s&&h.return&&h.return()}finally{if(d)throw c}}}},handleCheckChange:function(e){e.hasPrivilege?(this.checks.push(e.resourceId),this.checks.length===this.resources.length&&(this.checkAll=!0)):(this.checks.splice(this.checks.indexOf(e.resourceId),1),this.checkAll=!1)},handleCurrentPageChange:function(e){this.pageNum=e,this.getResources()},handleDetail:function(e){var t=this,n={resourceId:e.resourceId};Object(o.I)(n).then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):(t.detailDialogVisible=!0,t.detailInfos=e.infos)})},submitPrivilege:function(){var e=this,t={roleId:this.currentRoleRow.id,prevChecks:this.prevChecks.join(","),checks:this.checks.join(",")};this.resourceTableLoading=!0,Object(o._14)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"提交成功",type:"success"}),e.prevChecks=[].concat(e.checks)),e.resourceTableLoading=!1})}},mounted:function(){var e=this;e.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/BindResource")}),this.getRoles()}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[n("el-tab-pane",{attrs:{label:"绑定设备资源",name:"BindResource"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"绑定虚拟资源",name:"BindVirtualResource"}})],1),e._v(" "),n("el-card",{staticStyle:{float:"left","margin-top":"10px",width:"20%","font-size":"18px"},attrs:{"body-style":"padding:0px"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.roleTableLoading,expression:"roleTableLoading"}],ref:"roleTable",staticStyle:{width:"100%"},attrs:{data:e.roles,"highlight-current-row":""},on:{"current-change":e.handleRoleTableRowChange}},[n("el-table-column",{attrs:{prop:"name",label:"角色名",sortable:""}})],1)],1),e._v(" "),n("el-card",{staticStyle:{float:"left","margin-left":"50px","margin-top":"10px",width:"70%"},attrs:{"body-style":"padding:0px"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticStyle:{float:"left","font-size":"18px"}},[e._v("业务资源")]),e._v(" "),n("el-select",{staticStyle:{float:"left","margin-left":"100px"},attrs:{size:"small",placeholder:"选择绑定状态"},model:{value:e.filters.bindType,callback:function(t){e.$set(e.filters,"bindType",t)},expression:"filters.bindType"}},e._l(e.bindTypeOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),n("el-input",{staticStyle:{float:"left","margin-left":"50px",width:"150px"},attrs:{size:"small",placeholder:"关键字"},model:{value:e.filters.keyword,callback:function(t){e.$set(e.filters,"keyword",t)},expression:"filters.keyword"}}),e._v(" "),n("el-button",{staticStyle:{float:"left","margin-left":"50px"},attrs:{size:"small",type:"info"},on:{click:e.getResources}},[e._v("查询")])],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.resourceTableLoading,expression:"resourceTableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.resources},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{width:"150","render-header":e.renderCheckHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{on:{change:function(n){e.handleCheckChange(t.row)}},model:{value:t.row.hasPrivilege,callback:function(n){e.$set(t.row,"hasPrivilege",n)},expression:"scope.row.hasPrivilege"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"名称",width:"350",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"resourceId",label:"资源ID",width:"350",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.handleDetail(t.row)}}},[e._v("详情")])]}}])})],1),e._v(" "),n("el-col",{staticClass:"toolbar",attrs:{span:24}},[n("el-button",{attrs:{type:"primary"},on:{click:e.submitPrivilege}},[e._v("提交")]),e._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":e.countPerPage,total:e.total},on:{"current-change":e.handleCurrentPageChange}})],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"详情",visible:e.detailDialogVisible},on:{"update:visible":function(t){e.detailDialogVisible=t}}},[n("ul",e._l(e.detailInfos,function(t){return n("li",[e._v("\n          "+e._s(t.attrName)+" :  "+e._s(t.attrValue)+"\n        ")])}))])],1)},staticRenderFns:[]};var c=n("VU/8")(s,d,!1,function(e){n("el6V")},null,null);t.default=c.exports},Caey:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAG0WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOS0wMS0xNlQxNjowNjoyOSswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOS0wMS0xNlQxNjowNjoyOSswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTktMDEtMTZUMTY6MDY6MjkrMDg6MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTMwNDljMzEtNzU3MC1iNTRjLWEwZDItMTkwN2Q4MzhhNWU5IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODEzOWRiYWYtZTYwNi0wYzQ1LThjZGItYzRhZWZkMDVmNzg5IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6OTM5ZmE1Y2ItODQ3OS0xZDQ0LTljNzQtMmEyNGRiMjE2M2IwIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTM5ZmE1Y2ItODQ3OS0xZDQ0LTljNzQtMmEyNGRiMjE2M2IwIiBzdEV2dDp3aGVuPSIyMDE5LTAxLTE2VDE2OjA2OjI5KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMzA0OWMzMS03NTcwLWI1NGMtYTBkMi0xOTA3ZDgzOGE1ZTkiIHN0RXZ0OndoZW49IjIwMTktMDEtMTZUMTY6MDY6MjkrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDo1YzBlNWJiZC0yZWI0LWYxNGQtYWY0Mi05MGEyZjBiYjM0ZTI8L3JkZjpsaT4gPHJkZjpsaT51dWlkOkFBMUZEM0ZBRTRGOEUxMTE5QTE3OTRDRjcyOEM3MzRDPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDo0NDU5QUZGMkYwNDFFMzExODRENUMzOTBFNDdGMEY1NTwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlLpWjMAAACHSURBVDiN7ZTBCYAwDEV/xXNn0DUcxWHELRzAUapr6AyePTwvglAKCo3gwQc5tIRPk9/EAbKkMFU7BYMkjCJYv9C5L/fQSxoFWEQDLBgIlUAH7JzkiFXARISAEF8mCJFYC2ypxKemuJvzRUbJNTCnSs41pcfIlPjbrACWk+IlDa+M3r9t8jgAzPX+YZ0j3T4AAAAASUVORK5CYII="},EUih:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("mvHQ"),r=n.n(l),a=n("P9l9"),i={name:"AddLayernode",data:function(){var e=function(e,t,n){t&&!/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-4]\d{4}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/.test(t)?n(new Error("端口格式错误")):n()};return{activeTabName:"AddLayernode",typeOptions:[{label:"JV230接入",value:"ACCESS_JV230"},{label:"机顶盒接入",value:"ACCESS_TVOS"},{label:"混合器接入",value:"ACCESS_MIXER"},{label:"手机接入",value:"ACCESS_MOBILE"},{label:"音视频转发服务设备",value:"ACCESS_JV210"},{label:"录像存储服务单元A型",value:"ACCESS_CDN"},{label:"录像存储服务单元B型",value:"ACCESS_VOD"},{label:"监控资源汇接网关",value:"ACCESS_IPC"},{label:"流媒体管理服务设备",value:"ACCESS_STREAMMEDIA"},{label:"联网服务设备",value:"ACCESS_NETWORK"},{label:"显控汇接网关",value:"ACCESS_DISPLAYCTRL"},{label:"流转发器接入",value:"ACCESS_S100"},{label:"点播代理服务设备",value:"ACCESS_VODPROXY"},{label:"webrtc接入",value:"ACCESS_WEBRTC"}],nodeForm:{type:"ACCESS_JV210",name:"",ip:"",nodeUid:"",port:null,downloadPort:null,monitorUrl:"",netUrl:"",webrtcHttpPort:8088,webrtcWebsocketPort:8188},rules:{type:[{required:!0,message:"请选择节点类型",trigger:"change"}],name:[{required:!0,message:"请输入节点名称",trigger:"change"},{min:1,max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}],nodeUid:[{required:!0,message:"请输入节点ID",trigger:"change"},{min:1,max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}],ip:[{validator:function(e,t,n){t&&!/^((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)$/.test(t)?n(new Error("IP格式错误")):n()},trigger:"blur"}],port:[{validator:e,trigger:"blur"}],downloadPort:[{validator:e,trigger:"blur"}]}}},methods:{handleTabClick:function(e,t){"AddLayernode"!==e.name&&this.$router.push("/"+e.name)},reset:function(){this.$refs.nodeForm.resetFields()},submit:function(){var e=this;if(this.validate()){var t={json:r()(this.nodeForm)};Object(a._6)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"添加成功",type:"success"}),e.$refs.nodeForm.resetFields())})}},validate:function(){var e=!1;return this.$refs.nodeForm.validate(function(t){e=t}),e}},mounted:function(){var e=this;this.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/LayernodeManage")})}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[n("el-tab-pane",{attrs:{label:"层节点列表",name:"LayernodeManage"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"添加层节点",name:"AddLayernode"}})],1),e._v(" "),n("el-form",{ref:"nodeForm",attrs:{model:e.nodeForm,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"节点类型",prop:"type"}},[n("el-select",{staticStyle:{width:"200px"},model:{value:e.nodeForm.type,callback:function(t){e.$set(e.nodeForm,"type",t)},expression:"nodeForm.type"}},e._l(e.typeOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.name,callback:function(t){e.$set(e.nodeForm,"name",t)},expression:"nodeForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"节点ID",prop:"nodeUid"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.nodeUid,callback:function(t){e.$set(e.nodeForm,"nodeUid",t)},expression:"nodeForm.nodeUid"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"节点IP",prop:"ip"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.ip,callback:function(t){e.$set(e.nodeForm,"ip",t)},expression:"nodeForm.ip"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"节点端口",prop:"port"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.port,callback:function(t){e.$set(e.nodeForm,"port",t)},expression:"nodeForm.port"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"下载端口",prop:"downloadPort"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"录制资源下载端口，可不填"},model:{value:e.nodeForm.downloadPort,callback:function(t){e.$set(e.nodeForm,"downloadPort",t)},expression:"nodeForm.downloadPort"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"监控地址",prop:"monitorUrl"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"监控页面地址，可不填"},model:{value:e.nodeForm.monitorUrl,callback:function(t){e.$set(e.nodeForm,"monitorUrl",t)},expression:"nodeForm.monitorUrl"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"网管地址",prop:"netUrl"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"网管页面地址，可不填"},model:{value:e.nodeForm.netUrl,callback:function(t){e.$set(e.nodeForm,"netUrl",t)},expression:"nodeForm.netUrl"}})],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"ACCESS_WEBRTC"==e.nodeForm.type,expression:"nodeForm.type=='ACCESS_WEBRTC'"}],attrs:{label:"webrtc http端口",prop:"webrtcHttpPort"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.webrtcHttpPort,callback:function(t){e.$set(e.nodeForm,"webrtcHttpPort",t)},expression:"nodeForm.webrtcHttpPort"}})],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"ACCESS_WEBRTC"==e.nodeForm.type,expression:"nodeForm.type=='ACCESS_WEBRTC'"}],attrs:{label:"webrtc websocket端口",prop:"webrtcWebsocketPort"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.webrtcWebsocketPort,callback:function(t){e.$set(e.nodeForm,"webrtcWebsocketPort",t)},expression:"nodeForm.webrtcWebsocketPort"}})],1),e._v(" "),n("div",{staticStyle:{"margin-top":"30px"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.reset()}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var s=n("VU/8")(i,o,!1,function(e){n("qg2o")},"data-v-154beb68",null);t.default=s.exports},Eowd:function(e,t){},HLbb:function(e,t){},HV9H:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("woOf"),r=n.n(l),a=n("mvHQ"),i=n.n(a),o=n("P9l9"),s={data:function(){return{filters:{},activeTab:"serInfoTab",serInfoVOs:[],total:0,page:1,listLoading:!1,sels:[],serInfoEditFormVisible:!1,serInfoEditBtnVisible:!1,serInfoAddBtnVisible:!1,editLoading:!1,serTypeOptions:[{value:4,label:"应用服务单元"},{value:5,label:"信令控制服务单元"},{value:6,label:"媒体处理服务单元"}],serProOptions:[{value:1,label:"TCP"},{value:2,label:"UDP"},{value:3,label:"TCP和UDP"}],serInfoEditForm:{id:0,nodeUuid:"",nodeName:"",nodeFather:"",nodeRelations:"",nodeFactInfo:""},serInfoEditFormRules:{},serNodeVOs:[],serNodeEditFormVisible:!1,serNodeEditBtnVisible:!1,serNodeAddBtnVisible:!1,serNodeEditForm:{id:0,serUuid:"",serName:"",serAddr:"",serPort:0,serPwd:"",serNode:"",serFactInfo:""},serNodeEditFormRules:{},fatherNodeOptions:[],relationNodeOptions:[],fatherTag:[],relationTag:[],dialog:{node:{type:"",table:{data:[]},visible:!1,selection:[]}}}},methods:{handleClick:function(e,t){this.queryList()},selsChange:function(e){this.sels=e},resetForm:function(e){void 0!=this.$refs[e]&&this.$refs[e].resetFields()},serTypeFormat:function(e,t){var n=e[t.property];if(void 0==n)return"";switch(n){case 1:return"业务控制单元";case 4:return"应用服务单元";case 5:return"信令控制服务单元";case 6:return"媒体处理服务单元"}},syncStatusFormat:function(e,t){var n=e[t.property];if(void 0==n)return"";switch(n){case"ASYNC":return"未同步";case"SYNC":return"已同步"}},sourceTypeFormat:function(e,t){var n=e[t.property];if(void 0==n)return"";switch(n){case"SYSTEM":return"BVC";case"EXTERNAL":return"LDAP"}},queryList:function(){var e=this,t={};this.listLoading=!0,"serInfoTab"===this.activeTab?Object(o.Z)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):e.serInfoVOs=t.serInfoVOs,e.listLoading=!1}):"serNodeTab"===this.activeTab&&Object(o._0)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):e.serNodeVOs=t.serNodeVOs,e.listLoading=!1})},handleShowAddDialog:function(){var e=this;if(console.log("add"),"serInfoTab"===this.activeTab)this.resetForm("serInfoEditForm"),this.serInfoAddBtnVisible=!0,this.serInfoEditFormVisible=!0,this.serInfoEditBtnVisible=!1;else if("serNodeTab"===this.activeTab){Object(o.W)({}).then(function(t){null!==t.errMsg&&""!==t.errMsg?console.log(o.W,error):(e.fatherNodeOptions=t.serNodeVOs,e.relationNodeOptions=t.serNodeVOs,console.log("queryFatherNodeOptions, success",i()(t.serNodeVOs)))}),this.resetForm("serNodeEditForm"),this.serNodeAddBtnVisible=!0,this.serNodeEditFormVisible=!0,this.serNodeEditBtnVisible=!1}},handleShowEditDialog:function(e,t){var n=this;if(console.log("edit"),"serInfoTab"===this.activeTab)this.resetForm("serInfoEditForm"),this.serInfoAddBtnVisible=!1,this.serInfoEditBtnVisible=!1,this.serInfoEditFormVisible=!0,this.serInfoEditBtnVisible=!0,this.serInfoEditForm=r()({},t);else if("serNodeTab"===this.activeTab){Object(o.W)({}).then(function(e){null!==e.errMsg&&""!==e.errMsg?console.log(o.W,error):n.fatherNodeOptions=e.serNodeVOs});var l=this.serNodeVOs;if("NULL"!=t.nodeFather)for(var a=t.nodeFather.split(","),i=0;i<a.length;i++)for(var s=0;s<l.length;s++)if(l[s].nodeUuid===a[i]){this.fatherTag.push(l[s]),console.log(this.fatherTag);break}if("NULL"!=t.nodeRelations){var d=t.nodeRelations.split(",");console.log(d);for(i=0;i<d.length;i++)for(s=0;s<l.length;s++)if(l[s].nodeUuid===d[i]){this.relationTag.push(l[s]);break}}this.resetForm("serNodeEditForm"),this.serNodeAddBtnVisible=!1,this.serNodeEditBtnVisible=!1,this.serNodeEditFormVisible=!0,this.serNodeEditBtnVisible=!0,this.serNodeEditForm=r()({},t)}},handleAddSerInfo:function(){var e=this;this.$refs.serInfoEditForm.validate(function(t){t&&e.$confirm("确认新增服务设备信息吗？","提示",{}).then(function(){e.editLoading=!0;var t={serNo:e.serInfoEditForm.serNo,serName:e.serInfoEditForm.serName,serAddr:e.serInfoEditForm.serAddr,serPort:e.serInfoEditForm.serPort,serPwd:e.serInfoEditForm.serPwd,serType:e.serInfoEditForm.serType,serPro:e.serInfoEditForm.serPro,serNode:e.serInfoEditForm.serNode};console.log(i()(t)),Object(o.c)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"新增成功",type:"success"}),e.$refs.serInfoEditForm.resetFields(),e.serInfoEditFormVisible=!1,e.addSerInfoBtnVisibale=!1,e.queryList())}),e.editLoading=!1})})},handleEditSerInfo:function(){var e=this;this.$refs.serInfoEditForm.validate(function(t){t&&e.$confirm("确认修改服务设备信息吗？","提示",{}).then(function(){e.editLoading=!0;var t={id:e.serInfoEditForm.id,serUuid:e.serInfoEditForm.serUuid,serNo:e.serInfoEditForm.serNo,serName:e.serInfoEditForm.serName,serAddr:e.serInfoEditForm.serAddr,serPort:e.serInfoEditForm.serPort,serPwd:e.serInfoEditForm.serPwd,serType:e.serInfoEditForm.serType,serPro:e.serInfoEditForm.serPro,serNode:e.serInfoEditForm.serNode};console.log(i()(t)),Object(o.Q)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"修改成功",type:"success"}),e.$refs.serInfoEditForm.resetFields(),e.serInfoEditFormVisible=!1,e.serInfoEditBtnVisibale=!1,e.queryList())}),e.editLoading=!1})})},handleAddSerNode:function(){var e=this;this.$refs.serNodeEditForm.validate(function(t){t&&e.$confirm("确认新增服务节点信息吗？","提示",{}).then(function(){e.editLoading=!0;var t={nodeName:e.serNodeEditForm.nodeName,nodeFather:e.serNodeEditForm.nodeFather,nodeRelations:e.serNodeEditForm.nodeRelations,nodeFactInfo:e.serNodeEditForm.nodeFactInfo};console.log(i()(t)),Object(o.d)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"新增成功",type:"success"}),e.$refs.serNodeEditForm.resetFields(),e.serNodeEditFormVisible=!1,e.serNodeAddBtnVisibale=!1,e.queryList())}),e.editLoading=!1})})},handleEditSerNode:function(){var e=this;this.$refs.serNodeEditForm.validate(function(t){t&&e.$confirm("确认修改服务节点信息吗？","提示",{}).then(function(){e.editLoading=!0;for(var t=[],n=[],l=0;l<e.fatherTag.length;l++)t.push(e.fatherTag[l].nodeUuid);for(l=0;l<e.relationTag.length;l++)n.push(e.relationTag[l].nodeUuid);var r={nodeUuid:e.serNodeEditForm.nodeUuid,nodeName:e.serNodeEditForm.nodeName,nodeFather:t.join(","),nodeRelations:n.join(",")};Object(o.R)(r).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"修改成功",type:"success"}),e.$refs.serNodeEditForm.resetFields(),e.serNodeEditFormVisible=!1,e.serNodeEditBtnVisible=!1,e.queryList())}),e.editLoading=!1,e.fatherTag=[],e.relationTag=[]})})},handleEditSerNodeClose:function(){this.serNodeEditFormVisible=!1,this.fatherTag=[],this.relationTag=[]},handleDelSerInfo:function(e,t){var n=this;this.$confirm("删除此服务设备信息，确认？","提示",{}).then(function(){var e={serUuid:t.serUuid};Object(o.l)(e).then(function(e){null!==e.errMsg&&""!==e.errMsg?n.$message({message:e.errMsg,type:"error",duration:3e3}):n.queryList()})})},handleDelSerNode:function(e,t){var n=this;this.$confirm("删除此服务节点信息，确认？","提示",{}).then(function(){var e={nodeUuid:t.nodeUuid};Object(o.m)(e).then(function(e){null!==e.errMsg&&""!==e.errMsg?n.$message({message:e.errMsg,type:"error",duration:3e3}):n.queryList()})})},handleSyncToLdap:function(){var e=this;this.$confirm("确认将本地未同步信息同步到LDAP服务器么？","提示",{}).then(function(){e.editLoading=!0;var t={};"serInfoTab"===e.activeTab?Object(o._20)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"同步成功, 共上传"+t.successCnt+"条信息",type:"success"}),e.queryList())}):"serNodeTab"===e.activeTab&&Object(o._22)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"同步成功, 共上传"+t.successCnt+"条信息",type:"success"}),e.queryList())}),e.editLoading=!1})},handleSyncFromLdap:function(){var e=this;this.$confirm("确认将从LDAP服务器同步下载信息么？","提示",{}).then(function(){e.editLoading=!0;var t={};"serInfoTab"===e.activeTab?Object(o._19)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"同步成功, 共下载"+t.successCnt+"条信息",type:"success"}),e.queryList())}):"serNodeTab"===e.activeTab&&Object(o._21)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"同步成功, 共下载"+t.successCnt+"条信息",type:"success"}),e.queryList())}),e.editLoading=!1})},handleCleanUpLdap:function(){var e=this;this.$confirm("确认清空上传到LDAP何从LDAP下载的所有信息么？","提示",{}).then(function(){e.editLoading=!0;var t={};"serInfoTab"===e.activeTab?Object(o.g)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"重置成功",type:"success"}),e.queryList())}):"serNodeTab"===e.activeTab&&Object(o.h)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"重置成功",type:"success"}),e.queryList())}),e.editLoading=!1})},handleClose:function(e){var t=this.fatherNodeOptions;this.dialog.node.selection;t.push(e);for(var n=this.relationTag.length-1;n>=0;n--)if(this.relationTag[n].nodeUuid===e.nodeUuid){this.relationTag.splice(n,1);break}},handleFatherClose:function(e){var t=this.fatherNodeOptions;this.dialog.node.selection;t.push(e);for(var n=this.fatherTag.length-1;n>=0;n--)if(this.fatherTag[n].nodeUuid===e.nodeUuid){this.fatherTag.splice(n,1);break}},handleDialogCommit:function(){for(var e=this.dialog.node.table.data,t=0;t<this.dialog.node.selection.length;t++)for(var n=e.length-1;n>=0;n--)if(e[n].nodeUuid===this.dialog.node.selection[t].nodeUuid){e.splice(n,1);break}if("relation"===this.dialog.node.type)for(t=0;t<this.dialog.node.selection.length;t++)this.relationTag.push(this.dialog.node.selection[t]);if("father"===this.dialog.node.type)for(t=0;t<this.dialog.node.selection.length;t++)this.fatherTag.push(this.dialog.node.selection[t]);this.dialog.node.visible=!1},handleSelectionChange:function(e){this.dialog.node.selection=e},handleDialogClose:function(){this.$refs.selectNodeTable.clearSelection(),this.dialog.node.visible=!1},addRelationNode:function(){this.dialog.node.type="relation",this.dialog.node.table.data=this.fatherNodeOptions,this.dialog.node.visible=!0},addFatherNode:function(){this.dialog.node.type="father",this.dialog.node.table.data=this.fatherNodeOptions,this.dialog.node.visible=!0}},mounted:function(){this.queryList()}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("el-tab-pane",{attrs:{label:"服务设备信息",name:"serInfoTab"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"服务节点信息",name:"serNodeTab"}})],1),e._v(" "),n("el-form",{ref:"filters",attrs:{inline:!0,model:e.filters,"label-width":"80px",size:"mini"}},[n("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px",margin:"0px"},attrs:{span:24}},[n("el-form-item",{attrs:{span:3}},[n("el-button",{on:{click:function(t){e.queryList()}}},[e._v("查询")])],1),e._v(" "),n("el-form-item",{attrs:{span:3}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleShowAddDialog()}}},[e._v("新增")])],1),e._v(" "),n("el-form-item",{attrs:{span:3}},[n("el-dropdown",[n("el-button",{attrs:{type:"primary"}},[e._v("\n                    LDAP操作"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(t){e.handleSyncToLdap()}}},[e._v("上传到LDAP")]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(t){e.handleSyncFromLdap()}}},[e._v("从LDAP下载")]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(t){e.handleCleanUpLdap()}}},[e._v("重置LDAP数据")])],1)],1)],1)],1)],1),e._v(" "),"serInfoTab"===e.activeTab?n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.serInfoVOs,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[n("el-table-column",{attrs:{prop:"serNo",label:"设备编号",width:"180"}}),e._v(" "),n("el-table-column",{attrs:{prop:"serName",label:"设备名称",width:"200"}}),e._v(" "),n("el-table-column",{attrs:{prop:"serAddr",label:"IP地址",width:"180"}}),e._v(" "),n("el-table-column",{attrs:{prop:"serPort",label:"端口",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"serType",label:"设备类型",formatter:e.serTypeFormat,width:"180",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"sourceType",label:"来源",formatter:e.sourceTypeFormat,width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"syncStatus",label:"同步状态",formatter:e.syncStatusFormat,width:"100"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["SYSTEM"===t.row.sourceType?n("el-button",{attrs:{size:"small"},on:{click:function(n){e.handleShowEditDialog(t.$index,t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),"SYSTEM"===t.row.sourceType?n("el-button",{attrs:{size:"small"},on:{click:function(n){e.handleDelSerInfo(t.$index,t.row)}}},[e._v("删除")]):e._e()]}}])})],1):e._e(),e._v(" "),n("el-dialog",{attrs:{title:"服务设备信息编辑",visible:e.serInfoEditFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.serInfoEditFormVisible=t}}},[n("el-form",{ref:"serInfoEditForm",attrs:{model:e.serInfoEditForm,"label-width":"160px",rules:e.serInfoEditFormRules}},[e._e(),e._v(" "),e.serInfoEditBtnVisible?n("el-form-item",{attrs:{label:"设备UUID",prop:"serUuid"}},[n("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:e.serInfoEditForm.serUuid,callback:function(t){e.$set(e.serInfoEditForm,"serUuid",t)},expression:"serInfoEditForm.serUuid"}})],1):e._e(),e._v(" "),n("el-form-item",{attrs:{label:"设备编号",prop:"serNo"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serNo,callback:function(t){e.$set(e.serInfoEditForm,"serNo",t)},expression:"serInfoEditForm.serNo"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"设备名称",prop:"serName"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serName,callback:function(t){e.$set(e.serInfoEditForm,"serName",t)},expression:"serInfoEditForm.serName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"IP地址",prop:"serAddr"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serAddr,callback:function(t){e.$set(e.serInfoEditForm,"serAddr",t)},expression:"serInfoEditForm.serAddr"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"端口",prop:"serPort"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serPort,callback:function(t){e.$set(e.serInfoEditForm,"serPort",t)},expression:"serInfoEditForm.serPort"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"serPwd"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serPwd,callback:function(t){e.$set(e.serInfoEditForm,"serPwd",t)},expression:"serInfoEditForm.serPwd"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"设备类型",prop:"serType"}},[[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.serInfoEditForm.serType,callback:function(t){e.$set(e.serInfoEditForm,"serType",t)},expression:"serInfoEditForm.serType"}},e._l(e.serTypeOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]],2),e._v(" "),n("el-form-item",{attrs:{label:"协议类型",prop:"serPro"}},[[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.serInfoEditForm.serPro,callback:function(t){e.$set(e.serInfoEditForm,"serPro",t)},expression:"serInfoEditForm.serPro"}},e._l(e.serProOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]],2),e._v(" "),n("el-form-item",{attrs:{label:"服务节点归属",prop:"serNode"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serNode,callback:function(t){e.$set(e.serInfoEditForm,"serNode",t)},expression:"serInfoEditForm.serNode"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.serInfoEditBtnVisible?n("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleEditSerInfo()}}},[e._v("修改")]):e._e(),e._v(" "),e.serInfoAddBtnVisible?n("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleAddSerInfo()}}},[e._v("新增")]):e._e(),e._v(" "),n("el-button",{attrs:{size:"small"},nativeOn:{click:function(t){e.serInfoEditFormVisible=!1}}},[e._v("关闭")])],1)],1),e._v(" "),"serNodeTab"===e.activeTab?n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.serNodeVOs,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[e._e(),e._v(" "),n("el-table-column",{attrs:{prop:"nodeName",label:"节点名称",width:"200"}}),e._v(" "),n("el-table-column",{attrs:{prop:"nodeUuid",label:"节点UUID",width:"280"}}),e._v(" "),n("el-table-column",{attrs:{prop:"nodeFather",label:"上级服务节点ID",width:"280",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"nodeRelations",label:"关联服务节点ID",width:"160",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"sourceType",label:"来源",formatter:e.sourceTypeFormat,width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"syncStatus",label:"同步状态",formatter:e.syncStatusFormat,width:"100"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["SYSTEM"===t.row.sourceType?n("el-button",{attrs:{size:"small"},on:{click:function(n){e.handleShowEditDialog(t.$index,t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),"SYSTEM"===t.row.sourceType?n("el-button",{attrs:{size:"small"},on:{click:function(n){e.handleDelSerNode(t.$index,t.row)}}},[e._v("删除")]):e._e()]}}])})],1):e._e(),e._v(" "),n("el-dialog",{attrs:{title:"服务节点信息编辑",visible:e.serNodeEditFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.serNodeEditFormVisible=t}}},[n("el-form",{ref:"serNodeEditForm",attrs:{model:e.serNodeEditForm,"label-width":"160px",rules:e.serNodeEditFormRules}},[e._e(),e._v(" "),e.serNodeEditBtnVisible?n("el-form-item",{attrs:{label:"服务节点UUID",prop:"nodeUuid"}},[n("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:e.serNodeEditForm.nodeUuid,callback:function(t){e.$set(e.serNodeEditForm,"nodeUuid",t)},expression:"serNodeEditForm.nodeUuid"}})],1):e._e(),e._v(" "),n("el-form-item",{attrs:{label:"服务节点名称",prop:"nodeName"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serNodeEditForm.nodeName,callback:function(t){e.$set(e.serNodeEditForm,"nodeName",t)},expression:"serNodeEditForm.nodeName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"上级服务节点",prop:"nodeFather"}},[e._l(e.fatherTag,function(t){return n("el-tag",{key:t.nodeUuid,attrs:{closable:""},on:{close:function(n){e.handleFatherClose(t)}}},[e._v("\n            "+e._s(t.nodeName)+"\n          ")])}),e._v(" "),n("el-button",{staticClass:"button-new-tag-father",attrs:{icon:"el-icon-plus",size:"small"},on:{click:e.addFatherNode}})],2),e._v(" "),n("el-form-item",{attrs:{label:"关联服务节点",prop:"nodeRelations"}},[e._l(e.relationTag,function(t){return n("el-tag",{key:t.nodeUuid,attrs:{closable:""},on:{close:function(n){e.handleClose(t)}}},[e._v("\n              "+e._s(t.nodeName)+"\n            ")])}),e._v(" "),n("el-button",{staticClass:"button-new-tag-relation",attrs:{icon:"el-icon-plus",size:"small"},on:{click:e.addRelationNode}})],2)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.serNodeEditBtnVisible?n("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleEditSerNode()}}},[e._v("修改")]):e._e(),e._v(" "),e.serNodeAddBtnVisible?n("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleAddSerNode()}}},[e._v("新增")]):e._e(),e._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleEditSerNodeClose()}}},[e._v("关闭")])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"选择节点",visible:e.dialog.node.visible,width:"800px","before-close":e.handleDialogClose},on:{"update:visible":function(t){e.$set(e.dialog.node,"visible",t)}}},[n("div",{staticStyle:{height:"450px",position:"relative"}},[n("div",{staticStyle:{position:"absolute",left:"-20px",top:"-20px",right:"-20px",bottom:"-20px"}},[n("div",{staticStyle:{width:"100%",height:"100%",position:"relative"}},[n("div",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0px",right:"0",bottom:"0",padding:"0 10px","box-sizing":"border-box"}},[n("el-table",{ref:"selectNodeTable",staticStyle:{width:"100%"},attrs:{data:e.dialog.node.table.data,height:"100%"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{prop:"nodeName",width:"300",label:"节点名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"nodeUuid",label:"节点Uuid"}})],1)],1)])])]),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:e.handleDialogClose}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleDialogCommit}},[e._v("确定")])],1)])],1)},staticRenderFns:[]},c=n("VU/8")(s,d,!1,null,null,null);t.default=c.exports},"ILV/":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFwmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0xMi0yOVQwOToyMDoyOSswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0xMi0yOVQwOToyMDoyOSswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMTItMjlUMDk6MjA6MjkrMDg6MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OWEyM2EyN2UtNjRiNC1iYjQxLThhNzYtMmQ0MWU1NTlkNmQ1IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6OTcxMzAwOGEtMTA1NS1kYTQzLWI3ZjktZDQ4OTRkNWQ5ODk0IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YzVkNTI1OTktMzM3NS01OTQ2LThmNzEtZGQ5YzMwZGZiOGU0IiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YzVkNTI1OTktMzM3NS01OTQ2LThmNzEtZGQ5YzMwZGZiOGU0IiBzdEV2dDp3aGVuPSIyMDE4LTEyLTI5VDA5OjIwOjI5KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5YTIzYTI3ZS02NGI0LWJiNDEtOGE3Ni0yZDQxZTU1OWQ2ZDUiIHN0RXZ0OndoZW49IjIwMTgtMTItMjlUMDk6MjA6MjkrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+iH+ljQAAAZ9JREFUOI2t1E+ITlEcxvHPKw3jX1PDQix1y8qdsFQX+2l2ShYWkig12fhTkqWwsZqEvYVSshA62bI4GqtjQTSSPxuKms1rcc9r7rzeed9Lfptf95zf8+05nefcTrfbNapCTJNQlcXXUbOrR9LqepT77v8FnGw5Z1XbwX8GhpgOhJgmRglDTBMhpv1DgSGmWTzBbAszZ/A0xHR6IDDEtBNX8Am3WgBv4jOuhZiKQQ4vqi/peFUW70bR8syJrLm0DBhiWocZzFdlcb+Fux70Hl5hJsQ03nS4B2vxoC2sUQ8xjimWcrg197dDRCvVm9y3N4E/cx8bpKjK4uQQ4Jrcf7B05N4llEOEK9WuJqMHfImPmA4xrW9LCjFtwDQ+YP43sCqLLuawBef+wt1Z9Tufy4xlObyKBZwPMR1u4e4ILuA9rvfWO83/YYhpLx5jE27gclUWX/pAm9VBPoVvOFiVxYuBwCyYwl3swCKe4XXeLrBPnYaEQ1VZxKb+D2CGjuEYjqpD38lbXTzHHdyuymKxXzsQ2AffiG35c6Eqi+/D5n8BOquBtE8Bz40AAAAASUVORK5CYII="},IZ07:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("BO1k"),r=n.n(l),a=n("P9l9"),i={data:function(){return{activeTabName:"LayernodeManage",nodes:[],typeOptions:[{value:"",label:"全部类型"},{label:"JV230接入",value:"ACCESS_JV230"},{label:"机顶盒接入",value:"ACCESS_TVOS"},{label:"混合器接入",value:"ACCESS_MIXER"},{label:"手机接入",value:"ACCESS_MOBILE"},{label:"音视频转发服务设备",value:"ACCESS_JV210"},{label:"录像存储服务单元A型",value:"ACCESS_CDN"},{label:"录像存储服务单元B型",value:"ACCESS_VOD"},{label:"监控资源汇接网关",value:"ACCESS_IPC"},{label:"流媒体管理服务设备",value:"ACCESS_STREAMMEDIA"},{label:"联网服务设备",value:"ACCESS_NETWORK"},{label:"显控汇接网关",value:"ACCESS_DISPLAYCTRL"},{label:"流转发器接入",value:"ACCESS_S100"},{label:"点播代理服务设备",value:"ACCESS_VODPROXY"}],typeObj:{ACCESS_MOBILE:"手机接入",ACCESS_JV230:"JV230接入",ACCESS_TVOS:"机顶盒接入",ACCESS_MIXER:"混合器接入",ACCESS_JV210:"音视频转发服务设备",ACCESS_CDN:"录像存储服务单元A型",ACCESS_VOD:"录像存储服务单元B型",ACCESS_IPC:"监控资源汇接网关",ACCESS_STREAMMEDIA:"流媒体管理服务设备",ACCESS_NETWORK:"联网服务设备",ACCESS_DISPLAYCTRL:"显控汇接网关",ACCESS_S100:"流转发器接入",ACCESS_VODPROXY:"点播代理服务设备",ACCESS_WEBRTC:"webrtc接入"},filters:{type:"",keyword:""},nodeTableLoading:!1,multipleSelection:[]}},methods:{gotoMonitor:function(e){window.open(e.monitorUrl)},gotoAdmin:function(e){window.open(e.netUrl)},handleTabClick:function(e,t){"LayernodeManage"!==e.name&&this.$router.push("/"+e.name)},getNodes:function(){var e=this,t={type:this.filters.type,keyword:this.filters.keyword};this.nodeTableLoading=!0,Object(a.E)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.nodes=t.nodes,e.nodeTableLoading=!1})},handleModify:function(e){this.$router.push({path:"/ModifyLayernode",query:{id:e.id}})},handleDelete:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var n={nodeIds:e.id};Object(a.p)(n).then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):(t.$message({message:"删除成功",type:"success"}),t.getNodes())})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleMultiDelete:function(){var e=this;this.multipleSelection.length?this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[],n=!0,l=!1,i=void 0;try{for(var o,s=r()(e.multipleSelection);!(n=(o=s.next()).done);n=!0){var d=o.value;t.push(d.id)}}catch(e){l=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(l)throw i}}var c={nodeIds:t.join(",")};Object(a.p)(c).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"删除成功",type:"success"}),e.getNodes())})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message({message:"请至少选择一行",type:"warning"})},handleSelectionChange:function(e){this.multipleSelection=e}},mounted:function(){var e=this;this.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/LayernodeManage")}),this.getNodes()}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[n("el-tab-pane",{attrs:{label:"层节点列表",name:"LayernodeManage"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"添加层节点",name:"AddLayernode"}})],1),e._v(" "),n("div",{staticStyle:{float:"left",width:"100%"}},[n("el-select",{staticStyle:{float:"left","margin-left":"10px",width:"200px"},attrs:{size:"small",placeholder:"选择层节点类型"},model:{value:e.filters.type,callback:function(t){e.$set(e.filters,"type",t)},expression:"filters.type"}},e._l(e.typeOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),n("el-input",{staticStyle:{float:"left","margin-left":"30px",width:"200px"},attrs:{size:"small",placeholder:"节点名称"},model:{value:e.filters.keyword,callback:function(t){e.$set(e.filters,"keyword",t)},expression:"filters.keyword"}}),e._v(" "),n("el-button",{staticStyle:{float:"left","margin-left":"30px"},attrs:{size:"small",type:"info"},on:{click:e.getNodes}},[e._v("查询")]),e._v(" "),n("el-button",{staticStyle:{float:"left","margin-left":"30px"},attrs:{size:"small",type:"danger"},on:{click:e.handleMultiDelete}},[e._v("批量删除")])],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.nodeTableLoading,expression:"nodeTableLoading"}],staticStyle:{float:"left",width:"100%","margin-top":"20px"},attrs:{data:e.nodes},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{width:"100",type:"selection"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"名称",width:"200",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"type",label:"层节点类型",width:"200",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[n("span",{domProps:{textContent:e._s(e.typeObj[t.row.type])}})])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"nodeUid",label:"层节点ID",width:"300",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"ip",label:"层节点IP",width:"200",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{width:"150",label:"在线状态"},scopedSlots:e._u([{key:"default",fn:function(e){return["ONLINE"==e.row.onlineStatus?n("div",{staticStyle:{height:"20px",width:"20px","border-radius":"50%","background-color":"#0f0"}}):n("div",{staticStyle:{height:"20px",width:"20px","border-radius":"50%","background-color":"#f00"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.handleModify(t.row)}}},[e._v("修改")]),e._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.handleDelete(t.row)}}},[e._v("删除")]),e._v(" "),t.row.monitorUrl?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.gotoMonitor(t.row)}}},[e._v("监控")]):n("el-button",{attrs:{type:"text",size:"small",disabled:""}},[e._v("监控")]),e._v(" "),t.row.netUrl?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.gotoAdmin(t.row)}}},[e._v("网管")]):n("el-button",{attrs:{type:"text",size:"small",disabled:""}},[e._v("网管")])]}}])})],1)],1)},staticRenderFns:[]};var s=n("VU/8")(i,o,!1,function(e){n("RC4b")},null,null);t.default=s.exports},"J/7U":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("+b1m"),r={name:"sidebar",components:{sidebarItem:n("XvCJ").default},props:{routes:{type:Array},active:{type:String},menurouter:{type:Boolean,required:!0}},data:function(){return{isCollapse:!1,logo:{img:"~assets/bvclogo.png"}}},methods:{handleopen:function(){},handleclose:function(){},handleselect:function(e,t){}},mounted:function(){var e=this;l.a.$on("collapseMenuEvent",function(t){e.isCollapse=t})}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("aside",{class:[e.isCollapse?"collapseMenu":"unCollapseMenu"]},[e.menurouter?n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{collapse:e.isCollapse,"default-active":e.active,router:"","background-color":"#37404f","text-color":"#bfcfd9","active-text-color":"#ffffff"},on:{open:e.handleopen,close:e.handleclose,select:e.handleselect}},e._l(e.routes,function(t){return n("sidebarItem",{key:t.path,attrs:{item:t,menurouter:e.menurouter}})})):n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{collapse:e.isCollapse,"default-active":e.active,"background-color":"#37404f","text-color":"#bfcfd9","active-text-color":"#ffffff"},on:{open:e.handleopen,close:e.handleclose,select:e.handleselect}},e._l(e.routes,function(t){return n("sidebarItem",{key:t.path,attrs:{item:t,menurouter:e.menurouter}})}))],1)},staticRenderFns:[]};var i=n("VU/8")(r,a,!1,function(e){n("tGMC")},null,null);t.default=i.exports},KDw3:function(e,t){},KLRY:function(e,t){},KWKb:function(e,t){},LKA7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("0nep");var l=n("+b1m"),r=n("P9l9"),a={name:"headerbar",props:{sysUserName:{type:String},routes:{type:Array},active:{type:String}},data:function(){return{isCollapsed:!1,userimg:"~assets/user.png",showRemindHover:!1,showExitHover:!1}},methods:{logout:function(){this.$confirm("确认退出吗?","提示",{}).then(function(){Object(r.M)(null).then(function(e){window.location.href="/web/app/login/login.html"})}).catch(function(){})},remindHover:function(e){this.showRemindHover=e},exitHover:function(e){this.showExitHover=e},collapseMenu:function(){this.isCollapsed?this.isCollapsed=!1:this.isCollapsed=!0,l.a.$emit("collapseMenuEvent",this.isCollapsed)}}},i={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"header"},[l("el-col",{staticClass:"header-col",attrs:{span:6}},[l("div",{staticClass:"collapsed-icon-wrapper",on:{click:function(t){e.collapseMenu()}}},[e.isCollapsed?e._e():l("img",{staticClass:"collapsed-icon",attrs:{src:n("Caey")}}),e._v(" "),e.isCollapsed?l("img",{staticClass:"collapsed-icon",attrs:{src:n("B1Ru")}}):e._e()]),e._v(" "),l("div",{staticClass:"logo-wrapper"},[l("img",{staticClass:"logo-img",attrs:{src:n("51G+")}})])]),e._v(" "),l("el-col",{staticClass:"header-col",attrs:{span:12}},[l("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal","default-active":e.active,"unique-opened":"",router:"","background-color":"#37404f","text-color":"#bfcfd9","active-text-color":"#ffffff"}},[e._l(e.routes,function(t,n){return t.hidden?e._e():[t.hidden?e._e():l("el-menu-item",{key:t.path,staticStyle:{height:"50px"},attrs:{index:t.path}},[e._v(e._s(t.name))])]})],2)],1),e._v(" "),l("el-col",{staticClass:"header-col",attrs:{span:6}},[l("div",{staticStyle:{float:"right","margin-right":"10px"}},[e._v("\n\t\t\t\tVersion：1.3.0_95731\n\t\t\t")]),e._v(" "),l("div",{staticClass:"logout-icon-wrapper notice-wrapper",on:{click:e.logout,mouseenter:function(t){e.exitHover(!0)},mouseleave:function(t){e.exitHover(!1)}}},[e.showExitHover?e._e():l("img",{staticClass:"logout-icon",attrs:{src:n("ILV/")}}),e._v(" "),e.showExitHover?l("img",{staticClass:"logout-icon",attrs:{src:n("RH6s")}}):e._e()]),e._v(" "),l("div",{staticClass:"reminder-icon-wrapper notice-wrapper",on:{mouseenter:function(t){e.remindHover(!0)},mouseleave:function(t){e.remindHover(!1)}}},[e.showRemindHover?e._e():l("img",{staticClass:"reminder-icon",attrs:{src:n("71sA")}}),e._v(" "),e.showRemindHover?l("img",{staticClass:"reminder-icon",attrs:{src:n("Lo3N")}}):e._e()]),e._v(" "),l("div",{staticClass:"notice-wrapper"},[l("span",[l("img",{staticClass:"userinfo-icon",attrs:{src:n("8tHC")}}),e._v(" "+e._s(e.sysUserName))])])])],1)},staticRenderFns:[]};var o=n("VU/8")(a,i,!1,function(e){n("KWKb")},"data-v-cc1e7b06",null);t.default=o.exports},Lo3N:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAIf2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMTItMjlUMTA6MTA6NDIrMDg6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMTItMjlUMTA6MTE6MDQrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTEyLTI5VDEwOjExOjA0KzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3N2NkM2VkMi00M2E0LWUxNDMtYTVmOC1kNGIzMWRjOGE5MTgiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0YmJiMzE1MS0xZTZiLWE1NDMtYTAzOS01NTEyZTFiOWEwZDIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozNmIyMDhkNS03MjgxLTU4NDgtOWQ0NC1mYjRjMjZhOGNmMGYiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjM2YjIwOGQ1LTcyODEtNTg0OC05ZDQ0LWZiNGMyNmE4Y2YwZiIgc3RFdnQ6d2hlbj0iMjAxOC0xMi0yOVQxMDoxMDo0MiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MjRhYWNiNDktNzMxMS01MzQ5LWFkNmUtNzE3NmFmNDA0OWEzIiBzdEV2dDp3aGVuPSIyMDE4LTEyLTI5VDEwOjExOjA0KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImRlcml2ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImNvbnZlcnRlZCBmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo3N2NkM2VkMi00M2E0LWUxNDMtYTVmOC1kNGIzMWRjOGE5MTgiIHN0RXZ0OndoZW49IjIwMTgtMTItMjlUMTA6MTE6MDQrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjI0YWFjYjQ5LTczMTEtNTM0OS1hZDZlLTcxNzZhZjQwNDlhMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozNmIyMDhkNS03MjgxLTU4NDgtOWQ0NC1mYjRjMjZhOGNmMGYiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozNmIyMDhkNS03MjgxLTU4NDgtOWQ0NC1mYjRjMjZhOGNmMGYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4pT+gOAAABJklEQVQ4jbWVsUoDQRRFz7ppjFgJChaWprBNlybY2FpbpLP3C/IbFv5BQBA7f0HSphFsBBVJZSEaZLkWuZJh2ZkdUS885vHm3TPsPIYtJNGidWDP+QPwnuyWFIu+pGtJC620cK0f88VgZ5IqQ6aSzh1T1yr3ZAFPbHqSNGzYH3pP7k0CNyXNJb1K6iWuo+eeuT1R4MgnjxOw7xi7dxTW12ozGni9bBt90DMIi3Xgttf7DOBjzdMILLx+ZADrnkbgr/XvwM4PvJ9NniJ4yzvADKic5+gFKIED53SALnABHAFbwDNwlQmsWE55BtwAp4WkXeAO2MiExPQG7Ief/Cdqm3IJHLO8lq7zMuloea+Hfq+3DrkW9bQBO5ImWmniWtSTe4fhLyCpL/OK6D1IVzbiAAAAAElFTkSuQmCC"},N1ET:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("router-view")],1)],1)},staticRenderFns:[]};var a=n("VU/8")({name:"app"},r,!1,function(e){n("VBmB")},null,null).exports,i=n("YaEn"),o=n("zL8q"),s=n.n(o);n("9goZ"),n("tvR6"),n("KLRY"),n("wdO+");l.default.config.productionTip=!1,l.default.use(s.a),new l.default({el:"#app",router:i.a,components:{app:a},template:"<app/>"})},Opzk:function(e,t,n){var l={"./404.vue":["+H76"],"./Home.vue":["j7e0"],"./Main.vue":["VZrM"],"./bind/UserBindBundle.vue":["r1Id"],"./bundle/AddBundle.vue":["ifcc"],"./bundle/BundleManage.vue":["dLi2"],"./bundle/ConfigBundle.vue":["PPfX"],"./bundle/ModifyBundle.vue":["V5AO"],"./folder/FolderManage.vue":["kCLY"],"./frame/headerbar.vue":["LKA7"],"./frame/sidebar.vue":["J/7U"],"./frame/sidebarItem.vue":["XvCJ"],"./layernode/AddLayerNode.vue":["EUih"],"./layernode/LayerNodeManage.vue":["IZ07"],"./layernode/ModifyLayerNode.vue":["snKp"],"./layernode/SelectLayerNode.vue":["/Qkj"],"./middleLayer.vue":["345n",0],"./privilege/BindResource.vue":["4vq3"],"./privilege/BindVirtualResource.vue":["BXv7"],"./serInfo/SerInfoAndNode.vue":["HV9H"],"./template/BundleTemplateManage.vue":["qoXU"],"./template/ChannelTemplateManage.vue":["Pu6j"]};function r(e){var t=l[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}r.keys=function(){return Object.keys(l)},r.id="Opzk",e.exports=r},P9l9:function(e,t,n){"use strict";n.d(t,"C",function(){return h}),n.d(t,"B",function(){return p}),n.d(t,"G",function(){return m}),n.d(t,"F",function(){return f}),n.d(t,"q",function(){return b}),n.d(t,"v",function(){return v}),n.d(t,"z",function(){return g}),n.d(t,"n",function(){return y}),n.d(t,"a",function(){return I}),n.d(t,"S",function(){return w}),n.d(t,"O",function(){return A}),n.d(t,"x",function(){return N}),n.d(t,"w",function(){return k}),n.d(t,"k",function(){return S}),n.d(t,"A",function(){return M}),n.d(t,"H",function(){return x}),n.d(t,"J",function(){return T}),n.d(t,"_12",function(){return C}),n.d(t,"_13",function(){return R}),n.d(t,"_14",function(){return E}),n.d(t,"y",function(){return F}),n.d(t,"u",function(){return _}),n.d(t,"I",function(){return D}),n.d(t,"E",function(){return O}),n.d(t,"p",function(){return Z}),n.d(t,"_6",function(){return L}),n.d(t,"D",function(){return P}),n.d(t,"X",function(){return j}),n.d(t,"b",function(){return B}),n.d(t,"o",function(){return G}),n.d(t,"K",function(){return z}),n.d(t,"L",function(){return W}),n.d(t,"P",function(){return U}),n.d(t,"_8",function(){return Y}),n.d(t,"_3",function(){return V}),n.d(t,"T",function(){return J}),n.d(t,"_2",function(){return Q}),n.d(t,"_9",function(){return H}),n.d(t,"_4",function(){return $}),n.d(t,"Y",function(){return X}),n.d(t,"_10",function(){return q}),n.d(t,"_5",function(){return K}),n.d(t,"e",function(){return ee}),n.d(t,"N",function(){return te}),n.d(t,"j",function(){return ne}),n.d(t,"_7",function(){return le}),n.d(t,"_18",function(){return re}),n.d(t,"_17",function(){return ae}),n.d(t,"i",function(){return ie}),n.d(t,"Z",function(){return oe}),n.d(t,"_0",function(){return se}),n.d(t,"c",function(){return de}),n.d(t,"d",function(){return ce}),n.d(t,"Q",function(){return ue}),n.d(t,"R",function(){return he}),n.d(t,"l",function(){return pe}),n.d(t,"m",function(){return me}),n.d(t,"g",function(){return fe}),n.d(t,"h",function(){return be}),n.d(t,"_21",function(){return ve}),n.d(t,"_22",function(){return ge}),n.d(t,"_19",function(){return ye}),n.d(t,"_20",function(){return Ie}),n.d(t,"W",function(){return we}),n.d(t,"_16",function(){return Ae}),n.d(t,"_15",function(){return Ne}),n.d(t,"f",function(){return ke}),n.d(t,"_1",function(){return Se}),n.d(t,"_11",function(){return Me}),n.d(t,"V",function(){return xe}),n.d(t,"U",function(){return Te}),n.d(t,"M",function(){return Ce}),n.d(t,"s",function(){return Re}),n.d(t,"r",function(){return Ee}),n.d(t,"t",function(){return Fe}),n.d(t,"_23",function(){return _e});var l=n("//Fk"),r=n.n(l),a=n("mtWM"),i=n.n(a),o=n("mw3O"),s=document.location.host.split(":")[0],d="http://__requestIP__:8093",c="http://__requestIP__:8093/vue";-1!==d.indexOf("__requestIP__")&&(d=d.replace("__requestIP__",s)),-1!==c.indexOf("__requestIP__")&&(c=c.replace("__requestIP__",s));var u=i.a.create({headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/x-www-form-urlencoded","Access-Control-Allow-Headers":"Content-Type, Content-Length, Authorization, Accept, X-Requested-With , yourHeaderFeild","Access-Control-Allow-Methods":"PUT,POST,GET,DELETE,OPTIONS"},withCredentials:!1});u.interceptors.request.use(function(e){return e.headers["tetris-001"]=sessionStorage.getItem("token"),e.headers.Authorization=sessionStorage.getItem("token"),e},function(e){return r.a.reject(e)}),u.interceptors.response.use(function(e){return e},function(e){401===e.response.status&&alert("超时，请重新登录!")});var h=function(e){return u.post(d+"/user/getLoginUserName",o.stringify(e)).then(function(e){return e.data})},p=function(e){return u.post(d+"/template/getDeviceModels",o.stringify(e)).then(function(e){return e.data})},m=function(e){return u.post(d+"/template/abilityTemplates",o.stringify(e)).then(function(e){return e.data})},f=function(e){return u.post(d+"/template/tree",o.stringify(e)).then(function(e){return e.data})},b=function(e){return u.post(d+"/template/delete",o.stringify(e)).then(function(e){return e.data})},v=function(e){return u.post(d+"/user/getAllUser",o.stringify(e)).then(function(e){return e.data})},g=function(e){return u.post(d+"/bundle/query",o.stringify(e)).then(function(e){return e.data})},y=function(e){return u.post(d+"/bundle/delete",o.stringify(e)).then(function(e){return e.data})},I=function(e){return u.post(d+"/bundle/add",o.stringify(e)).then(function(e){return e.data})},w=function(e){return u.post(d+"/bundle/queryExtraInfo",o.stringify(e)).then(function(e){return e.data})},A=function(e){return u.post(d+"/bundle/modifyExtraInfo",o.stringify(e)).then(function(e){return e.data})},N=function(e){return u.post(d+"/bundle/getBundleChannels",o.stringify(e)).then(function(e){return e.data})},k=function(e){return u.post(d+"/ability/getBundleAbility",o.stringify(e)).then(function(e){return e.data})},S=function(e){return u.post(d+"/ability/configBundle",o.stringify(e)).then(function(e){return e.data})},M=function(e){return u.post(d+"/resource/queryBundlesOfRole",o.stringify(e)).then(function(e){return e.data})},x=function(e){return u.post(d+"/resource/queryUsersOfRole",o.stringify(e)).then(function(e){return e.data})},T=function(e){return u.post(d+"/resource/queryVirtualResourcesOfRole",o.stringify(e)).then(function(e){return e.data})},C=function(e){return u.post(d+"/resource/submitBundlePrivilege",o.stringify(e)).then(function(e){return e.data})},R=function(e){return u.post(d+"/resource/submitUserresPrivilege",o.stringify(e)).then(function(e){return e.data})},E=function(e){return u.post(d+"/resource/submitVirtualResourcePrivilege",o.stringify(e)).then(function(e){return e.data})},F=function(e){return u.post(d+"/bundle/queryExtraInfo",o.stringify(e)).then(function(e){return e.data})},_=function(e){return u.post(d+"/user/getAllRoles",o.stringify(e)).then(function(e){return e.data})},D=function(e){return u.post(d+"/resource/queryVirtualResourceInfo",o.stringify(e)).then(function(e){return e.data})},O=function(e){return u.post(d+"/layernode/query",o.stringify(e)).then(function(e){return e.data})},Z=function(e){return u.post(d+"/layernode/delete",o.stringify(e)).then(function(e){return e.data})},L=function(e){return u.post(d+"/layernode/save",o.stringify(e)).then(function(e){return e.data})},P=function(e){return u.post(d+"/layernode/getNode",o.stringify(e)).then(function(e){return e.data})},j=function(e){return u.post(d+"/folder/query/tree",o.stringify(e)).then(function(e){return e.data})},B=function(e){return u.post(d+"/folder/add",o.stringify(e)).then(function(e){return e.data})},G=function(e){return u.post(d+"/folder/delete",o.stringify(e)).then(function(e){return e.data})},z=function(e){return u.post(d+"/folder/initTree",o.stringify(e)).then(function(e){return e.data})},W=function(e){return u.post(d+"/folder/initTreeWithOutMember",o.stringify(e)).then(function(e){return e.data})},U=function(e){return u.post(d+"/folder/modify",o.stringify(e)).then(function(e){return e.data})},Y=function(e){return u.post(d+"/folder/setFolderOfBundles",o.stringify(e)).then(function(e){return e.data})},V=function(e){return u.post(d+"/folder/resetFolderOfBundles",o.stringify(e)).then(function(e){return e.data})},J=function(e){return u.post(d+"/folder/queryBundlesWithoutFolder",o.stringify(e)).then(function(e){return e.data})},Q=function(e){return u.post(d+"/folder/queryUsersWithoutFolder",o.stringify(e)).then(function(e){return e.data})},H=function(e){return u.post(d+"/folder/setFolderToUsers",o.stringify(e)).then(function(e){return e.data})},$=function(e){return u.post(d+"/folder/resetFolderOfUsers",o.stringify(e)).then(function(e){return e.data})},X=function(e){return u.post(d+"/folder/queryRootOptions",o.stringify(e)).then(function(e){return e.data})},q=function(e){return u.post(d+"/folder/setRoot",o.stringify(e)).then(function(e){return e.data})},K=function(e){return u.post(d+"/folder/resetRootNode",o.stringify(e)).then(function(e){return e.data})},ee=function(e){return u.post(d+"/folder/changeNodePosition",o.stringify(e)).then(function(e){return e.data})},te=function(e){return u.post(d+"/bundle/logout",o.stringify(e)).then(function(e){return e.data})},ne=function(e){return u.post(d+"/bundle/clear",o.stringify(e)).then(function(e){return e.data})},le=function(e){return u.post(d+"/bundle/setAccessLayer",o.stringify(e)).then(function(e){return e.data})},re=function(e){return u.post(d+"/folder/syncToLdap",o.stringify(e)).then(function(e){return e.data})},ae=function(e){return u.post(d+"/folder/syncFromLdap",o.stringify(e)).then(function(e){return e.data})},ie=function(e){return u.post(d+"/folder/cleanUpLdap",o.stringify(e)).then(function(e){return e.data})},oe=function(e){return u.post(d+"/serInfo/querySerInfo",o.stringify(e)).then(function(e){return e.data})},se=function(e){return u.post(d+"/serInfo/querySerNode",o.stringify(e)).then(function(e){return e.data})},de=function(e){return u.post(d+"/serInfo/addSerInfo",o.stringify(e)).then(function(e){return e.data})},ce=function(e){return u.post(d+"/serInfo/addSerNode",o.stringify(e)).then(function(e){return e.data})},ue=function(e){return u.post(d+"/serInfo/modifySerInfo",o.stringify(e)).then(function(e){return e.data})},he=function(e){return u.post(d+"/serInfo/modifySerNode",o.stringify(e)).then(function(e){return e.data})},pe=function(e){return u.post(d+"/serInfo/delSerInfo",o.stringify(e)).then(function(e){return e.data})},me=function(e){return u.post(d+"/serInfo/delSerNode",o.stringify(e)).then(function(e){return e.data})},fe=function(e){return u.post(d+"/serInfo/cleanUpSerInfo",o.stringify(e)).then(function(e){return e.data})},be=function(e){return u.post(d+"/serInfo/cleanUpSerNode",o.stringify(e)).then(function(e){return e.data})},ve=function(e){return u.post(d+"/serInfo/syncSerNodeFromLdap",o.stringify(e)).then(function(e){return e.data})},ge=function(e){return u.post(d+"/serInfo/syncSerNodeToLdap",o.stringify(e)).then(function(e){return e.data})},ye=function(e){return u.post(d+"/serInfo/syncSerInfoFromLdap",o.stringify(e)).then(function(e){return e.data})},Ie=function(e){return u.post(d+"/serInfo/syncSerInfoToLdap",o.stringify(e)).then(function(e){return e.data})},we=function(e){return u.post(d+"/serInfo/queryFatherNodeOptions",o.stringify(e)).then(function(e){return e.data})},Ae=function(e){return u.post(d+"/bundle/syncFromLdap",o.stringify(e)).then(function(e){return e.data})},Ne=function(e){return u.post(d+"/bundle/syncToLdap",o.stringify(e)).then(function(e){return e.data})},ke=function(e){return u.post(d+"/bundle/cleanUpLdap",o.stringify(e)).then(function(e){return e.data})},Se=function(e){return u.post(d+"/user/bind/bundle/query",o.stringify(e)).then(function(e){return e.data})},Me=function(e){return u.post(d+"/user/bind/bundle/bind",o.stringify(e)).then(function(e){return e.data})},xe=function(e){return u.post(d+"/user/bind/bundle/query/encoders",o.stringify(e)).then(function(e){return e.data})},Te=function(e){return u.post(d+"/user/bind/bundle/query/decoders",o.stringify(e)).then(function(e){return e.data})},Ce=function(e){return u.post(d+"/do/logout",o.stringify(e)).then(function(e){return e.data})},Re=function(e){return u.post(d+"/folder/export",e,{responseType:"blob"})},Ee=function(e){return u.post(d+"/bundle/export",e,{responseType:"blob"})},Fe=function(e){return u.post(d+"/folder/user/export",e,{responseType:"blob"})},_e=function(e){return u.post(d+"/bundle/syncUser",o.stringify(e)).then(function(e){return e.data})}},PPfX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("mvHQ"),r=n.n(l),a=n("P9l9"),i={name:"ConfigBundle",data:function(){return{activeTabName:"ConfigBundle",bundleId:this.$route.query.bundleId,templateTree:[],treeProps:{children:"children",label:"label"},configChannels:[],configEditableAttrs:[]}},methods:{handleTabClick:function(e,t){"ConfigBundle"!==e.name&&this.$router.push("/"+e.name)},displayBundleAbility:function(e){var t=this,n={bundleId:this.bundleId};Object(a.w)(n).then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):(t.templateTree=e.tree,t.configChannels=e.configChannels,t.configEditableAttrs=e.configEditableAttrs)})},submit:function(){var e=this,t={bundleId:this.bundleId,configChannels:r()(this.configChannels),configEditableAttrs:r()(this.configEditableAttrs)};Object(a.k)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.$message({message:"配置成功",type:"success"})})}},mounted:function(){this.displayBundleAbility()}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[n("el-tab-pane",{attrs:{label:"资源列表",name:"BundleManage"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"能力配置",name:"ConfigBundle"}})],1),e._v(" "),n("el-card",{staticStyle:{float:"left","margin-left":"50px","margin-top":"10px",width:"40%","min-height":"700px"},attrs:{"body-style":"padding:0px"}},[n("div",{staticStyle:{height:"15px"},attrs:{slot:"header"},slot:"header"},[n("span",{staticStyle:{float:"left","font-size":"18px"}},[e._v("模板属性")])]),e._v(" "),n("el-tree",{attrs:{data:e.templateTree,props:e.treeProps,"node-key":"label","default-expanded-keys":["channels"]}})],1),e._v(" "),n("el-card",{staticStyle:{float:"left","margin-top":"10px",width:"50%","min-height":"700px"},attrs:{"body-style":"padding:0px"}},[n("div",{staticStyle:{height:"15px"},attrs:{slot:"header"},slot:"header"},[n("span",{staticStyle:{float:"left","font-size":"18px"}},[e._v("配置")])]),e._v(" "),e._l(e.configChannels,function(t,l){return n("div",{staticStyle:{"margin-top":"10px"}},[n("el-input",{attrs:{placeholder:"请输入整数"},model:{value:t.channelCnt,callback:function(n){e.$set(t,"channelCnt",n)},expression:"channel.channelCnt"}},[n("template",{slot:"prepend"},[e._v(e._s(t.channelName)+" 通道数")])],2)],1)}),e._v(" "),e._l(e.configEditableAttrs,function(t,l){return n("div",{staticStyle:{"margin-top":"10px"}},[n("el-input",{attrs:{placeholder:"请输入字段值"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"editableAttr.value"}},[n("template",{slot:"prepend"},[e._v(e._s(t.name))])],2)],1)}),e._v(" "),n("div",{staticStyle:{"margin-top":"50px"}},[n("el-button",{staticStyle:{"margin-left":"300px"},attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],2)],1)},staticRenderFns:[]};var s=n("VU/8")(i,o,!1,function(e){n("N1ET")},"data-v-b0c905f0",null);t.default=s.exports},Pu6j:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var r=n("VU/8")({name:"channelTemplateManage"},l,!1,function(e){n("vUY2")},"data-v-368a0225",null);t.default=r.exports},RC4b:function(e,t){},RH6s:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAIf2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMTItMjlUMTA6MTA6NDIrMDg6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMTItMjlUMTA6MTA6NTQrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTEyLTI5VDEwOjEwOjU0KzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyY2VlOWQ5NS1jODAxLWRkNGMtYTBkMi03ZjIzYTY0NjNiOWMiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpkMDEyZTllMS1hMGY0LTcxNDYtODYyYy02NmMxZGE2MTYyZjciIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozNmIyMDhkNS03MjgxLTU4NDgtOWQ0NC1mYjRjMjZhOGNmMGYiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjM2YjIwOGQ1LTcyODEtNTg0OC05ZDQ0LWZiNGMyNmE4Y2YwZiIgc3RFdnQ6d2hlbj0iMjAxOC0xMi0yOVQxMDoxMDo0MiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTU5MzgyOTktYThjYi1iOTQ0LTllMmUtZGFiMTM2YWZhMjU0IiBzdEV2dDp3aGVuPSIyMDE4LTEyLTI5VDEwOjEwOjU0KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImRlcml2ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImNvbnZlcnRlZCBmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoyY2VlOWQ5NS1jODAxLWRkNGMtYTBkMi03ZjIzYTY0NjNiOWMiIHN0RXZ0OndoZW49IjIwMTgtMTItMjlUMTA6MTA6NTQrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjU1OTM4Mjk5LWE4Y2ItYjk0NC05ZTJlLWRhYjEzNmFmYTI1NCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozNmIyMDhkNS03MjgxLTU4NDgtOWQ0NC1mYjRjMjZhOGNmMGYiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozNmIyMDhkNS03MjgxLTU4NDgtOWQ0NC1mYjRjMjZhOGNmMGYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz431U1NAAABeElEQVQ4jaWUvUodURSFvxuDUVEQ1EIiQkAEK5WYMoW+gGAjhDyAWARCGvMaksYXULAWOy3sDAhiulh4ERUMpBCJooJfitnjnXu98xOy4LCGfdZanLPZZ2oqFTAQ/LtMWKsYeBD8tkz4skoajROW4kVV4f8EzgH9Fbz9wGxZ4GdgJ7gMX4Bd4FNTVU3XhPqgXqqjmTpqPVa2Nqr+Cs94Ws8KNkww32LMC0RdCM96a2CPeqsetTEVBaL+UG/UbvWphzNAF7BVoXet2Aa6gWlozOFwcL3AlIeT4JFs4G1wZ45puSDwVfANNMbmNHiqwJiHyWxG+pZrwAXQAbwB/lQM6yVp0x3JlU1PKLAGDAFf/+F0KyTvfC0ymuawVz1TH9UPOSOSXR9jBk/D+2ywUd+pVyFcVQfbBA2q30Jzpc5k99v9D6eBTWAMuAf2gOPYGwfek0zDT2AROGxy51ynU11Wv0cLUjyq++pSaJ55q/yx+4DX8X0OXBeJ/wJjhre8ye9X2AAAAABJRU5ErkJggg=="},UOlw:function(e,t,n){"use strict";(function(e){var l=n("P9l9"),r=n("LKA7"),a=n("J/7U");t.a={components:{headerbar:r.default,sidebar:a.default},computed:{routes:function(){return e.antRouter},shortCutsRoutes:function(){return e.shortCutsRouter}},data:function(){return{sysName:"告警与操作日志",active:"",collapsed:!1,sysUserName:"",sysUserAvatar:"",menurouter:!1,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}}},methods:{setActive:function(e){this.active=e},onSubmit:function(){console.log("submit!")},getLoginUserName:function(){var e=this;Object(l.C)().then(function(t){return e.sysUserName=t.userName,t.userName})},storeToken:function(){this.$route.query.token&&sessionStorage.setItem("token",this.$route.query.token)}},mounted:function(){this.active=this.$route.path,this.storeToken(),this.getLoginUserName()}}}).call(t,n("DuR2"))},V5AO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("BO1k"),r=n.n(l),a=n("mvHQ"),i=n.n(a),o=n("P9l9"),s={name:"ModifyBundle",data:function(){return{activeTabName:"ModifyBundle",bundleId:this.$route.query.bundleId,bundleName:this.$route.query.bundleName,deviceIp:this.$route.query.deviceIp,devicePort:this.$route.query.devicePort,extraInfos:[]}},methods:{handleTabClick:function(e,t){"ModifyBundle"!==e.name&&this.$router.push("/"+e.name)},queryBundleExtraInfo:function(){var e=this,t={bundleId:this.bundleId};Object(o.S)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.extraInfos=t.extraInfos})},addExtraInfo:function(){this.extraInfos.push({})},remove:function(e){var t=this.extraInfos.indexOf(e);-1!==t&&this.extraInfos.splice(t,1)},submit:function(){var e=this;if(this.validateExtraInfo()){var t={bundleId:this.bundleId,bundleName:this.bundleName,deviceIp:this.deviceIp,devicePort:this.devicePort,extraInfos:i()(this.extraInfos)};Object(o.O)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.$message({message:"修改成功",type:"success"})})}},validateExtraInfo:function(){var e=!0,t=!1,n=void 0;try{for(var l,a=r()(this.extraInfos);!(e=(l=a.next()).done);e=!0){var i=l.value;if(!i.name||!i.value)return this.$message({message:"扩展字段不能为空",type:"error"}),!1}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!0}},mounted:function(){this.queryBundleExtraInfo()}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[n("el-tab-pane",{attrs:{label:"资源列表",name:"BundleManage"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"修改资源",name:"ModifyBundle"}})],1),e._v(" "),n("el-form",{attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{size:"small",label:"设备名称",prop:"bundleName"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入新的设备名称"},model:{value:e.bundleName,callback:function(t){e.bundleName=t},expression:"bundleName"}})],1),e._v(" "),n("el-form-item",{attrs:{size:"small",label:"设备IP",prop:"deviceIp"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入新的设备IP"},model:{value:e.deviceIp,callback:function(t){e.deviceIp=t},expression:"deviceIp"}})],1),e._v(" "),n("el-form-item",{attrs:{size:"small",label:"设备端口",prop:"devicePort"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入新的设备端口"},model:{value:e.devicePort,callback:function(t){e.devicePort=t},expression:"devicePort"}})],1),e._v(" "),n("el-button",{staticStyle:{"margin-top":"20px","margin-left":"30px"},attrs:{type:"info",size:"small"},on:{click:e.addExtraInfo}},[e._v("新增扩展字段")]),e._v(" "),e._l(e.extraInfos,function(t,l){return n("div",{staticStyle:{"margin-top":"10px"}},[n("el-input",{staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"扩展字段名"},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"extraInfo.name"}}),e._v(" "),n("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{size:"small",placeholder:"扩展字段值"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"extraInfo.value"}}),e._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"danger"},on:{click:function(n){n.preventDefault(),e.remove(t)}}},[e._v("删除")])],1)}),e._v(" "),n("div",{staticStyle:{"margin-top":"30px","margin-left":"30px"}},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],2)],1)},staticRenderFns:[]};var c=n("VU/8")(s,d,!1,function(e){n("8hj+")},"data-v-4b46e810",null);t.default=c.exports},VBmB:function(e,t){},VZrM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={render:function(){var e=this.$createElement;return(this._self._c||e)("section",[this._v("\n\tmain\n")])},staticRenderFns:[]};var r=n("VU/8")({},l,!1,function(e){n("sOsw")},"data-v-66db86fc",null);t.default=r.exports},XvCJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("0nep");var l={name:"sidebarItem",props:{item:{type:Object,required:!0},menurouter:{type:Boolean,required:!0}},methods:{menuClick:function(e){window.location.href=e.link}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.menurouter?n("div",[e.item.children?n("div",{staticClass:"aaa"},[0==e.item.children.length?[n("el-menu-item",{attrs:{index:e.item.path}},[n("i",{class:e.item.meta.icon}),e._v(" "),n("span",{staticStyle:{"padding-left":"4px"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.item.name))])])]:n("el-submenu",{attrs:{index:e.item.path}},[n("template",{slot:"title"},[n("i",{class:e.item.meta.icon}),e._v(" "),n("span",{staticStyle:{"padding-left":"4px"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.item.name))])]),e._v(" "),e._l(e.item.children,function(t){return t.hidden?e._e():[t.children&&t.children.length>0?n("sidebar-item",{attrs:{item:t,menurouter:e.menurouter}}):n("el-menu-item",{attrs:{index:t.path}},[n("i",{class:t.meta.icon}),e._v(" "),n("span",{staticStyle:{"padding-left":"4px"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])])]})],2)],2):n("el-menu-item",{attrs:{index:e.item.path}},[n("i",{class:e.item.meta.icon}),e._v(" "),n("span",{staticStyle:{"padding-left":"4px"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.item.name))])])],1):n("div",[e.item.sub?n("div",{staticClass:"bbb"},[0==e.item.sub.length?[n("el-menu-item",{attrs:{index:e.item.path},on:{click:function(t){e.menuClick(e.item)}}},[n("i",{class:e.item.icon,style:e.item.style}),e._v(" "),n("span",{staticStyle:{"padding-left":"4px"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.item.title))])])]:n("el-submenu",{attrs:{index:e.item.path}},[n("template",{slot:"title"},[n("i",{class:e.item.icon,style:e.item.style}),e._v(" "),n("span",{staticStyle:{"padding-left":"4px"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.item.title))])]),e._v(" "),e._l(e.item.sub,function(t){return[t.sub&&t.sub.length>0?n("sidebar-item",{attrs:{item:t,menurouter:e.menurouter}}):n("el-menu-item",{attrs:{index:t.path},on:{click:function(n){e.menuClick(t)}}},[n("i",{class:t.icon,style:e.item.style}),e._v(" "),n("span",{staticStyle:{"padding-left":"4px"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])])]})],2)],2):n("el-menu-item",{attrs:{index:e.item.path},on:{click:function(t){e.menuClick(e.item)}}},[n("i",{class:e.item.icon,style:e.item.style}),e._v(" "),n("span",{staticStyle:{"padding-left":"4px"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.item.title))])])],1)},staticRenderFns:[]},a=n("VU/8")(l,r,!1,null,null,null);t.default=a.exports},YaEn:function(e,t,n){"use strict";var l=n("7+uW"),r=n("/ocq");l.default.use(r.a);t.a=new r.a({routes:[]})},dLi2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("mvHQ"),r=n.n(l),a=n("BO1k"),i=n.n(a),o=n("P9l9"),s={components:{selectLayerNode:n("/Qkj").default},data:function(){return{activeTabName:"BundleManage",resources:[],deviceModelOptions:[],filters:{deviceModel:"",keyword:"",userId:"",sourceType:"",countPerPage:""},users:[],resourceTableLoading:!1,detailDialogVisible:!1,abilityDetailDialogVisible:!1,setAccessLayerVisible:!1,confirmSyncToLdapVisible:!1,detailInfos:[],channelSchemes:[],total:0,pageNum:1,countPerPage:20,currentRow:{},bundleId:"",newAccessNodeUid:"",uploadUrl:"http://__requestIP__:8093/bundle/import",myHeaders:{"tetris-001":sessionStorage.getItem("token")},sourceTypeOptions:[{value:"",label:"全部来源"},{value:"SYSTEM",label:"BVC"},{value:"EXTERNAL",label:"LDAP"}],multipleSelection:[]}},methods:{pageChange:function(){this.getResources(this.pageNum)},handleSelectLayerNode:function(){this.$refs.selectLayerNode.show()},layerNodeSelected:function(e,t){this.newAccessNodeUid=e.nodeUid,t()},handleTabClick:function(e,t){"BundleManage"!==e.name&&this.$router.push("/"+e.name)},getAllUsers:function(){var e=this;Object(o.v)().then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.users=[],e.users.push({id:-1,name:"全部用户"}),e.users=e.users.concat(t.users))})},getDeviceModels:function(){var e=this;Object(o.B)().then(function(t){if(!t.errMsg&&t.deviceModels){e.deviceModelOptions.push({value:"",label:"全部类型"});var n=!0,l=!1,r=void 0;try{for(var a,o=i()(t.deviceModels);!(n=(a=o.next()).done);n=!0){var s=a.value,d={value:s,label:s};e.deviceModelOptions.push(d)}}catch(e){l=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(l)throw r}}}})},getResources:function(e){var t=this;this.countPerPage=20,/^[1-9]+[0-9]*]*$/.test(this.filters.countPerPage)&&(this.countPerPage=parseInt(this.filters.countPerPage));var n={deviceModel:this.filters.deviceModel,keyword:this.filters.keyword,sourceType:this.filters.sourceType,userId:this.filters.userId,pageNum:e,countPerPage:this.countPerPage};this.resourceTableLoading=!0,Object(o.z)(n).then(function(n){n.errMsg?t.$message({message:n.errMsg,type:"error"}):(t.pageNum=e,t.total=n.total,t.resources=n.resources),t.resourceTableLoading=!1})},handleCurrentPageChange:function(e){this.pageNum=e,this.getResources(this.pageNum)},handleDetail:function(e){var t=this;this.resourceTableLoading=!0;var n={bundleId:e.bundleId};Object(o.y)(n).then(function(n){n.errMsg?t.$message({message:n.errMsg,type:"error"}):(t.detailDialogVisible=!0,t.detailInfos=n.extraInfos,t.detailInfos.push({name:"bundle_id",value:e.bundleId})),t.resourceTableLoading=!1})},handleModify:function(e){console.log(r()(e)),this.$router.push({path:"/ModifyBundle",query:{bundleId:e.bundleId,bundleName:e.bundleName,deviceIp:e.deviceAddr.deviceIp,devicePort:e.deviceAddr.devicePort}})},handleLogout:function(e){var t=this;this.resourceTableLoading=!0;var n={bundleId:e.bundleId};Object(o.N)(n).then(function(n){n.errMsg?t.$message({message:n.errMsg,type:"error"}):(e.onlineStatus="OFFLINE",t.$message({message:"踢出账号成功",type:"success"})),t.resourceTableLoading=!1})},handleClear:function(e){var t=this;this.$confirm("重置资源将会清空资源上的能力占用，是否确认?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.resourceTableLoading=!0;var n={bundleId:e.bundleId};Object(o.j)(n).then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):t.$message({message:"重置成功",type:"success"}),t.resourceTableLoading=!1})}).catch(function(){t.$message({type:"info",message:"已取消重置"})})},handleDelete:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.resourceTableLoading=!0;var n={bundleIds:e.bundleId};Object(o.n)(n).then(function(e){t.resourceTableLoading=!1,e.errMsg?t.$message({message:e.errMsg,type:"error"}):(t.$message({message:"删除成功",type:"success"}),t.getResources(1))})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},abilityConfig:function(e){this.$router.push({path:"/ConfigBundle",query:{bundleId:e.bundleId}})},abilityDetail:function(e){var t=this,n={bundleId:e.bundleId};this.resourceTableLoading=!0,Object(o.x)(n).then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):(t.abilityDetailDialogVisible=!0,t.channelSchemes=e.channelSchemes),t.resourceTableLoading=!1})},handleSetLayerId:function(e){this.currentRow=e,this.bundleId=e.bundleId,this.newAccessNodeUid=e.accessNodeUid,this.setAccessLayerVisible=!0},submitSetAccessLayer:function(){var e=this,t={bundleId:this.bundleId,accessLayerId:this.newAccessNodeUid};Object(o._7)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.currentRow.accessNodeUid=e.newAccessNodeUid,e.$message({message:"设置接入成功",type:"success"})),e.setAccessLayerVisible=!1})},showMultiSetAccessLayerDialog:function(){if(this.multipleSelection.length){var e=[],t=!0,n=!1,l=void 0;try{for(var r,a=i()(this.multipleSelection);!(t=(r=a.next()).done);t=!0){var o=r.value;e.push(o.bundleId)}}catch(e){n=!0,l=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw l}}this.bundleId=e.join(","),console.log("bundleIds=="+this.bundleId),this.newAccessNodeUid="",this.setAccessLayerVisible=!0}else this.$message({message:"请至少选择一行",type:"warning"})},exportBundle:function(){var e=this;Object(o.r)(null).then(function(e){var t=new Blob([e.data],{type:"application/octet-stream;charset=utf-8"}),n=document.createElement("a");n.download="folder.csv",n.style.display="none",n.href=URL.createObjectURL(t),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}).catch(function(t){e.$message({message:t,type:"error"})})},uploadSuccess:function(e){e.errMsg?this.$message({message:e.errMsg,type:"error"}):(e.successCnt?this.$message({message:"成功导入的设备数量："+e.successCnt,type:"success"}):this.$message({message:"导入失败",type:"error"}),this.getResources(1))},uploadError:function(e){this.$message({message:"上传文件错误: "+r()(e),type:"error"})},onprogress:function(){this.resourceTableLoading=!0},handleMultiDelete:function(){var e=this;this.multipleSelection.length?this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.resourceTableLoading=!0;var t=[],n=!0,l=!1,r=void 0;try{for(var a,s=i()(e.multipleSelection);!(n=(a=s.next()).done);n=!0){var d=a.value;t.push(d.bundleId)}}catch(e){l=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(l)throw r}}var c={bundleIds:t.join(",")};Object(o.n)(c).then(function(t){e.resourceTableLoading=!1,t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"删除成功",type:"success"}),e.getResources(1))})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message({message:"请至少选择一行",type:"warning"})},syncUser:function(){var e=this;this.$confirm("是否确认同步用户资源?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.resourceTableLoading=!0,Object(o._23)(null).then(function(t){e.resourceTableLoading=!1,t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"同步成功",type:"success"}),e.getResources(1))})}).catch(function(){e.$message({type:"info",message:"已取消同步"})})},handleSelectionChange:function(e){this.multipleSelection=e},handleSyncFromLdap:function(){var e=this;this.$confirm("确认将从LDAP服务器同步下载信息么？","提示",{}).then(function(){e.resourceTableLoading=!0;Object(o._16)({}).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"同步成功, 共下载"+t.successCnt+"条信息",type:"success"}),e.getResources(1))}),e.resourceTableLoading=!1})},showHandleSyncToLdapDialog:function(){this.confirmSyncToLdapVisible=!0},handleSyncToLdap:function(e){var t=this;this.resourceTableLoading=!0;var n={syncAll:e};Object(o._15)(n).then(function(e){null!==e.errMsg&&""!==e.errMsg?t.$message({message:e.errMsg,type:"error",duration:3e3}):(t.$message({message:"同步成功, 共上传"+e.successCnt+"条信息",type:"success"}),t.getResources(1))}),this.resourceTableLoading=!1},handleCleanUpLdap:function(){var e=this;this.$confirm("确认清空所有上传到LDAP和从LDAP下载的信息么？","提示",{}).then(function(){e.resourceTableLoading=!0;Object(o.f)({}).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"重置成功",type:"success"}),e.getResources(1))}),e.resourceTableLoading=!1})}},mounted:function(){var e=this;if(this.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/BundleManage")}),this.getDeviceModels(),this.getAllUsers(),this.getResources(1),-1!==this.uploadUrl.indexOf("__requestIP__")){var t=document.location.host.split(":")[0];this.uploadUrl=this.uploadUrl.replace("__requestIP__",t)}}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[n("el-tab-pane",{attrs:{label:"资源列表",name:"BundleManage"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"添加资源",name:"AddBundle"}})],1),e._v(" "),n("div",{staticStyle:{float:"left",width:"100%"}},[n("el-select",{staticStyle:{float:"left","margin-left":"5px",width:"180px"},attrs:{size:"small",placeholder:"选择类型"},model:{value:e.filters.deviceModel,callback:function(t){e.$set(e.filters,"deviceModel",t)},expression:"filters.deviceModel"}},e._l(e.deviceModelOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),n("el-select",{staticStyle:{float:"left","margin-left":"10px",width:"180px"},attrs:{size:"small",placeholder:"选择来源"},model:{value:e.filters.sourceType,callback:function(t){e.$set(e.filters,"sourceType",t)},expression:"filters.sourceType"}},e._l(e.sourceTypeOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),n("el-select",{staticStyle:{float:"left","margin-left":"10px",width:"200px"},attrs:{size:"small",filterable:"",placeholder:"选择用户"},model:{value:e.filters.userId,callback:function(t){e.$set(e.filters,"userId",t)},expression:"filters.userId"}},e._l(e.users,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),n("el-input",{staticStyle:{float:"left","margin-left":"15px",width:"200px"},attrs:{size:"small",placeholder:"关键字"},model:{value:e.filters.keyword,callback:function(t){e.$set(e.filters,"keyword",t)},expression:"filters.keyword"}}),e._v(" "),n("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{size:"small"},on:{click:function(t){e.getResources(1)}}},[e._v("查询")]),e._v(" "),n("el-dropdown",{staticStyle:{float:"left","margin-left":"20px"}},[n("el-button",{attrs:{type:"primary",size:"small"}},[e._v("\n                LDAP操作"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(t){e.showHandleSyncToLdapDialog()}}},[e._v("上传到LDAP")]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(t){e.handleSyncFromLdap()}}},[e._v("从LDAP下载")]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(t){e.handleCleanUpLdap()}}},[e._v("重置LDAP数据")])],1)],1),e._v(" "),n("el-upload",{staticClass:"upload-demo",staticStyle:{float:"left","margin-left":"10px"},attrs:{action:e.uploadUrl,name:"filePoster",headers:e.myHeaders,"show-file-list":!1,"on-success":e.uploadSuccess,"on-error":e.uploadError,"on-progress":e.onprogress}},[n("el-button",{attrs:{type:"primary",size:"small"}},[e._v("导入")])],1),e._v(" "),n("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:e.exportBundle}},[e._v("导出\n        ")]),e._v(" "),n("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:e.showMultiSetAccessLayerDialog}},[e._v("批量设置接入\n        ")]),e._v(" "),n("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"danger",size:"small"},on:{click:e.handleMultiDelete}},[e._v("\n            批量删除\n        ")]),e._v(" "),n("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"danger",size:"small"},on:{click:e.syncUser}},[e._v("\n          同步用户\n        ")])],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.resourceTableLoading,expression:"resourceTableLoading"}],staticStyle:{float:"left",width:"100%","margin-top":"20px"},attrs:{data:e.resources},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{width:"50",type:"selection"}}),e._v(" "),n("el-table-column",{attrs:{prop:"bundleName",label:"名称",width:"200",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"deviceModel",label:"类型",width:"120",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"bundleAlias",label:"别名",width:"130",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"username",label:"设备账号",width:"200"}}),e._v(" "),n("el-table-column",{attrs:{prop:"accessNodeUid",label:"所属接入层",width:"220",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{width:"100",label:"在线状态"},scopedSlots:e._u([{key:"default",fn:function(e){return["ONLINE"==e.row.onlineStatus?n("div",{staticStyle:{height:"20px",width:"20px","border-radius":"50%","background-color":"#0f0"}}):n("div",{staticStyle:{height:"20px",width:"20px","border-radius":"50%","background-color":"#f00"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"100",label:"锁定状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["IDLE"==t.row.lockStatus?n("div",[e._v("空闲")]):"BUSY"==t.row.lockStatus?n("div",[e._v("锁定")]):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"100",label:"来源"},scopedSlots:e._u([{key:"default",fn:function(t){return["EXTERNAL"==t.row.sourceType?n("div",[e._v("LDAP")]):n("div",[e._v("BVC")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.handleDetail(t.row)}}},[e._v("详情")]),e._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.handleModify(t.row)}}},[e._v("修改")]),e._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.handleSetLayerId(t.row)}}},[e._v("设置接入")]),e._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.handleClear(t.row)}}},[e._v("重置")]),e._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.handleDelete(t.row)}}},[e._v("删除")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"能力",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.abilityConfig(t.row)}}},[e._v("配置")]),e._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.abilityDetail(t.row)}}},[e._v("通道信息")])]}}])})],1),e._v(" "),n("el-col",{staticClass:"toolbar",attrs:{span:24}},[n("el-input",{staticStyle:{float:"right","margin-right":"30px",width:"200px"},attrs:{size:"small",placeholder:"单页显示数量,默认20"},on:{change:e.pageChange},model:{value:e.filters.countPerPage,callback:function(t){e.$set(e.filters,"countPerPage",t)},expression:"filters.countPerPage"}}),e._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":e.countPerPage,total:e.total},on:{"current-change":e.handleCurrentPageChange}})],1),e._v(" "),n("el-dialog",{attrs:{title:"详情",visible:e.detailDialogVisible,width:"30%"},on:{"update:visible":function(t){e.detailDialogVisible=t}}},[n("ul",e._l(e.detailInfos,function(t){return n("li",[e._v("\n                "+e._s(t.name)+" : "+e._s(t.value)+"\n            ")])}))]),e._v(" "),n("el-dialog",{attrs:{title:"能力详情",visible:e.abilityDetailDialogVisible,width:"40%"},on:{"update:visible":function(t){e.abilityDetailDialogVisible=t}}},[n("el-table",{attrs:{data:e.channelSchemes}},[n("el-table-column",{attrs:{property:"channelId",label:"通道ID",width:"250"}}),e._v(" "),n("el-table-column",{attrs:{property:"channelName",label:"通道类型",width:"250"}}),e._v(" "),n("el-table-column",{attrs:{width:"150",label:"通道状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["IDLE"==t.row.channelStatus?n("div",[e._v("空闲")]):"BUSY"==t.row.channelStatus?n("div",[e._v("锁定")]):"OFFLINE"==t.row.channelStatus?n("div",[e._v("掉线")]):n("div",[e._v("未知")])]}}])})],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"设置接入",visible:e.setAccessLayerVisible,width:"30%"},on:{"update:visible":function(t){e.setAccessLayerVisible=t}}},[n("div",{staticStyle:{"margin-top":"10px"}},[n("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"输入接入层ID",readOnly:""},nativeOn:{click:function(t){return e.handleSelectLayerNode(t)}},model:{value:e.newAccessNodeUid,callback:function(t){e.newAccessNodeUid=t},expression:"newAccessNodeUid"}},[n("template",{slot:"prepend"},[e._v("接入层ID")])],2)],1),e._v(" "),n("div",{staticStyle:{"margin-top":"30px"}},[n("el-button",{staticStyle:{"margin-left":"150px"},attrs:{type:"primary"},on:{click:function(t){e.submitSetAccessLayer()}}},[e._v("提交")])],1)]),e._v(" "),n("el-dialog",{staticStyle:{"margin-top":"260px"},attrs:{title:"提示",visible:e.confirmSyncToLdapVisible,width:"500px"},on:{"update:visible":function(t){e.confirmSyncToLdapVisible=t}}},[n("div",[e._v("\n            确认上传信息到LDAP服务器上么？\n        ")]),e._v(" "),n("div",{staticStyle:{"margin-top":"40px"}},[n("el-button",{staticStyle:{"margin-left":"130px"},attrs:{size:"small"},on:{click:function(t){e.confirmSyncToLdapVisible=!1}}},[e._v("取 消\n            ")]),e._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.handleSyncToLdap("false")}}},[e._v("\n                只上传未同步信息\n            ")]),e._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.handleSyncToLdap("true")}}},[e._v("\n                上传全部信息\n            ")])],1)]),e._v(" "),[n("selectLayerNode",{ref:"selectLayerNode",on:{"layer-node-selected":e.layerNodeSelected}})]],2)},staticRenderFns:[]};var c=n("VU/8")(s,d,!1,function(e){n("KDw3")},null,null);t.default=c.exports},duJc:function(e,t){},el6V:function(e,t){},eqvY:function(e,t,n){"use strict";var l=n("+H76"),r=n("j7e0"),a=n("VZrM"),i=n("4vq3"),o=n("BXv7"),s=n("qoXU"),d=n("Pu6j"),c=n("dLi2"),u=n("ifcc"),h=n("V5AO"),p=n("PPfX"),m=n("IZ07"),f=n("EUih"),b=n("snKp"),v=n("kCLY"),g=n("HV9H"),y=n("r1Id"),I=[{path:"/404",component:l.default,name:"",hidden:!0},{path:"/",component:r.default,name:"资源",iconCls:"el-icon-message",children:[{path:"/main",component:a.default,name:"主页",hidden:!0},{path:"/BundleManage",component:c.default,name:"资源管理"},{path:"/AddBundle",component:u.default,name:"添加资源",hidden:!0},{path:"/ModifyBundle",component:h.default,name:"修改资源",hidden:!0},{path:"/ConfigBundle",component:p.default,name:"能力配置",hidden:!0},{path:"/BundleTemplateManage",component:s.default,name:"模板管理"},{path:"/ChannelTemplateManage",component:d.default,name:"通道模板管理",hidden:!0},{path:"/LayerNodeManage",component:m.default,name:"层节点管理"},{path:"/AddLayerNode",component:f.default,name:"添加层节点",hidden:!0},{path:"/ModifyLayernode",component:b.default,name:"修改层节点",hidden:!0},{path:"/BindResource",component:i.default,name:"绑定资源权限"},{path:"/BindVirtualResource",component:o.default,name:"绑定虚拟资源",hidden:!0},{path:"/FolderManage",component:v.default,name:"分组管理"},{path:"/SerInfoAndNode",component:g.default,name:"服务设备信息"},{path:"/UserBindBundle",component:y.default,name:"用户绑定设备"}]},{path:"*",hidden:!0,redirect:{path:"/404"}}];t.a=I},ifcc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("mvHQ"),r=n.n(l),a=n("BO1k"),i=n.n(a),o=n("bOdI"),s=n.n(o),d=n("P9l9"),c={name:"AddBundle",components:{selectLayerNode:n("/Qkj").default},data:function(){var e=this;return{activeTabName:"AddBundle",extraInfos:[],bundleForm:s()({deviceModel:"",bundleType:"",bundleName:"",username:"",onlinePassword:"",checkPass:"",bundleAlias:"",accessNodeUid:"",bundleFolderId:null,bundleFolderName:"根目录",deviceAddr:{deviceIp:"",devicePort:5060},coderType:"DEFAULT",longitude:"",latitude:"",streamUrl:""},"streamUrl",""),rules:{deviceModel:[{required:!0,message:"请选择设备形态",trigger:"change"}],bundleName:[{required:!0,message:"请输入设备名称",trigger:"blur"},{min:1,max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}],username:[{required:!0,message:"请输入设备账号",trigger:"blur"}],onlinePassword:[{validator:function(t,n,l){""===n?l(new Error("请输入密码")):(""!==e.bundleForm.checkPass&&e.$refs.bundleForm.validateField("checkPass"),l())},trigger:"blur"}],checkPass:[{validator:function(t,n,l){""===n?l(new Error("请再次输入密码")):n!==e.bundleForm.onlinePassword?l(new Error("两次输入密码不一致!")):l()},trigger:"blur"}]},deviceModelOptions:[],coderTypeOptions:[{label:"编码器",value:"ENCODER"},{label:"解码器",value:"DECODER"},{label:"默认",value:"DEFAULT"}],bundleTypeOptions:[{label:"终端",value:"VenusTerminal"},{label:"混合器",value:"VenusMixer"},{label:"转发器",value:"VenusTransporter"},{label:"外部输出设备",value:"VenusOutConnection"},{label:"大屏设备",value:"VenusVideoMatrix"}],dialog:{changeFolder:{visible:!1,tree:{props:{label:"name",children:"children"},expandOnClickNode:!1,data:[],current:""}},addFolder:{visible:!1,parent:"",parentNode:"",folderName:"",toLdap:"否"}}}},methods:{handleTabClick:function(e,t){"AddBundle"!==e.name&&this.$router.push("/"+e.name)},getDeviceModels:function(){var e=this;Object(d.B)().then(function(t){if(!t.errMsg&&t.deviceModels){var n=!0,l=!1,r=void 0;try{for(var a,o=i()(t.deviceModels);!(n=(a=o.next()).done);n=!0){var s=a.value,d={value:s,label:s};e.deviceModelOptions.push(d)}}catch(e){l=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(l)throw r}}}})},addExtraInfo:function(){this.extraInfos.push({})},remove:function(e){var t=this.extraInfos.indexOf(e);-1!==t&&this.extraInfos.splice(t,1)},reset:function(){this.$refs.bundleForm.resetFields(),this.bundleForm.bundleFolderId=null,this.bundleForm.bundleFolderName="根目录"},submit:function(){var e=this;if(this.validateBaseInfo()&&this.validateExtraInfo()){var t={bundle:r()(this.bundleForm),extraInfoVOList:r()(this.extraInfos)};Object(d.a)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"添加成功",type:"success"}),setTimeout(function(){window.location.reload()},1e3))})}},validateBaseInfo:function(){var e=!1;return this.$refs.bundleForm.validate(function(t){e=t}),e},validateExtraInfo:function(){var e=!0,t=!1,n=void 0;try{for(var l,r=i()(this.extraInfos);!(e=(l=r.next()).done);e=!0){var a=l.value;if(!a.name||!a.value)return this.$message({message:"扩展字段不能为空",type:"error"}),!1}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}return!0},handleChangeFolder:function(){var e=this;e.dialog.changeFolder.visible=!0,Object(d.X)().then(function(t){if(200===t.status){if(e.dialog.changeFolder.tree.data.splice(0,e.dialog.changeFolder.tree.data.length),t.data&&t.data.length>0)for(var n=0;n<t.data.length;n++)e.dialog.changeFolder.tree.data.push(t.data[n])}else e.$message({type:"error",message:t.message})})},handleChangeFolderClose:function(){this.dialog.changeFolder.visible=!1,this.dialog.changeFolder.tree.data.splice(0,this.dialog.changeFolder.tree.data.length),this.dialog.changeFolder.tree.current=""},handleChangeFolderCommit:function(){this.bundleForm.bundleFolderId=this.dialog.changeFolder.tree.current.id,this.bundleForm.bundleFolderName=this.dialog.changeFolder.tree.current.name,this.handleChangeFolderClose()},currentTreeNodeChange:function(e,t){this.dialog.changeFolder.tree.current=e},treeNodeAppend:function(e,t){this.dialog.addFolder.parent=t,this.dialog.addFolder.parentNode=e,this.dialog.addFolder.visible=!0},handleAddFolderClose:function(){this.dialog.addFolder.parent="",this.dialog.addFolder.parentNode="",this.dialog.addFolder.visible=!1,this.dialog.addFolder.folderName="",this.dialog.addFolder.toLdap="否"},handleAddFolderCommit:function(){var e=this;Object(d.b)({name:e.dialog.addFolder.folderName,parentId:e.dialog.addFolder.parent.id,toLdap:"是"===e.dialog.addFolder.toLdap}).then(function(t){e.dialog.addFolder.parent.children=e.dialog.addFolder.parent.children||[],t.errMsg||(e.dialog.addFolder.parent.children.push(t.folder),e.$refs.changeFolderTree.append(t.folder,e.dialog.addFolder.parentNode),e.handleAddFolderClose())})},handleSelectLayerNode:function(){this.$refs.selectLayerNode.show()},layerNodeSelected:function(e,t){this.bundleForm.accessNodeUid=e.nodeUid,t()}},mounted:function(){var e=this;this.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/BundleManage")}),this.getDeviceModels()}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[n("el-tab-pane",{attrs:{label:"资源列表",name:"BundleManage"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"添加资源",name:"AddBundle"}})],1),e._v(" "),n("el-form",{ref:"bundleForm",attrs:{model:e.bundleForm,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{size:"small",label:"设备形态",prop:"deviceModel"}},[n("el-select",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:e.bundleForm.deviceModel,callback:function(t){e.$set(e.bundleForm,"deviceModel",t)},expression:"bundleForm.deviceModel"}},e._l(e.deviceModelOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"jv210"==e.bundleForm.deviceModel,expression:"bundleForm.deviceModel=='jv210'"}],attrs:{size:"small",label:"编解码类型",prop:"coderType"}},[n("el-select",{staticStyle:{width:"200px"},model:{value:e.bundleForm.coderType,callback:function(t){e.$set(e.bundleForm,"coderType",t)},expression:"bundleForm.coderType"}},e._l(e.coderTypeOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("el-form-item",{attrs:{size:"small",label:"别名",prop:"bundleAlias"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.bundleAlias,callback:function(t){e.$set(e.bundleForm,"bundleAlias",t)},expression:"bundleForm.bundleAlias"}})],1),e._v(" "),n("el-form-item",{attrs:{size:"small",label:"设备名称",prop:"bundleName"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.bundleName,callback:function(t){e.$set(e.bundleForm,"bundleName",t)},expression:"bundleForm.bundleName"}})],1),e._v(" "),n("el-form-item",{attrs:{size:"small",label:"设备分组",prop:"bundleFolderName"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{readOnly:""},nativeOn:{click:function(t){return e.handleChangeFolder(t)}},model:{value:e.bundleForm.bundleFolderName,callback:function(t){e.$set(e.bundleForm,"bundleFolderName",t)},expression:"bundleForm.bundleFolderName"}})],1),e._v(" "),n("el-form-item",{attrs:{size:"small",label:"设备账号",prop:"username"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.username,callback:function(t){e.$set(e.bundleForm,"username",t)},expression:"bundleForm.username"}})],1),e._v(" "),n("el-form-item",{attrs:{size:"small",label:"设备密码",prop:"onlinePassword"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{type:"password","auto-complete":"off"},model:{value:e.bundleForm.onlinePassword,callback:function(t){e.$set(e.bundleForm,"onlinePassword",t)},expression:"bundleForm.onlinePassword"}})],1),e._v(" "),n("el-form-item",{attrs:{size:"small",label:"确认密码",prop:"checkPass"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{type:"password","auto-complete":"off"},model:{value:e.bundleForm.checkPass,callback:function(t){e.$set(e.bundleForm,"checkPass",t)},expression:"bundleForm.checkPass"}})],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"jv210"==e.bundleForm.deviceModel,expression:"bundleForm.deviceModel=='jv210'"}],attrs:{size:"small",label:"接入层UID",prop:"accessNodeUid"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{readOnly:""},nativeOn:{click:function(t){return e.handleSelectLayerNode(t)}},model:{value:e.bundleForm.accessNodeUid,callback:function(t){e.$set(e.bundleForm,"accessNodeUid",t)},expression:"bundleForm.accessNodeUid"}})],1),e._v(" "),n("el-form-item",{attrs:{size:"small",label:"设备IP"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.deviceAddr.deviceIp,callback:function(t){e.$set(e.bundleForm.deviceAddr,"deviceIp",t)},expression:"bundleForm.deviceAddr.deviceIp"}})],1),e._v(" "),n("el-form-item",{attrs:{size:"small",label:"设备端口"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.deviceAddr.devicePort,callback:function(t){e.$set(e.bundleForm.deviceAddr,"devicePort",t)},expression:"bundleForm.deviceAddr.devicePort"}})],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"ipc"==e.bundleForm.deviceModel||"speaker"==e.bundleForm.deviceModel,expression:"bundleForm.deviceModel=='ipc' || bundleForm.deviceModel=='speaker'"}],attrs:{size:"small",label:"坐标经度(°)",prop:"longitude"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.longitude,callback:function(t){e.$set(e.bundleForm,"longitude",t)},expression:"bundleForm.longitude"}})],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"ipc"==e.bundleForm.deviceModel||"speaker"==e.bundleForm.deviceModel,expression:"bundleForm.deviceModel=='ipc' || bundleForm.deviceModel=='speaker'"}],attrs:{size:"small",label:"坐标纬度(°)",prop:"latitude"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.latitude,callback:function(t){e.$set(e.bundleForm,"latitude",t)},expression:"bundleForm.latitude"}})],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"ipc"==e.bundleForm.deviceModel,expression:"bundleForm.deviceModel=='ipc'"}],attrs:{size:"small",label:"流地址",prop:"streamUrl"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.streamUrl,callback:function(t){e.$set(e.bundleForm,"streamUrl",t)},expression:"bundleForm.streamUrl"}})],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"speaker"==e.bundleForm.deviceModel,expression:"bundleForm.deviceModel=='speaker'"}],attrs:{size:"small",label:"标识",prop:"identify"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.identify,callback:function(t){e.$set(e.bundleForm,"identify",t)},expression:"bundleForm.identify"}})],1),e._v(" "),n("el-button",{staticStyle:{"margin-top":"10px","margin-left":"30px"},attrs:{type:"info",size:"small"},on:{click:e.addExtraInfo}},[e._v("新增扩展字段")]),e._v(" "),e._l(e.extraInfos,function(t,l){return n("div",{staticStyle:{"margin-top":"10px","margin-left":"30px"}},[n("el-input",{staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"扩展字段名"},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"extraInfo.name"}}),e._v(" "),n("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{size:"small",placeholder:"扩展字段值"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"extraInfo.value"}}),e._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"danger"},on:{click:function(n){n.preventDefault(),e.remove(t)}}},[e._v("删除")])],1)}),e._v(" "),n("div",{staticStyle:{"margin-top":"30px","margin-left":"30px"}},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),e._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.reset()}}},[e._v("重置")])],1)],2),e._v(" "),[n("el-dialog",{attrs:{title:"选择分组",visible:e.dialog.changeFolder.visible,width:"650px","before-close":e.handleChangeFolderClose},on:{"update:visible":function(t){e.$set(e.dialog.changeFolder,"visible",t)}}},[n("div",{staticStyle:{height:"500px",position:"relative"}},[n("el-scrollbar",{staticStyle:{height:"100%"}},[n("el-tree",{ref:"changeFolderTree",attrs:{props:e.dialog.changeFolder.tree.props,data:e.dialog.changeFolder.tree.data,"node-key":"id","check-strictly":"","expand-on-click-node":!1,"default-expand-all":"","highlight-current":""},on:{"current-change":e.currentTreeNodeChange},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.node,r=t.data;return n("span",{staticStyle:{flex:"1",display:"flex","align-items":"center","justify-content":"space-between","padding-right":"8px"}},[n("span",{staticStyle:{"font-size":"14px"}},[n("span",{staticClass:"icon-folder-close"}),e._v(" "),n("span",[e._v(e._s(r.name))])]),e._v(" "),n("span",[n("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",size:"mini"},on:{click:function(t){t.stopPropagation(),e.treeNodeAppend(l,r)}}},[n("span",{staticClass:"icon-plus",staticStyle:{"font-size":"16px"}})])],1)])}}])})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"medium"},on:{click:e.handleChangeFolderClose}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.handleChangeFolderCommit}},[e._v("确定")])],1)]),e._v(" "),n("el-dialog",{attrs:{title:"添加分组",visible:e.dialog.addFolder.visible,width:"450px","before-close":e.handleAddFolderClose},on:{"update:visible":function(t){e.$set(e.dialog.addFolder,"visible",t)}}},[n("el-form",{attrs:{"label-width":"110px"}},[n("el-form-item",{attrs:{label:"分组名称"}},[n("el-input",{model:{value:e.dialog.addFolder.folderName,callback:function(t){e.$set(e.dialog.addFolder,"folderName",t)},expression:"dialog.addFolder.folderName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"是否同步ldap"}},[n("el-select",{model:{value:e.dialog.addFolder.toLdap,callback:function(t){e.$set(e.dialog.addFolder,"toLdap",t)},expression:"dialog.addFolder.toLdap"}},[n("el-option",{key:"是",attrs:{label:"是",value:"是"}},[e._v("\n                是\n              ")]),e._v(" "),n("el-option",{key:"否",attrs:{label:"否",value:"否"}},[e._v("\n                否\n              ")])],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"medium"},on:{click:e.handleAddFolderClose}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.handleAddFolderCommit}},[e._v("确定")])],1)],1)],e._v(" "),[n("selectLayerNode",{ref:"selectLayerNode",on:{"layer-node-selected":e.layerNodeSelected}})]],2)},staticRenderFns:[]};var h=n("VU/8")(c,u,!1,function(e){n("/aOI")},"data-v-be491628",null);t.default=h.exports},j7e0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("UOlw"),r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%","min-width":"1600px"}},[n("el-header",{staticStyle:{padding:"0px",height:"50px"}},[n("headerbar",{attrs:{sysUserName:e.sysUserName,routes:e.shortCutsRoutes,active:e.$route.path}})],1),e._v(" "),n("el-container",{staticStyle:{height:"100%"}},[n("sidebar",{attrs:{routes:e.routes,active:e.active,menurouter:e.menurouter}}),e._v(" "),n("el-main",{staticStyle:{position:"relative"}},[n("transition",[n("section",{staticClass:"content-container"},[n("div",{staticClass:"grid-content bg-purple-light"},[n("el-col",{staticClass:"content-wrapper",attrs:{span:24}},[n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view")],1)],1)],1)])])],1)],1)],1)},staticRenderFns:[]};var a=function(e){n("Eowd")},i=n("VU/8")(l.a,r,!1,a,"data-v-4605f29e",null);t.default=i.exports},kCLY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("mvHQ"),r=n.n(l),a=n("BO1k"),i=n.n(a),o=n("P9l9"),s="http://"+document.location.host.split(":")[0]+":8093",d={data:function(){return{activeTabName:"FolderManage",resources:[],users:[],resourceTableShow:!0,userTableShow:!1,deviceModelOptions:[],filters:{deviceModel:"jv210",keyword:""},multipleSelection:[],disableSetFolderBtn:!0,disableAddFolderBtn:!0,disableModifyFolderBtn:!0,disableDeleteFolderBtn:!0,disableResetRootBtn:!1,defaultExpandKeys:[],tree:[],defaultProps:{children:"children",label:"name"},currentSelectNode:null,expandNodeKeysArr:[],resourceTableLoading:!1,userTableLoading:!1,dialogAddForderFormVisible:!1,dialogmodifyForderFormVisible:!1,folderForm:{name:"",toLdap:!1},dialogsetRootVisible:!1,setRootId:"",setRootOptions:[],modifyForm:{},uploadUrl:s+"/folder/import",uploadUserUrl:s+"/folder/user/import",myHeaders:{"tetris-001":sessionStorage.getItem("token")},toLdapoptions:[{value:!0,label:"是"},{value:!1,label:"否"}],ldapLoading:!1}},methods:{getDeviceModels:function(){var e=this;Object(o.B)().then(function(t){if(!t.errMsg&&t.deviceModels){e.deviceModelOptions.push({value:"",label:"全部类型"});var n=!0,l=!1,r=void 0;try{for(var a,o=i()(t.deviceModels);!(n=(a=o.next()).done);n=!0){var s=a.value,d={value:s,label:s};e.deviceModelOptions.push(d)}}catch(e){l=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(l)throw r}}}})},handleChange:function(e,t){var n=this;if(e.raw){var l=new FileReader;l.onload=function(e){n.contentHtml=e.target.result},l.readAsText(e.raw,"utf-8")}console.log(e,t)},initTree:function(e){var t=this;Object(o.K)().then(function(n){n.errMsg?t.$message({message:n.errMsg,type:"error"}):(t.tree=n.tree,e||(t.expandNodeKeysArr.splice(0,t.expandNodeKeysArr.length),t.expandNodeKeysArr=t.tree.map(function(e){return e.id})),t.defaultExpandKeys=t.expandNodeKeysArr)})},getBundles:function(){var e=this;this.resourceTableShow=!0,this.userTableShow=!1;var t={deviceModel:this.filters.deviceModel,keyword:this.filters.keyword};this.resourceTableLoading=!0,Object(o.T)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.resources=t.resources,e.resourceTableLoading=!1})},getUsers:function(){var e=this;this.resourceTableShow=!1,this.userTableShow=!0;var t={keyword:this.filters.keyword};this.userTableLoading=!0,Object(o._2)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.users=t.users,e.userTableLoading=!1})},syncFolderToLdap:function(){var e=this;this.$confirm("是否确认上传LDAP?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.resourceTableLoading=!0,e.ldapLoading=!0;Object(o._18)({}).then(function(t){e.resourceTableLoading=!1,e.ldapLoading=!1,t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"同步成功数量："+t.successCnt,type:"success"}),e.initTree(!0))})}).catch(function(){e.$message({type:"info",message:"已取消"})})},downLoadFolderFromLdap:function(){var e=this;this.$confirm("是否确认从LDAP下载?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.resourceTableLoading=!0,e.ldapLoading=!0;Object(o._17)({}).then(function(t){e.resourceTableLoading=!1,e.ldapLoading=!1,t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"同步成功数量："+t.successCnt,type:"success"}),e.initTree())})}).catch(function(){e.$message({type:"info",message:"已取消"})})},cleanUpLdap:function(){var e=this;this.$confirm("确认清空所有上传到LDAP和从LDAP下载的信息么？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.resourceTableLoading=!0,e.ldapLoading=!0;Object(o.i)({}).then(function(t){e.resourceTableLoading=!1,e.ldapLoading=!1,t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"操作成功",type:"success"}),e.initTree(),e.getBundles())})}).catch(function(){e.$message({type:"info",message:"已取消"})})},showAddFolderDialog:function(){this.dialogAddForderFormVisible=!0},addFolder:function(){var e=this;if(this.folderForm.name.length){var t={name:this.folderForm.name,parentId:this.currentSelectNode.id,toLdap:this.folderForm.toLdap};Object(o.b)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.initTree(!0),e.dialogAddForderFormVisible=!1)})}else this.$message({message:"请输入分组名称",type:"error"})},showModifyFolderDialog:function(){this.dialogmodifyForderFormVisible=!0,this.modifyForm={name:this.currentSelectNode.name,toLdap:this.currentSelectNode.toLdap}},modifyFolder:function(){var e=this;if(this.modifyForm.name.length){var t={id:this.currentSelectNode.id,name:this.modifyForm.name,toLdap:this.modifyForm.toLdap};Object(o.P)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.initTree(!0),e.dialogmodifyForderFormVisible=!1)})}else this.$message({message:"请输入分组名称",type:"error"})},deleteFolder:function(){var e=this;if(this.currentSelectNode.beFolder){var t={id:this.currentSelectNode.id};Object(o.o)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.initTree(!0)})}else if(this.currentSelectNode.bundleId){var n={bundleIds:this.currentSelectNode.bundleId};Object(o._3)(n).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.initTree(!0),e.getBundles())})}else if(this.currentSelectNode.id){var l={userIds:this.currentSelectNode.id};Object(o._4)(l).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.initTree(!0),e.getUsers())})}},resetRoot:function(){var e=this;Object(o._5)({}).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.initTree()})},handleNodeExpand:function(e,t){this.expandNodeKeysArr.push(t.key)},handleNodeCollapse:function(e,t){for(var n=0;n<this.expandNodeKeysArr.length;n++)this.expandNodeKeysArr[n]===t.key&&this.expandNodeKeysArr.splice(n,1)},setFolder:function(){var e=this;if(this.resourceTableShow){var t=this.multipleSelection.map(function(e){return e.bundleId}),n={folderId:this.currentSelectNode.id,bundleIds:t.join(",")};Object(o._8)(n).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.currentSelectNode.children=e.currentSelectNode.children.concat(t.bundleNodes),e.getBundles())})}else if(this.userTableShow){var l=this.multipleSelection,a={folderId:this.currentSelectNode.id,users:r()(l)};Object(o._9)(a).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.currentSelectNode.children=e.currentSelectNode.children.concat(t.userNodes),e.getUsers())})}},handleSelectionChange:function(e){this.multipleSelection=e,this.multipleSelection.length&&this.currentSelectNode&&this.currentSelectNode.beFolder?this.disableSetFolderBtn=!1:this.disableSetFolderBtn=!0},handleNodeClick:function(e,t,n){this.currentSelectNode=e,e.beFolder?(this.disableAddFolderBtn=!1,this.disableModifyFolderBtn=!1,this.multipleSelection.length&&(this.disableSetFolderBtn=!1),e.children&&e.children.length||e.parentId<0?this.disableDeleteFolderBtn=!0:this.disableDeleteFolderBtn=!1):(this.disableAddFolderBtn=!0,this.disableModifyFolderBtn=!0,this.disableSetFolderBtn=!0,this.disableDeleteFolderBtn=!1)},handleNodeDragEnd:function(e,t,n,l){var r=this;if("none"!==n){var a,i;"FOLDER"===e.data.nodeType?a=e.data.id:"BUNDLE"===e.data.nodeType?a=e.data.bundleId:"USER"===e.data.nodeType&&(a=e.data.username),"FOLDER"===t.data.nodeType?i=t.data.id:"BUNDLE"===t.data.nodeType?i=t.data.bundleId:"USER"===t.data.nodeType&&(i=t.data.username);var s={nodeId:a,changeType:n,nodeType:e.data.nodeType,newTargetId:i,newTargetType:t.data.nodeType,newTargetIndex:t.data.folderIndex,newTargetParentId:t.data.parentId};Object(o.e)(s).then(function(e){e.errMsg&&r.$message({message:e.errMsg,type:"error"}),console.log("change end, initTree"),r.initTree(!0)})}},allowDrop:function(e,t,n){if(e.id===t.id)return!1;if("none"===n)return!1;if(t.data.systemSourceType&&-1===e.data.parentId&&e.data.systemSourceType)return!1;if("ON_DEMAND"===t.data.folderType)return!1;if("FOLDER"!==t.data.nodeType&&(-1!==t.data.parentId&&"ON_DEMAND"===this.$refs.tree.getNode(t.data.parentId).data.folderType))return!1;return"next"!==n&&"prev"!==n||-1!==t.data.parentId},allowDrag:function(e){return"FOLDER"===e.data.nodeType&&(!(-1===e.data.parentId&&!e.data.systemSourceType)&&("ON_DEMAND"!==e.data.folderType&&!!e.data.systemSourceType))},showSetRootDialog:function(){this.dialogsetRootVisible=!0,this.getRootoptions()},getRootoptions:function(){var e=this;this.setRootOptions=[],Object(o.Y)({}).then(function(t){if(t.errMsg)e.$message({message:t.errMsg,type:"error"});else{var n=!0,l=!1,r=void 0;try{for(var a,o=i()(t.rootOptions);!(n=(a=o.next()).done);n=!0){var s=a.value,d={value:s.id,label:s.name};e.setRootOptions.push(d)}}catch(e){l=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(l)throw r}}}})},setRoot:function(){var e=this,t={rootId:this.setRootId};Object(o._10)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.dialogsetRootVisible=!1,e.initTree())})},uploadSuccess:function(e){e.errMsg?this.$message({message:e.errMsg,type:"error"}):(null!=e.successCnt?this.$message({message:"成功导入分组的数量："+e.successCnt,type:"success"}):this.$message({message:"导入失败",type:"error"}),this.initTree(!0))},uploadError:function(e){this.$message({message:"上传文件错误: "+r()(e),type:"error"})},onprogress:function(){},exportFolder:function(){var e=this;Object(o.s)(null).then(function(e){var t=new Blob([e.data],{type:"application/octet-stream;charset=utf-8"}),n=document.createElement("a");n.download="Folder.csv",n.style.display="none",n.href=URL.createObjectURL(t),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}).catch(function(t){e.$message({message:t,type:"error"})})},exportUser:function(){var e=this;Object(o.t)(null).then(function(e){var t=new Blob([e.data],{type:"application/octet-stream;charset=utf-8"}),n=document.createElement("a");n.download="UserFolder.csv",n.style.display="none",n.href=URL.createObjectURL(t),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}).catch(function(t){e.$message({message:t,type:"error"})})}},mounted:function(){var e=this;e.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/FolderManage")}),this.initTree(),this.getDeviceModels(),this.getBundles()}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-tabs",{staticStyle:{float:"left",width:"100%"},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[n("el-tab-pane",{attrs:{label:"分组管理",name:"分组管理"}})],1),e._v(" "),n("el-card",{staticStyle:{float:"left","margin-top":"10px",width:"45%","font-size":"18px","min-height":"800px"},attrs:{"body-style":"padding:0px"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("div",{staticClass:"clearfix-first",staticStyle:{position:"relative",width:"100%",height:"37px"}},[n("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",size:"small",disabled:e.disableAddFolderBtn},on:{click:e.showAddFolderDialog}},[e._v("添加目录")]),e._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",size:"small",disabled:e.disableModifyFolderBtn},on:{click:e.showModifyFolderDialog}},[e._v("修改")]),e._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{type:"danger",size:"small",disabled:e.disableDeleteFolderBtn},on:{click:e.deleteFolder}},[e._v("删除")]),e._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{type:"danger",size:"small",disabled:e.disableResetRootBtn},on:{click:e.resetRoot}},[e._v("重置根目录")]),e._v(" "),n("el-dropdown",{staticStyle:{float:"left","margin-left":"10px"}},[n("el-button",{attrs:{type:"primary",size:"small",loading:e.ldapLoading}},[e._v("\n              分组及设备LDAP操作"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(t){e.syncFolderToLdap()}}},[e._v("上传到LDAP")]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(t){e.downLoadFolderFromLdap()}}},[e._v("从LDAP下载")]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(t){e.cleanUpLdap()}}},[e._v("重置LDAP数据")])],1)],1)],1),e._v(" "),n("div",{staticClass:"clearfix-second",staticStyle:{position:"relative"}},[n("el-upload",{staticClass:"upload-folder",staticStyle:{float:"left"},attrs:{action:e.uploadUrl,name:"filePoster",headers:e.myHeaders,"show-file-list":!1,accept:".csv","on-success":e.uploadSuccess,"on-error":e.uploadError,"on-progress":e.onprogress}},[n("el-button",{attrs:{type:"primary",size:"small"}},[e._v("导入分组")])],1),e._v(" "),n("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:e.exportFolder}},[e._v("导出分组")]),e._v(" "),n("el-upload",{staticClass:"upload-user",staticStyle:{float:"left","margin-left":"10px"},attrs:{action:e.uploadUserUrl,name:"userFile",headers:e.myHeaders,"show-file-list":!1,"on-success":e.uploadSuccess,accept:".csv","on-error":e.uploadError,"on-progress":e.onprogress,"on-change":e.handleChange}},[n("el-button",{attrs:{type:"primary",size:"small"}},[e._v("导入用户")])],1),e._v(" "),n("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:e.exportUser}},[e._v("导出用户")])],1)]),e._v(" "),n("div",{staticClass:"custom-tree-container"},[n("div",[n("el-tree",{ref:"tree",attrs:{data:e.tree,"node-key":"id","highlight-current":"","expand-on-click-node":!1,props:e.defaultProps,"default-expanded-keys":e.defaultExpandKeys,draggable:"","allow-drop":e.allowDrop,"allow-drag":e.allowDrag},on:{"node-click":e.handleNodeClick,"node-drag-end":e.handleNodeDragEnd,"node-expand":e.handleNodeExpand,"node-collapse":e.handleNodeCollapse}})],1)])]),e._v(" "),n("el-card",{staticStyle:{float:"left","margin-left":"50px","margin-top":"10px",width:"50%","min-height":"800px"},attrs:{"body-style":"padding:0px"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("el-select",{staticStyle:{float:"left","margin-left":"30px",width:"100px"},attrs:{size:"small",placeholder:"选择设备类型"},model:{value:e.filters.deviceModel,callback:function(t){e.$set(e.filters,"deviceModel",t)},expression:"filters.deviceModel"}},e._l(e.deviceModelOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),n("el-input",{staticStyle:{float:"left","margin-left":"30px",width:"150px"},attrs:{size:"small",placeholder:"关键字"},model:{value:e.filters.keyword,callback:function(t){e.$set(e.filters,"keyword",t)},expression:"filters.keyword"}}),e._v(" "),n("el-button",{staticStyle:{float:"left","margin-left":"30px"},attrs:{type:"info",size:"small"},on:{click:e.getBundles}},[e._v("查询设备")]),e._v(" "),n("el-button",{staticStyle:{float:"left","margin-left":"30px"},attrs:{type:"info",size:"small"},on:{click:e.getUsers}},[e._v("查询用户")]),e._v(" "),n("el-button",{staticStyle:{float:"right","margin-right":"50px"},attrs:{type:"primary",size:"small",disabled:e.disableSetFolderBtn},on:{click:e.setFolder}},[e._v("加入分组")])],1),e._v(" "),n("el-table",{directives:[{name:"show",rawName:"v-show",value:e.resourceTableShow,expression:"resourceTableShow"},{name:"loading",rawName:"v-loading",value:e.resourceTableLoading,expression:"resourceTableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.resources},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{width:"50",type:"selection"}}),e._v(" "),n("el-table-column",{attrs:{prop:"bundleName",label:"名称",width:"200",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"deviceModel",label:"资源类型",width:"150",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"username",label:"账号",width:"200",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"bundleId",label:"资源ID",width:"300",sortable:""}})],1),e._v(" "),n("el-table",{directives:[{name:"show",rawName:"v-show",value:e.userTableShow,expression:"userTableShow"},{name:"loading",rawName:"v-loading",value:e.userTableLoading,expression:"userTableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.users},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{width:"50",type:"selection"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"名称",width:"200",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"userNo",label:"用户编号",width:"200",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"creater",label:"创建者",width:"250",sortable:""}})],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"添加分组",visible:e.dialogAddForderFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogAddForderFormVisible=t}}},[n("el-form",{attrs:{model:e.folderForm,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"分组名称"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{"auto-complete":"off"},model:{value:e.folderForm.name,callback:function(t){e.$set(e.folderForm,"name",t)},expression:"folderForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"上传LDAP"}},[n("el-select",{attrs:{placeholder:"是否上传LDAP"},model:{value:e.folderForm.toLdap,callback:function(t){e.$set(e.folderForm,"toLdap",t)},expression:"folderForm.toLdap"}},e._l(e.toLdapoptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogAddForderFormVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.addFolder}},[e._v("确 定")])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"修改分组",visible:e.dialogmodifyForderFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogmodifyForderFormVisible=t}}},[n("el-form",{attrs:{model:e.modifyForm,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"分组名称"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{"auto-complete":"off"},model:{value:e.modifyForm.name,callback:function(t){e.$set(e.modifyForm,"name",t)},expression:"modifyForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"上传LDAP"}},[n("el-select",{attrs:{placeholder:"是否上传LDAP"},model:{value:e.modifyForm.toLdap,callback:function(t){e.$set(e.modifyForm,"toLdap",t)},expression:"modifyForm.toLdap"}},e._l(e.toLdapoptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogmodifyForderFormVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.modifyFolder}},[e._v("确 定")])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"设置根目录",visible:e.dialogsetRootVisible,width:"30%"},on:{"update:visible":function(t){e.dialogsetRootVisible=t}}},[n("div",{staticStyle:{"margin-top":"10px"}},[n("el-select",{staticStyle:{float:"left","margin-left":"30px",width:"200px"},attrs:{placeholder:"选择根目录"},model:{value:e.setRootId,callback:function(t){e.setRootId=t},expression:"setRootId"}},e._l(e.setRootOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogsetRootVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.setRoot}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var u=n("VU/8")(d,c,!1,function(e){n("+k1e")},null,null);t.default=u.exports},omPw:function(e,t){},qg2o:function(e,t){},qoXU:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("mvHQ"),r=n.n(l),a=n("BO1k"),i=n.n(a),o=n("P9l9"),s={name:"templateManage",data:function(){return{activeTabName:"BundleTemplateManage",filters:{keyword:""},tableLoading:!1,templates:[],multipleSelection:[],templateTree:[],treeProps:{children:"children",label:"label"},uploadUrl:"http://__requestIP__:8093/template/import",myHeaders:{"tetris-001":sessionStorage.getItem("token")}}},methods:{handleTabClick:function(e,t){"BundleTemplateManage"!==e.name&&this.$router.push("/"+e.name)},getTemplates:function(){var e=this;this.tableLoading=!0;var t={name:this.filters.keyword};Object(o.G)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.templates=t.templates,e.tableLoading=!1})},handleSelectionChange:function(e){this.multipleSelection=e},handleDetail:function(e){var t=this,n={channelTemplateId:e.id};Object(o.F)(n).then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):t.templateTree=e.tree})},handleSingleDelete:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var n={templateIds:e.id};Object(o.q)(n).then(function(e){e.errMsg?t.$message({message:e.errMsg,type:"error"}):(t.$message({message:"删除成功",type:"success"}),t.getTemplates(),t.templateTree=[])})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleMultiDelete:function(){var e=this;this.multipleSelection.length?this.$confirm("是否确认删除所有选定行?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t="",n=!0,l=!1,r=void 0;try{for(var a,s=i()(e.multipleSelection);!(n=(a=s.next()).done);n=!0){t+=a.value.id,t+=";"}}catch(e){l=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(l)throw r}}var d={templateIds:t};Object(o.q)(d).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):(e.$message({message:"删除成功",type:"success"}),e.getTemplates(),e.templateTree=[])})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message({message:"请至少选择一行",type:"warning"})},uploadSuccess:function(e){e.errMsg?this.$message({message:e.errMsg,type:"error"}):(this.$message({message:"导入成功",type:"success"}),this.getTemplates())},uploadError:function(e,t,n){this.$message({message:"上传文件错误"+r()(e),type:"error"})}},mounted:function(){var e=this;if(this.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/BundleTemplateManage")}),this.getTemplates(),-1!==this.uploadUrl.indexOf("__requestIP__")){var t=document.location.host.split(":")[0];this.uploadUrl=this.uploadUrl.replace("__requestIP__",t)}}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[n("el-tab-pane",{attrs:{label:"设备模板管理",name:"BundleTemplateManage"}})],1),e._v(" "),n("el-card",{staticStyle:{float:"left","margin-top":"10px",width:"50%","min-height":"700px"},attrs:{"body-style":"padding:0px"}},[n("div",{staticStyle:{height:"30px"},attrs:{slot:"header"},slot:"header"},[n("el-input",{staticStyle:{float:"left",width:"150px"},attrs:{size:"small",placeholder:"关键字"},model:{value:e.filters.keyword,callback:function(t){e.$set(e.filters,"keyword",t)},expression:"filters.keyword"}}),e._v(" "),n("el-button",{staticStyle:{float:"left","margin-left":"30px"},attrs:{size:"small",type:"info"},on:{click:e.getTemplates}},[e._v("查询")]),e._v(" "),n("el-upload",{staticClass:"upload-demo",staticStyle:{float:"right","margin-right":"10px"},attrs:{action:e.uploadUrl,name:"filePoster",headers:e.myHeaders,"show-file-list":!1,"on-success":e.uploadSuccess,"on-error":e.uploadError}},[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("导入模板")])],1),e._v(" "),n("el-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",type:"danger"},on:{click:e.handleMultiDelete}},[e._v("批量删除")])],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.templates},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{width:"100",type:"selection"}}),e._v(" "),n("el-table-column",{attrs:{prop:"deviceModel",label:"设备类型",width:"300",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.handleDetail(t.row)}}},[e._v("详情")]),e._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.handleSingleDelete(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),n("el-card",{staticStyle:{float:"left","margin-left":"50px","margin-top":"10px",width:"40%","min-height":"700px"},attrs:{"body-style":"padding:0px"}},[n("div",{staticStyle:{height:"30px"},attrs:{slot:"header"},slot:"header"},[n("span",{staticStyle:{float:"left","font-size":"18px"}},[e._v("模板属性")])]),e._v(" "),n("el-tree",{attrs:{data:e.templateTree,props:e.treeProps,"default-expand-all":""}})],1)],1)},staticRenderFns:[]};var c=n("VU/8")(s,d,!1,function(e){n("duJc")},"data-v-25328624",null);t.default=c.exports},r1Id:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("P9l9"),r={data:function(){return{form:{encodeId:"",encodeBundleId:"",encodeBundleName:"",encodeDeviceModel:"",encodeUsername:"",encodeIp:"",decodeId:"",decodeBundleId:"",decodeBundleName:"",decodeDeviceModel:"",decodeUsername:"",decodeIp:""},tree:{props:{label:"name",children:"children",isLeaf:"isLeaf"},data:[],currentUser:""},table:{data:[]},dialog:{bindBundle:{visible:!1},selectEncoder:{visible:!1,condition:{bundleName:"",bundleNo:"",ip:"",bundleId:""},table:{data:[],page:{total:0,currentPage:0,pageSize:50},current:""}},selectDecoder:{visible:!1,condition:{bundleName:"",bundleNo:"",ip:"",bundleId:""},table:{data:[],page:{total:0,currentPage:0,pageSize:50},current:""}}}}},methods:{refreshUser:function(){var e=this;Object(l.v)().then(function(t){if(t.errMsg)e.$message({message:t.errMsg,type:"error"});else if(e.tree.data.splice(0,e.tree.data.length),e.tree.data.push({id:0,uuid:"FOLDER_0",type:"FOLDER",name:"用户列表",children:[],isLeaf:!1}),t.users&&t.users.length>0)for(var n=0;n<t.users.length;n++)e.tree.data[0].children.push({id:t.users[n].id,uuid:"USER_"+t.users[n].id,name:t.users[n].name,type:"USER",userNo:t.users[n].userNo,isLeaf:!0})})},currentTreeNodeChange:function(e){var t=this;t.table.data.splice(0,t.table.data.length),"FOLDER"===e.type?t.tree.currentUser="":(t.tree.currentUser=e,Object(l._1)({userId:e.id}).then(function(e){if(200!==e.status)t.$message({message:e.message,type:"error"});else{var n=e.data;n.userId?(t.form.encodeId=n.encodeId,t.form.encodeBundleId=n.encodeBundleId,t.form.encodeBundleName=n.encodeBundleName,t.form.encodeDeviceModel=n.encodeDeviceModel,t.form.encodeUsername=n.encodeUsername,t.form.encodeIp=n.encodeIp,t.form.decodeId=n.decodeId,t.form.decodeBundleId=n.decodeBundleId,t.form.decodeBundleName=n.decodeBundleName,t.form.decodeDeviceModel=n.decodeDeviceModel,t.form.decodeUsername=n.decodeUsername,t.form.decodeIp=n.decodeIp,t.table.data.push({bundleId:n.encodeBundleId,bundleName:n.encodeBundleName,deviceModel:n.encodeDeviceModel,username:n.encodeUserName,ip:n.encodeIp,type:"编码器"}),t.table.data.push({bundleId:n.decodeBundleId,bundleName:n.decodeBundleName,deviceModel:n.decodeDeviceModel,username:n.decodeUserName,ip:n.decodeIp,type:"解码器"})):(t.form.encodeId="",t.form.encodeBundleId="",t.form.encodeBundleName="",t.form.encodeDeviceModel="",t.form.encodeUsername="",t.form.encodeIp="",t.form.decodeId="",t.form.decodeBundleId="",t.form.decodeBundleName="",t.form.decodeDeviceModel="",t.form.decodeUsername="",t.form.decodeIp="")}}))},handleBindBundle:function(){this.dialog.bindBundle.visible=!0},handleBindBundleClose:function(){this.dialog.bindBundle.visible=!1},handleBindBundleCommit:function(){var e=this;Object(l._11)({userId:e.tree.currentUser.id,userName:e.tree.currentUser.name,encodeId:e.form.encodeId,encodeBundleId:e.form.encodeBundleId,encodeBundleName:e.form.encodeBundleName,encodeDeviceModel:e.form.encodeDeviceModel,decodeId:e.form.decodeId,decodeBundleId:e.form.decodeBundleId,decodeBundleName:e.form.decodeBundleName,decodeDeviceModel:e.form.decodeDeviceModel}).then(function(t){200!==t.status?e.$message({message:t.message,type:"error"}):(e.table.data.splice(0,e.table.data.length),e.table.data.push({bundleId:e.form.encodeBundleId,bundleName:e.form.encodeBundleName,deviceModel:e.form.encodeDeviceModel,username:e.form.encodeUsername,ip:e.form.encodeIp,type:"编码器"}),e.table.data.push({bundleId:e.form.decodeBundleId,bundleName:e.form.decodeBundleName,deviceModel:e.form.decodeDeviceModel,username:e.form.decodeUsername,ip:e.form.decodeIp,type:"解码器"}),e.handleBindBundleClose())})},refreshEncoder:function(e){var t=this;t.dialog.selectEncoder.table.data.splice(0,t.dialog.selectEncoder.table.data.length),Object(l.V)({currentPage:e,pageSize:t.dialog.selectEncoder.table.page.pageSize,bundleName:t.dialog.selectEncoder.condition.bundleName||null,username:t.dialog.selectEncoder.condition.bundleNo||null,ip:t.dialog.selectEncoder.condition.ip||null,bundleId:t.dialog.selectEncoder.condition.bundleId||null}).then(function(n){if(200!==n.status)t.$message({message:n.message,type:"error"});else{var l=n.data,r=l.total,a=l.rows;if(a&&a.length>0)for(var i=0;i<a.length;i++)t.dialog.selectEncoder.table.data.push(a[i]);t.dialog.selectEncoder.table.page.total=r||0,t.dialog.selectEncoder.table.page.currentPage=e}})},selectEncoderTableRowKey:function(e){return e.bundleId},handleRefreshEncoder:function(){this.refreshEncoder(1)},handleSelectEncoder:function(){this.dialog.selectEncoder.visible=!0,this.refreshEncoder(1)},handleSelectEncoderClose:function(){this.dialog.selectEncoder.visible=!1,this.dialog.selectEncoder.condition.bundleName="",this.dialog.selectEncoder.condition.bundleNo="",this.dialog.selectEncoder.condition.ip="",this.dialog.selectEncoder.condition.bundleId="",this.dialog.selectEncoder.table.data.splice(0,this.dialog.selectEncoder.table.data.length),this.dialog.selectEncoder.table.page.total=0,this.dialog.selectEncoder.table.page.currentPage=0,this.dialog.selectEncoder.table.current=""},handleSelectEncoderCommit:function(){this.form.encodeId=this.dialog.selectEncoder.table.current.id,this.form.encodeBundleId=this.dialog.selectEncoder.table.current.bundleId,this.form.encodeBundleName=this.dialog.selectEncoder.table.current.bundleName,this.form.encodeDeviceModel=this.dialog.selectEncoder.table.current.deviceModel,this.form.encodeUsername=this.dialog.selectEncoder.table.current.username,this.form.encodeIp=this.dialog.selectEncoder.table.current.ip,this.handleSelectEncoderClose()},handleSelectEncoderCurrentChange:function(e){this.refreshEncoder(e)},selectEncoderCurrentChange:function(e){this.dialog.selectEncoder.table.current=e},refreshDecoder:function(e){var t=this;t.dialog.selectDecoder.table.data.splice(0,t.dialog.selectDecoder.table.data.length),Object(l.U)({currentPage:e,pageSize:t.dialog.selectDecoder.table.page.pageSize,bundleName:t.dialog.selectDecoder.condition.bundleName||null,username:t.dialog.selectDecoder.condition.bundleNo||null,ip:t.dialog.selectDecoder.condition.ip||null,bundleId:t.dialog.selectDecoder.condition.bundleId||null}).then(function(n){if(200!==n.status)t.$message({message:n.message,type:"error"});else{var l=n.data,r=l.total,a=l.rows;if(a&&a.length>0)for(var i=0;i<a.length;i++)t.dialog.selectDecoder.table.data.push(a[i]);t.dialog.selectDecoder.table.page.total=r||0,t.dialog.selectDecoder.table.page.currentPage=e}})},selectDecoderTableRowKey:function(e){return e.bundleId},handleRefreshDecoder:function(){this.refreshDecoder(1)},handleSelectDecoder:function(){this.dialog.selectDecoder.visible=!0,this.refreshDecoder(1)},handleSelectDecoderClose:function(){this.dialog.selectDecoder.visible=!1,this.dialog.selectDecoder.condition.bundleName="",this.dialog.selectDecoder.condition.bundleNo="",this.dialog.selectDecoder.condition.ip="",this.dialog.selectDecoder.condition.bundleId="",this.dialog.selectDecoder.table.data.splice(0,this.dialog.selectDecoder.table.data.length),this.dialog.selectDecoder.table.page.total=0,this.dialog.selectDecoder.table.page.currentPage=0,this.dialog.selectDecoder.table.current=""},handleSelectDecoderCommit:function(){this.form.decodeId=this.dialog.selectDecoder.table.current.id,this.form.decodeBundleId=this.dialog.selectDecoder.table.current.bundleId,this.form.decodeBundleName=this.dialog.selectDecoder.table.current.bundleName,this.form.decodeDeviceModel=this.dialog.selectDecoder.table.current.deviceModel,this.form.decodeUsername=this.dialog.selectDecoder.table.current.username,this.form.decodeIp=this.dialog.selectDecoder.table.current.ip,this.handleSelectDecoderClose()},handleSelectDecoderCurrentChange:function(e){this.refreshDecoder(e)},selectDecoderCurrentChange:function(e){this.dialog.selectDecoder.table.current=e}},mounted:function(){var e=this;e.$nextTick(function(){e.$parent.$parent.$parent.$parent.$parent.setActive("/UserBindBundle")}),e.refreshUser()}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{position:"absolute",left:"20px",top:"20px",right:"20px",bottom:"20px"}},[n("div",{staticStyle:{width:"100%",height:"100%",position:"relative"}},[n("div",{staticStyle:{position:"absolute",left:"0",top:"0",bottom:"0",width:"400px","background-color":"#fff","border-right":"1px solid #EBEEF5",padding:"10px","box-sizing":"border-box"}},[n("el-scrollbar",{staticStyle:{height:"100%"}},[n("el-tree",{ref:"userTree",attrs:{props:e.tree.props,data:e.tree.data,"node-key":"uuid","check-strictly":"","expand-on-click-node":!1,"default-expand-all":"","highlight-current":""},on:{"current-change":e.currentTreeNodeChange},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var l=t.data;return n("span",{staticStyle:{flex:"1",display:"flex","align-items":"center","justify-content":"space-between","padding-right":"8px"}},[n("span",{staticStyle:{"font-size":"14px"}},["FOLDER"===l.type?n("span",{staticClass:"icon-folder-open"}):n("span",{staticClass:"icon-user"}),e._v(" "),n("span",[e._v(e._s(l.name))])])])}}])})],1)],1),e._v(" "),e.tree.currentUser?n("div",{staticStyle:{position:"absolute",left:"401px",top:"0",bottom:"0",right:"0","background-color":"#fff","box-sizing":"border-box",padding:"10px"}},[n("el-scrollbar",{staticStyle:{height:"100%"}},[n("div",{staticStyle:{"margin-bottom":"22px"}},[n("el-button",{attrs:{type:"warning",size:"small"},on:{click:e.handleBindBundle}},[e._v("绑定设备")])],1),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.table.data}},[n("el-table-column",{attrs:{prop:"bundleName",label:"设备名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"bundleId",width:"300",label:"bundleId"}}),e._v(" "),n("el-table-column",{attrs:{prop:"username",label:"设备号码"}}),e._v(" "),n("el-table-column",{attrs:{prop:"ip",label:"ip"}}),e._v(" "),n("el-table-column",{attrs:{prop:"type",label:"类型"}})],1)],1)],1):e._e()]),e._v(" "),[n("el-dialog",{attrs:{title:"绑定设备",visible:e.dialog.bindBundle.visible,width:"500px","before-close":e.handleBindBundleClose},on:{"update:visible":function(t){e.$set(e.dialog.bindBundle,"visible",t)}}},[n("el-form",{attrs:{"label-width":"80px"}},[n("el-form-item",{attrs:{label:"编码器"}},[n("el-input",{attrs:{readonly:"",placeholder:"点击选择设备"},nativeOn:{click:function(t){return e.handleSelectEncoder(t)}},model:{value:e.form.encodeBundleName,callback:function(t){e.$set(e.form,"encodeBundleName",t)},expression:"form.encodeBundleName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"解码器"}},[n("el-input",{attrs:{readonly:"",placeholder:"点击选择设备"},nativeOn:{click:function(t){return e.handleSelectDecoder(t)}},model:{value:e.form.decodeBundleName,callback:function(t){e.$set(e.form,"decodeBundleName",t)},expression:"form.decodeBundleName"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"medium"},on:{click:e.handleBindBundleClose}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.handleBindBundleCommit}},[e._v("确定")])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"选择编码器",visible:e.dialog.selectEncoder.visible,width:"1000px","before-close":e.handleSelectEncoderClose},on:{"update:visible":function(t){e.$set(e.dialog.selectEncoder,"visible",t)}}},[n("div",{staticStyle:{height:"450px",position:"relative"}},[n("div",{staticStyle:{position:"absolute",left:"-20px",top:"-20px",right:"-20px",bottom:"-20px"}},[n("div",{staticStyle:{width:"100%",height:"100%",position:"relative"}},[n("div",{staticStyle:{width:"100%",height:"40px","padding-left":"20px","padding-right":"20px","box-sizing":"border-box",position:"relative",bottom:"5px"}},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{staticStyle:{width:"173px"},attrs:{size:"small",placeholder:"名称"},model:{value:e.dialog.selectEncoder.condition.bundleName,callback:function(t){e.$set(e.dialog.selectEncoder.condition,"bundleName",t)},expression:"dialog.selectEncoder.condition.bundleName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"号码"}},[n("el-input",{staticStyle:{width:"173px"},attrs:{size:"small",placeholder:"号码"},model:{value:e.dialog.selectEncoder.condition.bundleNo,callback:function(t){e.$set(e.dialog.selectEncoder.condition,"bundleNo",t)},expression:"dialog.selectEncoder.condition.bundleNo"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"ip"}},[n("el-input",{staticStyle:{width:"173px"},attrs:{size:"small",placeholder:"ip"},model:{value:e.dialog.selectEncoder.condition.ip,callback:function(t){e.$set(e.dialog.selectEncoder.condition,"ip",t)},expression:"dialog.selectEncoder.condition.ip"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"bundleId"}},[n("el-input",{staticStyle:{width:"173px"},attrs:{size:"small",placeholder:"bundleId"},model:{value:e.dialog.selectEncoder.condition.bundleId,callback:function(t){e.$set(e.dialog.selectEncoder.condition,"bundleId",t)},expression:"dialog.selectEncoder.condition.bundleId"}})],1),e._v(" "),n("el-form-item",[n("el-button",{staticStyle:{width:"32px",padding:"0",height:"32px","font-size":"16px",position:"relative",top:"1px"},attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleRefreshEncoder}})],1)],1)],1),e._v(" "),n("div",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"40px",right:"0",bottom:"0",padding:"0 10px","box-sizing":"border-box"}},[n("el-table",{ref:"selectEncoderTable",staticStyle:{width:"100%"},attrs:{data:e.dialog.selectEncoder.table.data,height:"100%","highlight-current-row":"","row-key":"selectEncoderTableRowKey"},on:{"current-change":e.selectEncoderCurrentChange}},[n("el-table-column",{attrs:{prop:"bundleName",label:"设备名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"bundleId",width:"300",label:"bundleId"}}),e._v(" "),n("el-table-column",{attrs:{prop:"username",label:"设备号码"}}),e._v(" "),n("el-table-column",{attrs:{prop:"ip",label:"ip"}})],1)],1)])])]),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-pagination",{staticStyle:{float:"left"},attrs:{background:"",layout:"total, prev, pager, next, jumper",pageSize:e.dialog.selectEncoder.table.page.pageSize,total:e.dialog.selectEncoder.table.page.total}}),e._v(" "),n("el-button",{attrs:{size:"small"},on:{click:e.handleSelectEncoderClose}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSelectEncoderCommit}},[e._v("确定")])],1)]),e._v(" "),n("el-dialog",{attrs:{title:"选择解码器",visible:e.dialog.selectDecoder.visible,width:"1000px","before-close":e.handleSelectDecoderClose},on:{"update:visible":function(t){e.$set(e.dialog.selectDecoder,"visible",t)}}},[n("div",{staticStyle:{height:"450px",position:"relative"}},[n("div",{staticStyle:{position:"absolute",left:"-20px",top:"-20px",right:"-20px",bottom:"-20px"}},[n("div",{staticStyle:{width:"100%",height:"100%",position:"relative"}},[n("div",{staticStyle:{width:"100%",height:"40px","padding-left":"20px","padding-right":"20px","box-sizing":"border-box",position:"relative",bottom:"5px"}},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{staticStyle:{width:"173px"},attrs:{size:"small",placeholder:"名称"},model:{value:e.dialog.selectDecoder.condition.bundleName,callback:function(t){e.$set(e.dialog.selectDecoder.condition,"bundleName",t)},expression:"dialog.selectDecoder.condition.bundleName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"号码"}},[n("el-input",{staticStyle:{width:"173px"},attrs:{size:"small",placeholder:"号码"},model:{value:e.dialog.selectDecoder.condition.bundleNo,callback:function(t){e.$set(e.dialog.selectDecoder.condition,"bundleNo",t)},expression:"dialog.selectDecoder.condition.bundleNo"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"ip"}},[n("el-input",{staticStyle:{width:"173px"},attrs:{size:"small",placeholder:"ip"},model:{value:e.dialog.selectDecoder.condition.ip,callback:function(t){e.$set(e.dialog.selectDecoder.condition,"ip",t)},expression:"dialog.selectDecoder.condition.ip"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"bundleId"}},[n("el-input",{staticStyle:{width:"173px"},attrs:{size:"small",placeholder:"bundleId"},model:{value:e.dialog.selectDecoder.condition.bundleId,callback:function(t){e.$set(e.dialog.selectDecoder.condition,"bundleId",t)},expression:"dialog.selectDecoder.condition.bundleId"}})],1),e._v(" "),n("el-form-item",[n("el-button",{staticStyle:{width:"32px",padding:"0",height:"32px","font-size":"16px",position:"relative",top:"1px"},attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleRefreshDecoder}})],1)],1)],1),e._v(" "),n("div",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"40px",right:"0",bottom:"0",padding:"0 10px","box-sizing":"border-box"}},[n("el-table",{ref:"selectDecoderTable",staticStyle:{width:"100%"},attrs:{data:e.dialog.selectDecoder.table.data,height:"100%","highlight-current-row":""},on:{"current-change":e.selectDecoderCurrentChange}},[n("el-table-column",{attrs:{prop:"bundleName",label:"设备名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"bundleId",width:"300",label:"bundleId"}}),e._v(" "),n("el-table-column",{attrs:{prop:"username",label:"设备号码"}}),e._v(" "),n("el-table-column",{attrs:{prop:"ip",label:"ip"}})],1)],1)])])]),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-pagination",{staticStyle:{float:"left"},attrs:{background:"",layout:"total, prev, pager, next, jumper",pageSize:e.dialog.selectDecoder.table.page.pageSize,total:e.dialog.selectDecoder.table.page.total}}),e._v(" "),n("el-button",{attrs:{size:"small"},on:{click:e.handleSelectDecoderClose}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSelectDecoderCommit}},[e._v("确定")])],1)])]],2)},staticRenderFns:[]};var i=n("VU/8")(r,a,!1,function(e){n("t+jV")},"data-v-5ed77836",null);t.default=i.exports},sOsw:function(e,t){},snKp:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("mvHQ"),r=n.n(l),a=n("P9l9"),i={name:"ModifyLayernode",data:function(){var e=function(e,t,n){t&&!/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-4]\d{4}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/.test(t)?n(new Error("端口格式错误")):n()};return{activeTabName:"ModifyLayernode",typeOptions:[{label:"JV230接入",value:"ACCESS_JV230"},{label:"机顶盒接入",value:"ACCESS_TVOS"},{label:"混合器接入",value:"ACCESS_MIXER"},{label:"手机接入",value:"ACCESS_MOBILE"},{label:"音视频转发服务设备",value:"ACCESS_JV210"},{label:"录像存储服务单元A型",value:"ACCESS_CDN"},{label:"录像存储服务单元B型",value:"ACCESS_VOD"},{label:"监控资源汇接网关",value:"ACCESS_IPC"},{label:"流媒体管理服务设备",value:"ACCESS_STREAMMEDIA"},{label:"联网服务设备",value:"ACCESS_NETWORK"},{label:"显控汇接网关",value:"ACCESS_DISPLAYCTRL"},{label:"流转发器接入",value:"ACCESS_S100"}],id:this.$route.query.id,nodeForm:{type:"",name:"",ip:"",nodeUid:"",monitorUrl:"",netUrl:""},rules:{type:[{required:!0,message:"请选择节点类型",trigger:"change"}],name:[{required:!0,message:"请输入节点名称",trigger:"change"},{min:1,max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}],ip:[{validator:function(e,t,n){t&&!/^((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)$/.test(t)?n(new Error("IP格式错误")):n()},trigger:"blur"}],port:[{validator:e,trigger:"blur"}],downloadPort:[{validator:e,trigger:"blur"}]}}},methods:{handleTabClick:function(e,t){"ModifyLayernode"!==e.name&&this.$router.push("/"+e.name)},reset:function(){this.$refs.nodeForm.resetFields()},getNode:function(){var e=this,t={id:this.id};Object(a.D)(t).then(function(t){t.errmsg?e.$message({message:t.errMsg,type:"error"}):e.nodeForm=t.node})},submit:function(){var e=this;if(this.validate()){var t={json:r()(this.nodeForm)};Object(a._6)(t).then(function(t){t.errMsg?e.$message({message:t.errMsg,type:"error"}):e.$message({message:"修改成功",type:"success"})})}},validate:function(){var e=!1;return this.$refs.nodeForm.validate(function(t){e=t}),e}},mounted:function(){this.getNode()}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[n("el-tab-pane",{attrs:{label:"层节点列表",name:"LayernodeManage"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"修改层节点",name:"ModifyLayernode"}})],1),e._v(" "),n("el-form",{ref:"nodeForm",attrs:{model:e.nodeForm,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"节点类型",prop:"type"}},[n("el-select",{staticStyle:{width:"200px"},model:{value:e.nodeForm.type,callback:function(t){e.$set(e.nodeForm,"type",t)},expression:"nodeForm.type"}},e._l(e.typeOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.name,callback:function(t){e.$set(e.nodeForm,"name",t)},expression:"nodeForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"节点ID",prop:"nodeUid"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.nodeUid,callback:function(t){e.$set(e.nodeForm,"nodeUid",t)},expression:"nodeForm.nodeUid"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"节点IP",prop:"ip"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.ip,callback:function(t){e.$set(e.nodeForm,"ip",t)},expression:"nodeForm.ip"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"节点端口",prop:"port"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:e.nodeForm.port,callback:function(t){e.$set(e.nodeForm,"port",t)},expression:"nodeForm.port"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"下载端口",prop:"downloadPort"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"录制资源下载端口，可不填"},model:{value:e.nodeForm.downloadPort,callback:function(t){e.$set(e.nodeForm,"downloadPort",t)},expression:"nodeForm.downloadPort"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"监控地址",prop:"monitorUrl"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"监控页面地址，可不填"},model:{value:e.nodeForm.monitorUrl,callback:function(t){e.$set(e.nodeForm,"monitorUrl",t)},expression:"nodeForm.monitorUrl"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"网管地址",prop:"netUrl"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"网管页面地址，可不填"},model:{value:e.nodeForm.netUrl,callback:function(t){e.$set(e.nodeForm,"netUrl",t)},expression:"nodeForm.netUrl"}})],1),e._v(" "),n("div",{staticStyle:{"margin-top":"30px"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.reset()}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var s=n("VU/8")(i,o,!1,function(e){n("omPw")},"data-v-87f67e18",null);t.default=s.exports},"t+jV":function(e,t){},tGMC:function(e,t){},tvR6:function(e,t){},vUY2:function(e,t){},"wdO+":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.a0c172f975e2a378476f.js.map