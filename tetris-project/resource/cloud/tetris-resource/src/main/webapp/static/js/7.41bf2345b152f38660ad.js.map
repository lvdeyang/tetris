{"version":3,"sources":["webpack:///src/views/template/BundleTemplateManage.vue","webpack:///./src/views/template/BundleTemplateManage.vue?b84e","webpack:///./src/views/template/BundleTemplateManage.vue"],"names":["name","_this","this","keyword","errMsg","templates","val","_this2","id","tree","_this3","then","getTemplates","_this4","_iteratorNormalCompletion","_step","value","templateIds","err","requestIP","template_BundleTemplateManage","render","_vm","_h","$createElement","_c","_self","staticStyle","float","width","on","tab-click","handleTabClick","model","callback","$$v","activeTabName","expression","attrs","label","_v","margin-top","min-height","body-style","height","slot","size","placeholder","filters","$set","margin-left","type","click","staticClass","margin-right","action","uploadUrl","show-file-list","on-success","uploadSuccess","on-error","uploadError","handleMultiDelete","directives","rawName","data","selection-change","handleSelectionChange","prop","sortable","scopedSlots","_u","key","fn","scope","$event","handleDetail","row","handleSingleDelete","font-size","templateTree","props","treeProps","default-expand-all","staticRenderFns","Component","__webpack_require__","normalizeComponent","BundleTemplateManage","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/7.41bf2345b152f38660ad.js","sourcesContent":["<template>\n  <section>\n\n    <el-tabs v-model=\"activeTabName\" @tab-click=\"handleTabClick\" style=\"float:left; width:100%;\">\n      <el-tab-pane label=\"设备模板管理\" name=\"BundleTemplateManage\"></el-tab-pane>\n      <!--<el-tab-pane label=\"通道模板管理\" name=\"ChannelTemplateManage\"></el-tab-pane>-->\n    </el-tabs>\n\n    <el-card style=\"float:left;margin-top:10px;width:50%;min-height: 700px;\" body-style=\"padding:0px\">\n      <div slot=\"header\" style=\"height: 30px\">\n        <el-input size=\"small\" v-model=\"filters.keyword\" style=\"float: left;width:150px;\" placeholder=\"关键字\"></el-input>\n        <el-button size=\"small\" type=\"info\" @click=\"getTemplates\" style=\"float: left;margin-left: 30px;\">查询</el-button>\n\n        <el-upload\n          class=\"upload-demo\"\n          :action=uploadUrl\n          name=\"filePoster\"\n          :show-file-list=\"false\"\n          :on-success=\"uploadSuccess\"\n          :on-error=\"uploadError\"\n          style=\"float: right;margin-right: 10px;\">\n          <el-button size=\"small\" type=\"primary\">导入模板</el-button>\n        </el-upload>\n\n\n        <el-button size=\"small\" type=\"danger\" @click=\"handleMultiDelete\" style=\"float: right;margin-right: 10px;\">批量删除</el-button>\n      </div>\n\n      <!--模板列表-->\n      <el-table :data=\"templates\" v-loading=\"tableLoading\" style=\"width: 100%;\" @selection-change=\"handleSelectionChange\">\n        <el-table-column width=\"100\" type=\"selection\">\n        </el-table-column>\n        <el-table-column prop=\"deviceModel\" label=\"设备类型\" width=\"300\" sortable>\n        </el-table-column>\n\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"text\" @click=\"handleDetail(scope.row)\" size=\"small\">详情</el-button>\n            <el-button type=\"text\" @click=\"handleSingleDelete(scope.row)\" size=\"small\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n    </el-card>\n\n\n    <el-card style=\"float:left;margin-left:50px;margin-top:10px;width:40%;min-height: 700px;\" body-style=\"padding:0px\">\n      <div slot=\"header\" style=\"height: 30px\">\n        <span style=\"float: left;font-size: 18px;\">模板属性</span>\n      </div>\n\n      <el-tree :data=\"templateTree\" :props=\"treeProps\" default-expand-all></el-tree>\n    </el-card>\n  </section>\n</template>\n\n<script>\n  import { getTemplates,getTemplateTree,deleteTemplate} from '../../api/api';\n  // import apiConfig from '../../../config/api.config';\n  // let requestIP = document.location.host.split(\":\")[0];\n\n  let basePath = process.env.RESOURCE_ROOT + '/suma-venus-resource'\n  \n  export default {\n      name: \"templateManage\",\n      data() {\n        return {\n          activeTabName:\"BundleTemplateManage\",\n          filters:{\n            keyword : \"\"\n          },\n          tableLoading: false,\n          templates: [],\n          multipleSelection : [],\n          templateTree : [],\n          treeProps : {\n            children: 'children',\n            label: 'label',\n          },\n          // uploadUrl : \"http://\" + requestIP + \":8887/suma-venus-resource/template/import\",\n          uploadUrl : basePath + \"/template/import\",\n        }\n      },\n      methods:{\n        handleTabClick(tab, event) {\n          if(\"BundleTemplateManage\" !== tab.name){\n            this.$router.push('/' + tab.name);\n          }\n        },\n        getTemplates : function(){\n          this.tableLoading = true;\n          let param = {\n            name : this.filters.keyword\n          };\n          getTemplates(param).then(res => {\n            if(res.errMsg){\n              this.$message({\n                message: res.errMsg,\n                type: 'error'\n              });\n            }else{\n              this.templates = res.templates;\n            }\n\n            this.tableLoading = false;\n          });\n        },\n        handleSelectionChange : function(val){\n          this.multipleSelection = val;\n        },\n        handleDetail : function(row){\n          let param = {\n            channelTemplateId : row.id\n          };\n\n          getTemplateTree(param).then(res => {\n            if(res.errMsg){\n              this.$message({\n                message: res.errMsg,\n                type: 'error'\n              });\n            }else{\n              this.templateTree = res.tree;\n            }\n          });\n        },\n        handleSingleDelete : function(row){\n          this.$confirm('是否确认删除?', '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }).then(() => {\n            let param = {\n              templateIds : row.id\n            };\n            deleteTemplate(param).then(res => {\n              if(res.errMsg){\n                this.$message({\n                  message: res.errMsg,\n                  type: 'error'\n                });\n              }else{\n                this.$message({\n                  message: \"删除成功\",\n                  type: 'success'\n                });\n                this.getTemplates();\n                this.templateTree = [];\n              }\n            });\n          }).catch(() => {\n            this.$message({\n              type: 'info',\n              message: '已取消删除'\n            });\n          });\n        },\n        handleMultiDelete : function(){\n          if(!this.multipleSelection.length){\n            this.$message({\n              message: '请至少选择一行',\n              type: 'warning'\n            });\n            return;\n          }\n\n          this.$confirm('是否确认删除所有选定行?', '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }).then(() => {\n            let templateIds = \"\";\n            for(let selection of this.multipleSelection){\n              templateIds += selection.id;\n              templateIds += \";\";\n            }\n\n            let param = {\n              templateIds : templateIds\n            };\n\n            deleteTemplate(param).then(res => {\n              if(res.errMsg){\n                this.$message({\n                  message: res.errMsg,\n                  type: 'error'\n                });\n              }else{\n                this.$message({\n                  message: \"删除成功\",\n                  type: 'success'\n                });\n                this.getTemplates();\n                this.templateTree = [];\n              }\n            });\n          }).catch(() => {\n            this.$message({\n              type: 'info',\n              message: '已取消删除'\n            });\n          });\n        },\n        uploadSuccess: function(res){\n          if(res.errMsg){\n            this.$message({\n              message: res.errMsg,\n              type: 'error'\n            });\n          }else{\n            this.$message({\n              message: \"导入成功\",\n              type: 'success'\n            });\n            this.getTemplates();\n          }\n        },\n        uploadError: function(err, file, fileList){\n          this.$message({\n            message: \"上传文件错误\" + JSON.stringify(err),\n            type: 'error'\n          });\n        }\n      },\n      mounted(){\n        this.getTemplates();\n\n        if (this.uploadUrl.indexOf('__requestIP__') !== -1) {\n\t\t\t\t\t\tvar requestIP = document.location.host.split(':')[0]\n            this.uploadUrl = this.uploadUrl.replace('__requestIP__', requestIP)\n\t\t\t  }\n      }\n    }\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/template/BundleTemplateManage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('el-tabs',{staticStyle:{\"float\":\"left\",\"width\":\"100%\"},on:{\"tab-click\":_vm.handleTabClick},model:{value:(_vm.activeTabName),callback:function ($$v) {_vm.activeTabName=$$v},expression:\"activeTabName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"设备模板管理\",\"name\":\"BundleTemplateManage\"}})],1),_vm._v(\" \"),_c('el-card',{staticStyle:{\"float\":\"left\",\"margin-top\":\"10px\",\"width\":\"50%\",\"min-height\":\"700px\"},attrs:{\"body-style\":\"padding:0px\"}},[_c('div',{staticStyle:{\"height\":\"30px\"},attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('el-input',{staticStyle:{\"float\":\"left\",\"width\":\"150px\"},attrs:{\"size\":\"small\",\"placeholder\":\"关键字\"},model:{value:(_vm.filters.keyword),callback:function ($$v) {_vm.$set(_vm.filters, \"keyword\", $$v)},expression:\"filters.keyword\"}}),_vm._v(\" \"),_c('el-button',{staticStyle:{\"float\":\"left\",\"margin-left\":\"30px\"},attrs:{\"size\":\"small\",\"type\":\"info\"},on:{\"click\":_vm.getTemplates}},[_vm._v(\"查询\")]),_vm._v(\" \"),_c('el-upload',{staticClass:\"upload-demo\",staticStyle:{\"float\":\"right\",\"margin-right\":\"10px\"},attrs:{\"action\":_vm.uploadUrl,\"name\":\"filePoster\",\"show-file-list\":false,\"on-success\":_vm.uploadSuccess,\"on-error\":_vm.uploadError}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"导入模板\")])],1),_vm._v(\" \"),_c('el-button',{staticStyle:{\"float\":\"right\",\"margin-right\":\"10px\"},attrs:{\"size\":\"small\",\"type\":\"danger\"},on:{\"click\":_vm.handleMultiDelete}},[_vm._v(\"批量删除\")])],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.tableLoading),expression:\"tableLoading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.templates},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"width\":\"100\",\"type\":\"selection\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"deviceModel\",\"label\":\"设备类型\",\"width\":\"300\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){_vm.handleDetail(scope.row)}}},[_vm._v(\"详情\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){_vm.handleSingleDelete(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1)],1),_vm._v(\" \"),_c('el-card',{staticStyle:{\"float\":\"left\",\"margin-left\":\"50px\",\"margin-top\":\"10px\",\"width\":\"40%\",\"min-height\":\"700px\"},attrs:{\"body-style\":\"padding:0px\"}},[_c('div',{staticStyle:{\"height\":\"30px\"},attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',{staticStyle:{\"float\":\"left\",\"font-size\":\"18px\"}},[_vm._v(\"模板属性\")])]),_vm._v(\" \"),_c('el-tree',{attrs:{\"data\":_vm.templateTree,\"props\":_vm.treeProps,\"default-expand-all\":\"\"}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6279f9bb\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/template/BundleTemplateManage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6279f9bb\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./BundleTemplateManage.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./BundleTemplateManage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./BundleTemplateManage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6279f9bb\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./BundleTemplateManage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6279f9bb\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/template/BundleTemplateManage.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}