{"version":3,"sources":["webpack:///src/views/privilege/BindResource.vue","webpack:///./src/views/privilege/BindResource.vue?c6cd","webpack:///./src/views/privilege/BindResource.vue"],"names":["name","val","getResources","getUsers","h","handleCheckReadAllChange","handleCheckWriteAllChange","handleCheckHJAllChange","_iteratorNormalCompletion","resource","_step","value","bundleId","_iteratorNormalCompletion2","_step2","_iteratorNormalCompletion3","user","_step3","userNo","_iteratorNormalCompletion4","_step4","_iteratorNormalCompletion5","_step5","_iteratorNormalCompletion6","_step6","_iteratorNormalCompletion7","_step7","_iteratorNormalCompletion8","_step8","_iteratorNormalCompletion9","_step9","_iteratorNormalCompletion10","_step10","_this4","this","errMsg","roles","_this5","_iteratorNormalCompletion11","deviceModel","_step11","deviceModelOption","_this6","countPerPage","id","bindType","keyword","pageNum","total","resources","_iteratorNormalCompletion12","_step12","_this7","users","_iteratorNormalCompletion13","_step13","_this8","readChecks","writeChecks","HJchecks","getDeviceModels","getRoles","privilege_BindResource","render","_vm","_h","$createElement","_c","_self","staticStyle","float","width","on","tab-click","handleTabClick","model","callback","$$v","activeTabName","expression","attrs","label","_v","margin-top","font-size","body-style","directives","rawName","ref","data","highlight-current-row","current-change","handleRoleTableRowChange","prop","sortable","margin-left","staticClass","slot","size","placeholder","filters","$set","type","click","margin-right","render-header","renderCheckReadHeader","scopedSlots","_u","key","fn","scope","change","$event","handleCheckReadChange","row","renderCheckWriteHeader","handleCheckWriteChange","renderCheckHJHeader","handleCheckHJChange","span","submitPrivilege","layout","page-size","handleCurrentPageChange","staticRenderFns","Component","__webpack_require__","normalizeComponent","BindResource","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/12.6c5495cf380b8052da88.js","sourcesContent":["<template>\n\t<section>\n\n    <el-tabs v-model=\"activeTabName\" @tab-click=\"handleTabClick\" style=\"float:left; width:100%;\">\n      <el-tab-pane label=\"绑定资源用户\" name=\"BindResource\"></el-tab-pane>\n      <el-tab-pane label=\"绑定虚拟资源\" name=\"BindVirtualResource\"></el-tab-pane>\n    </el-tabs>\n\n    <el-card style=\"float:left;margin-top:10px;width:20%;font-size: 18px;\" body-style=\"padding:0px\">\n      <el-table ref=\"roleTable\" :data=\"roles\" highlight-current-row v-loading=\"roleTableLoading\" @current-change=\"handleRoleTableRowChange\" style=\"width: 100%;\">\n        <el-table-column prop=\"name\" label=\"角色名\" sortable>\n        </el-table-column>\n      </el-table>\n    </el-card>\n\n\n    <el-card style=\"float:left;margin-left:50px;margin-top:10px;width:70%;\" body-style=\"padding:0px\">\n\n      <div slot=\"header\" class=\"clearfix\">\n        <!--\n        <span style=\"float: left;font-size: 18px;\">设备资源</span>\n        <el-select v-model=\"filters.bindType\" placeholder=\"选择绑定状态\" style=\"float: left;margin-left: 50px;width:120px;\">\n          <el-option v-for=\"item in bindTypeOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\n          </el-option>\n        </el-select>\n        <el-select v-model=\"filters.deviceModel\" placeholder=\"选择资源类型\" style=\"float: left;margin-left: 30px;width:120px;\">\n          <el-option v-for=\"item in deviceModelOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\n          </el-option>\n        </el-select>\n                -->\n        <el-input size=\"small\" v-model=\"filters.keyword\" style=\"float: left;margin-left: 30px;width:200px;\" placeholder=\"关键字\" ></el-input>\n\n        <el-button size=\"small\" type=\"info\" @click=\"getResources\" style=\"float: left;margin-left: 30px;\">查询设备</el-button>\n        <el-button size=\"small\" type=\"info\" @click=\"getUsers\" style=\"float: left;margin-left: 30px;\">查询用户</el-button>\n        <el-input size=\"small\" v-model=\"filters.countPerPage\" style=\"float: right;margin-right: 30px;width:200px;\" placeholder=\"单页显示数量,默认20\" ></el-input>\n        <!--<el-button type=\"info\" @click=\"getResources\" style=\"float: left;margin-left: 30px;\">查询</el-button>-->\n\n      </div>\n\n      <!--资源列表-->\n      <el-table :data=\"resources\" v-show=\"resourceTableShow\" v-loading=\"resourceTableLoading\" style=\"width: 100%;\">\n        <el-table-column type=\"index\" width=\"100\"></el-table-column>\n        <el-table-column prop=\"name\" label=\"名称\" width=\"200\" sortable>\n        </el-table-column>\n        <el-table-column prop=\"deviceModel\" label=\"资源类型\" width=\"200\" sortable>\n        </el-table-column>\n        <!--<el-table-column prop=\"bundleId\" label=\"资源ID\" width=\"350\"  sortable>-->\n        <!--</el-table-column>-->\n        <el-table-column prop=\"username\" label=\"设备账号\" width=\"270\" >\n        </el-table-column>\n        <el-table-column width=\"150\" :render-header=\"renderCheckReadHeader\" >\n          <template slot-scope=\"scope\">\n            <el-checkbox v-model=\"scope.row.hasReadPrivilege\" @change=\"handleCheckReadChange(scope.row)\"></el-checkbox>\n          </template>\n        </el-table-column>\n\n        <el-table-column width=\"150\" :render-header=\"renderCheckWriteHeader\" >\n          <template slot-scope=\"scope\">\n            <el-checkbox v-model=\"scope.row.hasWritePrivilege\" @change=\"handleCheckWriteChange(scope.row)\"></el-checkbox>\n          </template>\n        </el-table-column>\n      </el-table>\n\n\n      <!--用户列表-->\n      <el-table :data=\"users\" v-show=\"userTableShow\" v-loading=\"userTableLoading\" style=\"width: 100%;\">\n        <el-table-column type=\"index\" width=\"100\"></el-table-column>\n        <el-table-column prop=\"name\" label=\"名称\" width=\"200\" sortable>\n        </el-table-column>\n        <el-table-column prop=\"userNo\" label=\"用户编号\" width=\"270\" >\n        </el-table-column>\n        <el-table-column width=\"150\" :render-header=\"renderCheckReadHeader\">\n          <template slot-scope=\"scope\">\n            <el-checkbox v-model=\"scope.row.hasReadPrivilege\" @change=\"handleCheckReadChange(scope.row)\"></el-checkbox>\n          </template>\n        </el-table-column>\n\n        <el-table-column width=\"150\" :render-header=\"renderCheckWriteHeader\">\n          <template slot-scope=\"scope\">\n            <el-checkbox v-model=\"scope.row.hasWritePrivilege\" @change=\"handleCheckWriteChange(scope.row)\"></el-checkbox>\n          </template>\n        </el-table-column>\n\n        <el-table-column width=\"150\" :render-header=\"renderCheckHJHeader\">\n          <template slot-scope=\"scope\">\n            <el-checkbox v-model=\"scope.row.hasHJPrivilege\" @change=\"handleCheckHJChange(scope.row)\"></el-checkbox>\n          </template>\n        </el-table-column>\n\n      </el-table>\n\n      <!--工具条-->\n      <el-col :span=\"24\" class=\"toolbar\">\n        <el-button type=\"primary\" @click=\"submitPrivilege\">提交</el-button>\n        <el-pagination layout=\"prev, pager, next\" @current-change=\"handleCurrentPageChange\" :page-size=\"countPerPage\" :total=\"total\" style=\"float:right;\">\n        </el-pagination>\n      </el-col>\n\n    </el-card>\n\n\t</section>\n</template>\n\n<script>\n\timport { getAllRoles,getDeviceModels,getBundlesOfRole,submitBundlePrivilege,getUsersOfRole,submitUserresPrivilege} from '../../api/api';\n\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n        activeTabName : \"BindResource\",\n        roles : [\n          ],\n        currentRoleRow : null,\n\t\t\t\tresources: [\n\t\t\t\t  ],\n        bindTypeOptions : [\n          {\n            value : \"all\",\n            label : \"全部\"\n          },\n          {\n            value : \"binded\",\n            label : \"已绑定\"\n          },\n          {\n            value : \"unbinded\",\n            label : \"未绑定\"\n          }\n        ],\n        deviceModelOptions : [],\n        filters: {\n          deviceModel : '',\n          keyword: '',\n          bindType : 'all',\n          countPerPage : ''\n        },\n\t\t\t\ttotal: 0,\n\t\t\t\tpageNum: 1,\n        countPerPage : 20,\n        roleTableLoading : false,\n        resourceTableLoading: false,\n        prevReadChecks : [],//之前的录制权限\n        prevWriteChecks : [],//之前的点播权限\n        prevHJChecks : [],\n        readChecks : [],//新的录制权限\n        writeChecks : [],//新的点播权限\n        HJchecks : [],\n        detailDialogVisible : false,\n        detailInfos : [],\n        users : [],\n        userTableLoading : false,\n        resourceTableShow : true,\n        userTableShow : false,\n        checkReadAll : false,\n        checkWriteAll : false,\n        checkHJAll : false\n\t\t\t}\n\t\t},\n\t\tmethods: {\n      handleTabClick(tab, event) {\n        if(\"BindResource\" !== tab.name){\n          this.$router.push('/' + tab.name);\n        }\n      },\n      handleRoleTableRowChange : function(val){\n        this.currentRoleRow = val;\n        //TODO 选中角色，查询资源\n        if(this.resourceTableShow){\n          this.getResources();\n        }else if(this.userTableShow){\n          this.getUsers();\n        }\n\n      },\n      renderCheckReadHeader : function(h, data){//自定义特殊表格头单元\n        return (\n          <el-checkbox v-model={this.checkReadAll} onChange={this.handleCheckReadAllChange}>录制</el-checkbox>\n        )\n      },\n      renderCheckWriteHeader : function(h, data){//自定义特殊表格头单元\n        return (\n          <el-checkbox v-model={this.checkWriteAll} onChange={this.handleCheckWriteAllChange}>点播</el-checkbox>\n        )\n      },\n      renderCheckHJHeader :  function(h, data){//自定义特殊表格头单元\n        return (\n          <el-checkbox v-model={this.checkHJAll} onChange={this.handleCheckHJAllChange}>呼叫</el-checkbox>\n      )\n      },\n      handleCheckReadAllChange : function(val){\n        if(this.resourceTableShow){//设备\n          if(val){\n            for (let resource of this.resources){\n              this.readChecks.push(resource.bundleId);\n              resource.hasReadPrivilege = true;\n            }\n          } else {\n            this.readChecks = [];\n            for (let resource of this.resources){\n              resource.hasReadPrivilege = false;\n            }\n          }\n        }else if(this.userTableShow){//用户\n          if(val){\n            for(let user of this.users){\n              this.readChecks.push(user.userNo);\n              user.hasReadPrivilege = true;\n            }\n          }else{\n            this.readChecks = [];\n            for (let user of this.users){\n              user.hasReadPrivilege = false;\n            }\n          }\n        }\n      },\n      handleCheckWriteAllChange : function(val){\n        if(this.resourceTableShow){//设备\n          if(val){\n            for (let resource of this.resources){\n              this.writeChecks.push(resource.bundleId);\n              resource.hasWritePrivilege = true;\n            }\n          } else {\n            this.writeChecks = [];\n            for (let resource of this.resources){\n              resource.hasWritePrivilege = false;\n            }\n          }\n        } else if(this.userTableShow){ //用户\n          if(val){\n            for(let user of this.users){\n              this.writeChecks.push(user.userNo);\n              user.hasWritePrivilege = true;\n            }\n          } else {\n            this.writeChecks = [];\n            for (let user of this.users){\n              user.hasWritePrivilege = false;\n            }\n          }\n        }\n      },\n      handleCheckHJAllChange : function(val){\n        if(this.userTableShow){//用户\n          if(val){\n            for(let user of this.users){\n              this.HJchecks.push(user.userNo);\n              user.hasHJPrivilege = true;\n            }\n          } else {\n            this.HJchecks = [];\n            for(let user of this.users){\n              user.hasHJPrivilege = false;\n            }\n          }\n        }\n      },\n      handleCheckReadChange : function(row){\n        if(this.resourceTableShow){\n          if(row.hasReadPrivilege){\n            this.readChecks.push(row.bundleId);\n            //全选判断\n            if(this.readChecks.length === this.resources.length){\n              this.checkReadAll = true;\n            }\n          } else {\n            this.readChecks.splice(this.readChecks.indexOf(row.bundleId),1);\n            this.checkReadAll = false;\n          }\n        }else if(this.userTableShow){\n          if(row.hasReadPrivilege){\n            this.readChecks.push(row.userNo);\n            //全选判断\n            if(this.readChecks.length === this.users.length){\n              this.checkReadAll = true;\n            }\n          } else {\n            this.readChecks.splice(this.readChecks.indexOf(row.userNo),1);\n            this.checkReadAll = false;\n          }\n        }\n      },\n      handleCheckWriteChange : function(row){\n        if(this.resourceTableShow){\n          if(row.hasWritePrivilege){\n            this.writeChecks.push(row.bundleId);\n            if(this.writeChecks.length === this.resources.length){\n              this.checkWriteAll = true;\n            }\n          } else {\n            this.writeChecks.splice(this.writeChecks.indexOf(row.bundleId),1);\n            this.checkWriteAll = false;\n          }\n        }else if(this.userTableShow){\n          if(row.hasWritePrivilege){\n            this.writeChecks.push(row.userNo);\n            //全选判断\n            if(this.writeChecks.length === this.users.length){\n              this.checkWriteAll = true;\n            }\n          } else {\n            this.writeChecks.splice(this.writeChecks.indexOf(row.userNo),1);\n            this.checkWriteAll = false;\n          }\n        }\n\n      },\n      handleCheckHJChange : function(row){\n        if(this.userTableShow) {\n          if (row.hasHJPrivilege) {\n            this.HJchecks.push(row.userNo);\n            //全选判断\n            if(this.HJchecks.length === this.users.length){\n              this.checkHJAll = true;\n            }\n          } else {\n            this.HJchecks.splice(this.HJchecks.indexOf(row.userNo), 1);\n            this.checkHJAll = false;\n          }\n        }\n      },\n\t\t\t//获取角色列表\n      getRoles : function() {\n\t\t\t\tlet param = {\n\t\t\t\t};\n\n        this.roleTableLoading = true;\n        getAllRoles(param).then( res => {\n          if(res.errMsg){\n            this.$message({\n              message: res.errMsg,\n              type: 'error'\n            });\n          }else{\n            this.roles = res.roles;\n          }\n\n          this.roleTableLoading = false;\n        });\n\t\t\t},\n      //获取资源类型\n      getDeviceModels : function(){\n        getDeviceModels().then(res => {\n          if(!res.errMsg && res.deviceModels){\n            this.deviceModelOptions.push({\n              value : \"\",\n              label : \"全部类型\"\n            });\n            for(let deviceModel of res.deviceModels){\n              let deviceModelOption = {\n                value : deviceModel,\n                label : deviceModel\n              };\n              this.deviceModelOptions.push(deviceModelOption);\n            }\n          }\n        });\n      },\n      //获取资源列表\n      getResources : function(){\n        if(!this.currentRoleRow){\n          this.$message({\n            message: \"请先选择角色\",\n            type: 'error'\n          });\n          return;\n        }\n        this.resourceTableShow = true;\n        this.userTableShow = false;\n        this.prevReadChecks = [];\n        this.prevWriteChecks = [];\n        this.readChecks = [];\n        this.writeChecks = [];\n        this.checkReadAll = false;\n        this.checkWriteAll = false;\n        this.checkHJAll = false;\n        this.countPerPage = 20;\n        if(/^[1-9]+[0-9]*]*$/.test(this.filters.countPerPage)){\n          this.countPerPage = parseInt(this.filters.countPerPage);\n        }\n\n        let param = {\n          roleId : this.currentRoleRow.id,\n          bindType: this.filters.bindType,\n          deviceModel : this.filters.deviceModel,\n          keyword : this.filters.keyword,\n          pageNum : this.pageNum,\n          countPerPage : this.countPerPage\n        };\n        this.resourceTableLoading = true;\n        getBundlesOfRole(param).then((res) => {\n          if (res.errMsg) {\n            this.$message({\n              message: res.errMsg,\n              type: 'error'\n            });\n          } else {\n            this.total = res.total;\n            this.resources = res.resources;\n            for (let resource of this.resources){\n              if(resource.hasReadPrivilege){\n                this.prevReadChecks.push(resource.bundleId);\n                this.readChecks.push(resource.bundleId);\n              }\n              if(resource.hasWritePrivilege){\n                this.prevWriteChecks.push(resource.bundleId);\n                this.writeChecks.push(resource.bundleId);\n              }\n            }\n\n            //全选判断\n            if(this.readChecks.length === this.resources.length){\n              this.checkReadAll = true;\n            }\n            if(this.writeChecks.length === this.resources.length){\n              this.checkWriteAll = true;\n            }\n\n          }\n\n        \tthis.resourceTableLoading = false;\n        });\n      },\n      //资源列表分页\n      handleCurrentPageChange(val) {\n        this.pageNum = val;\n        if(this.resourceTableShow){\n          this.getResources();\n        } else {\n          this.getUsers();\n        }\n      },\n      getUsers : function(){\n        if(!this.currentRoleRow){\n          this.$message({\n            message: \"请先选择角色\",\n            type: 'error'\n          });\n          return;\n        }\n\n        this.resourceTableShow = false;\n        this.userTableShow = true;\n        this.prevReadChecks = [];\n        this.prevWriteChecks = [];\n        this.readChecks = [];\n        this.writeChecks = [];\n        this.prevHJChecks = [];\n        this.HJchecks = [];\n        this.checkReadAll = false;\n        this.checkWriteAll = false;\n        this.checkHJAll = false;\n        this.countPerPage = 20;\n        if(/^[1-9]+[0-9]*]*$/.test(this.filters.countPerPage)){\n          this.countPerPage = parseInt(this.filters.countPerPage);\n        }\n        let param = {\n          roleId : this.currentRoleRow.id,\n          keyword : this.filters.keyword,\n          pageNum : this.pageNum,\n          countPerPage : this.countPerPage\n        };\n        this.userTableLoading = true;\n        getUsersOfRole(param).then((res) => {\n          if (res.errMsg) {\n            this.$message({\n              message: res.errMsg,\n              type: 'error'\n            });\n          } else {\n            this.total = res.total;\n            this.users = res.users;\n            for (let user of this.users){\n              if(user.hasReadPrivilege){\n                this.prevReadChecks.push(user.userNo);\n                this.readChecks.push(user.userNo);\n              }\n              if(user.hasWritePrivilege){\n                this.prevWriteChecks.push(user.userNo);\n                this.writeChecks.push(user.userNo);\n              }\n              if(user.hasHJPrivilege){\n                this.prevHJChecks.push(user.userNo);\n                this.HJchecks.push(user.userNo);\n              }\n            }\n\n            //全选判断\n            if(this.readChecks.length === this.users.length){\n              this.checkReadAll = true;\n            }\n            if(this.writeChecks.length === this.users.length){\n              this.checkWriteAll = true;\n            }\n            if(this.HJchecks.length === this.users.length){\n              this.checkHJAll = true;\n            }\n\n          }\n\n          this.userTableLoading = false;\n        });\n\n      },\n      //提交资源权限\n      submitPrivilege : function(){\n        if(this.resourceTableShow){\n          let param = {\n            roleId : this.currentRoleRow.id,\n            prevReadChecks : this.prevReadChecks.join(\",\"),\n            prevWriteChecks: this.prevWriteChecks.join(\",\"),\n            readChecks : this.readChecks.join(\",\"),\n            writeChecks : this.writeChecks.join(\",\")\n          };\n\n          this.resourceTableLoading = true;\n          submitBundlePrivilege(param).then((res) => {\n            if(res.errMsg){\n              this.$message({\n                message: res.errMsg,\n                type: 'error'\n              });\n            } else {\n              this.$message({\n                message: \"提交成功\",\n                type: 'success'\n              });\n              //更新prevChecks\n              this.prevReadChecks = [].concat(this.readChecks);\n              this.prevWriteChecks = [].concat(this.writeChecks);\n            }\n            this.resourceTableLoading = false;\n          });\n        }else if(this.userTableShow){\n          let param = {\n            roleId : this.currentRoleRow.id,\n            prevReadChecks : this.prevReadChecks.join(\",\"),\n            prevWriteChecks: this.prevWriteChecks.join(\",\"),\n            prevHJChecks: this.prevHJChecks.join(\",\"),\n            readChecks : this.readChecks.join(\",\"),\n            writeChecks : this.writeChecks.join(\",\"),\n            hjChecks : this.HJchecks.join(\",\")\n          };\n          this.userTableLoading = true;\n          submitUserresPrivilege(param).then((res) => {\n            if(res.errMsg){\n              this.$message({\n                message: res.errMsg,\n                type: 'error'\n              });\n            } else {\n              this.$message({\n                message: \"提交成功\",\n                type: 'success'\n              });\n              //更新prevChecks\n              this.prevReadChecks = [].concat(this.readChecks);\n              this.prevWriteChecks = [].concat(this.writeChecks);\n              this.prevHJChecks = [].concat(this.HJchecks);\n            }\n            this.userTableLoading = false;\n          });\n        }\n\n\n      }\n\t\t},\n\t\tmounted() {\n\t\t  this.getDeviceModels();\n\t\t  this.getRoles();\n\t\t}\n\t}\n\n</script>\n\n<style>\n  .clearfix:before,\n  .clearfix:after {\n    display: table;\n    content: \"\";\n  }\n  .clearfix:after {\n    clear: both\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/privilege/BindResource.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('el-tabs',{staticStyle:{\"float\":\"left\",\"width\":\"100%\"},on:{\"tab-click\":_vm.handleTabClick},model:{value:(_vm.activeTabName),callback:function ($$v) {_vm.activeTabName=$$v},expression:\"activeTabName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"绑定资源用户\",\"name\":\"BindResource\"}}),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"label\":\"绑定虚拟资源\",\"name\":\"BindVirtualResource\"}})],1),_vm._v(\" \"),_c('el-card',{staticStyle:{\"float\":\"left\",\"margin-top\":\"10px\",\"width\":\"20%\",\"font-size\":\"18px\"},attrs:{\"body-style\":\"padding:0px\"}},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.roleTableLoading),expression:\"roleTableLoading\"}],ref:\"roleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.roles,\"highlight-current-row\":\"\"},on:{\"current-change\":_vm.handleRoleTableRowChange}},[_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"角色名\",\"sortable\":\"\"}})],1)],1),_vm._v(\" \"),_c('el-card',{staticStyle:{\"float\":\"left\",\"margin-left\":\"50px\",\"margin-top\":\"10px\",\"width\":\"70%\"},attrs:{\"body-style\":\"padding:0px\"}},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('el-input',{staticStyle:{\"float\":\"left\",\"margin-left\":\"30px\",\"width\":\"200px\"},attrs:{\"size\":\"small\",\"placeholder\":\"关键字\"},model:{value:(_vm.filters.keyword),callback:function ($$v) {_vm.$set(_vm.filters, \"keyword\", $$v)},expression:\"filters.keyword\"}}),_vm._v(\" \"),_c('el-button',{staticStyle:{\"float\":\"left\",\"margin-left\":\"30px\"},attrs:{\"size\":\"small\",\"type\":\"info\"},on:{\"click\":_vm.getResources}},[_vm._v(\"查询设备\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"float\":\"left\",\"margin-left\":\"30px\"},attrs:{\"size\":\"small\",\"type\":\"info\"},on:{\"click\":_vm.getUsers}},[_vm._v(\"查询用户\")]),_vm._v(\" \"),_c('el-input',{staticStyle:{\"float\":\"right\",\"margin-right\":\"30px\",\"width\":\"200px\"},attrs:{\"size\":\"small\",\"placeholder\":\"单页显示数量,默认20\"},model:{value:(_vm.filters.countPerPage),callback:function ($$v) {_vm.$set(_vm.filters, \"countPerPage\", $$v)},expression:\"filters.countPerPage\"}})],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.resourceTableShow),expression:\"resourceTableShow\"},{name:\"loading\",rawName:\"v-loading\",value:(_vm.resourceTableLoading),expression:\"resourceTableLoading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.resources}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"名称\",\"width\":\"200\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"deviceModel\",\"label\":\"资源类型\",\"width\":\"200\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"设备账号\",\"width\":\"270\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"150\",\"render-header\":_vm.renderCheckReadHeader},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-checkbox',{on:{\"change\":function($event){_vm.handleCheckReadChange(scope.row)}},model:{value:(scope.row.hasReadPrivilege),callback:function ($$v) {_vm.$set(scope.row, \"hasReadPrivilege\", $$v)},expression:\"scope.row.hasReadPrivilege\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"150\",\"render-header\":_vm.renderCheckWriteHeader},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-checkbox',{on:{\"change\":function($event){_vm.handleCheckWriteChange(scope.row)}},model:{value:(scope.row.hasWritePrivilege),callback:function ($$v) {_vm.$set(scope.row, \"hasWritePrivilege\", $$v)},expression:\"scope.row.hasWritePrivilege\"}})]}}])})],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.userTableShow),expression:\"userTableShow\"},{name:\"loading\",rawName:\"v-loading\",value:(_vm.userTableLoading),expression:\"userTableLoading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.users}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"名称\",\"width\":\"200\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"userNo\",\"label\":\"用户编号\",\"width\":\"270\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"150\",\"render-header\":_vm.renderCheckReadHeader},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-checkbox',{on:{\"change\":function($event){_vm.handleCheckReadChange(scope.row)}},model:{value:(scope.row.hasReadPrivilege),callback:function ($$v) {_vm.$set(scope.row, \"hasReadPrivilege\", $$v)},expression:\"scope.row.hasReadPrivilege\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"150\",\"render-header\":_vm.renderCheckWriteHeader},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-checkbox',{on:{\"change\":function($event){_vm.handleCheckWriteChange(scope.row)}},model:{value:(scope.row.hasWritePrivilege),callback:function ($$v) {_vm.$set(scope.row, \"hasWritePrivilege\", $$v)},expression:\"scope.row.hasWritePrivilege\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"150\",\"render-header\":_vm.renderCheckHJHeader},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-checkbox',{on:{\"change\":function($event){_vm.handleCheckHJChange(scope.row)}},model:{value:(scope.row.hasHJPrivilege),callback:function ($$v) {_vm.$set(scope.row, \"hasHJPrivilege\", $$v)},expression:\"scope.row.hasHJPrivilege\"}})]}}])})],1),_vm._v(\" \"),_c('el-col',{staticClass:\"toolbar\",attrs:{\"span\":24}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitPrivilege}},[_vm._v(\"提交\")]),_vm._v(\" \"),_c('el-pagination',{staticStyle:{\"float\":\"right\"},attrs:{\"layout\":\"prev, pager, next\",\"page-size\":_vm.countPerPage,\"total\":_vm.total},on:{\"current-change\":_vm.handleCurrentPageChange}})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-27a85cbc\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/privilege/BindResource.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-27a85cbc\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./BindResource.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./BindResource.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./BindResource.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-27a85cbc\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./BindResource.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/privilege/BindResource.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}