webpackJsonp([18],{HV9H:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=t("woOf"),o=t.n(s),i=t("mvHQ"),n=t.n(i),a=t("P9l9"),l={data:function(){return{filters:{},activeTab:"serInfoTab",serInfoVOs:[],total:0,page:1,listLoading:!1,sels:[],serInfoEditFormVisible:!1,serInfoEditBtnVisible:!1,serInfoAddBtnVisible:!1,editLoading:!1,serTypeOptions:[{value:4,label:"应用服务单元"},{value:5,label:"信令控制服务单元"},{value:6,label:"媒体处理服务单元"}],serProOptions:[{value:1,label:"TCP"},{value:2,label:"UDP"},{value:3,label:"TCP和UDP"}],serInfoEditForm:{id:0,nodeUuid:"",nodeName:"",nodeFather:"",nodeRelations:0,nodeFactInfo:""},serInfoEditFormRules:{},serNodeVOs:[],serNodeEditFormVisible:!1,serNodeEditBtnVisible:!1,serNodeAddBtnVisible:!1,serNodeEditForm:{id:0,serUuid:"",serName:"",serAddr:"",serPort:0,serPwd:"",serNode:"",serFactInfo:""},serNodeEditFormRules:{},fatherNodeOptions:[]}},methods:{handleClick:function(e,r){this.queryList()},selsChange:function(e){this.sels=e},resetForm:function(e){void 0!=this.$refs[e]&&this.$refs[e].resetFields()},serTypeFormat:function(e,r){var t=e[r.property];if(void 0==t)return"";switch(t){case 1:return"业务控制单元";case 4:return"应用服务单元";case 5:return"信令控制服务单元";case 6:return"媒体处理服务单元"}},syncStatusFormat:function(e,r){var t=e[r.property];if(void 0==t)return"";switch(t){case"ASYNC":return"未同步";case"SYNC":return"已同步"}},sourceTypeFormat:function(e,r){var t=e[r.property];if(void 0==t)return"";switch(t){case"SYSTEM":return"BVC";case"EXTERNAL":return"LDAP"}},queryList:function(){var e=this,r={};this.listLoading=!0,"serInfoTab"===this.activeTab?Object(a.R)(r).then(function(r){null!==r.errMsg&&""!==r.errMsg?e.$message({message:r.errMsg,type:"error",duration:3e3}):e.serInfoVOs=r.serInfoVOs,e.listLoading=!1}):"serNodeTab"===this.activeTab&&Object(a.S)(r).then(function(r){null!==r.errMsg&&""!==r.errMsg?e.$message({message:r.errMsg,type:"error",duration:3e3}):e.serNodeVOs=r.serNodeVOs,e.listLoading=!1})},handleShowAddDialog:function(){var e=this;if(console.log("add"),"serInfoTab"===this.activeTab)this.resetForm("serInfoEditForm"),this.serInfoAddBtnVisible=!0,this.serInfoEditFormVisible=!0,this.serInfoEditBtnVisible=!1;else if("serNodeTab"===this.activeTab){Object(a.P)({}).then(function(r){null!==r.errMsg&&""!==r.errMsg?console.log(a.P,error):(e.fatherNodeOptions=r.serNodeVOs,console.log("queryFatherNodeOptions, success",n()(r.serNodeVOs)))}),this.resetForm("serNodeEditForm"),this.serNodeAddBtnVisible=!0,this.serNodeEditFormVisible=!0,this.serNodeEditBtnVisible=!1}},handleShowEditDialog:function(e,r){var t=this;if(console.log("edit"),"serInfoTab"===this.activeTab)this.resetForm("serInfoEditForm"),this.serInfoAddBtnVisible=!1,this.serInfoEditBtnVisible=!1,this.serInfoEditFormVisible=!0,this.serInfoEditBtnVisible=!0,this.serInfoEditForm=o()({},r);else if("serNodeTab"===this.activeTab){Object(a.P)({}).then(function(e){null!==e.errMsg&&""!==e.errMsg?console.log(a.P,error):t.fatherNodeOptions=e.serNodeVOs}),this.resetForm("serNodeEditForm"),this.serNodeAddBtnVisible=!1,this.serNodeEditBtnVisible=!1,this.serNodeEditFormVisible=!0,this.serNodeEditBtnVisible=!0,this.serNodeEditForm=o()({},r)}},handleAddSerInfo:function(){var e=this;this.$refs.serInfoEditForm.validate(function(r){r&&e.$confirm("确认新增服务设备信息吗？","提示",{}).then(function(){e.editLoading=!0;var r={serNo:e.serInfoEditForm.serNo,serName:e.serInfoEditForm.serName,serAddr:e.serInfoEditForm.serAddr,serPort:e.serInfoEditForm.serPort,serPwd:e.serInfoEditForm.serPwd,serType:e.serInfoEditForm.serType,serPro:e.serInfoEditForm.serPro,serNode:e.serInfoEditForm.serNode};console.log(n()(r)),Object(a.c)(r).then(function(r){null!==r.errMsg&&""!==r.errMsg?e.$message({message:r.errMsg,type:"error",duration:3e3}):(e.$message({message:"新增成功",type:"success"}),e.$refs.serInfoEditForm.resetFields(),e.serInfoEditFormVisible=!1,e.addSerInfoBtnVisibale=!1,e.queryList())}),e.editLoading=!1})})},handleEditSerInfo:function(){var e=this;this.$refs.serInfoEditForm.validate(function(r){r&&e.$confirm("确认修改服务设备信息吗？","提示",{}).then(function(){e.editLoading=!0;var r={id:e.serInfoEditForm.id,serUuid:e.serInfoEditForm.serUuid,serNo:e.serInfoEditForm.serNo,serName:e.serInfoEditForm.serName,serAddr:e.serInfoEditForm.serAddr,serPort:e.serInfoEditForm.serPort,serPwd:e.serInfoEditForm.serPwd,serType:e.serInfoEditForm.serType,serPro:e.serInfoEditForm.serPro,serNode:e.serInfoEditForm.serNode};console.log(n()(r)),Object(a.L)(r).then(function(r){null!==r.errMsg&&""!==r.errMsg?e.$message({message:r.errMsg,type:"error",duration:3e3}):(e.$message({message:"修改成功",type:"success"}),e.$refs.serInfoEditForm.resetFields(),e.serInfoEditFormVisible=!1,e.serInfoEditBtnVisibale=!1,e.queryList())}),e.editLoading=!1})})},handleAddSerNode:function(){var e=this;this.$refs.serNodeEditForm.validate(function(r){r&&e.$confirm("确认新增服务节点信息吗？","提示",{}).then(function(){e.editLoading=!0;var r={nodeName:e.serNodeEditForm.nodeName,nodeFather:e.serNodeEditForm.nodeFather,nodeRelations:e.serNodeEditForm.nodeRelations,nodeFactInfo:e.serNodeEditForm.nodeFactInfo};console.log(n()(r)),Object(a.d)(r).then(function(r){null!==r.errMsg&&""!==r.errMsg?e.$message({message:r.errMsg,type:"error",duration:3e3}):(e.$message({message:"新增成功",type:"success"}),e.$refs.serNodeEditForm.resetFields(),e.serNodeEditFormVisible=!1,e.serNodeAddBtnVisibale=!1,e.queryList())}),e.editLoading=!1})})},handleEditSerNode:function(){var e=this;this.$refs.serNodeEditForm.validate(function(r){r&&e.$confirm("确认修改服务节点信息吗？","提示",{}).then(function(){e.editLoading=!0;var r={nodeUuid:e.serNodeEditForm.nodeUuid,nodeName:e.serNodeEditForm.nodeName,nodeFather:e.serNodeEditForm.nodeFather};Object(a.M)(r).then(function(r){null!==r.errMsg&&""!==r.errMsg?e.$message({message:r.errMsg,type:"error",duration:3e3}):(e.$message({message:"修改成功",type:"success"}),e.$refs.serNodeEditForm.resetFields(),e.serNodeEditFormVisible=!1,e.serNodeEditBtnVisible=!1,e.queryList())}),e.editLoading=!1})})},handleDelSerInfo:function(e,r){var t=this;this.$confirm("删除此服务设备信息，确认？","提示",{}).then(function(){var e={serUuid:r.serUuid};Object(a.l)(e).then(function(e){null!==e.errMsg&&""!==e.errMsg?t.$message({message:e.errMsg,type:"error",duration:3e3}):t.queryList()})})},handleDelSerNode:function(e,r){var t=this;this.$confirm("删除此服务节点信息，确认？","提示",{}).then(function(){var e={nodeUuid:r.nodeUuid};Object(a.m)(e).then(function(e){null!==e.errMsg&&""!==e.errMsg?t.$message({message:e.errMsg,type:"error",duration:3e3}):t.queryList()})})},handleSyncToLdap:function(){var e=this;this.$confirm("确认将本地未同步信息同步到LDAP服务器么？","提示",{}).then(function(){e.editLoading=!0;var r={};"serInfoTab"===e.activeTab?Object(a._10)(r).then(function(r){null!==r.errMsg&&""!==r.errMsg?e.$message({message:r.errMsg,type:"error",duration:3e3}):(e.$message({message:"同步成功, 共上传"+r.successCnt+"条信息",type:"success"}),e.queryList())}):"serNodeTab"===e.activeTab&&Object(a._12)(r).then(function(r){null!==r.errMsg&&""!==r.errMsg?e.$message({message:r.errMsg,type:"error",duration:3e3}):(e.$message({message:"同步成功, 共上传"+r.successCnt+"条信息",type:"success"}),e.queryList())}),e.editLoading=!1})},handleSyncFromLdap:function(){var e=this;this.$confirm("确认将从LDAP服务器同步下载信息么？","提示",{}).then(function(){e.editLoading=!0;var r={};"serInfoTab"===e.activeTab?Object(a._9)(r).then(function(r){null!==r.errMsg&&""!==r.errMsg?e.$message({message:r.errMsg,type:"error",duration:3e3}):(e.$message({message:"同步成功, 共下载"+r.successCnt+"条信息",type:"success"}),e.queryList())}):"serNodeTab"===e.activeTab&&Object(a._11)(r).then(function(r){null!==r.errMsg&&""!==r.errMsg?e.$message({message:r.errMsg,type:"error",duration:3e3}):(e.$message({message:"同步成功, 共下载"+r.successCnt+"条信息",type:"success"}),e.queryList())}),e.editLoading=!1})},handleCleanUpLdap:function(){var e=this;this.$confirm("确认清空上传到LDAP何从LDAP下载的所有信息么？","提示",{}).then(function(){e.editLoading=!0;var r={};"serInfoTab"===e.activeTab?Object(a.g)(r).then(function(r){null!==r.errMsg&&""!==r.errMsg?e.$message({message:r.errMsg,type:"error",duration:3e3}):(e.$message({message:"重置成功",type:"success"}),e.queryList())}):"serNodeTab"===e.activeTab&&Object(a.h)(r).then(function(r){null!==r.errMsg&&""!==r.errMsg?e.$message({message:r.errMsg,type:"error",duration:3e3}):(e.$message({message:"重置成功",type:"success"}),e.queryList())}),e.editLoading=!1})}},mounted:function(){this.queryList()}},d={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("section",[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeTab,callback:function(r){e.activeTab=r},expression:"activeTab"}},[t("el-tab-pane",{attrs:{label:"服务设备信息",name:"serInfoTab"}}),e._v(" "),t("el-tab-pane",{attrs:{label:"服务节点信息",name:"serNodeTab"}})],1),e._v(" "),t("el-form",{ref:"filters",attrs:{inline:!0,model:e.filters,"label-width":"80px",size:"mini"}},[t("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px",margin:"0px"},attrs:{span:24}},[t("el-form-item",{attrs:{span:3}},[t("el-button",{on:{click:function(r){e.queryList()}}},[e._v("查询")])],1),e._v(" "),t("el-form-item",{attrs:{span:3}},[t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.handleShowAddDialog()}}},[e._v("新增")])],1),e._v(" "),t("el-form-item",{attrs:{span:3}},[t("el-dropdown",[t("el-button",{attrs:{type:"primary"}},[e._v("\n                    LDAP操作"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{nativeOn:{click:function(r){e.handleSyncToLdap()}}},[e._v("上传到LDAP")]),e._v(" "),t("el-dropdown-item",{nativeOn:{click:function(r){e.handleSyncFromLdap()}}},[e._v("从LDAP下载")]),e._v(" "),t("el-dropdown-item",{nativeOn:{click:function(r){e.handleCleanUpLdap()}}},[e._v("重置LDAP数据")])],1)],1)],1)],1)],1),e._v(" "),"serInfoTab"===e.activeTab?t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.serInfoVOs,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[t("el-table-column",{attrs:{prop:"serNo",label:"设备编号",width:"180"}}),e._v(" "),t("el-table-column",{attrs:{prop:"serName",label:"设备名称",width:"200"}}),e._v(" "),t("el-table-column",{attrs:{prop:"serAddr",label:"IP地址",width:"180"}}),e._v(" "),t("el-table-column",{attrs:{prop:"serPort",label:"端口",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{prop:"serType",label:"设备类型",formatter:e.serTypeFormat,width:"180",sortable:""}}),e._v(" "),t("el-table-column",{attrs:{prop:"sourceType",label:"来源",formatter:e.sourceTypeFormat,width:"100"}}),e._v(" "),t("el-table-column",{attrs:{prop:"syncStatus",label:"同步状态",formatter:e.syncStatusFormat,width:"100"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(r){return["SYSTEM"===r.row.sourceType?t("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleShowEditDialog(r.$index,r.row)}}},[e._v("编辑")]):e._e(),e._v(" "),"SYSTEM"===r.row.sourceType?t("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleDelSerInfo(r.$index,r.row)}}},[e._v("删除")]):e._e()]}}])})],1):e._e(),e._v(" "),t("el-dialog",{attrs:{title:"服务设备信息编辑",visible:e.serInfoEditFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(r){e.serInfoEditFormVisible=r}}},[t("el-form",{ref:"serInfoEditForm",attrs:{model:e.serInfoEditForm,"label-width":"160px",rules:e.serInfoEditFormRules}},[e._e(),e._v(" "),e.serInfoEditBtnVisible?t("el-form-item",{attrs:{label:"设备UUID",prop:"serUuid"}},[t("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:e.serInfoEditForm.serUuid,callback:function(r){e.$set(e.serInfoEditForm,"serUuid",r)},expression:"serInfoEditForm.serUuid"}})],1):e._e(),e._v(" "),t("el-form-item",{attrs:{label:"设备编号",prop:"serNo"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serNo,callback:function(r){e.$set(e.serInfoEditForm,"serNo",r)},expression:"serInfoEditForm.serNo"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"设备名称",prop:"serName"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serName,callback:function(r){e.$set(e.serInfoEditForm,"serName",r)},expression:"serInfoEditForm.serName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"IP地址",prop:"serAddr"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serAddr,callback:function(r){e.$set(e.serInfoEditForm,"serAddr",r)},expression:"serInfoEditForm.serAddr"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"端口",prop:"serPort"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serPort,callback:function(r){e.$set(e.serInfoEditForm,"serPort",r)},expression:"serInfoEditForm.serPort"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"密码",prop:"serPwd"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serPwd,callback:function(r){e.$set(e.serInfoEditForm,"serPwd",r)},expression:"serInfoEditForm.serPwd"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"设备类型",prop:"serType"}},[[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.serInfoEditForm.serType,callback:function(r){e.$set(e.serInfoEditForm,"serType",r)},expression:"serInfoEditForm.serType"}},e._l(e.serTypeOptions,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]],2),e._v(" "),t("el-form-item",{attrs:{label:"协议类型",prop:"serPro"}},[[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.serInfoEditForm.serPro,callback:function(r){e.$set(e.serInfoEditForm,"serPro",r)},expression:"serInfoEditForm.serPro"}},e._l(e.serProOptions,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]],2),e._v(" "),t("el-form-item",{attrs:{label:"服务节点归属",prop:"serNode"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serInfoEditForm.serNode,callback:function(r){e.$set(e.serInfoEditForm,"serNode",r)},expression:"serInfoEditForm.serNode"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.serInfoEditBtnVisible?t("el-button",{attrs:{size:"small"},on:{click:function(r){e.handleEditSerInfo()}}},[e._v("修改")]):e._e(),e._v(" "),e.serInfoAddBtnVisible?t("el-button",{attrs:{size:"small"},on:{click:function(r){e.handleAddSerInfo()}}},[e._v("新增")]):e._e(),e._v(" "),t("el-button",{attrs:{size:"small"},nativeOn:{click:function(r){e.serInfoEditFormVisible=!1}}},[e._v("关闭")])],1)],1),e._v(" "),"serNodeTab"===e.activeTab?t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.serNodeVOs,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[e._e(),e._v(" "),t("el-table-column",{attrs:{prop:"nodeName",label:"节点名称",width:"200"}}),e._v(" "),t("el-table-column",{attrs:{prop:"nodeUuid",label:"节点UUID",width:"280"}}),e._v(" "),t("el-table-column",{attrs:{prop:"nodeFather",label:"上级服务节点ID",width:"280",sortable:""}}),e._v(" "),t("el-table-column",{attrs:{prop:"nodeRelations",label:"关联服务节点ID",width:"160",sortable:""}}),e._v(" "),t("el-table-column",{attrs:{prop:"sourceType",label:"来源",formatter:e.sourceTypeFormat,width:"100"}}),e._v(" "),t("el-table-column",{attrs:{prop:"syncStatus",label:"同步状态",formatter:e.syncStatusFormat,width:"100"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(r){return["SYSTEM"===r.row.sourceType?t("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleShowEditDialog(r.$index,r.row)}}},[e._v("编辑")]):e._e(),e._v(" "),"SYSTEM"===r.row.sourceType?t("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleDelSerNode(r.$index,r.row)}}},[e._v("删除")]):e._e()]}}])})],1):e._e(),e._v(" "),t("el-dialog",{attrs:{title:"服务节点信息编辑",visible:e.serNodeEditFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(r){e.serNodeEditFormVisible=r}}},[t("el-form",{ref:"serNodeEditForm",attrs:{model:e.serNodeEditForm,"label-width":"160px",rules:e.serNodeEditFormRules}},[e._e(),e._v(" "),e.serNodeEditBtnVisible?t("el-form-item",{attrs:{label:"服务节点UUID",prop:"nodeUuid"}},[t("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:e.serNodeEditForm.nodeUuid,callback:function(r){e.$set(e.serNodeEditForm,"nodeUuid",r)},expression:"serNodeEditForm.nodeUuid"}})],1):e._e(),e._v(" "),t("el-form-item",{attrs:{label:"服务节点名称",prop:"nodeName"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.serNodeEditForm.nodeName,callback:function(r){e.$set(e.serNodeEditForm,"nodeName",r)},expression:"serNodeEditForm.nodeName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"上级服务节点",prop:"nodeFather"}},[[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.serNodeEditForm.nodeFather,callback:function(r){e.$set(e.serNodeEditForm,"nodeFather",r)},expression:"serNodeEditForm.nodeFather"}},e._l(e.fatherNodeOptions,function(e){return t("el-option",{key:e.nodeUuid,attrs:{label:e.nodeName,value:e.nodeUuid}})}))]],2)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.serNodeEditBtnVisible?t("el-button",{attrs:{size:"small"},on:{click:function(r){e.handleEditSerNode()}}},[e._v("修改")]):e._e(),e._v(" "),e.serNodeAddBtnVisible?t("el-button",{attrs:{size:"small"},on:{click:function(r){e.handleAddSerNode()}}},[e._v("新增")]):e._e(),e._v(" "),t("el-button",{attrs:{size:"small"},nativeOn:{click:function(r){e.serNodeEditFormVisible=!1}}},[e._v("关闭")])],1)],1)],1)},staticRenderFns:[]},c=t("VU/8")(l,d,!1,null,null,null);r.default=c.exports}});
//# sourceMappingURL=18.01b774707d1791c1eef7.js.map