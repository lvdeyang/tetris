webpackJsonp([4],{cU5d:function(e,l){},ifcc:function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var a=t("mvHQ"),n=t.n(a),r=t("BO1k"),s=t.n(r),i=t("P9l9"),o={name:"AddBundle",data:function(){var e=this;return{activeTabName:"AddBundle",extraInfos:[],bundleForm:{deviceModel:"",bundleType:"",bundleName:"",username:"",onlinePassword:"",checkPass:"",bundleAlias:"",accessLayerUid:"",deviceAddr:{deviceIp:"",devicePort:5060},coderType:"DEFAULT"},rules:{deviceModel:[{required:!0,message:"请选择设备形态",trigger:"change"}],bundleName:[{required:!0,message:"请输入设备名称",trigger:"blur"},{min:1,max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}],username:[{required:!0,message:"请输入设备账号",trigger:"blur"}],onlinePassword:[{validator:function(l,t,a){""===t?a(new Error("请输入密码")):(""!==e.bundleForm.checkPass&&e.$refs.bundleForm.validateField("checkPass"),a())},trigger:"blur"}],checkPass:[{validator:function(l,t,a){""===t?a(new Error("请再次输入密码")):t!==e.bundleForm.onlinePassword?a(new Error("两次输入密码不一致!")):a()},trigger:"blur"}]},deviceModelOptions:[],coderTypeOptions:[{label:"编码器",value:"ENCODER"},{label:"解码器",value:"DECODER"},{label:"默认",value:"DEFAULT"}],bundleTypeOptions:[{label:"终端",value:"VenusTerminal"},{label:"混合器",value:"VenusMixer"},{label:"转发器",value:"VenusTransporter"},{label:"外部输出设备",value:"VenusOutConnection"},{label:"大屏设备",value:"VenusVideoMatrix"}]}},methods:{handleTabClick:function(e,l){"AddBundle"!==e.name&&this.$router.push("/"+e.name)},getDeviceModels:function(){var e=this;Object(i.y)().then(function(l){if(!l.errMsg&&l.deviceModels){var t=!0,a=!1,n=void 0;try{for(var r,i=s()(l.deviceModels);!(t=(r=i.next()).done);t=!0){var o=r.value,d={value:o,label:o};e.deviceModelOptions.push(d)}}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}}})},addExtraInfo:function(){this.extraInfos.push({})},remove:function(e){var l=this.extraInfos.indexOf(e);-1!==l&&this.extraInfos.splice(l,1)},reset:function(){this.$refs.bundleForm.resetFields()},submit:function(){var e=this;if(this.validateBaseInfo()&&this.validateExtraInfo()){var l={bundle:n()(this.bundleForm),extraInfoVOList:n()(this.extraInfos)};Object(i.a)(l).then(function(l){l.errMsg?e.$message({message:l.errMsg,type:"error"}):(e.$message({message:"添加成功",type:"success"}),setTimeout(function(){window.location.reload()},1e3))})}},validateBaseInfo:function(){var e=!1;return this.$refs.bundleForm.validate(function(l){e=l}),e},validateExtraInfo:function(){var e=!0,l=!1,t=void 0;try{for(var a,n=s()(this.extraInfos);!(e=(a=n.next()).done);e=!0){var r=a.value;if(!r.name||!r.value)return this.$message({message:"扩展字段不能为空",type:"error"}),!1}}catch(e){l=!0,t=e}finally{try{!e&&n.return&&n.return()}finally{if(l)throw t}}return!0}},mounted:function(){this.getDeviceModels()}},d={render:function(){var e=this,l=e.$createElement,t=e._self._c||l;return t("section",[t("el-tabs",{staticStyle:{float:"left",width:"100%"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(l){e.activeTabName=l},expression:"activeTabName"}},[t("el-tab-pane",{attrs:{label:"资源列表",name:"BundleManage"}}),e._v(" "),t("el-tab-pane",{attrs:{label:"添加资源",name:"AddBundle"}})],1),e._v(" "),t("el-form",{ref:"bundleForm",attrs:{model:e.bundleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{size:"small",label:"设备形态",prop:"deviceModel"}},[t("el-select",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:e.bundleForm.deviceModel,callback:function(l){e.$set(e.bundleForm,"deviceModel",l)},expression:"bundleForm.deviceModel"}},e._l(e.deviceModelOptions,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"jv210"==e.bundleForm.deviceModel,expression:"bundleForm.deviceModel=='jv210'"}],attrs:{size:"small",label:"编解码类型",prop:"coderType"}},[t("el-select",{staticStyle:{width:"200px"},model:{value:e.bundleForm.coderType,callback:function(l){e.$set(e.bundleForm,"coderType",l)},expression:"bundleForm.coderType"}},e._l(e.coderTypeOptions,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("el-form-item",{attrs:{size:"small",label:"别名",prop:"bundleAlias"}},[t("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.bundleAlias,callback:function(l){e.$set(e.bundleForm,"bundleAlias",l)},expression:"bundleForm.bundleAlias"}})],1),e._v(" "),t("el-form-item",{attrs:{size:"small",label:"设备名称",prop:"bundleName"}},[t("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.bundleName,callback:function(l){e.$set(e.bundleForm,"bundleName",l)},expression:"bundleForm.bundleName"}})],1),e._v(" "),t("el-form-item",{attrs:{size:"small",label:"设备账号",prop:"username"}},[t("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.username,callback:function(l){e.$set(e.bundleForm,"username",l)},expression:"bundleForm.username"}})],1),e._v(" "),t("el-form-item",{attrs:{size:"small",label:"设备密码",prop:"onlinePassword"}},[t("el-input",{staticStyle:{width:"200px"},attrs:{type:"password","auto-complete":"off"},model:{value:e.bundleForm.onlinePassword,callback:function(l){e.$set(e.bundleForm,"onlinePassword",l)},expression:"bundleForm.onlinePassword"}})],1),e._v(" "),t("el-form-item",{attrs:{size:"small",label:"确认密码",prop:"checkPass"}},[t("el-input",{staticStyle:{width:"200px"},attrs:{type:"password","auto-complete":"off"},model:{value:e.bundleForm.checkPass,callback:function(l){e.$set(e.bundleForm,"checkPass",l)},expression:"bundleForm.checkPass"}})],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"jv210"==e.bundleForm.deviceModel,expression:"bundleForm.deviceModel=='jv210'"}],attrs:{size:"small",label:"接入层UID",prop:"accessNodeUid"}},[t("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.accessNodeUid,callback:function(l){e.$set(e.bundleForm,"accessNodeUid",l)},expression:"bundleForm.accessNodeUid"}})],1),e._v(" "),t("el-form-item",{attrs:{size:"small",label:"设备IP"}},[t("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.deviceAddr.deviceIp,callback:function(l){e.$set(e.bundleForm.deviceAddr,"deviceIp",l)},expression:"bundleForm.deviceAddr.deviceIp"}})],1),e._v(" "),t("el-form-item",{attrs:{size:"small",label:"设备端口"}},[t("el-input",{staticStyle:{width:"200px"},model:{value:e.bundleForm.deviceAddr.devicePort,callback:function(l){e.$set(e.bundleForm.deviceAddr,"devicePort",l)},expression:"bundleForm.deviceAddr.devicePort"}})],1),e._v(" "),t("el-button",{staticStyle:{"margin-top":"10px","margin-left":"30px"},attrs:{type:"info",size:"small"},on:{click:e.addExtraInfo}},[e._v("新增扩展字段")]),e._v(" "),e._l(e.extraInfos,function(l,a){return t("div",{staticStyle:{"margin-top":"10px","margin-left":"30px"}},[t("el-input",{staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"扩展字段名"},model:{value:l.name,callback:function(t){e.$set(l,"name",t)},expression:"extraInfo.name"}}),e._v(" "),t("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{size:"small",placeholder:"扩展字段值"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"extraInfo.value"}}),e._v(" "),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"danger"},on:{click:function(t){t.preventDefault(),e.remove(l)}}},[e._v("删除")])],1)}),e._v(" "),t("div",{staticStyle:{"margin-top":"30px","margin-left":"30px"}},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(l){e.submit()}}},[e._v("提交")]),e._v(" "),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(l){e.reset()}}},[e._v("重置")])],1)],2)],1)},staticRenderFns:[]};var u=t("VU/8")(o,d,!1,function(e){t("cU5d")},"data-v-c5a7a8be",null);l.default=u.exports}});
//# sourceMappingURL=4.3876b0ee447b8325d499.js.map