<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<link rel="stylesheet" type="text/css" href="../chart.css"/>
<style type="text/css">
    html, body{width:100%; height:100%; padding:0; margin:0; overflow:hidden; background-color:#eee;}
    body *{box-sizing:border-box;}
    .cell{width:50%; height:50%; float:left;}
</style>
<body>
    <div class="cell">
        <div id="container" style="width:100%; height:100%; position:relative; background-color:#fff;">

        </div>
    </div>
    <div class="cell">

    </div>
    <div class="cell"></div>
    <div class="cell"></div>
</body>
<script type="text/javascript" src="lib/d3.v5.js"></script>
<script type="text/javascript" src="lib/jquery-2.2.3.js"></script>
<script type="text/javascript" src="../LineChart.js"></script>
<script type="text/javascript" src="../StackedBarChart.js"></script>
<script type="text/javascript" src="lib/date.ext.js"></script>
<script type="text/javascript">
    $(function(){
        var formater = 'hh:mm:ss';
        var domain = [new Date(2019,1,18,10,13).format(formater), new Date(2019,1,18,10,13,1).format(formater), new Date(2019,1,18,10,13,2).format(formater), new Date(2019,1,18,10,13,3).format(formater), new Date(2019,1,18,10,13,4).format(formater), new Date(2019,1,18,10,13,5).format(formater), new Date(2019,1,18,10,13,6).format(formater)];
        domain = [new Date().format(formater), new Date().format(formater)];
        var line = new LineChart({
            id:'a',
            $el:$('#container')[0],
            title:'图表标题',
            margin:40,
            x:{
                type:'enum',
                ticks:5,
                domain:domain,
                format:function(){
                    return '';
                }
                //format:'fn 格式化数据',
                //parse:'fn 解析数据'
            },
            y:{
                type:'basic',
                ticks:5,
                domain:[100, 0],
                format:function(d){
                    return d+'%';
                }
                //format:'fn 格式化数据',
                //parse:'fn 解析数据'
            },
            data:[{
                color:'red',
                name:'图例1',
                curve:false,
                points:false,
                x:domain,
                //y:[55, 10, 20, 40, 67, 0, 99]
                y:[50, 50]
            }]
        });

        setInterval(function(){
            domain.push(new Date().format(formater));
            var random = Math.random()*50;
            line.config.data[0].y.push(random);
            if(domain.length > 40){
                domain.shift();
                line.config.data[0].y.shift();
            }
            line.reDraw();
        }, 1000);

        /*setTimeout(function(){
            line.addLine({
                color:'grey',
                name:'图例2',
                x:domain,
                y:[25, 10, 50, 90, 20, 60, 50]
            });
        }, 2000);*/

        $(window).on('resize.chart', function(){
            line.resize().reDrawLines();
        });
    });
</script>
</html>