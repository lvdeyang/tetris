webpackJsonp([4],{fzdN:function(e,t,a){"use strict";var r=a("mvHQ"),l=a.n(r),i=a("hhm8");t.a={alarmLevelToString:function(e){switch(e){case"INFO":return"信息";case"MINOR":return"一般";case"MAJOR":return"重要";case"CRITICAL":return"严重"}},dateFormat:function(e,t){var a=e[t.property];return console.log("dataString="+a),void 0===a?"":(console.log("dataString="+l()(Date.parse(a))),i.a.formatDate.format(new Date(Date.parse(a)),"yyyy-MM-dd hh:mm:ss"))}}},zfDG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("woOf"),l=a.n(r),i=a("mvHQ"),o=a.n(i),s=a("fzdN"),n=a("Y5VU"),m=a.n(n),d=a("P9l9"),u={data:function(){var e=this;return{filters:{},alarmInfoVOs:[],total:0,page:1,listLoading:!1,sels:[],editFormVisible:!1,editBtnVisible:!1,addBtnVisible:!1,editLoading:!1,alarmLevelOptions:[{value:"INFO",label:"提示"},{value:"MINOR",label:"一般"},{value:"MAJOR",label:"重要"},{value:"CRITICAL",label:"严重"}],alarmLevelSel:[],uploadUrl:m.a.alarmroot+"/alarmInfo/import",editForm:{id:0,name:"",password:"",confirmpassword:"",phone:"",email:"",isAdmin:0,recAlarmPhoneRSS:0,recAlarmEmailRSS:0,description:""},bindRoleVisible:!1,currentUserId:0,editFormRules:{alarmCode:[{required:!0,message:"请输入8位数字告警编码",trigger:"blur"},{validator:function(t,a,r){if(/^\d{8}$/.test(a))if(e.editBtnVisible)r();else{var l={alarmCode:a};Object(d.b)(l).then(function(e){null!==e.check&&"exist"===e.check?r(new Error("告警编码已存在")):r()})}else r(new Error("请输入8位数字告警编码"))}}],alarmName:[{required:!0,message:"请输入告警名称",trigger:"blur"},{min:1,max:20,message:"请输入不超过20字的告警名称",trigger:"blur"}],alarmLevel:[{required:!0,message:"请选择告警级别",trigger:"blur"}],alarmBrief:[{max:200,message:"请输入不超过200字",trigger:"blur"}],alarmSolution:[{max:200,message:"请输入不超过200字",trigger:"blur"}]}}},methods:{queryAlarmBaseInfoList:function(){var e=this,t={keyword:this.filters.keyword,pageIndex:this.page-1,pageSize:10};this.listLoading=!0,Object(d.k)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.total=t.total,e.alarmInfoVOs=t.alarmInfoVOs),e.listLoading=!1})},handleShowAdd:function(){this.resetForm("editForm"),this.addBtnVisible=!0,this.editFormVisible=!0,this.editBtnVisible=!1},handleAdd:function(){var e=this;this.$refs.editForm.validate(function(t){t&&e.$confirm("确认新增告警基本信息吗？","提示",{}).then(function(){e.editLoading=!0;var t={alarmCode:e.editForm.alarmCode,alarmName:e.editForm.alarmName,alarmLevel:e.editForm.alarmLevel,alarmBrief:e.editForm.alarmBrief,alarmSolution:e.editForm.alarmSolution};console.log(o()(t)),Object(d.a)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"新增成功",type:"success"}),e.$refs.editForm.resetFields(),e.editFormVisible=!1,e.addBtnVisibale=!1,e.queryAlarmBaseInfoList())}),e.editLoading=!1})})},handleShowEdit:function(e,t){this.resetForm("editForm"),this.editFormVisible=!0,this.addBtnVisible=!1,this.editBtnVisible=!0,this.editForm=l()({},t)},resetForm:function(e){void 0!=this.$refs[e]&&this.$refs[e].resetFields()},handleEdit:function(){var e=this;this.$refs.editForm.validate(function(t){e.$confirm("确认修改告警基本信息吗？","提示",{}).then(function(){e.editLoading=!0;var t={id:e.editForm.id,alarmCode:e.editForm.alarmCode,alarmName:e.editForm.alarmName,alarmLevel:e.editForm.alarmLevel,alarmBrief:e.editForm.alarmBrief,alarmSolution:e.editForm.alarmSolution};Object(d.g)(t).then(function(t){null!==t.errMsg&&""!==t.errMsg?e.$message({message:t.errMsg,type:"error",duration:3e3}):(e.$message({message:"修改成功",type:"success"}),e.$refs.editForm.resetFields(),e.editFormVisible=!1,e.queryAlarmBaseInfoList())}),e.editLoading=!1})})},handleDel:function(e,t){var a=this;this.$confirm("删除告警基本信息会删除所有此类告警，确认？","提示",{}).then(function(){var e={id:t.id};Object(d.d)(e).then(function(e){null!==e.errMsg&&""!==e.errMsg?a.$message({message:e.errMsg,type:"error",duration:3e3}):a.queryAlarmBaseInfoList()})})},selsChange:function(e){this.sels=e},handleCurrentChange:function(e){this.page=e,this.queryAlarmBaseInfoList()},alarmLevelFormat:function(e,t){var a=e[t.property];return void 0==a?"":s.a.alarmLevelToString(a)},uploadSuccess:function(e){""!=e.errMsg?this.$message({message:e.errMsg,type:"error"}):(0!==e.sameNum?this.$message({message:"导入"+e.importNum+"条告警基本信息, 另外"+e.sameNum+"条编码重复信息未导入",type:"success"}):this.$message({message:"导入"+e.importNum+"条告警基本信息",type:"success"}),this.queryAlarmBaseInfoList())},uploadError:function(){this.$message({message:"上传文件错误",type:"error"})},onprogress:function(){this.editLoading=!0},batchRemove:function(){}},mounted:function(){this.queryAlarmBaseInfoList()}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-form",{ref:"filters",attrs:{inline:!0,model:e.filters,"label-width":"80px",size:"mini"}},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px",margin:"0px"},attrs:{span:24}},[a("el-form-item",{attrs:{prop:"keyword",label:"关键字",span:6}},[a("el-input",{model:{value:e.filters.keyword,callback:function(t){e.$set(e.filters,"keyword",t)},expression:"filters.keyword"}})],1),e._v(" "),a("el-form-item",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:e.queryAlarmBaseInfoList}},[e._v("查询")])],1),e._v(" "),a("el-form-item",{attrs:{span:3}},[a("el-button",{on:{click:function(t){e.resetForm("filters")}}},[e._v("重置")])],1),e._v(" "),a("el-form-item",{attrs:{span:3}},[a("el-button",{on:{click:function(t){e.handleShowAdd()}}},[e._v(" 新增")])],1),e._v(" "),a("el-form-item",{attrs:{span:3}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:e.uploadUrl,name:"filePoster","show-file-list":!1,"on-success":e.uploadSuccess,"on-error":e.uploadError,"on-progress":e.onprogress}},[a("el-button",{attrs:{type:"primary"}},[e._v("导入")])],1)],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{stripe:"",data:e.alarmInfoVOs,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"alarmCode",label:"编码",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"alarmName",label:"名称",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{prop:"alarmLevel",label:"级别",formatter:e.alarmLevelFormat,width:"180",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"alarmBrief",label:"简介",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleShowEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":10,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"告警基本信息编辑",visible:e.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"160px",rules:e.editFormRules}},[e.editBtnVisible?a("el-form-item",{attrs:{label:"序号",prop:"id"}},[a("el-input",{attrs:{"auto-complete":"off",readonly:e.editBtnVisible},model:{value:e.editForm.id,callback:function(t){e.$set(e.editForm,"id",t)},expression:"editForm.id"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"告警编码",prop:"alarmCode"}},[a("el-input",{attrs:{"auto-complete":"off",readonly:e.editBtnVisible},model:{value:e.editForm.alarmCode,callback:function(t){e.$set(e.editForm,"alarmCode",t)},expression:"editForm.alarmCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"告警名称",prop:"alarmName"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.alarmName,callback:function(t){e.$set(e.editForm,"alarmName",t)},expression:"editForm.alarmName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"告警级别",prop:"alarmLevel"}},[[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.alarmLevel,callback:function(t){e.$set(e.editForm,"alarmLevel",t)},expression:"editForm.alarmLevel"}},e._l(e.alarmLevelOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]],2),e._v(" "),a("el-form-item",{attrs:{label:"告警简介",prop:"alarmBrief"}},[a("el-input",{attrs:{type:"textarea","auto-complete":"off"},model:{value:e.editForm.alarmBrief,callback:function(t){e.$set(e.editForm,"alarmBrief",t)},expression:"editForm.alarmBrief"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"解决建议",prop:"alarmSolution"}},[a("el-input",{attrs:{type:"textarea","auto-complete":"off"},model:{value:e.editForm.alarmSolution,callback:function(t){e.$set(e.editForm,"alarmSolution",t)},expression:"editForm.alarmSolution"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.editBtnVisible?a("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleEdit()}}},[e._v("修改")]):e._e(),e._v(" "),e.addBtnVisible?a("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleAdd()}}},[e._v("新增")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"small"},nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("关闭")])],1)],1)],1)},staticRenderFns:[]},f=a("VU/8")(u,c,!1,null,null,null);t.default=f.exports}});
//# sourceMappingURL=4.a2b511e8eacee09f5f00.js.map