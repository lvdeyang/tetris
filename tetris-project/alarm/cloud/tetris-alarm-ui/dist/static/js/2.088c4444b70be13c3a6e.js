webpackJsonp([2],{UOlw:function(t,e,s){"use strict";(function(t){var i=s("YaEn"),a=s("P9l9");e.a={computed:{menus:function(){return t.antRouter},user:function(){return t.user},loginUrl:function(){return t.loginUrl}},data:function(){return{logo:{logoUrl:"",logoStyle:"",logoShortName:"",platformFullName:"",platformShortName:""},isCollapsed:!1,numberOfMessage:0,userGroupShow:!1,active:"0",thismenu:"",footer:{company:{name:"北京市博汇科技股份有限公司",link:"http://www.bohui.com.cn/",time:"2020-2040"},minimize:[]}}},methods:{sideMenuToggle:function(){this.isCollapsed?this.isCollapsed=!1:this.isCollapsed=!0},gotoportal:function(){location.href="http://192.165.56.43:8086/index/"+window.TOKEN+"#/page-portal-home"},userGroupToggle:function(){this.userGroupShow?this.userGroupShow=!1:this.userGroupShow=!0},goto:function(t){if(t.link)if(this.$options.methods.isHash(t.link))window.location.hash=t.link;else{var e=t.link;if(e.endsWith("#")){var s=e.substring(e.indexOf("#")+1,e.lastIndexOf("/"));this.$options.methods.isSelfRouterPath("/"+s)?i.a.push("/"+s):window.location.href=t.link}else window.location.href=t.link}else this.active=t.uuid},addMinimize:function(t){for(var e=this.footer.minimize,s=!1,i=0;i<e.length;i++)if(e[i].key===t.key){s=!0;break}s||this.footer.minimize.splice(0,0,t)},removeMinimize:function(t){for(var e=this.footer.minimize,s=0;s<e.length;s++)if(e[s].key===t.key)return void e.splice(s,1)},minimizeClick:function(t){var e=this.footer.minimize;"single"===t.type?this.$emit(t.click,t,function(){for(var s=0;s<e.length;s++)e[s]===t&&e.splice(s,1)}):t.type},menuSelect:function(t,e){if("2-1"===t){var s=window.TOKEN;window.location.href="/user/index/personal/"+s}else"2-2"===t&&this.logout()},logout:function(){var t=this,e=t.$createElement;t.$msgbox({title:"提示",message:e("div",null,[e("div",{class:"el-message-box__status el-icon-warning"},null),e("div",{class:"el-message-box__message"},[e("p",null,["是否要退出登录?"])])]),type:"wraning",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:function(e,s,i){s.confirmButtonLoading=!0,"confirm"===e?Object(a.i)(null).then(function(e){console.log("logout get status= "+e.status),200===e.status&&(i(),window.location.href=t.loginUrl)}):(s.confirmButtonLoading=!1,i())}}).catch(function(){})},isHash:function(t){return t.match(/^#\//)},isSelfRouterPath:function(e){for(var s=0;s<t.selfRouterPath.length;s++)if(t.selfRouterPath[s]===e)return!0;return!1},parsePageId:function(t){return this.$options.methods.isHash(t)?(t=t.replace("#/","")).split("/")[0]:t.indexOf("#/")<0?t:t.split("#/")[1].split("/")[0]},prepareMenu:function(t,e){if(t&&t.length>0)for(var s=0;s<t.length;s++){var i=t[s];i.link&&this.isHash(i.link)?(e||this.parsePageId(window.location.hash))===this.parsePageId(i.link)?i.active=!0:i.active=!1:i.link&&(i.link.indexOf("#/")>=0?e?this.parsePageId(e)===this.parsePageId(i.link)?i.active=!0:i.active=!1:this.parsePageId(window.location.href)===this.parsePageId(i.link)?i.active=!0:i.active=!1:i.link===(e||window.location.href)?i.active=!0:i.active=!1),i.sub&&i.sub.length>0&&this.prepareMenu(i.sub,e)}},setGroupInfo:function(t){var e=0;if(t&&t.length>0)for(var s=0;s<t.length;s++){var i=t[s];if(i.numbersOfOnline=0,i.numbersObTotal=0,i.users&&i.users.length)for(var a=0;a<i.users.length;a++){i.numbersObTotal+=1;var l=i.users[a];"离线"!==l.status&&(i.numbersOfOnline+=1),isNaN(l.numbersOfMessage)||(e+=l.numbersOfMessage)}}return e},getActiveUuid:function(t){if(t&&t.length>0)for(var e=0;e<t.length;e++){var s=t[e];if(s.active&&!0===s.active)return s.uuid;var i=this.getActiveUuid(s.sub);if(i)return i}}},created:function(){var t=this.menus,e=this.activeId;this.prepareMenu(t,e);var s=this.getActiveUuid(t);s&&(this.active=s);var i=this.groups,a=this.setGroupInfo(i);a>0&&(this.numberOfMessage=a);var l=this.user;this.logo.logoUrl=l.logo,this.logo.logoStyle=l.logoStyle,this.logo.logoShortName=l.logoShortName,this.logo.platformFullName=l.platformFullName,this.logo.platformShortName=l.platformShortName},mounted:function(){}}}).call(e,s("DuR2"))},j7e0:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("UOlw"),a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"frame-wrapper"},[s("el-container",{staticStyle:{width:"100%",height:"100%"}},[s("el-aside",{attrs:{width:"auto; height:100%;"}},[s("el-scrollbar",{staticStyle:{height:"100%"}},[s("el-menu",{staticClass:"aside-menu",attrs:{"default-active":t.active,collapse:t.isCollapsed}},[s("div",{staticClass:"platform-logo-wrapper"},[s("div",{staticClass:"platform-logo"},[s("img",{style:t.logo.logoStyle,attrs:{src:t.logo.logoUrl}})]),t._v(" "),s("div",{staticClass:"platform-logo collapse"},[t._v(t._s(t.logo.logoShortName))]),t._v(" "),s("div",{staticClass:"platform-title"},[t._v(t._s(t.logo.platformFullName))]),t._v(" "),s("div",{staticClass:"platform-title collapse"},[t._v(t._s(t.logo.platformShortName))])]),t._v(" "),t._l(t.menus,function(e,i){return[!e.sub||e.sub.length<=0?s("el-menu-item",{attrs:{index:e.uuid},on:{click:function(s){t.goto(e)}}},[s("i",{class:e.icon,style:e.style}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))])]):s("el-submenu",{attrs:{index:e.uuid}},[s("template",{slot:"title"},[s("i",{class:e.icon,style:e.style}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))])]),t._v(" "),t._l(e.sub,function(e,i){return[!e.sub||e.sub.length<=0?s("el-menu-item",{attrs:{index:e.uuid},on:{click:function(s){t.goto(e)}}},[s("i",{class:e.icon,style:e.style}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))])]):s("el-submenu",{attrs:{index:e.uuid}},[s("template",{slot:"title"},[s("i",{class:e.icon,style:e.style}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))])]),t._v(" "),t._l(e.sub,function(e,i){return[s("el-menu-item",{attrs:{index:e.uuid}},[s("i",{class:e.icon,style:e.style}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))])])]})],2)]})],2)]})],2)],1)],1),t._v(" "),s("el-main",{staticStyle:{padding:"0",position:"relative"}},[s("div",{staticClass:"frame-header"},[s("el-menu",{staticClass:"header-menu",attrs:{"background-color":"#37404f","text-color":"#fff","active-text-color":"#ffd04b",mode:"horizontal"},on:{select:t.menuSelect}},["COMPANY_ADMIN"===t.user.classify||"COMPANY_USER"===t.user.classify?s("el-menu-item",{staticClass:"no-border-bottom-style right item-message",attrs:{index:"1"},on:{click:t.userGroupToggle}},[s("span",{staticClass:"el-icon-message",staticStyle:{position:"relative",left:"4px"}}),t._v(" "),t.numberOfMessage>0?s("span",{staticClass:"tag error"},[t._v(t._s(t.numberOfMessage))]):t._e()]):t._e(),t._v(" "),s("el-submenu",{staticClass:"no-border-bottom-style right",attrs:{index:"2"}},[s("template",{slot:"title"},[t.user.icon?t._e():s("span",{staticClass:"icon-user",staticStyle:{padding:"0 5px","margin-right":"5px"}}),t._v("\n              "+t._s(t.user.nickname)+"\n            ")]),t._v(" "),s("el-menu-item",{attrs:{index:"2-1"}},[t._v("个人中心")]),t._v(" "),s("el-menu-item",{attrs:{index:"2-2"}},[t._v("注销登录")])],2),t._v(" "),s("el-menu-item",{staticClass:"no-border-bottom-style right",attrs:{index:"3"}},[s("span",{staticClass:"icon-flag",staticStyle:{position:"relative",top:"1px",padding:"0 5px"}})]),t._v(" "),s("el-menu-item",{staticClass:"no-border-bottom-style right",attrs:{index:"4"}},[s("span",{staticClass:"el-icon-bell",staticStyle:{position:"relative",left:"3px",bottom:"1px"}})]),t._v(" "),s("el-menu-item",{staticClass:"no-border-bottom-style right",attrs:{index:"5"},on:{click:t.gotoportal}},[s("a",{staticClass:"feather-icon-globe",staticStyle:{position:"relative",left:"0px",bottom:"1px"}},[t._v(" 门户首页")])]),t._v(" "),s("el-menu-item",{staticClass:"no-border-bottom-style",attrs:{index:"5"},on:{click:t.sideMenuToggle}},[s("span",{staticClass:"icon-reorder",staticStyle:{"font-size":"18px",position:"relative",top:"1px",padding:"0 5px"}})])],1)],1),t._v(" "),s("div",{staticClass:"frame-body"},[s("div",{staticClass:"frame-body-wrapper"},[s("div",{staticClass:"sub-title"},[s("template",{slot:"title"},[t._t("title")],2)],2),t._v(" "),s("div",{staticClass:"content-wrapper"},[s("div",{staticClass:"content"},[s("router-view")],1)])])]),t._v(" "),s("div",{staticClass:"frame-footer"},[s("div",{staticClass:"frame-footer-wrapper"},[s("div",{staticClass:"copyright"},[s("strong",[t._v("Copyright © "+t._s(t.footer.company.time))]),t._v("\n             版权归\n            "),s("a",{staticClass:"company",attrs:{href:t.user.groupHomeLink,target:"_blank"}},[t._v(t._s(t.user.groupName))])]),t._v(" "),s("div",{staticClass:"minimize"},[s("el-breadcrumb",{staticStyle:{float:"right"},attrs:{separator:""}},t._l(t.footer.minimize,function(e){return s("el-breadcrumb-item",{key:e.key},["single"===e.type?s("el-button",{staticClass:"single",on:{click:function(s){t.minimizeClick(e)}}},[s("span",{class:e.icon,style:e.style})]):t._e(),t._v(" "),"multiple"===e.type?s("el-button",{staticClass:"multiple"},[s("div",{staticClass:"layer"},[s("div",{staticClass:"layer"},[s("span",{class:e.icon,style:e.style})])])]):t._e()],1)}))],1)])]),t._v(" "),s("transition",{attrs:{"enter-active-class":"animated bounceInRight","leave-active-class":"animated bounceOutRight"}},[t.userGroupShow?s("div",{staticClass:"userGroup"},[s("el-scrollbar",{staticStyle:{height:"100%"}},[s("el-collapse",t._l(t.groups,function(e){return s("el-collapse-item",{key:e.uuid,attrs:{title:e.name+"("+e.numbersOfOnline+"/"+e.numbersObTotal+")",name:e.uuid}},[e.users&&e.users.length>0?t._l(e.users,function(e){return s("div",{key:e.uuid,staticClass:"user-item"},[s("div",{staticClass:"user-icon"},[e.icon?t._e():s("span",{staticClass:"icon-user icon-2x"})]),t._v(" "),s("div",{staticClass:"user-info"},[s("div",{staticClass:"user-name"},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"user-status"},[t._v("[ "+t._s(e.status)+" ]")])]),t._v(" "),s("div",{staticClass:"user-badge"},[!isNaN(e.numbersOfMessage)&&e.numbersOfMessage>0?s("span",{staticClass:"el-badge__content el-badge__content--success"},[t._v(t._s(e.numbersOfMessage))]):t._e()])])}):t._e()],2)}))],1)],1):t._e()])],1)],1)],1)},staticRenderFns:[]};var l=function(t){s("uLil")},o=s("VU/8")(i.a,a,!1,l,null,null);e.default=o.exports},uLil:function(t,e){}});
//# sourceMappingURL=2.088c4444b70be13c3a6e.js.map