webpackJsonp([3],{FttS:function(e,t){},aJpZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("woOf"),r=a.n(l),i=a("mvHQ"),o=a.n(i),s=a("pFYg"),n=a.n(s),p=a("hhm8"),m=a("P9l9"),d={data:function(){return{filters:{oprlogTypeSel:"USER_OPR"},oprlogTypeOptions:[{value:"USER_OPR",label:"用户操作"},{value:"USER_ONLINE",label:"用户上线"},{value:"USER_OFFLINE",label:"用户下线"},{value:"DEVICE_ONLINE",label:"设备上线"},{value:"DEVICE_OFFLINE",label:"设备下线"},{value:"EXTERNAL_CONNECT",label:"外域连接成功"},{value:"EXTERNAL_DISCONNECT",label:"外域连接断开"}],oprlogVOs:[],total:0,page:1,listLoading:!1,sels:[],detailFormVisible:!1,editLoading:!1,alarmLevelSel:[],detailForm:{id:0,userName:"",oprName:"",oprDetail:"",oprTime:"",sourceService:"",ip:""},tableData:[],bindRoleVisible:!1,currentUserId:0}},methods:{queryOprlogList:function(){var e,t,a=this;void 0!=this.filters.oprTimeRange&&void 0!=this.filters.oprTimeRange[0]&&(void 0!==n()(this.filters.oprTimeRange[0])&&(e=p.a.formatDate.format(this.filters.oprTimeRange[0],"yyyy-MM-dd hh:mm:ss")),void 0!==n()(this.filters.oprTimeRange[1])&&(t=p.a.formatDate.format(this.filters.oprTimeRange[1],"yyyy-MM-dd hh:mm:ss")));var l={oprlogType:this.filters.oprlogTypeSel,sourceService:this.filters.sourceService,userName:this.filters.userName,oprName:this.filters.oprName,queryTimeStart:e,queryTimeEnd:t,pageIndex:this.page-1,pageSize:20};console.info(o()(l)),this.listLoading=!0,Object(m.m)(l).then(function(e){null!==e.errMsg&&""!==e.errMsg?a.$message({message:e.errMsg,type:"error",duration:3e3}):(a.total=e.total,a.oprlogVOs=e.oprlogVOs),a.listLoading=!1})},resetForm:function(e){void 0!=this.$refs[e]&&this.$refs[e].resetFields()},selsChange:function(e){this.sels=e},handleCurrentChange:function(e){this.page=e,this.queryOprlogList()},dateFormat:function(e,t){var a=e[t.property].replace(/-/g,"/");return void 0==a?"":p.a.formatDate.format(new Date(Date.parse(a)),"yyyy/MM/dd hh:mm:ss")},handleShowDetail:function(e,t){this.resetForm("detailForm"),this.detailFormVisible=!0,this.detailForm=r()({},t);var a=[];a.push({dataName:"id",dataContent:this.detailForm.id}),a.push({dataName:"日志类型",dataContent:this.detailForm.oprlogType}),a.push({dataName:"用户名",dataContent:this.detailForm.userName}),a.push({dataName:"操作名称",dataContent:this.detailForm.oprName}),a.push({dataName:"操作时间",dataContent:this.detailForm.oprTime}),a.push({dataName:"操作详情",dataContent:this.detailForm.oprDetail}),a.push({dataName:"来源服务",dataContent:this.detailForm.sourceService}),a.push({dataName:"来源IP",dataContent:this.detailForm.ip}),this.tableData=a},handleDel:function(e,t){var a=this;this.$confirm("确认删除此条日志？","提示",{}).then(function(){var e={ids:t.id};Object(m.e)(e).then(function(e){null!==e.errMsg&&""!==e.errMsg?a.$message({message:e.errMsg,type:"error",duration:3e3}):a.queryOprlogList()})})}},mounted:function(){this.queryOprlogList()}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticStyle:{height:"100%"}},[a("el-form",{ref:"filters",attrs:{inline:!0,model:e.filters,"label-width":"80px",size:"mini"}},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px",margin:"0px"},attrs:{span:24}},[a("el-form-item",{attrs:{label:"日志类型",prop:"oprlogTypeSel",span:6}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.filters.oprlogTypeSel,callback:function(t){e.$set(e.filters,"oprlogTypeSel",t)},expression:"filters.oprlogTypeSel"}},e._l(e.oprlogTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"来源服务",prop:"sourceService",span:6}},[a("el-input",{model:{value:e.filters.sourceService,callback:function(t){e.$set(e.filters,"sourceService",t)},expression:"filters.sourceService"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"userName",span:6}},[a("el-input",{model:{value:e.filters.userName,callback:function(t){e.$set(e.filters,"userName",t)},expression:"filters.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作名称",prop:"oprName",span:6}},[a("el-input",{model:{value:e.filters.oprName,callback:function(t){e.$set(e.filters,"oprName",t)},expression:"filters.oprName"}})],1)],1),e._v(" "),a("el-col",{staticClass:"toolbar",staticStyle:{"padding-top":"0px","padding-bottom":"5px",margin:"0px"},attrs:{span:24}},[a("el-form-item",{attrs:{label:"日志时间",prop:"oprTimeRange",span:12}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"]},model:{value:e.filters.oprTimeRange,callback:function(t){e.$set(e.filters,"oprTimeRange",t)},expression:"filters.oprTimeRange"}})],1),e._v(" "),a("el-form-item",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:e.queryOprlogList}},[e._v("查询")])],1),e._v(" "),a("el-form-item",{attrs:{span:3}},[a("el-button",{on:{click:function(t){e.resetForm("filters")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.oprlogVOs,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"oprlogType",label:"日志类型",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"oprName",label:"操作名称",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sourceService",label:"来源服务",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"oprTime",label:"日志时间",formatter:e.dateFormat,width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleShowDetail(t.$index,t.row)}}},[e._v("详情")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.handleDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":20,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"操作详情",visible:e.detailFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.detailFormVisible=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"dataName",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dataContent",width:"180"}})],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(d,u,!1,function(e){a("FttS")},null,null);t.default=c.exports}});
//# sourceMappingURL=3.c217b9fd750468f622f0.js.map