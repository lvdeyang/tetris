{"version":3,"sources":["webpack:///src/views/alarmoprlog/oprlogList.vue","webpack:///./src/views/alarmoprlog/oprlogList.vue?f8c5","webpack:///./src/views/alarmoprlog/oprlogList.vue"],"names":["oprlogList","data","filters","oprlogTypeSel","oprlogTypeOptions","value","label","oprlogVOs","total","page","listLoading","sels","detailFormVisible","editLoading","alarmLevelSel","detailForm","id","userName","oprName","oprDetail","oprTime","sourceService","ip","tableData","bindRoleVisible","currentUserId","methods","queryOprlogList","timeStart","timeEnd","_this","this","undefined","oprTimeRange","typeof_default","util","formatDate","format","para","oprlogType","queryTimeStart","queryTimeEnd","pageIndex","pageSize","console","info","stringify_default","Object","api","then","res","errMsg","$message","message","type","duration","resetForm","formName","$refs","resetFields","selsChange","handleCurrentChange","val","dateFormat","row","column","dateString","property","replace","Date","parse","handleShowDetail","index","assign_default","json","push","dataName","dataContent","formatString","handleDel","_this2","$confirm","ids","mounted","alarmoprlog_oprlogList","render","_vm","_h","$createElement","_c","_self","staticStyle","height","ref","attrs","inline","model","label-width","size","staticClass","padding-bottom","margin","span","prop","clearable","placeholder","callback","$$v","$set","expression","_l","item","key","_v","padding-top","range-separator","start-placeholder","end-placeholder","on","click","$event","directives","name","rawName","width","highlight-current-row","selection-change","_e","formatter","sortable","scopedSlots","_u","fn","scope","$index","float","layout","page-size","current-change","title","visible","close-on-click-modal","update:visible","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/3.f0b23e6962f274556f22.js","sourcesContent":["<template>\r\n  <section style=\"height:100%\">\r\n    <!--查询工具条-->\r\n    <el-form :inline=\"true\" :model=\"filters\" ref=\"filters\" label-width=\"80px\" size=\"mini\">\r\n      <el-col :span=\"24\" class=\"toolbar\" style=\"padding-bottom: 0px; margin:0px\">\r\n        <el-form-item label=\"日志类型\" prop=\"oprlogTypeSel\" :span=\"6\">\r\n          <el-select v-model=\"filters.oprlogTypeSel\" clearable placeholder=\"请选择\">\r\n            <el-option v-for=\"item in oprlogTypeOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"来源服务\" prop=\"sourceService\" :span=\"6\">\r\n          <el-input v-model=\"filters.sourceService\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"用户名\" prop=\"userName\" :span=\"6\">\r\n          <el-input v-model=\"filters.userName\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"操作名称\" prop=\"oprName\" :span=\"6\">\r\n          <el-input v-model=\"filters.oprName\"></el-input>\r\n        </el-form-item>\r\n      </el-col>\r\n      <el-col :span=\"24\" class=\"toolbar\" style=\"padding-top: 0px; padding-bottom: 5px; margin:0px\">\r\n        <el-form-item label=\"日志时间\" prop=\"oprTimeRange\" :span=\"12\">\r\n          <el-date-picker v-model=\"filters.oprTimeRange\" type=\"datetimerange\" range-separator=\"至\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\"></el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item :span=\"3\">\r\n          <el-button type=\"primary\" v-on:click=\"queryOprlogList\">查询</el-button>\r\n        </el-form-item>\r\n        <el-form-item :span=\"3\">\r\n          <el-button v-on:click=\"resetForm('filters')\">重置</el-button>\r\n        </el-form-item>\r\n      </el-col>\r\n    </el-form>\r\n    <!--查询工具条结束-->\r\n\r\n    <!--列表-->\r\n    <el-table :data=\"oprlogVOs\" highlight-current-row v-loading=\"listLoading\" @selection-change=\"selsChange\" style=\"width: 100%;\">\r\n      <el-table-column prop=\"id\" v-if=\"false\" width=\"60\"></el-table-column>\r\n      <el-table-column prop=\"oprlogType\" label=\"日志类型\" width=\"160\"></el-table-column>\r\n      <el-table-column prop=\"userName\" label=\"用户名\" width=\"120\"></el-table-column>\r\n      <el-table-column prop=\"oprName\" label=\"操作名称\" width=\"200\"></el-table-column>\r\n      <el-table-column prop=\"sourceService\" label=\"来源服务\" width=\"200\"></el-table-column>\r\n      <el-table-column prop=\"oprTime\" label=\"日志时间\" :formatter=\"dateFormat\" width=\"200\" sortable></el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"small\" @click=\"handleShowDetail(scope.$index, scope.row)\">详情</el-button>\r\n          <el-button type=\"danger\" size=\"small\" @click=\"handleDel(scope.$index, scope.row)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!--表底工具条-->\r\n    <el-col :span=\"24\" class=\"toolbar\">\r\n      <!--<el-button type=\"danger\" @click=\"batchRemove\" :disabled=\"this.sels.length===0\">批量删除</el-button>-->\r\n      <el-pagination layout=\"prev, pager, next\" @current-change=\"handleCurrentChange\" :page-size=\"20\" :total=\"total\" style=\"float:right;\">\r\n      </el-pagination>\r\n    </el-col>\r\n    <!--表底工具条结束-->\r\n\r\n    <!--详情弹出框-->\r\n    <el-dialog title=\"操作详情\" :visible.sync=\"detailFormVisible\" :close-on-click-modal=\"false\">\r\n\r\n      <el-table :data=\"tableData\" style=\"width: 100%\">\r\n        <el-table-column prop=\"dataName\" width=\"180\"></el-table-column>\r\n        <el-table-column prop=\"dataContent\" width=\"180\">\r\n        </el-table-column>\r\n      </el-table>\r\n      <!--\r\n            <el-form :model=\"detailForm\" label-position=\"left\" label-width=\"160px\">\r\n               <el-form-item label=\"序号\">\r\n                   <span>{{ detailForm.id }}</span>\r\n               </el-form-item>\r\n               <el-form-item label=\"用户名\">\r\n                   <span>{{ detailForm.userName }}</span>\r\n               </el-form-item>\r\n               <el-form-item label=\"操作名称\">\r\n                   <span>{{ detailForm.oprName }}</span>\r\n               </el-form-item>\r\n               <el-form-item label=\"操作详情\">\r\n                   <span>{{ detailForm.oprDetail }}</span>\r\n               </el-form-item>\r\n               <el-form-item label=\"操作时间\">\r\n                   <span>{{ detailForm.oprTime }}</span>\r\n               </el-form-item>\r\n               <el-form-item label=\"来源服务\">\r\n                   <span>{{ detailForm.sourceService }}</span>\r\n               </el-form-item>\r\n               <el-form-item label=\"来源IP\">\r\n                   <span>{{ detailForm.ip }}</span>\r\n               </el-form-item>\r\n            </el-form>\r\n            -->\r\n\r\n    </el-dialog>\r\n    <!--详情弹出框结束-->\r\n\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport util from '../../common/js/util'\r\n// import NProgress from 'nprogress'\r\nimport { queryOprlogListPage, delOprlog } from '../../api/api'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      filters: {\r\n        oprlogTypeSel: 'USER_OPR'\r\n      },\r\n\r\n      oprlogTypeOptions: [{\r\n        value: 'USER_OPR',\r\n        label: '用户操作'\r\n      }, {\r\n        value: 'USER_ONLINE',\r\n        label: '用户上线'\r\n      }, {\r\n        value: 'DEVICE_ONLINE',\r\n        label: '设备上线'\r\n      }, {\r\n        value: 'DEVICE_OFFLINE',\r\n        label: '设备下线'\r\n      }, {\r\n        value: 'EXTERNAL_CONNECT',\r\n        label: '外域连接成功'\r\n      }, {\r\n        value: 'EXTERNAL_DISCONNECT',\r\n        label: '外域连接断开'\r\n      }],\r\n\r\n      oprlogVOs: [],\r\n      total: 0,\r\n      page: 1,\r\n      listLoading: false,\r\n      sels: [], // 列表选中列\r\n\r\n      detailFormVisible: false, // 详情弹出框是否显示\r\n      editLoading: false,\r\n\r\n      alarmLevelSel: [],\r\n\r\n      // 详情界面数据\r\n      detailForm: {\r\n        id: 0,\r\n        userName: '',\r\n        oprName: '',\r\n        oprDetail: '',\r\n        oprTime: '',\r\n        sourceService: '',\r\n        ip: ''\r\n      },\r\n\r\n      tableData: [],\r\n\r\n      bindRoleVisible: false,\r\n      currentUserId: 0\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    // 获取告警信息列表\r\n    queryOprlogList () {\r\n      var timeStart, timeEnd\r\n\r\n      if (this.filters.oprTimeRange != undefined) {\r\n        if (typeof (this.filters.oprTimeRange[0]) !== undefined) {\r\n          timeStart = util.formatDate.format(this.filters.oprTimeRange[0], 'yyyy/MM/dd hh:mm:ss')\r\n        };\r\n\r\n        if (typeof (this.filters.oprTimeRange[1]) !== undefined) {\r\n          timeEnd = util.formatDate.format(this.filters.oprTimeRange[1], 'yyyy/MM/dd hh:mm:ss')\r\n        };\r\n      };\r\n\r\n      let para = {\r\n        oprlogType: this.filters.oprlogTypeSel,\r\n        sourceService: this.filters.sourceService,\r\n        userName: this.filters.userName,\r\n        oprName: this.filters.oprName,\r\n        queryTimeStart: timeStart,\r\n        queryTimeEnd: timeEnd,\r\n        pageIndex: this.page - 1,\r\n        pageSize: 20\r\n      }\r\n\r\n      console.info(JSON.stringify(para))\r\n\r\n      this.listLoading = true\r\n      // NProgress.start();\r\n      queryOprlogListPage(para).then(res => {\r\n        if (res.errMsg !== null && res.errMsg !== '') {\r\n          this.$message({\r\n            message: res.errMsg,\r\n            type: 'error',\r\n            duration: 3000\r\n          })\r\n        } else {\r\n          this.total = res.total\r\n          this.oprlogVOs = res.oprlogVOs\r\n        }\r\n\r\n        this.listLoading = false\r\n        // NProgress.done();\r\n      })\r\n    },\r\n\r\n    // 重置表单\r\n    resetForm (formName) {\r\n      if (this.$refs[formName] != undefined) {\r\n        this.$refs[formName].resetFields()\r\n      }\r\n    },\r\n\r\n    selsChange: function (sels) {\r\n      this.sels = sels\r\n    },\r\n\r\n    handleCurrentChange (val) {\r\n      this.page = val\r\n      this.queryOprlogList()\r\n    },\r\n\r\n    dateFormat: function (row, column) {\r\n      var dateString = row[column.property].replace(/-/g, \"/\")\r\n      if (dateString == undefined) {\r\n        return ''\r\n      }\r\n\r\n      return util.formatDate.format(new Date(Date.parse(dateString)), 'yyyy/MM/dd hh:mm:ss')\r\n    },\r\n\r\n    // 获取操作日志详情\r\n    handleShowDetail: function (index, row) {\r\n      this.resetForm('detailForm')\r\n      this.detailFormVisible = true\r\n      this.detailForm = Object.assign({}, row)\r\n\r\n      var json = []\r\n\r\n      json.push({ dataName: 'id', dataContent: this.detailForm.id })\r\n      json.push({ dataName: '日志类型', dataContent: this.detailForm.oprlogType })\r\n      json.push({ dataName: '用户名', dataContent: this.detailForm.userName })\r\n      json.push({ dataName: '操作名称', dataContent: this.detailForm.oprName })\r\n      json.push({ dataName: '操作时间', dataContent: util.formatDate.formatString(this.detailForm.oprTime, 'yyyy/MM/dd hh:mm:ss') })\r\n      json.push({ dataName: '操作详情', dataContent: this.detailForm.oprDetail })\r\n      json.push({ dataName: '来源服务', dataContent: this.detailForm.sourceService })\r\n      json.push({ dataName: '来源IP', dataContent: this.detailForm.ip })\r\n\r\n      this.tableData = json\r\n    },\r\n\r\n    // 删除告警基本信息\r\n    handleDel: function (index, row) {\r\n      this.$confirm('确认删除此条日志？', '提示', {}).then(() => {\r\n        let para = {\r\n          ids: row.id\r\n        }\r\n\r\n        delOprlog(para).then(res => {\r\n          if (res.errMsg !== null && res.errMsg !== '') {\r\n            this.$message({\r\n              message: res.errMsg,\r\n              type: 'error',\r\n              duration: 3000\r\n            })\r\n          } else {\r\n            this.queryOprlogList()\r\n          }\r\n        })\r\n      })\r\n    },\r\n  },\r\n\r\n  mounted () {\r\n    this.queryOprlogList()\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.oprlog-page {\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: auto;\r\n  /* padding-bottom: 45px; */\r\n  /* position: relative; */\r\n}\r\n.el-table {\r\n  height: calc(100% - 135px);\r\n  overflow: auto;\r\n}\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/alarmoprlog/oprlogList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticStyle:{\"height\":\"100%\"}},[_c('el-form',{ref:\"filters\",attrs:{\"inline\":true,\"model\":_vm.filters,\"label-width\":\"80px\",\"size\":\"mini\"}},[_c('el-col',{staticClass:\"toolbar\",staticStyle:{\"padding-bottom\":\"0px\",\"margin\":\"0px\"},attrs:{\"span\":24}},[_c('el-form-item',{attrs:{\"label\":\"日志类型\",\"prop\":\"oprlogTypeSel\",\"span\":6}},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.filters.oprlogTypeSel),callback:function ($$v) {_vm.$set(_vm.filters, \"oprlogTypeSel\", $$v)},expression:\"filters.oprlogTypeSel\"}},_vm._l((_vm.oprlogTypeOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"来源服务\",\"prop\":\"sourceService\",\"span\":6}},[_c('el-input',{model:{value:(_vm.filters.sourceService),callback:function ($$v) {_vm.$set(_vm.filters, \"sourceService\", $$v)},expression:\"filters.sourceService\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"userName\",\"span\":6}},[_c('el-input',{model:{value:(_vm.filters.userName),callback:function ($$v) {_vm.$set(_vm.filters, \"userName\", $$v)},expression:\"filters.userName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"操作名称\",\"prop\":\"oprName\",\"span\":6}},[_c('el-input',{model:{value:(_vm.filters.oprName),callback:function ($$v) {_vm.$set(_vm.filters, \"oprName\", $$v)},expression:\"filters.oprName\"}})],1)],1),_vm._v(\" \"),_c('el-col',{staticClass:\"toolbar\",staticStyle:{\"padding-top\":\"0px\",\"padding-bottom\":\"5px\",\"margin\":\"0px\"},attrs:{\"span\":24}},[_c('el-form-item',{attrs:{\"label\":\"日志时间\",\"prop\":\"oprTimeRange\",\"span\":12}},[_c('el-date-picker',{attrs:{\"type\":\"datetimerange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:(_vm.filters.oprTimeRange),callback:function ($$v) {_vm.$set(_vm.filters, \"oprTimeRange\", $$v)},expression:\"filters.oprTimeRange\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"span\":3}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.queryOprlogList}},[_vm._v(\"查询\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"span\":3}},[_c('el-button',{on:{\"click\":function($event){_vm.resetForm('filters')}}},[_vm._v(\"重置\")])],1)],1)],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.oprlogVOs,\"highlight-current-row\":\"\"},on:{\"selection-change\":_vm.selsChange}},[(false)?_c('el-table-column',{attrs:{\"prop\":\"id\",\"width\":\"60\"}}):_vm._e(),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"oprlogType\",\"label\":\"日志类型\",\"width\":\"160\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"userName\",\"label\":\"用户名\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"oprName\",\"label\":\"操作名称\",\"width\":\"200\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"sourceService\",\"label\":\"来源服务\",\"width\":\"200\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"oprTime\",\"label\":\"日志时间\",\"formatter\":_vm.dateFormat,\"width\":\"200\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.handleShowDetail(scope.$index, scope.row)}}},[_vm._v(\"详情\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"small\"},on:{\"click\":function($event){_vm.handleDel(scope.$index, scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_c('el-col',{staticClass:\"toolbar\",attrs:{\"span\":24}},[_c('el-pagination',{staticStyle:{\"float\":\"right\"},attrs:{\"layout\":\"prev, pager, next\",\"page-size\":20,\"total\":_vm.total},on:{\"current-change\":_vm.handleCurrentChange}})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"操作详情\",\"visible\":_vm.detailFormVisible,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.detailFormVisible=$event}}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"dataName\",\"width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"dataContent\",\"width\":\"180\"}})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-8ad85bf6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/alarmoprlog/oprlogList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8ad85bf6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./oprlogList.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./oprlogList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./oprlogList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8ad85bf6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./oprlogList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/alarmoprlog/oprlogList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}